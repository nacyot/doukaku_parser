
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
文字列型日時ののN秒後時間取得
DouKaku? </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20081202215328cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20081202215328cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20081202215328cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
    <!--<script src="/web/20081202215328/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20081202215328/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20081202215328js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20081202215328js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20081202215328js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20081202215328js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app3.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/204\/nested\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "2";
var displayMonth = "Dec";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/204/nested/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20081202215328" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Nov
                       
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 21:53:28 Dec 2, 2008">DEC</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20120114200102/http://ja.doukaku.org/204/nested" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="14 Jan 2012"><strong>JAN</strong></a>
		                
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_prv_off.png" alt="Previous capture" width="14" height="16" border="0" />
                       
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 21:53:28 Dec 2, 2008">2</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20120114200102/http://ja.doukaku.org/204/nested" title="20:01:02 Jan 14, 2012" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"/></a>
		                
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2007
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 21:53:28 Dec 2, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20120114200102/http://ja.doukaku.org/204/nested" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="14 Jan 2012"><strong>2012</strong></a>
		                
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20081202215328*/http://ja.doukaku.org/204/nested/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>2 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">2 Dec 08 - 14 Jan 12</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:11:000000000001_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:100000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20081202215328/http://ja.doukaku.org/">DouKaku?</a><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png' alt=challenge>
<a href="/web/20081202215328/http://ja.doukaku.org/204/">文字列型日時ののN秒後時間取得</a>
</h2>

    





<div class="comment" id="comment7401">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7401/">#7401</a>(<script language="JavaScript">print_time(new Date("2008/08/27 06:18 GMT"));</script><noscript>2008/08/27 06:18 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>日時を表す文字列と時間(秒)を受け取り
指定された日時からN秒となる日時を出力する関数 DateEx() を作成してください。

関数の仕様は次の通りです。
1. 入力となる日時の書式は任意である。
    → プログラムの都合に合わせてよい。
2. 入力となる時間(秒)は、負の値も許容すること。
    また、負の値が指定された場合、指定の日時よりも前の日時を出力すること
3. 出力する日時は入力の日時と同じ書式をとる文字列であること
4. 出力する日時は正規化されていること
5. 出力先は標準出力、または、バッファのいずれでもよい。

たとえば、DateEx("20080827235925",40)ならば
出力は
「20080828000005」です。

余力があれば時間を省略可能とし、
省略された場合は「現在時刻」を利用するようにしてみてください。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7401/addtag/" class="addtag" id="addtag_7401">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7401"
  >-</span><span
  class="button yellow"
  id="rating_z_7401"
  >0</span><span 
  class="button green"
  id="rating_p_7401"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7401/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7401/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7533">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7533/">#7533</a>(<script language="JavaScript">print_time(new Date("2008/09/01 05:52 GMT"));</script><noscript>2008/09/01 05:52 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>最近は普通にパーサがある時代になったのですね。
ごめんなさい盲点でした^^；；

ということで、「仕様.3」については、
入力の書式は限定しないこととし、出力の書式を限定するようにしてください。
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7533/addtag/" class="addtag" id="addtag_7533">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7533"
  >-</span><span
  class="button yellow"
  id="rating_z_7533"
  >0</span><span 
  class="button green"
  id="rating_p_7533"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7401/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7533/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7533/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  



<div class="indent">
<a href="/web/20081202215328/http://ja.doukaku.org/204/post_comment/">
post comment
</a>
</div>


<h2>Posted feedbacks - Nested</h2>
<a href="/web/20081202215328/http://ja.doukaku.org/204/flatten/">Flatten</a> 
<a href="/web/20081202215328/http://ja.doukaku.org/204/">Hidden</a> 


  

  
    





<div class="comment" id="comment7506">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/59/" target="_top">nori</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7506/">#7506</a>(<script language="JavaScript">print_time(new Date("2008/08/31 19:12 GMT"));</script><noscript>2008/08/31 19:12 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>このお題は日時のparseをさせたいのでしょうか？それとも差分の計算をさせたいのでしょうか？</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">dateex</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">delta</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">d</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">delta</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="k">import</span> <span class="nn">time</span>
  <span class="n">day</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
  <span class="k">print</span> <span class="n">dateex</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7506/addtag/" class="addtag" id="addtag_7506">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7506/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7506/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7506"
  >-</span><span
  class="button yellow"
  id="rating_z_7506"
  >0</span><span 
  class="button green"
  id="rating_p_7506"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7506/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7506/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7534">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7534/">#7534</a>(<script language="JavaScript">print_time(new Date("2008/09/01 05:53 GMT"));</script><noscript>2008/09/01 05:53 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>ども、raynstardです。
うーん、どっちにになるのでしょう？(笑

このお題の目的は、文字列という日付とは関係ない入力データで
日付の計算をすることです。

そもそもの発端は、シェルで自分自身を
再スケジュールしようとしたらシェルじゃできねぇってことで
計算部分をperlの呼び出しで妥協してしまったことです。

最近の言語には、大抵パーサがあるのですね。
盲点でしたorz
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7534/addtag/" class="addtag" id="addtag_7534">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7534"
  >-</span><span
  class="button yellow"
  id="rating_z_7534"
  >0</span><span 
  class="button green"
  id="rating_p_7534"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7506/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7534/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7534/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


  

  
    





<div class="comment" id="comment7507">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/504/" target="_top">あにす</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7507/">#7507</a>(<script language="JavaScript">print_time(new Date("2008/08/31 19:19 GMT"));</script><noscript>2008/08/31 19:19 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  date&nbsp;=&nbsp;"2008/08/27&nbsp;23:59:25"<br/>addSeconds&nbsp;=&nbsp;40<br/>&gt;&nbsp;"2008/08/28&nbsp;00:00:05"
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Program</span> <span class="k">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="k">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span>
            <span class="n">DateEx</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">(),</span> <span class="kt">long</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">()))</span>
            <span class="p">);</span>
        
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span>
            <span class="n">DateEx</span><span class="p">(</span><span class="kt">long</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">()))</span>
            <span class="p">);</span>
        
        <span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>
    <span class="k">}</span>

    <span class="k">static</span> <span class="kt">string</span> <span class="nf">DateEx</span><span class="p">(</span><span class="kt">string</span> <span class="n">date</span><span class="p">,</span> <span class="kt">long</span> <span class="n">addSeconds</span><span class="p">)</span> <span class="k">{</span>
        <span class="n">DateTime</span> <span class="n">d</span><span class="p">;</span>
        <span class="n">DateTime</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="k">out</span> <span class="n">d</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">d</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">ArgumentException</span><span class="p">(</span><span class="s">&quot;日付が正しくありません。&quot;</span><span class="p">,</span> <span class="s">&quot;date&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">d</span><span class="p">.</span><span class="n">AddSeconds</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">addSeconds</span><span class="p">).</span><span class="n">ToString</span><span class="p">();</span>
    <span class="k">}</span>

    <span class="k">static</span> <span class="kt">string</span> <span class="nf">DateEx</span><span class="p">(</span><span class="kt">long</span> <span class="n">addSeconds</span><span class="p">)</span> <span class="k">{</span>
        <span class="k">return</span> <span class="n">DateEx</span><span class="p">(</span><span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">ToString</span><span class="p">(),</span> <span class="n">addSeconds</span><span class="p">);</span>
    <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7507/addtag/" class="addtag" id="addtag_7507">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7507/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7507/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7507"
  >-</span><span
  class="button yellow"
  id="rating_z_7507"
  >0</span><span 
  class="button green"
  id="rating_p_7507"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7507/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7508">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/468/" target="_top">だいら</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7508/">#7508</a>(<script language="JavaScript">print_time(new Date("2008/08/31 19:25 GMT"));</script><noscript>2008/08/31 19:25 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/php/">
	  PHP
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4</pre></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">DateEx</span><span class="p">(</span><span class="nv">$time</span><span class="p">,</span> <span class="nv">$diff</span><span class="p">){</span>
    <span class="k">echo</span> <span class="k">echo</span> <span class="nf">date</span><span class="p">(</span><span class="s1">&#39;YmdHis&#39;</span><span class="p">,</span><span class="nf">strtotime</span><span class="p">(</span><span class="nv">$time</span><span class="p">)</span><span class="o">+</span><span class="nv">$diff</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7508/addtag/" class="addtag" id="addtag_7508">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/php/">
		PHP
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7508/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7508/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7508"
  >-</span><span
  class="button yellow"
  id="rating_z_7508"
  >0</span><span 
  class="button green"
  id="rating_p_7508"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7508/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7508/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7509">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/468/" target="_top">だいら</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7509/">#7509</a>(<script language="JavaScript">print_time(new Date("2008/08/31 19:26 GMT"));</script><noscript>2008/08/31 19:26 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>echoが2つになってしまった・・・。片方いらないです。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7509/addtag/" class="addtag" id="addtag_7509">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7509"
  >-</span><span
  class="button yellow"
  id="rating_z_7509"
  >0</span><span 
  class="button green"
  id="rating_p_7509"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7508/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7509/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7509/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


  

  

  
    





<div class="comment" id="comment7510">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/852/" target="_top">emasaka</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7510/">#7510</a>(<script language="JavaScript">print_time(new Date("2008/08/31 19:52 GMT"));</script><noscript>2008/08/31 19:52 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/bash/">
	  Bash
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3</pre></td><td class="code"><div class="highlight"><pre>DateEx<span class="o">()</span> <span class="o">{</span>
  date -d <span class="s2">&quot;$1 $2 seconds&quot;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7510/addtag/" class="addtag" id="addtag_7510">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/bash/">
		Bash
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7510/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7510/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7510"
  >-</span><span
  class="button yellow"
  id="rating_z_7510"
  >0</span><span 
  class="button green"
  id="rating_p_7510"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7510/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7510/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7511">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/852/" target="_top">emasaka</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7511/">#7511</a>(<script language="JavaScript">print_time(new Date("2008/08/31 20:13 GMT"));</script><noscript>2008/08/31 20:13 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/bash/">
	  Bash
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>仕様2を満たしていませんでした。</p>
<p>修正と、ついでに1引数に対応。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre>DateEx<span class="o">()</span> <span class="o">{</span>
  <span class="o">[</span> -z <span class="s2">&quot;$2&quot;</span> <span class="o">]</span> &amp;&amp; <span class="nb">set</span> <span class="s1">&#39;&#39;</span> <span class="nv">$1</span>
  <span class="k">if</span> <span class="o">[[</span> <span class="nv">$2</span> <span class="o">==</span> -* <span class="o">]]</span>;then
    date -d <span class="s2">&quot;$1 ${2:1} seconds ago&quot;</span>
  <span class="k">else</span>
<span class="k">    </span>date -d <span class="s2">&quot;$1 $2 seconds&quot;</span>
  <span class="k">fi</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7511/addtag/" class="addtag" id="addtag_7511">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/bash/">
		Bash
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7511/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7511/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7511"
  >-</span><span
  class="button yellow"
  id="rating_z_7511"
  >0</span><span 
  class="button green"
  id="rating_p_7511"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7510/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7511/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7511/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7511/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7535">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7535/">#7535</a>(<script language="JavaScript">print_time(new Date("2008/09/01 05:56 GMT"));</script><noscript>2008/09/01 05:56 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>てもとのdateコマンドでは動きませんでした。
バージョンていくつでしょう？

$ date --version
date (GNU coreutils) 5.96
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software.  You may redistribute copies of it under the terms of
the GNU General Public License &lt;http://www.gnu.org/licenses/gpl.html&gt;.
There is NO WARRANTY, to the extent permitted by law.

Written by David MacKenzie.
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7535/addtag/" class="addtag" id="addtag_7535">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7535"
  >-</span><span
  class="button yellow"
  id="rating_z_7535"
  >0</span><span 
  class="button green"
  id="rating_p_7535"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7511/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7535/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7535/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7535/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7537">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/852/" target="_top">emasaka</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7537/">#7537</a>(<script language="JavaScript">print_time(new Date("2008/09/01 09:41 GMT"));</script><noscript>2008/09/01 09:41 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  確認したdateのバージョンは、GNU&nbsp;coreutilsの6.10と5.97です。<br/>なるほど、少なくともcoreutils版dateじゃないと使えないんですね。<br/><br/>私のところでの実行例は以下のとおりです。<br/><br/>$&nbsp;DateEx&nbsp;'Thu&nbsp;Aug&nbsp;28&nbsp;23:59:25&nbsp;JST&nbsp;2008'&nbsp;40<br/>Fri&nbsp;Aug&nbsp;29&nbsp;00:00:05&nbsp;JST&nbsp;2008<br/>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7537/addtag/" class="addtag" id="addtag_7537">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7537"
  >-</span><span
  class="button yellow"
  id="rating_z_7537"
  >0</span><span 
  class="button green"
  id="rating_p_7537"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7535/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7537/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7537/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7537/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7553">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7553/">#7553</a>(<script language="JavaScript">print_time(new Date("2008/09/02 10:47 GMT"));</script><noscript>2008/09/02 10:47 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>あれ？バージョン同じだぞ?とおもって再度やってみたら動きました。
秒の指定を間違えていたみたいです。
失礼しました。
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7553/addtag/" class="addtag" id="addtag_7553">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7553"
  >-</span><span
  class="button yellow"
  id="rating_z_7553"
  >0</span><span 
  class="button green"
  id="rating_p_7553"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7537/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7553/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7553/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


    </div>
  


    </div>
  


    </div>
  


  

  

  
    





<div class="comment" id="comment7512">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/760/" target="_top">turugina</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7512/">#7512</a>(<script language="JavaScript">print_time(new Date("2008/08/31 20:15 GMT"));</script><noscript>2008/08/31 20:15 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/xslt/">
	  XSLT
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>入出力の日付文字列はISO8601形式です。</pre>
	</div>
	
	<p class="link">
	  see: <a href="/web/20081202215328/http://www.w3.org/TR/xpath-functions/#date-time-duration-conformance">"XQuery 1.0 and XPath 2.0 Functions and Operators" の日付関連の説明</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td><td class="code"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;xsl:stylesheet version=&quot;2.0&quot;
  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
  xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;
  xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot;
  xmlns:my=&quot;uri:ja.doukaku.org:my-functions&quot;
  exclude-result-prefixes=&quot;my&quot;
  &gt;

  &lt;xsl:output method=&quot;text&quot; /&gt;

  &lt;xsl:template match=&quot;/&quot; &gt;
    &lt;xsl:value-of select=&quot;my:DateEx(&#39;2008-09-01T10:02:38&#39;, 10000)&quot;/&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:function name=&quot;my:DateEx&quot; as=&quot;xs:string&quot;&gt;
    &lt;xsl:param name=&quot;dstr&quot; as=&quot;xs:string&quot; /&gt;
    &lt;xsl:param name=&quot;sec&quot; as=&quot;xs:integer&quot; /&gt;

    &lt;xsl:sequence select=&quot;xs:string(
      xs:dateTime($dstr) +
      xs:dayTimeDuration(fn:concat(&#39;PT&#39;,xs:string($sec),&#39;S&#39;))
      )&quot; /&gt;
  &lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7512/addtag/" class="addtag" id="addtag_7512">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/xslt/">
		XSLT
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7512/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7512/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7512"
  >-</span><span
  class="button yellow"
  id="rating_z_7512"
  >0</span><span 
  class="button green"
  id="rating_p_7512"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7512/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7512/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7517">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/760/" target="_top">turugina</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7517/">#7517</a>(<script language="JavaScript">print_time(new Date("2008/08/31 21:53 GMT"));</script><noscript>2008/08/31 21:53 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/xslt/">
	  XSLT
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>条件2を満たしてなかった。ので、修正。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><div class="highlight"><pre>&lt;xsl:stylesheet version=&quot;2.0&quot;
  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
  xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;
  xmlns:fn=&quot;http://www.w3.org/2005/xpath-functions&quot;
  xmlns:my=&quot;uri:ja.doukaku.org:my-functions&quot;
  exclude-result-prefixes=&quot;my&quot;
  &gt;

  &lt;xsl:output method=&quot;text&quot; /&gt;

  &lt;xsl:template match=&quot;/&quot; &gt;
    &lt;xsl:value-of select=&quot;my:DateEx(&#39;2008-09-01T10:02:38&#39;, -1)&quot;/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:function name=&quot;my:DateEx&quot; as=&quot;xs:string&quot;&gt;
    &lt;xsl:param name=&quot;dstr&quot; as=&quot;xs:string&quot; /&gt;
    &lt;xsl:param name=&quot;sec&quot; as=&quot;xs:integer&quot; /&gt;

    &lt;xsl:sequence select=&quot;xs:string(
      xs:dateTime($dstr) +
      xs:dayTimeDuration(
        fn:concat(
          (if($sec&amp;lt;0)then&#39;-&#39;else&#39;&#39;),
          &#39;PT&#39;, xs:string(fn:abs($sec)), &#39;S&#39;
          )
        )
      )&quot; /&gt;
  &lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7517/addtag/" class="addtag" id="addtag_7517">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/xslt/">
		XSLT
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7517/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7517/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7517"
  >-</span><span
  class="button yellow"
  id="rating_z_7517"
  >0</span><span 
  class="button green"
  id="rating_p_7517"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7512/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7517/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7517/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


  

  
    





<div class="comment" id="comment7513">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/570/" target="_top">horiuchi</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7513/">#7513</a>(<script language="JavaScript">print_time(new Date("2008/08/31 20:17 GMT"));</script><noscript>2008/08/31 20:17 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <div class="section">
<p>フォーマットの指定がなかったので、とりあえずサンプルと同じにしてみました。</p>
</div>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.text.DateFormat</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Calendar</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Sample204</span> <span class="o">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">final</span> <span class="n">DateFormat</span> <span class="n">FORMAT</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyyMMddHHmmss&quot;</span><span class="o">);</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="nf">dateEx</span><span class="o">(</span><span class="n">String</span> <span class="n">time</span><span class="o">,</span> <span class="kt">int</span> <span class="n">seconds</span><span class="o">)</span> <span class="k">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">FORMAT</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">time</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">dateEx</span><span class="o">(</span><span class="n">date</span><span class="o">,</span> <span class="n">seconds</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="n">dateEx</span><span class="o">(</span><span class="kt">int</span> <span class="n">seconds</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">dateEx</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(),</span> <span class="n">seconds</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="n">String</span> <span class="n">dateEx</span><span class="o">(</span><span class="n">Date</span> <span class="n">date</span><span class="o">,</span> <span class="kt">int</span> <span class="n">seconds</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Calendar</span> <span class="n">cal</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
        <span class="n">cal</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span> <span class="n">date</span> <span class="o">);</span>
        <span class="n">cal</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">SECOND</span><span class="o">,</span> <span class="n">seconds</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">FORMAT</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">cal</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
    <span class="o">}</span>


    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dateEx</span><span class="o">(</span><span class="s">&quot;20080827235925&quot;</span><span class="o">,</span><span class="mi">40</span><span class="o">));</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dateEx</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7513/addtag/" class="addtag" id="addtag_7513">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7513/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7513/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7513"
  >-</span><span
  class="button yellow"
  id="rating_z_7513"
  >0</span><span 
  class="button green"
  id="rating_p_7513"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7513/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7514">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/760/" target="_top">turugina</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7514/">#7514</a>(<script language="JavaScript">print_time(new Date("2008/08/31 20:50 GMT"));</script><noscript>2008/08/31 20:50 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>DateTimeと関連モジュールを使って。

入力はコマンドライン引数で、ISO8601形式の日付と秒数を指定します。
日付を省略すると実行時の時刻を使います。

# 入力はISO8601形式じゃなくてもparseしてくれます。ので、お題の条件3.が微妙な感じ</pre>
	</div>
	
	<p class="link">
	  see: <a href="/web/20081202215328/http://search.cpan.org/~jhoblitt/DateTime-Format-DateParse-0.04/lib/DateTime/Format/DateParse.pod">DateTime::Format::DateParse</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="n">DateTime</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">DateTime::Format::</span><span class="n">DateParse</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$d</span> <span class="o">=</span> <span class="nv">@ARGV</span><span class="o">==</span><span class="mi">2</span> <span class="p">?</span> <span class="nn">DateTime::Format::</span><span class="n">DateParse</span><span class="o">-&gt;</span><span class="n">parse_datetime</span><span class="p">(</span><span class="nb">shift</span><span class="p">)</span>
                 <span class="p">:</span> <span class="n">DateTime</span><span class="o">-&gt;</span><span class="n">now</span><span class="p">(</span><span class="n">time_zone</span> <span class="o">=&gt;</span> <span class="sx">q{Asia/Tokyo}</span><span class="p">);</span>
<span class="k">print</span> <span class="nv">$d</span><span class="o">-&gt;</span><span class="n">add</span><span class="p">(</span><span class="n">seconds</span> <span class="o">=&gt;</span> <span class="nb">shift</span><span class="o">||</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">iso8601</span><span class="p">,</span><span class="vg">$/</span><span class="p">;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7514/addtag/" class="addtag" id="addtag_7514">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7514/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7514/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7514"
  >-</span><span
  class="button yellow"
  id="rating_z_7514"
  >0</span><span 
  class="button green"
  id="rating_p_7514"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7514/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7514/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7515">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/760/" target="_top">turugina</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7515/">#7515</a>(<script language="JavaScript">print_time(new Date("2008/08/31 21:22 GMT"));</script><noscript>2008/08/31 21:22 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>しまった、お題は「関数を作れ」だった。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="n">DateTime</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">DateTime::Format::</span><span class="n">DateParse</span><span class="p">;</span>

<span class="k">print</span> <span class="n">DateEx</span><span class="p">(</span><span class="nv">@ARGV</span><span class="p">),</span><span class="vg">$/</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">DateEx</span>
<span class="p">{</span>
  <span class="p">(</span><span class="nv">@_</span><span class="o">&gt;=</span><span class="mi">2</span> <span class="p">?</span> <span class="nn">DateTime::Format::</span><span class="n">DateParse</span><span class="o">-&gt;</span><span class="n">parse_datetime</span><span class="p">(</span><span class="nb">shift</span><span class="p">)</span>
         <span class="p">:</span> <span class="n">DateTime</span><span class="o">-&gt;</span><span class="n">now</span><span class="p">(</span><span class="n">time_zone</span> <span class="o">=&gt;</span> <span class="sx">q{Asia/Tokyo}</span><span class="p">))</span>
  <span class="o">-&gt;</span><span class="n">add</span><span class="p">(</span><span class="n">seconds</span> <span class="o">=&gt;</span> <span class="nb">shift</span><span class="o">||</span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">iso8601</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7515/addtag/" class="addtag" id="addtag_7515">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7515/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7515/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7515"
  >-</span><span
  class="button yellow"
  id="rating_z_7515"
  >0</span><span 
  class="button green"
  id="rating_p_7515"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7514/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7515/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7515/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7515/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7536">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7536/">#7536</a>(<script language="JavaScript">print_time(new Date("2008/09/01 06:11 GMT"));</script><noscript>2008/09/01 06:11 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>Perlにまでパーサっがあったのですね。。。
僕が妥協した時はPOSIXを使ったべた書きでした。
# ほとんどCとかわりません(笑</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/env perl</span>
<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">POSIX</span> <span class="n">qw</span><span class="sr">/strftime mktime/</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">DateEx</span><span class="p">($$)</span>
<span class="p">{</span>
        <span class="k">my</span> <span class="nv">$outDate</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
        <span class="k">my</span> <span class="nv">@t</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=~</span> <span class="sr">m/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/</span><span class="p">);</span>

        <span class="nv">$t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1900</span><span class="p">;</span> <span class="nv">$t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span> <span class="nv">@t</span> <span class="o">=</span> <span class="nb">reverse</span> <span class="nv">@t</span><span class="p">;</span>
        <span class="nv">$t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">mktime</span><span class="p">(</span> <span class="nv">@t</span> <span class="p">);</span>
        <span class="k">return</span> <span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%Y%m%d%H%M%S&quot;</span><span class="p">,</span> <span class="nv">@t</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">print</span> <span class="n">DateEx</span><span class="p">(</span><span class="s">&quot;20080827235925&quot;</span><span class="p">,</span><span class="mi">40</span><span class="p">)</span> <span class="o">.</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>

<span class="cp">__END__</span>
<span class="cp">#EOF</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7536/addtag/" class="addtag" id="addtag_7536">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7536/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7536/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7536"
  >-</span><span
  class="button yellow"
  id="rating_z_7536"
  >0</span><span 
  class="button green"
  id="rating_p_7536"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7515/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7536/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7536/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


    </div>
  


  

  

  
    





<div class="comment" id="comment7516">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/760/" target="_top">turugina</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7516/">#7516</a>(<script language="JavaScript">print_time(new Date("2008/08/31 21:45 GMT"));</script><noscript>2008/08/31 21:45 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>Boost.Date_Time で。
入出力の日付形式はコード中に書いてある通り(例:"2008-Sep-01 12:34:56")です。</pre>
	</div>
	
	<p class="link">
	  see: <a href="/web/20081202215328/http://www.boost.org/doc/libs/1_36_0/doc/html/date_time.html">Boost.Date_Time</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;string&gt;</span>
<span class="cp">#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</span>
<span class="cp">#include &lt;boost/lexical_cast.hpp&gt;</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span>
<span class="n">DateEx</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">dstr</span><span class="p">,</span>
    <span class="kt">int</span>                <span class="n">sec</span>
    <span class="p">)</span>
<span class="p">{</span>
  <span class="k">using</span> <span class="k">namespace</span> <span class="n">boost</span><span class="o">::</span><span class="n">posix_time</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">boost</span><span class="o">::</span><span class="n">lexical_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span>
      <span class="n">ptime</span><span class="p">(</span><span class="n">dstr</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="n">second_clock</span><span class="o">::</span><span class="n">local_time</span><span class="p">()</span>
                         <span class="o">:</span> <span class="n">time_from_string</span><span class="p">(</span><span class="n">dstr</span><span class="p">)</span>
      <span class="p">)</span> <span class="o">+</span> <span class="n">seconds</span><span class="p">(</span><span class="n">sec</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;usage: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; [&lt;datetime{YYYY-Mon-DD hh:mm:ss}&gt;] &lt;seconds&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">DateEx</span><span class="p">(</span>
      <span class="n">c</span><span class="o">&gt;=</span><span class="mi">3</span><span class="o">?</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
      <span class="n">boost</span><span class="o">::</span><span class="n">lexical_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">c</span><span class="o">&gt;=</span><span class="mi">3</span><span class="o">?</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">:</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7516/addtag/" class="addtag" id="addtag_7516">Tags</a>:
	
    
    <a href="/web/20081202215328/http://ja.doukaku.org/tag/Boost.Date_Time/">Boost.Date_Time</a>
    
    <a href="/web/20081202215328/http://ja.doukaku.org/tag/boost/">boost</a>
    
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7516/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7516/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7516"
  >-</span><span
  class="button yellow"
  id="rating_z_7516"
  >0</span><span 
  class="button green"
  id="rating_p_7516"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7516/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  

  
    





<div class="comment" id="comment7518">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7518/">#7518</a>(<script language="JavaScript">print_time(new Date("2008/08/31 22:01 GMT"));</script><noscript>2008/08/31 22:01 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>Squeak Smalltalk では日時オブジェクト同士の演算が可能です。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre>&quot;文字列指定した日時の場合&quot;
&#39;2008-09-01T12:00:00+09:00&#39; asDateAndTime - 10 seconds   &quot;=&gt; 2008-09-01T11:59:50+09:00 &quot;

&quot;現在日時の場合&quot;
DateAndTime now + 15 seconds
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7518/addtag/" class="addtag" id="addtag_7518">Tags</a>:
	
    
    <a href="/web/20081202215328/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7518/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7518/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7518"
  >-</span><span
  class="button yellow"
  id="rating_z_7518"
  >0</span><span 
  class="button green"
  id="rating_p_7518"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7518/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7520">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/785/" target="_top">Dubhead</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7520/">#7520</a>(<script language="JavaScript">print_time(new Date("2008/08/31 23:23 GMT"));</script><noscript>2008/08/31 23:23 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/d/">
	  D
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  D 2.0 + Phobos。
	</div>
	
	<p class="link">
	  see: <a href="/web/20081202215328/http://www.digitalmars.com/d/2.0/phobos/std_date.html"></a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="n">std</span>.<span class="n">conv</span>;
<span class="k">import</span> <span class="n">std</span>.<span class="n">date</span>;
<span class="k">import</span> <span class="n">std</span>.<span class="n">stdio</span>;

<span class="n">string</span> <span class="n">DateEx</span>(<span class="n">string</span> <span class="n">datetime</span>, <span class="kt">int</span> <span class="n">tdelta_in_secs</span>)
{
    <span class="n">d_time</span> <span class="n">t</span> = <span class="n">std</span>.<span class="n">date</span>.<span class="n">parse</span>(<span class="n">datetime</span>);
    <span class="n">d_time</span> <span class="n">new_datetime</span> = <span class="n">t</span> + <span class="n">tdelta_in_secs</span> * <span class="n">std</span>.<span class="n">date</span>.<span class="n">TicksPerSecond</span>;
    <span class="k">return</span> <span class="n">std</span>.<span class="n">date</span>.<span class="n">toString</span>(<span class="n">new_datetime</span>);
}

<span class="kt">void</span> <span class="n">main</span>(<span class="n">string</span>[] <span class="n">args</span>)
{
    <span class="n">string</span> <span class="n">datetime</span>;
    <span class="kt">int</span> <span class="n">tdelta_in_secs</span>;
    <span class="k">if</span> (<span class="n">args</span>.<span class="n">length</span> == <span class="mi">3</span>) {
        <span class="n">datetime</span> = <span class="n">args</span>[<span class="mi">1</span>];
        <span class="n">tdelta_in_secs</span> = <span class="n">toInt</span>(<span class="n">args</span>[<span class="mi">2</span>]);
    }
    <span class="k">else</span> {
        <span class="n">d_time</span> <span class="n">now</span> = <span class="n">std</span>.<span class="n">date</span>.<span class="n">getUTCtime</span>;
        <span class="n">datetime</span> = <span class="n">std</span>.<span class="n">date</span>.<span class="n">toString</span>(<span class="n">now</span>);
        <span class="n">tdelta_in_secs</span> = <span class="n">toInt</span>(<span class="n">args</span>[<span class="mi">1</span>]);
    }
    <span class="n">writefln</span>(<span class="s">&quot;%s&quot;</span>, <span class="n">DateEx</span>(<span class="n">datetime</span>, <span class="n">tdelta_in_secs</span>));
}

<span class="c">// eof</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7520/addtag/" class="addtag" id="addtag_7520">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/d/">
		D
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7520/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7520/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7520"
  >-</span><span
  class="button yellow"
  id="rating_z_7520"
  >0</span><span 
  class="button green"
  id="rating_p_7520"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7520/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7520/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7521">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/785/" target="_top">Dubhead</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7521/">#7521</a>(<script language="JavaScript">print_time(new Date("2008/08/31 23:47 GMT"));</script><noscript>2008/08/31 23:47 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/d/">
	  D
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>使用例も書かないとダメですね。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="n">std</span>.<span class="n">conv</span>;
<span class="k">import</span> <span class="n">std</span>.<span class="n">date</span>;
<span class="k">import</span> <span class="n">std</span>.<span class="n">stdio</span>;

<span class="n">string</span> <span class="n">DateEx</span>(<span class="n">string</span> <span class="n">datetime</span>, <span class="kt">int</span> <span class="n">tdelta_in_secs</span>)
{
    <span class="n">d_time</span> <span class="n">t</span> = <span class="n">std</span>.<span class="n">date</span>.<span class="n">parse</span>(<span class="n">datetime</span>);
    <span class="n">d_time</span> <span class="n">new_datetime</span> = <span class="n">t</span> + <span class="n">tdelta_in_secs</span> * <span class="n">std</span>.<span class="n">date</span>.<span class="n">TicksPerSecond</span>;
    <span class="k">return</span> <span class="n">std</span>.<span class="n">date</span>.<span class="n">toString</span>(<span class="n">new_datetime</span>);
}
<span class="k">unittest</span> {
    <span class="k">assert</span>(<span class="n">DateEx</span>(<span class="s">&quot;Mon Sep 01 13:00:00 GMT+0900 2008&quot;</span>, -<span class="mi">3600</span>) ==
        <span class="s">&quot;Mon Sep 01 12:00:00 GMT+0900 2008&quot;</span>);
    <span class="k">assert</span>(<span class="n">DateEx</span>(<span class="s">&quot;Mon Sep 01 13:00:00 GMT+0900 2008&quot;</span>, <span class="mi">3600</span>) ==
        <span class="s">&quot;Mon Sep 01 14:00:00 GMT+0900 2008&quot;</span>);
}

<span class="kt">void</span> <span class="n">main</span>(<span class="n">string</span>[] <span class="n">args</span>)
{
    <span class="n">string</span> <span class="n">datetime</span>;
    <span class="kt">int</span> <span class="n">tdelta_in_secs</span>;
    <span class="k">if</span> (<span class="n">args</span>.<span class="n">length</span> == <span class="mi">3</span>) {
        <span class="n">datetime</span> = <span class="n">args</span>[<span class="mi">1</span>];
        <span class="n">tdelta_in_secs</span> = <span class="n">toInt</span>(<span class="n">args</span>[<span class="mi">2</span>]);
    }
    <span class="k">else</span> {
        <span class="n">d_time</span> <span class="n">now</span> = <span class="n">std</span>.<span class="n">date</span>.<span class="n">getUTCtime</span>;
        <span class="n">datetime</span> = <span class="n">std</span>.<span class="n">date</span>.<span class="n">toString</span>(<span class="n">now</span>);
        <span class="n">tdelta_in_secs</span> = <span class="n">toInt</span>(<span class="n">args</span>[<span class="mi">1</span>]);
    }
    <span class="n">writefln</span>(<span class="s">&quot;%s&quot;</span>, <span class="n">DateEx</span>(<span class="n">datetime</span>, <span class="n">tdelta_in_secs</span>));
}

<span class="c">// eof</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7521/addtag/" class="addtag" id="addtag_7521">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/d/">
		D
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7521/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7521/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7521"
  >-</span><span
  class="button yellow"
  id="rating_z_7521"
  >0</span><span 
  class="button green"
  id="rating_p_7521"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7520/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7521/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7521/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


  

  

  
    





<div class="comment" id="comment7524">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/641/" target="_top">seri</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7524/">#7524</a>(<script language="JavaScript">print_time(new Date("2008/09/01 00:28 GMT"));</script><noscript>2008/09/01 00:28 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>3.の条件を無視すればこれでもOKです。
（Time.parseはさまざまな書式を受け付けるため）

def date_ex(diff, date = Time.now.to_s)
  puts Time.parse(date) + diff
end

</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;time&#39;</span>

<span class="k">def</span> <span class="nf">date_ex</span><span class="p">(</span><span class="n">diff</span><span class="p">,</span> <span class="n">date</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y/%m/%d %H:%M:%S&quot;</span><span class="p">))</span>
  <span class="k">raise</span> <span class="k">unless</span> <span class="n">date</span> <span class="o">=~</span> <span class="sr">/\d+\/\d+\/\d+\s+\d+:\d+:\d+/</span>
  <span class="nb">puts</span> <span class="p">(</span><span class="no">Time</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="o">+</span> <span class="n">diff</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y/%m/%d %H:%M:%S&quot;</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">date_ex</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;2008/09/01 14:06:25&#39;</span><span class="p">)</span> <span class="c1">#=&gt; 2008/09/01 14:08:05</span>
<span class="n">date_ex</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1">#=&gt; 「現在時刻」から100秒後</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7524/addtag/" class="addtag" id="addtag_7524">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7524/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7524/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7524"
  >-</span><span
  class="button yellow"
  id="rating_z_7524"
  >0</span><span 
  class="button green"
  id="rating_p_7524"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7524/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7526">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/136/" target="_top">matarillo</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7526/">#7526</a>(<script language="JavaScript">print_time(new Date("2008/09/01 00:49 GMT"));</script><noscript>2008/09/01 00:49 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/other/">
	  Other
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>VBA for Excel (2003)</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4</pre></td><td class="code"><div class="highlight"><pre>Function DateEx(str, sec)
  p = InStr(str, &quot; &quot;)
  DateEx = DateValue(Left(str, p - 1)) + TimeValue(Right(str, Len(str) - p)) + sec / 86400
End Function
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7526/addtag/" class="addtag" id="addtag_7526">Tags</a>:
	
    
    <a href="/web/20081202215328/http://ja.doukaku.org/tag/vba/">vba</a>
    
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/other/">
		Other
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7526/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7526/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7526"
  >-</span><span
  class="button yellow"
  id="rating_z_7526"
  >0</span><span 
  class="button green"
  id="rating_p_7526"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7526/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7527">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/606/" target="_top">pooq</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7527/">#7527</a>(<script language="JavaScript">print_time(new Date("2008/09/01 01:13 GMT"));</script><noscript>2008/09/01 01:13 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/j/">
	  J
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>関数に出力機能まで含めるとなんか使いにくそう。

   '2008 8 27 23 59 25' DateEx 40
2008 8 28 0 0 5

   '2008 8 27 23 59 25' DateEx _40
2008 8 27 23 58 45

   DateEx 100000000
2011 11 3 0 12 46.731
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre>load &#39;dates&#39;

now =: 6!:0

DateEx =: 3 : 0
(&quot;: now &#39;&#39;) DateEx y
:
wd 1 tsrep (y * 1000) + tsrep &quot;. x
)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7527/addtag/" class="addtag" id="addtag_7527">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/j/">
		J
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7527/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7527/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7527"
  >-</span><span
  class="button yellow"
  id="rating_z_7527"
  >0</span><span 
  class="button green"
  id="rating_p_7527"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7527/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7529">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/840/" target="_top">leque</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7529/">#7529</a>(<script language="JavaScript">print_time(new Date("2008/09/01 03:45 GMT"));</script><noscript>2008/09/01 03:45 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>日時の書式は ISO-8601 の「西暦-月-日T時:分:秒」形式です。時間を省略する場合には空文字列を渡すことにしてみました。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-13</span><span class="p">)</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-19</span><span class="p">)</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">date-ex</span> <span class="nv">str</span> <span class="nv">delta</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">string-null?</span> <span class="nv">str</span><span class="p">)</span>
               <span class="p">(</span><span class="nf">current-time</span> <span class="nv">time-utc</span><span class="p">)</span>
               <span class="p">(</span><span class="nf">date-&gt;time-utc</span>
                <span class="p">(</span><span class="nf">string-&gt;date</span> <span class="nv">str</span> <span class="s">&quot;~Y-~m-~dT~H:~M:~S&quot;</span><span class="p">)))))</span>
    <span class="p">(</span><span class="nf">date-&gt;string</span>
     <span class="p">(</span><span class="nf">time-utc-&gt;date</span>
      <span class="p">(</span><span class="nf">add-duration</span> <span class="nv">t</span> <span class="p">(</span><span class="nf">make-time</span> <span class="nv">time-duration</span> <span class="mi">0</span> <span class="nv">delta</span><span class="p">)))</span>
     <span class="s">&quot;~5&quot;</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">main</span> <span class="nv">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">print</span> <span class="p">(</span><span class="nf">date-ex</span> <span class="p">(</span><span class="nb">cadr </span><span class="nv">args</span><span class="p">)</span> <span class="p">(</span><span class="nb">string-&gt;number </span><span class="p">(</span><span class="nb">caddr </span><span class="nv">args</span><span class="p">)))))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7529/addtag/" class="addtag" id="addtag_7529">Tags</a>:
	
    
    <a href="/web/20081202215328/http://ja.doukaku.org/tag/gauche/">gauche</a>
    
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7529/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7529/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7529"
  >-</span><span
  class="button yellow"
  id="rating_z_7529"
  >0</span><span 
  class="button green"
  id="rating_p_7529"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7529/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7532">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/405/" target="_top">mc</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7532/">#7532</a>(<script language="JavaScript">print_time(new Date("2008/09/01 05:01 GMT"));</script><noscript>2008/09/01 05:01 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  net-telent-dateを使ってRFC&nbsp;2822形式で出力するようにしてみました。<br/>他にも様々な形式をパーズしてくれるライブラリです。<br/>CLの引数の順番はお題の例とは逆にしています。<br/>(date-ex&nbsp;40&nbsp;"Thu,&nbsp;28&nbsp;Aug&nbsp;2007&nbsp;23:59:25&nbsp;+0900")<br/>;=&gt;&nbsp;"Thu,&nbsp;30&nbsp;Aug&nbsp;2007&nbsp;00:00:05&nbsp;+0900"&nbsp;<br/><br/>(date-ex&nbsp;-3600)<br/>;=&gt;&nbsp;"Mon,&nbsp;01&nbsp;Sep&nbsp;2008&nbsp;17:56:51&nbsp;+0900"&nbsp;
	</div>
	
	<p class="link">
	  see: <a href="/web/20081202215328/http://www.cliki.net/net-telent-date">net-telent-date</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre>(require :net-telent-date)
(require :lw-compat)

(defpackage :doukaku-204 (:use :cl :date :lispworks))
(in-package :doukaku-204)

(defun date-ex (sec &amp;optional time-string)
  (when-let (ut (if time-string
                    (parse-time time-string)
                    (get-universal-time)))
    (universal-time-to-rfc2822-date (+ ut sec))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7532/addtag/" class="addtag" id="addtag_7532">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7532/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7532/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7532"
  >-</span><span
  class="button yellow"
  id="rating_z_7532"
  >0</span><span 
  class="button green"
  id="rating_p_7532"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7532/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  

  

  

  

  

  
    





<div class="comment" id="comment7538">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/232/" target="_top">kkobayashi</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7538/">#7538</a>(<script language="JavaScript">print_time(new Date("2008/09/01 11:11 GMT"));</script><noscript>2008/09/01 11:11 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/r/">
	  R
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>フォーマットが任意だと楽ちんでいいですね。

&gt; DateEx("2008-09-02 00:00:00 JST", 30)
[1] "2008-09-02 00:00:30 JST"
&gt; DateEx("2008-09-02 00:00:00 JST", -30)
[1] "2008-09-01 23:59:30 JST"
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3</pre></td><td class="code"><div class="highlight"><pre>DateEx &lt;- function(d1=Sys.time(), d2=0){
  as.POSIXct(d1) + d2
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7538/addtag/" class="addtag" id="addtag_7538">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/r/">
		R
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7538/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7538/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7538"
  >-</span><span
  class="button yellow"
  id="rating_z_7538"
  >0</span><span 
  class="button green"
  id="rating_p_7538"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7538/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7539">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/813/" target="_top">lunlumo</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7539/">#7539</a>(<script language="JavaScript">print_time(new Date("2008/09/01 12:13 GMT"));</script><noscript>2008/09/01 12:13 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <div class="section">
<p>　Javaと余り変わりませんがscala版を。</p>
</div>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><div class="highlight"><pre>import    java.text.DateFormat
import    java.text.ParseException
import    java.text.SimpleDateFormat
import    java.util.Calendar

object DateEx {
    val    formatter:DateFormat = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;)
    def DateEx(date:String,diff:Int):String = {
        val    calendar:Calendar = Calendar.getInstance
        calendar.setTime(formatter.parse(date))
        DateEx(calendar,diff)
    }
    def DateEx(diff:Int):String = DateEx(Calendar.getInstance,diff)
    def DateEx(calendar:Calendar,diff:Int):String = {
        calendar.add(Calendar.SECOND,diff)
        formatter.format(calendar.getTime)
    }
    def main(args:Array[String]):Unit = {
        try {
            args.length match {
                case 2 =&gt; println(DateEx(args(0),args(1).toInt))
                case 1 =&gt; println(DateEx(args(0).toInt))
                case _ =&gt; println(DateEx(&quot;20080827235925&quot;,40))
            }
        } catch {
            case ex:ParseException =&gt; println(&quot;invalid date format.&quot;)
            case ex =&gt; ex.printStackTrace
        }
    }
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7539/addtag/" class="addtag" id="addtag_7539">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7539/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7539/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7539"
  >-</span><span
  class="button yellow"
  id="rating_z_7539"
  >0</span><span 
  class="button green"
  id="rating_p_7539"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7539/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7543">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7543/">#7543</a>(<script language="JavaScript">print_time(new Date("2008/09/01 18:45 GMT"));</script><noscript>2008/09/01 18:45 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  JavaScriptのパーサを使用。Firebugで確認。<br/>出力形式にあわせるとこんな入力になった。<br/>toLocaleStringメソッドを使えば"2008年9月2日&nbsp;8:50:34"のように出力するが、パーサが解釈してくれない。<br/>&gt;&gt;&gt;&nbsp;DateEx('Tue&nbsp;Sep&nbsp;02&nbsp;2008&nbsp;8:30:00',1234)<br/>"Tue&nbsp;Sep&nbsp;02&nbsp;2008&nbsp;08:50:34&nbsp;GMT+0900"
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1</pre></td><td class="code"><div class="highlight"><pre><span class="k">function</span> <span class="nx">DateEx</span><span class="p">(</span><span class="nx">t</span><span class="o">,</span><span class="nx">s</span><span class="p">)</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span><span class="o">+</span><span class="nx">s</span><span class="o">*</span><span class="mi">1000</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7543/addtag/" class="addtag" id="addtag_7543">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7543/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7543/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7543"
  >-</span><span
  class="button yellow"
  id="rating_z_7543"
  >0</span><span 
  class="button green"
  id="rating_p_7543"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081202215328/http://ja.doukaku.org/comment/7543/">
    1
    reply
  </a>

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7543/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment7544">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7544/">#7544</a>(<script language="JavaScript">print_time(new Date("2008/09/01 18:59 GMT"));</script><noscript>2008/09/01 18:59 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>こんなのもあたーよ。</p>

	</div>
	
	<p class="link">
	  see: <a href="/web/20081202215328/http://www.enjoyxstudy.com/javascript/dateformat/">dateformat.js</a>
	</p>  
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7544/addtag/" class="addtag" id="addtag_7544">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7544"
  >-</span><span
  class="button yellow"
  id="rating_z_7544"
  >0</span><span 
  class="button green"
  id="rating_p_7544"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7543/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081202215328/http://ja.doukaku.org/comment/7544/root/"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7544/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


  

  

  
    





<div class="comment" id="comment7550">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/771/" target="_top">M.Suzuki</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7550/">#7550</a>(<script language="JavaScript">print_time(new Date("2008/09/02 05:27 GMT"));</script><noscript>2008/09/02 05:27 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>なんの工夫もないコードです。
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">Time</span>

<span class="nv">addDate</span> <span class="nv">time</span> <span class="nv">sec</span> <span class="o">=</span> <span class="nv">show</span> <span class="o">$</span> <span class="nv">addUTCTime</span> <span class="nv">sec</span> <span class="o">$</span> <span class="nv">read</span> <span class="nv">time</span>

<span class="nv">main</span> <span class="o">=</span> <span class="kr">do</span>
    <span class="nv">putStrLn</span> <span class="o">$</span> <span class="nv">addDate</span> <span class="s">&quot;2008-09-02 10:20:30 UTC&quot;</span> <span class="mi">15</span>
    <span class="nv">putStrLn</span> <span class="o">$</span> <span class="nv">addDate</span> <span class="s">&quot;2008-09-02 10:20:30 UTC&quot;</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7550/addtag/" class="addtag" id="addtag_7550">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7550/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7550/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7550"
  >-</span><span
  class="button yellow"
  id="rating_z_7550"
  >0</span><span 
  class="button green"
  id="rating_p_7550"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7550/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment7552">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/591/" target="_top">99yen</a><a href="/web/20081202215328/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081202215328im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7552/">#7552</a>(<script language="JavaScript">print_time(new Date("2008/09/02 10:01 GMT"));</script><noscript>2008/09/02 10:01 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/nadesico/">
	  なでしこ
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>なでしこで。下の二つの関数はほかから流用です。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td class="code"><div class="highlight"><pre>DateEx(&quot;2008/08/27 23:59:25&quot;,40)を表示
DateEx(&quot;2008/08/27&quot;,40)を表示

●DateEx(str,n)
    dateとは配列=区切(str,&quot; &quot;)
    もし(date[1]=&quot;&quot;)ならば、date[1]=今
    配列結合(UNIX2date(date2UNIX(date,0)+n),&quot; &quot;)
●date2UNIX(date,tzd)
    戻(日数差(&quot;1970/1/1&quot;,date[0])*(60*60*24)+秒差(&quot;0:0:0&quot;,date[1])+tzd)
●UNIX2date(unix)
    tmpとは配列
    dayとは整数=unix/86400%86400
    unix=unix-day*86400
    tmp[0]=日付加算(&quot;1970/1/1&quot;,&quot;//{day}&quot;)
    tmp[1]=&quot;{ゼロ埋め(unix/3600%24,2)}:{ゼロ埋め(unix/60%60,2)}:{ゼロ埋め(unix%60,2)}&quot;
    tmpで戻る
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7552/addtag/" class="addtag" id="addtag_7552">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081202215328/http://ja.doukaku.org/lang/nadesico/">
		なでしこ
      </a>]
	  
      [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7552/download/">
		download code
      </a>]
	  [<a href="/web/20081202215328/http://ja.doukaku.org/comment/7552/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7552"
  >-</span><span
  class="button yellow"
  id="rating_z_7552"
  >0</span><span 
  class="button green"
  id="rating_p_7552"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081202215328/http://ja.doukaku.org/204/reply_to/7552/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  

  
    





<div class="comment" id="comment7561">
  <p class="banner"><a href="/web/20081202215328/http://ja.doukaku.org/user/763/" target="_top">Songmu</a>

	
	&nbsp;
	<a href="/web/20081202215328/http://ja.doukaku.org/comment/7561/">#7561</a>(<script language="JavaScript">print_time(new Date("2008/09/04 07:39 GMT"));</script><noscript>2008/09/04 07:39 GMT</noscript>)
	
	
	
	[<a href="/web/20081202215328/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>モジュールなしで書いた</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#! /usr/bin/perl</span>
<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$date_string</span> <span class="o">=</span> <span class="mi">20080827235925</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$add_seconds</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>

<span class="k">print</span> <span class="n">DateEx</span><span class="p">(</span><span class="nv">$date_string</span><span class="p">,</span><span class="nv">$add_seconds</span><span class="p">);</span>

<span class="k">sub </span><span class="nf">DateEx</span><span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$date_string</span><span class="p">,</span> <span class="nv">$add_seconds</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="s">&#39;Error!&#39;</span> <span class="k">unless</span> <span class="nv">$date_string</span> <span class="o">=~</span><span class="sr"> /^\d{14}$/</span><span class="p">;</span>
    <span class="k">return</span> <span class="s">&#39;Error!&#39;</span> <span class="k">unless</span> <span class="nv">$add_seconds</span> <span class="o">=~</span><span class="sr"> /^-?\d+$/</span><span class="p">;</span>
    
    <span class="k">my</span> <span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">,</span><span class="nv">$day</span><span class="p">,</span><span class="nv">$hour</span><span class="p">,</span><span class="nv">$minutes</span><span class="p">,</span><span class="nv">$seconds</span><span class="p">)</span>
        <span class="o">=</span> <span class="nv">$date_string</span> <span class="o">=~</span><span class="sr"> /^(\d{1,4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})$/</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">@result</span> <span class="o">=</span> <span class="n">add_seconds</span><span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">,</span><span class="nv">$day</span><span class="p">,</span><span class="nv">$hour</span><span class="p">,</span><span class="nv">$minutes</span><span class="p">,</span><span class="nv">$seconds</span><span class="p">,</span><span class="nv">$add_seconds</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s">&quot;%04d%02d%02d%02d%02d%02d&quot;</span><span class="p">,</span><span class="nv">@result</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">add_seconds</span><span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">,</span><span class="nv">$day</span><span class="p">,</span><span class="nv">$hour</span><span class="p">,</span><span class="nv">$minutes</span><span class="p">,</span><span class="nv">$seconds</span><span class="p">,</span><span class="nv">$add_seconds</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
    
    <span class="c1">#時間、秒を先に出す</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$tmp_day</span><span class="p">,</span><span class="nv">$result_hour</span><span class="p">,</span><span class="nv">$result_minutes</span><span class="p">,</span><span class="nv">$result_seconds</span><span class="p">)</span>
        <span class="o">=</span> <span class="n">seconds_to_day</span><span class="p">(</span><span class="nv">$add_seconds</span> <span class="o">+</span> <span class="n">day_to_seconds</span><span class="p">(</span><span class="nv">$day</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nv">$hour</span><span class="p">,</span><span class="nv">$minutes</span><span class="p">,</span><span class="nv">$seconds</span><span class="p">));</span>
    
    <span class="c1">#日付を計算</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$result_year</span><span class="p">,</span> <span class="nv">$result_month</span><span class="p">,</span> <span class="nv">$result_day</span><span class="p">)</span>
        <span class="o">=</span> <span class="n">date_add</span><span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">,</span><span class="nv">$tmp_day</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="nv">$result_year</span><span class="p">,</span><span class="nv">$result_month</span><span class="p">,</span><span class="nv">$result_day</span><span class="p">,</span><span class="nv">$result_hour</span><span class="p">,</span><span class="nv">$result_minutes</span><span class="p">,</span><span class="nv">$result_seconds</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">day_to_seconds</span><span class="p">{</span><span class="c1">#何日、何時間、何分の形式を総秒数に変換</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$day</span><span class="p">,</span><span class="nv">$hour</span><span class="p">,</span><span class="nv">$minutes</span><span class="p">,</span><span class="nv">$seconds</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
    
    <span class="k">my</span> <span class="nv">$SECONDS_PER_MINUTES</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$SECONDS_PER_HOUR</span> <span class="o">=</span> <span class="nv">$SECONDS_PER_MINUTES</span> <span class="o">*</span> <span class="mi">60</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$SECONDS_PER_DAY</span> <span class="o">=</span> <span class="nv">$SECONDS_PER_HOUR</span> <span class="o">*</span> <span class="mi">24</span><span class="p">;</span>
    
    <span class="k">my</span> <span class="nv">$total_second</span> <span class="o">=</span> <span class="nv">$day</span>     <span class="o">*</span> <span class="nv">$SECONDS_PER_DAY</span>
                     <span class="o">+</span> <span class="nv">$hour</span>    <span class="o">*</span> <span class="nv">$SECONDS_PER_HOUR</span>
                     <span class="o">+</span> <span class="nv">$minutes</span> <span class="o">*</span> <span class="nv">$SECONDS_PER_MINUTES</span>
                     <span class="o">+</span> <span class="nv">$seconds</span>
                     <span class="p">;</span>
    <span class="k">return</span> <span class="nv">$total_second</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">seconds_to_day</span><span class="p">{</span><span class="c1">#秒数を　何日、何時間、何分の形式に変換</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$total_seconds</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
    
    <span class="k">my</span> <span class="nv">$SECONDS_PER_MINUTES</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$SECONDS_PER_HOUR</span> <span class="o">=</span> <span class="nv">$SECONDS_PER_MINUTES</span> <span class="o">*</span> <span class="mi">60</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$SECONDS_PER_DAY</span> <span class="o">=</span> <span class="nv">$SECONDS_PER_HOUR</span> <span class="o">*</span> <span class="mi">24</span><span class="p">;</span>
    
    <span class="k">my</span> <span class="p">(</span><span class="nv">$day</span><span class="p">,</span><span class="nv">$hour</span><span class="p">,</span><span class="nv">$minutes</span><span class="p">,</span><span class="nv">$seconds</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    
    <span class="k">if</span><span class="p">(</span><span class="nv">$total_seconds</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="nv">$day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nv">$total_seconds</span> <span class="o">/</span> <span class="nv">$SECONDS_PER_DAY</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nv">$hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nv">$total_seconds</span> <span class="o">/</span> <span class="nv">$SECONDS_PER_HOUR</span><span class="p">)</span> <span class="nv">%</span> <span class="nv">24</span><span class="p">;</span>
        <span class="nv">$minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nv">$total_seconds</span> <span class="o">/</span> <span class="nv">$SECONDS_PER_MINUTES</span><span class="p">)</span> <span class="nv">%</span> <span class="nv">60</span><span class="p">;</span>
        <span class="nv">$seconds</span> <span class="o">=</span> <span class="nv">$total_seconds</span> <span class="nv">%</span> <span class="nv">60</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">elsif</span><span class="p">(</span><span class="nv">$total_seconds</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="nv">$day</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="nv">$total_seconds</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="nv">$SECONDS_PER_DAY</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="nv">$total_seconds</span> <span class="o">+=</span> <span class="nv">$day</span> <span class="o">*</span> <span class="nv">$SECONDS_PER_DAY</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="nv">$hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nv">$total_seconds</span> <span class="o">/</span> <span class="nv">$SECONDS_PER_HOUR</span><span class="p">)</span> <span class="nv">%</span> <span class="nv">24</span><span class="p">;</span>
        <span class="nv">$minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nv">$total_seconds</span> <span class="o">/</span> <span class="nv">$SECONDS_PER_MINUTES</span><span class="p">)</span> <span class="nv">%</span> <span class="nv">60</span><span class="p">;</span>
        <span class="nv">$seconds</span> <span class="o">=</span> <span class="nv">$total_seconds</span> <span class="nv">%</span> <span class="nv">60</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="nv">$day</span><span class="p">,</span><span class="nv">$hour</span><span class="p">,</span><span class="nv">$minutes</span><span class="p">,</span><span class="nv">$seconds</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">date_add</span><span class="p">{</span><span class="c1">#2008年8月33日は2008年9月2日のような考え方</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">,</span><span class="nv">$day</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
    
    <span class="c1">#400年以上のスパンがある場合</span>
    <span class="k">while</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nv">$day</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="k">my</span> <span class="nv">$DAYS_IN_400YEARS</span> <span class="o">=</span> <span class="mi">365</span><span class="o">*</span><span class="mi">400</span><span class="o">+</span><span class="mi">97</span><span class="p">)){</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$day</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nv">$day</span> <span class="o">-=</span> <span class="nv">$DAYS_IN_400YEARS</span><span class="p">;</span>
            <span class="nv">$year</span> <span class="o">+=</span> <span class="mi">400</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="nv">$day</span> <span class="o">+=</span> <span class="nv">$DAYS_IN_400YEARS</span><span class="p">;</span>
            <span class="nv">$year</span> <span class="o">-=</span> <span class="mi">400</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">#1年以上のスパンがある場合</span>
    <span class="k">while</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nv">$day</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">366</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$day</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$month</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">){</span>
                <span class="k">while</span><span class="p">(</span><span class="nv">$day</span> <span class="o">&gt;</span> <span class="mi">366</span><span class="p">){</span>
                    <span class="n">_uru_or_not</span><span class="p">(</span><span class="nv">$year</span><span class="p">)</span> <span class="p">?</span> <span class="nv">$day</span> <span class="o">-=</span> <span class="mi">366</span> <span class="p">:</span> <span class="nv">$day</span> <span class="o">-=</span> <span class="mi">365</span><span class="p">;</span>
                    <span class="nv">$year</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">while</span><span class="p">(</span><span class="nv">$day</span> <span class="o">&gt;</span> <span class="mi">366</span><span class="p">){</span>
                    <span class="n">_uru_or_not</span><span class="p">(</span><span class="nv">$year</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">?</span> <span class="nv">$day</span> <span class="o">-=</span> <span class="mi">366</span> <span class="p">:</span> <span class="nv">$day</span> <span class="o">-=</span> <span class="mi">365</span><span class="p">;</span>
                    <span class="nv">$year</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$month</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">){</span>
                <span class="k">while</span><span class="p">(</span><span class="nv">$day</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">366</span><span class="p">){</span>
                    <span class="n">_uru_or_not</span><span class="p">(</span><span class="nv">$year</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">?</span> <span class="nv">$day</span> <span class="o">+=</span> <span class="mi">366</span> <span class="p">:</span> <span class="nv">$day</span> <span class="o">+=</span> <span class="mi">365</span><span class="p">;</span>
                    <span class="nv">$year</span><span class="o">--</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">while</span><span class="p">(</span><span class="nv">$day</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">366</span><span class="p">){</span>
                    <span class="n">_uru_or_not</span><span class="p">(</span><span class="nv">$year</span><span class="p">)</span> <span class="p">?</span> <span class="nv">$day</span> <span class="o">+=</span> <span class="mi">366</span> <span class="p">:</span> <span class="nv">$day</span> <span class="o">+=</span> <span class="mi">365</span><span class="p">;</span>
                    <span class="nv">$year</span><span class="o">--</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">#一月づつ、足すもしくはさかのぼる</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="p">((</span><span class="nv">$day</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">_get_days_of_month</span><span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nv">$day</span><span class="p">))){</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$day</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nv">$day</span> <span class="o">-=</span> <span class="n">_get_days_of_month</span><span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">);</span>
            <span class="nv">$month</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$month</span> <span class="o">==</span> <span class="mi">13</span><span class="p">){</span>
                <span class="nv">$year</span><span class="o">++</span><span class="p">;</span>
                <span class="nv">$month</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="nv">$month</span><span class="o">--</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$month</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
                <span class="nv">$year</span><span class="o">--</span><span class="p">;</span>
                <span class="nv">$month</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$day</span> <span class="o">+=</span> <span class="p">(</span><span class="n">_get_days_of_month</span><span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="nv">$year</span><span class="p">,</span><span class="nv">$month</span><span class="p">,</span><span class="nv">$day</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">_uru_or_not</span><span class="p">{</span><span class="c1">#閏年か否かの判定</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$year</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</>




<!--
     FILE ARCHIVED ON 21:53:28 Dec 2, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 14:34:28 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
