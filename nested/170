
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
固定長データ
DouKaku? </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20081203190621cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20081203190621cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20081203190621cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
    <!--<script src="/web/20081203190621/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20081203190621/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20081203190621js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20081203190621js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20081203190621js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20081203190621js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app13.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/170\/nested\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "3";
var displayMonth = "Dec";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/170/nested/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20081203190621" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20080331134057/http://ja.doukaku.org/170/nested/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="31 Mar 2008"><strong>MAR</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 19:06:21 Dec 3, 2008">DEC</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Jan
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20080331134057/http://ja.doukaku.org/170/nested/" title="13:40:57 Mar 31, 2008" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 19:06:21 Dec 3, 2008">3</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2007
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 19:06:21 Dec 3, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2009
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20081203190621*/http://ja.doukaku.org/170/nested/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>2 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">31 Mar 08 - 3 Dec 08</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:11:001000000001_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20081203190621/http://ja.doukaku.org/">DouKaku?</a><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png' alt=challenge>
<a href="/web/20081203190621/http://ja.doukaku.org/170/">固定長データ</a>
</h2>

    





<div class="comment" id="comment6060">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/769/" target="_top">Mymelo</a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6060/">#6060</a>(<script language="JavaScript">print_time(new Date("2008/03/24 12:19 GMT"));</script><noscript>2008/03/24 12:19 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #afff8f;">5/7=0.71</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>固定長のデータが記載されたファイルを読み込むプログラムを作成してください。読み込んだデータは、複数の値を格納できるデータ型に格納してください。</p>
<p>ファイルには、すべて ascii 文字で以下のデータが格納されています。デリミタはなく、固定長で格納されています。レコードとレコードのあいだも改行はありません。</p>
<blockquote>
<ol class="arabic simple">
<li>姓 (12文字) 文字数が足りない場合は、後ろを空白で埋めてあります。</li>
<li>名 (12文字) 文字数が足りない場合は、後ろを空白で埋めてあります。</li>
<li>性別 (F,M,Uの3種類、1文字)</li>
<li>年齢 (3桁の数字、桁数が足りない場合は、ゼロで埋めず、頭を空白で埋めてあります。</li>
<li>年 2008 固定</li>
<li>月 03 固定</li>
<li>さらに以下のデータが日付分くりかえされます。<ol class="upperalpha">
<li>日付 (01 〜 31) 2文字</li>
<li>朝食のメニュー (500文字)</li>
<li>昼食のメニュー (500文字)</li>
<li>夕食のメニュー (500文字)</li>
</ol>
</li>
</ol>
</blockquote>
<p>以上の形式のデータ500人分を読みこんで、データを複数の値を格納できるデータ型に格納してください。データに大して何か処理を行う必要はなく、すぐに破棄してかまいません。</p>
<p>この問題は、このようなファイルをどのように扱うかを知りたくて作成しました。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6060/addtag/" class="addtag" id="addtag_6060">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #afff8f;"
  >5/7=0.71</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6060"
  >-</span><span
  class="button yellow"
  id="rating_z_6060"
  >0</span><span 
  class="button green"
  id="rating_p_6060"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6060/">
  reply
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20081203190621/http://ja.doukaku.org/170/post_comment/">
post comment
</a>
</div>


<h2>Posted feedbacks - Nested</h2>
<a href="/web/20081203190621/http://ja.doukaku.org/170/flatten/">Flatten</a> 
<a href="/web/20081203190621/http://ja.doukaku.org/170/">Hidden</a> 


  

  
    





<div class="comment" id="comment6079">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/664/" target="_top">tenka</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6079/">#6079</a>(<script language="JavaScript">print_time(new Date("2008/03/28 13:30 GMT"));</script><noscript>2008/03/28 13:30 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>投稿速さ重視で</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">struct</span> <span class="nc">MenuList</span>
<span class="k">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Day</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Firstbread</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Lunch</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Dinner</span><span class="p">;</span>
<span class="k">}</span>

<span class="k">struct</span> <span class="nc">Record</span>
<span class="k">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">FirstName</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">SecondName</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Sex</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Age</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Year</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Month</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">MenuList</span><span class="p">&gt;</span> <span class="n">Menu</span><span class="p">;</span>
<span class="k">}</span>

<span class="k">class</span> <span class="nc">Program</span>
<span class="k">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">{</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="n">Record</span><span class="p">&gt;</span> <span class="n">meibo</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Record</span><span class="p">&gt;();</span>

        <span class="c">//テストデータ作成</span>
        <span class="k">using</span> <span class="p">(</span><span class="n">StreamWriter</span> <span class="n">sw</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamWriter</span><span class="p">(</span><span class="s">@&quot;C:\testdata.txt&quot;</span><span class="p">))</span>
        <span class="k">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">500</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="k">{</span>
                <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0, -12}&quot;</span><span class="p">,</span> <span class="s">&quot;Yamada&quot;</span><span class="p">);</span>
                <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0, -12}&quot;</span><span class="p">,</span> <span class="s">&quot;Tarou&quot;</span><span class="p">);</span>
                <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0,   1}&quot;</span><span class="p">,</span> <span class="s">&quot;M&quot;</span><span class="p">);</span>
                <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0,   3}&quot;</span><span class="p">,</span> <span class="s">&quot;26&quot;</span><span class="p">);</span>
                <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0,   4}&quot;</span><span class="p">,</span> <span class="s">&quot;2008&quot;</span><span class="p">);</span>
                <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0,   2}&quot;</span><span class="p">,</span> <span class="s">&quot;03&quot;</span><span class="p">);</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;=</span> <span class="m">31</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
                <span class="k">{</span>
                    <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0:00}&quot;</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>
                    <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0,-500}&quot;</span><span class="p">,</span> <span class="s">&quot;Yamada&quot;</span><span class="p">);</span>
                    <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0,-500}&quot;</span><span class="p">,</span> <span class="s">&quot;Yamada&quot;</span><span class="p">);</span>
                    <span class="n">sw</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;{0,-500}&quot;</span><span class="p">,</span> <span class="s">&quot;Yamada&quot;</span><span class="p">);</span>
                <span class="k">}</span>
            <span class="k">}</span>
            <span class="n">sw</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
        <span class="k">}</span>


        <span class="k">using</span> <span class="p">(</span><span class="n">StreamReader</span> <span class="n">sr</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="s">@&quot;C:\testdata.txt&quot;</span><span class="p">))</span>
        <span class="k">{</span>
            <span class="n">Record</span> <span class="n">temp</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(!</span><span class="n">sr</span><span class="p">.</span><span class="n">EndOfStream</span><span class="p">)</span>
            <span class="k">{</span>
                <span class="n">temp</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Record</span><span class="p">();</span>
                <span class="kt">char</span><span class="p">[]</span> <span class="n">buffer</span><span class="p">;</span>
                
                <span class="c">//性</span>
                <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">12</span><span class="p">];</span>
                <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">FirstName</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s12}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                <span class="c">//名</span>
                <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">12</span><span class="p">];</span>
                <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">SecondName</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s12}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                <span class="c">//性別</span>
                <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">1</span><span class="p">];</span>
                <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">Sex</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s1}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                <span class="c">//年齢</span>
                <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">3</span><span class="p">];</span>
                <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">Age</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0,3:s3}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
                
                <span class="c">//年</span>
                <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">4</span><span class="p">];</span>
                <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">Year</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s4}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                <span class="c">//月</span>
                <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">2</span><span class="p">];</span>
                <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">Month</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s2}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                <span class="c">//ループ</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">Menu</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">MenuList</span><span class="p">&gt;();</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">31</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                <span class="k">{</span>
                    <span class="n">MenuList</span> <span class="n">temp2</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MenuList</span><span class="p">();</span>
                    <span class="c">//日</span>
                    <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">2</span><span class="p">];</span>
                    <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                    <span class="n">temp2</span><span class="p">.</span><span class="n">Day</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s2}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                    <span class="c">//朝食</span>
                    <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">500</span><span class="p">];</span>
                    <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                    <span class="n">temp2</span><span class="p">.</span><span class="n">Firstbread</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s500}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                    <span class="c">//昼食</span>
                    <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">500</span><span class="p">];</span>
                    <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                    <span class="n">temp2</span><span class="p">.</span><span class="n">Lunch</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s500}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>


                    <span class="c">//夕食</span>
                    <span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="m">500</span><span class="p">];</span>
                    <span class="n">sr</span><span class="p">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
                    <span class="n">temp2</span><span class="p">.</span><span class="n">Dinner</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;{0:s500}&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>

                    <span class="n">temp</span><span class="p">.</span><span class="n">Menu</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">temp2</span><span class="p">);</span>
                <span class="k">}</span>

                <span class="n">meibo</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
            <span class="k">}</span>

            <span class="k">foreach</span> <span class="p">(</span><span class="n">Record</span> <span class="n">result</span> <span class="k">in</span> <span class="n">meibo</span><span class="p">)</span>
            <span class="k">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;FirstName : {0}&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">FirstName</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;SecondName : {0}&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">SecondName</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Sex : {0}&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">Sex</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Age : {0}&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">Age</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Year : {0}&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">Year</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Month : {0}&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">Month</span><span class="p">);</span>
                <span class="k">foreach</span> <span class="p">(</span><span class="n">MenuList</span> <span class="n">result2</span> <span class="k">in</span> <span class="n">result</span><span class="p">.</span><span class="n">Menu</span><span class="p">)</span>
                <span class="k">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Day : {0}&quot;</span><span class="p">,</span> <span class="n">result2</span><span class="p">.</span><span class="n">Day</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Firstbread : {0}&quot;</span><span class="p">,</span> <span class="n">result2</span><span class="p">.</span><span class="n">Firstbread</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Lunch : {0}&quot;</span><span class="p">,</span> <span class="n">result2</span><span class="p">.</span><span class="n">Lunch</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Dinner : {0}&quot;</span><span class="p">,</span> <span class="n">result2</span><span class="p">.</span><span class="n">Dinner</span><span class="p">);</span>
                <span class="k">}</span>
            <span class="k">}</span>
            <span class="n">sr</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
        <span class="k">}</span>
    <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6079/addtag/" class="addtag" id="addtag_6079">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6079/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6079/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6079"
  >-</span><span
  class="button yellow"
  id="rating_z_6079"
  >0</span><span 
  class="button green"
  id="rating_p_6079"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6079/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment6081">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6081/">#6081</a>(<script language="JavaScript">print_time(new Date("2008/03/28 14:35 GMT"));</script><noscript>2008/03/28 14:35 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>Squeak Smalltalk で。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></td><td class="code"><div class="highlight"><pre>| stream data |
stream := FileStream fileNamed: &#39;data.txt&#39;.
data := OrderedCollection new.
500 timesRepeat: [
    | record |
    record := OrderedCollection new.
    #(12 12 1 3 4 2) do: [:size | record add: (stream next: size) withBlanksTrimmed].
    1 to: 31 do: [:date |
        record add: (stream next: 2).
        3 timesRepeat: [record add: (stream next: 500) withBlanksTrimmed]].
    data add: record].
stream close.
data inspect
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6081/addtag/" class="addtag" id="addtag_6081">Tags</a>:
	
    
    <a href="/web/20081203190621/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6081/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6081/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6081"
  >-</span><span
  class="button yellow"
  id="rating_z_6081"
  >0</span><span 
  class="button green"
  id="rating_p_6081"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6081/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment6083">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6083/">#6083</a>(<script language="JavaScript">print_time(new Date("2008/03/28 15:28 GMT"));</script><noscript>2008/03/28 15:28 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  ごく普通に。<br/>しかしC系の人間にしかわからないバウンダリの痛み。<br/>このデータ仕様わざとやってるでしょ？
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagDailyMenu</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">date</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">breakfast</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">lunch</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">dinnar</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
<span class="p">}</span> <span class="n">DailyMenu</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagPerson</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">family</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">sex</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">age</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">year</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">month</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">Person</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagRecord</span> <span class="p">{</span>
    <span class="n">Person</span> <span class="n">person</span><span class="p">;</span>
    <span class="n">DailyMenu</span> <span class="n">days</span><span class="p">[</span><span class="mi">31</span><span class="p">];</span>
<span class="p">}</span> <span class="n">Record</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;data.dat&quot;</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">readlen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Record</span> <span class="n">rec</span><span class="p">;</span>

    <span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fp</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;ファイルオープン失敗</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rec</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Record</span><span class="p">));</span>
    <span class="k">while</span> <span class="p">((</span><span class="n">readlen</span> <span class="o">=</span> <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rec</span><span class="p">.</span><span class="n">person</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>

        <span class="kt">int</span> <span class="n">readlen2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">day</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">day</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">day</span> <span class="o">&lt;</span> <span class="mi">31</span><span class="p">;</span> <span class="n">day</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">readlen2</span> <span class="o">=</span> <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rec</span><span class="p">.</span><span class="n">days</span><span class="p">[</span><span class="n">day</span><span class="p">],</span> <span class="mi">1502</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">readlen2</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;ファイルがこわれています。</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">day</span> <span class="o">&lt;</span> <span class="mi">31</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;name: [%.12s %.12s] %.4s/%.2s [%.2s/%.10s/%.10s/%.10s]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
            <span class="n">rec</span><span class="p">.</span><span class="n">person</span><span class="p">.</span><span class="n">family</span><span class="p">,</span> <span class="n">rec</span><span class="p">.</span><span class="n">person</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">rec</span><span class="p">.</span><span class="n">person</span><span class="p">.</span><span class="n">year</span><span class="p">,</span> <span class="n">rec</span><span class="p">.</span><span class="n">person</span><span class="p">.</span><span class="n">month</span><span class="p">,</span>
            <span class="n">rec</span><span class="p">.</span><span class="n">days</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">date</span><span class="p">,</span> <span class="n">rec</span><span class="p">.</span><span class="n">days</span><span class="p">[</span><span class="mi">30</span><span class="p">].</span><span class="n">breakfast</span><span class="p">,</span>
            <span class="n">rec</span><span class="p">.</span><span class="n">days</span><span class="p">[</span><span class="mi">30</span><span class="p">].</span><span class="n">lunch</span><span class="p">,</span> <span class="n">rec</span><span class="p">.</span><span class="n">days</span><span class="p">[</span><span class="mi">30</span><span class="p">].</span><span class="n">dinnar</span>
            <span class="p">);</span>

        <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rec</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Record</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6083/addtag/" class="addtag" id="addtag_6083">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6083/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6083/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6083"
  >-</span><span
  class="button yellow"
  id="rating_z_6083"
  >0</span><span 
  class="button green"
  id="rating_p_6083"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081203190621/http://ja.doukaku.org/comment/6083/">
    1
    reply
  </a>

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6083/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6089">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6089/">#6089</a>(<script language="JavaScript">print_time(new Date("2008/03/28 15:54 GMT"));</script><noscript>2008/03/28 15:54 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  dinnerのつづりを素で間違えてる。。。<br/><br/>バウンダリとは、実行効率のためCのコンパイラが自動的に構造体のサイズを４バイトの整数倍にしてしまうことです。<br/>日毎の部分の本当のサイズは1502バイトですが、構造体のサイズは1504バイトになってしまい、シンプルに書くことができませんでした。<br/>本当はfreadのサイズ指定で数値ではなくsizeofを使いたかった。<br/><br/>なおRecordとPersonを分離しているのは、最初、日ごとのデータが31個固定ではなく可変数だと思い込んでいたためです。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6089/addtag/" class="addtag" id="addtag_6089">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6089"
  >-</span><span
  class="button yellow"
  id="rating_z_6089"
  >0</span><span 
  class="button green"
  id="rating_p_6089"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6083/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6089/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081203190621/http://ja.doukaku.org/comment/6089/">
    3
    replies
  </a>

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6089/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6091">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6091/">#6091</a>(<script language="JavaScript">print_time(new Date("2008/03/28 17:00 GMT"));</script><noscript>2008/03/28 17:00 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>すみません。バウンダリ関係なかった！
Personのmonthの桁数が3になっているのに気づかず混乱してしまった。
全部charだとバウンダリ関係ないんだっけ。
落ち着け俺。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6091/addtag/" class="addtag" id="addtag_6091">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6091"
  >-</span><span
  class="button yellow"
  id="rating_z_6091"
  >0</span><span 
  class="button green"
  id="rating_p_6091"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6089/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6091/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6091/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6092">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/166/" target="_top">ところてん</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6092/">#6092</a>(<script language="JavaScript">print_time(new Date("2008/03/29 01:13 GMT"));</script><noscript>2008/03/29 01:13 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>今回の問題とは関係ないですが、一応知ってるとは思いますが、知らない人のために。

#pragmaなのでコンパイラ依存ですが、4byte境界を変更することができます。

次のような構造体をsizeofすると、5になります。
また、pragma packを取り除くと、8になります。

＃BMPのローダーを書くときにお世話になったなぁ。
＃頭の'BM'って文字列のせいで、全部が2byteずつずれて・・・。</pre>
	</div>
	
	<p class="link">
	  see: <a href="/web/20081203190621/http://mag.autumn.org/Content.modf?id=20050430014843">Visual C++でアラインメントを扱う3つの機能、#pragma pack, __declspec(align(#)), __alignof演算子についてのメモ</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#pragma pack(push,1)</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">s</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">ch1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">s</span><span class="p">;</span>
<span class="cp">#pragma pack(pop)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6092/addtag/" class="addtag" id="addtag_6092">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6092/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6092/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6092"
  >-</span><span
  class="button yellow"
  id="rating_z_6092"
  >0</span><span 
  class="button green"
  id="rating_p_6092"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6089/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6092/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6092/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6096">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6096/">#6096</a>(<script language="JavaScript">print_time(new Date("2008/03/29 04:23 GMT"));</script><noscript>2008/03/29 04:23 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>最近はあまり意識しなくなってしまいましたが
固定長のデータを構造体で読み取る場合には
共用体を併用したほうが安全です。
そのままでは、ビックエンディアンのときにおかしくなってしまうと思うので。。。
無名構造体とか使用するともう少し楽にアクセスできた気がするけど
普段しようしないので忘れてしまいました^^;;</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="k">union</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">stream</span> <span class="p">[</span><span class="mi">35</span><span class="p">];</span>
    <span class="k">struct</span> <span class="n">tagDATA</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">family</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
        <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
        <span class="kt">char</span> <span class="n">sex</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">age</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kt">char</span> <span class="n">year</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="kt">char</span> <span class="n">month</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="p">}</span> <span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">head</span><span class="p">;</span>

<span class="n">read_size</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">head</span><span class="p">.</span><span class="n">stream</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">head</span><span class="p">.</span><span class="n">stream</span><span class="p">));</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6096/addtag/" class="addtag" id="addtag_6096">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6096/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6096/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6096"
  >-</span><span
  class="button yellow"
  id="rating_z_6096"
  >0</span><span 
  class="button green"
  id="rating_p_6096"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6089/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6096/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6096/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


    </div>
  


  

  
    





<div class="comment" id="comment6084">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/588/" target="_top">sekia</a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6084/">#6084</a>(<script language="JavaScript">print_time(new Date("2008/03/28 15:30 GMT"));</script><noscript>2008/03/28 15:30 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>やっつけですがunpackを使った例。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span>

<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$dat</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">@ARGV</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">open</span> <span class="nv">$dat</span><span class="p">,</span> <span class="nb">shift</span> <span class="ow">or</span> <span class="nb">die</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nv">$dat</span> <span class="o">=</span> <span class="o">\*</span><span class="bp">STDIN</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">my</span> <span class="nv">$bytes</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">@records</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">500</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">read</span> <span class="nv">$dat</span><span class="p">,</span> <span class="nv">$bytes</span><span class="p">,</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
  <span class="k">my</span> <span class="p">(</span><span class="nv">$lname</span><span class="p">,</span> <span class="nv">$fname</span><span class="p">,</span> <span class="nv">$sex</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nv">$year</span><span class="p">,</span> <span class="nv">$month</span><span class="p">)</span> <span class="o">=</span> <span class="nb">unpack</span> <span class="s">&quot;A12A12A1A3A4A2&quot;</span><span class="p">,</span> <span class="nv">$bytes</span><span class="p">;</span>
  <span class="nv">$lname</span> <span class="o">=~</span> <span class="sr">s/\s*$//</span><span class="p">;</span>
  <span class="nv">$fname</span> <span class="o">=~</span> <span class="sr">s/\s*$//</span><span class="p">;</span>
  <span class="k">my</span> <span class="nv">%record</span> <span class="o">=</span> <span class="p">(</span><span class="n">last_name</span> <span class="o">=&gt;</span> <span class="nv">$lname</span><span class="p">,</span>
             <span class="n">first_name</span> <span class="o">=&gt;</span> <span class="nv">$fname</span><span class="p">,</span>
         <span class="n">sex</span> <span class="o">=&gt;</span> <span class="nv">$sex</span><span class="p">,</span>
         <span class="n">age</span> <span class="o">=&gt;</span> <span class="nv">$age</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span>
         <span class="n">year</span> <span class="o">=&gt;</span> <span class="nv">$year</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span>
         <span class="n">month</span> <span class="o">=&gt;</span> <span class="nv">$month</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span>
         <span class="n">menues</span> <span class="o">=&gt;</span> <span class="o">[]</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">31</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">read</span> <span class="nv">$dat</span><span class="p">,</span> <span class="nv">$bytes</span><span class="p">,</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">500</span> <span class="o">+</span> <span class="mi">500</span> <span class="o">+</span> <span class="mi">500</span><span class="p">;</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$day</span><span class="p">,</span> <span class="nv">$breakfast</span><span class="p">,</span> <span class="nv">$lunch</span><span class="p">,</span> <span class="nv">$dinner</span><span class="p">)</span> <span class="o">=</span> <span class="nb">unpack</span> <span class="s">&quot;A2A500A500A500&quot;</span><span class="p">,</span> <span class="nv">$bytes</span><span class="p">;</span>
    <span class="nv">$breakfast</span> <span class="o">=~</span> <span class="sr">s/^\s*|\s*$//</span><span class="p">;</span>
    <span class="nv">$lunch</span> <span class="o">=~</span> <span class="sr">s/^\s*|\s*$//</span><span class="p">;</span>
    <span class="nv">$dinner</span> <span class="o">=~</span> <span class="sr">s/^\s*|\s*$//</span><span class="p">;</span>
    <span class="nb">push</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$record</span><span class="p">{</span><span class="n">menues</span><span class="p">}},</span> <span class="p">{</span><span class="n">day</span> <span class="o">=&gt;</span> <span class="nv">$day</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="n">breakfast</span> <span class="o">=&gt;</span> <span class="nv">$breakfast</span><span class="p">,</span>
                   <span class="n">lunch</span> <span class="o">=&gt;</span> <span class="nv">$lunch</span><span class="p">,</span>
                   <span class="n">dinner</span> <span class="o">=&gt;</span> <span class="nv">$dinner</span><span class="p">};</span>
  <span class="p">}</span>
  <span class="nb">push</span> <span class="nv">@records</span><span class="p">,</span> <span class="o">\</span><span class="nv">%record</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">#テスト出力</span>
<span class="k">use</span> <span class="nn">Data::</span><span class="n">Dumper</span><span class="p">;</span>
<span class="k">print</span> <span class="n">Dumper</span> <span class="nv">@records</span><span class="p">;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6084/addtag/" class="addtag" id="addtag_6084">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6084/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6084/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6084"
  >-</span><span
  class="button yellow"
  id="rating_z_6084"
  >0</span><span 
  class="button green"
  id="rating_p_6084"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081203190621/http://ja.doukaku.org/comment/6084/">
    1
    reply
  </a>

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6084/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6088">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/588/" target="_top">sekia</a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6088/">#6088</a>(<script language="JavaScript">print_time(new Date("2008/03/28 15:47 GMT"));</script><noscript>2008/03/28 15:47 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>ついでにテストデータ生成スクリプトを貼っておきます。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span>

<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">@lnames</span> <span class="o">=</span> <span class="nb">map</span> <span class="p">{</span> <span class="nb">sprintf</span> <span class="s">&quot;%-12s&quot;</span><span class="p">,</span> <span class="nv">$_</span> <span class="p">}</span> <span class="n">qw</span><span class="sr">/Foo Bar Baz Jim Bob Beth Cathy/</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">@fnames</span> <span class="o">=</span>
  <span class="nb">map</span> <span class="p">{</span> <span class="nb">sprintf</span> <span class="s">&quot;%-12s&quot;</span><span class="p">,</span> <span class="nv">$_</span> <span class="p">}</span> <span class="n">qw</span><span class="sr">/Hoge Fuga Piyo Jacson Page McDonald Hamond/</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">@sexes</span> <span class="o">=</span> <span class="n">qw</span><span class="sr">/F M U/</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">@ages</span> <span class="o">=</span> <span class="nb">map</span> <span class="p">{</span> <span class="nb">sprintf</span> <span class="s">&quot;%03d&quot;</span><span class="p">,</span> <span class="nv">$_</span> <span class="p">}</span> <span class="mi">0</span> <span class="o">..</span> <span class="mi">999</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">@dishes</span> <span class="o">=</span>
  <span class="nb">map</span> <span class="p">{</span> <span class="nb">sprintf</span> <span class="s">&quot;%-500s&quot;</span><span class="p">,</span> <span class="nv">$_</span> <span class="p">}</span>
  <span class="n">qw</span><span class="o">/</span><span class="n">BaconEgg</span> <span class="n">Coffee</span> <span class="n">HamEgg</span> <span class="n">BoiledEgg</span> <span class="n">EggInBasket</span> <span class="n">Udon</span> <span class="n">Steak</span>
  <span class="n">SunnySideUp</span> <span class="n">Onigiri</span> <span class="n">Ramen</span><span class="o">/</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">randomint</span> <span class="p">{</span> <span class="nb">int</span> <span class="nb">rand</span> <span class="nb">shift</span> <span class="p">}</span>

<span class="k">for</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">500</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="nv">$lnames</span><span class="p">[</span> <span class="n">randomint</span><span class="p">(</span> <span class="nb">scalar</span> <span class="nv">@fnames</span> <span class="p">)</span> <span class="p">],</span>
      <span class="nv">$fnames</span><span class="p">[</span> <span class="n">randomint</span><span class="p">(</span> <span class="nb">scalar</span> <span class="nv">@lnames</span> <span class="p">)</span> <span class="p">],</span>
      <span class="nv">$sexes</span><span class="p">[</span> <span class="n">randomint</span><span class="p">(</span> <span class="nb">scalar</span> <span class="nv">@sexes</span> <span class="p">)</span> <span class="p">],</span> <span class="nv">$ages</span><span class="p">[</span> <span class="n">randomint</span><span class="p">(</span> <span class="nb">scalar</span> <span class="nv">@ages</span> <span class="p">)</span> <span class="p">],</span>
      <span class="s">&quot;200803&quot;</span><span class="p">;</span>
    <span class="k">for</span> <span class="k">my</span> <span class="nv">$day</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">31</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$day</span> <span class="o">=</span> <span class="nb">sprintf</span> <span class="s">&quot;%02d&quot;</span><span class="p">,</span> <span class="nv">$day</span><span class="p">;</span>
        <span class="k">print</span> <span class="nv">$day</span><span class="p">,</span> <span class="nv">$dishes</span><span class="p">[</span> <span class="n">randomint</span><span class="p">(</span> <span class="nb">scalar</span> <span class="nv">@dishes</span> <span class="p">)</span> <span class="p">],</span>
          <span class="nv">$dishes</span><span class="p">[</span> <span class="n">randomint</span><span class="p">(</span> <span class="nb">scalar</span> <span class="nv">@dishes</span> <span class="p">)</span> <span class="p">],</span>
          <span class="nv">$dishes</span><span class="p">[</span> <span class="n">randomint</span><span class="p">(</span> <span class="nb">scalar</span> <span class="nv">@dishes</span> <span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6088/addtag/" class="addtag" id="addtag_6088">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6088/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6088/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6088"
  >-</span><span
  class="button yellow"
  id="rating_z_6088"
  >0</span><span 
  class="button green"
  id="rating_p_6088"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6084/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6088/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6088/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


  

  
    





<div class="comment" id="comment6085">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/570/" target="_top">horiuchi</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6085/">#6085</a>(<script language="JavaScript">print_time(new Date("2008/03/28 15:35 GMT"));</script><noscript>2008/03/28 15:35 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>とりあえず、こんな感じで。
ちゃんとやるなら、ReadとWriteの処理はRecordとセットのクラスを用意するかも。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.BufferedWriter</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.OutputStreamWriter</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.Reader</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.Writer</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Sample170</span> <span class="o">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">final</span> <span class="n">String</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s">&quot;MS932&quot;</span><span class="o">;</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">final</span> <span class="n">String</span> <span class="n">FILE_NAME</span> <span class="o">=</span> <span class="s">&quot;record.dat&quot;</span><span class="o">;</span>
    
    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">createTestData</span><span class="o">(</span><span class="n">FILE_NAME</span><span class="o">);</span>

            <span class="n">List</span><span class="o">&lt;</span><span class="n">Record</span><span class="o">&gt;</span> <span class="n">records</span> <span class="o">=</span> <span class="n">readData</span><span class="o">(</span><span class="n">FILE_NAME</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">records</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Record</span><span class="o">&gt;</span> <span class="n">readData</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">)</span> <span class="k">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">Reader</span> <span class="n">reader</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">fileName</span><span class="o">),</span> <span class="n">encoding</span><span class="o">));</span>
            <span class="n">List</span><span class="o">&lt;</span><span class="n">Record</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Record</span><span class="o">&gt;();</span>
            <span class="kt">char</span><span class="o">[]</span> <span class="n">smallBuf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="mi">12</span><span class="o">];</span>
            <span class="kt">char</span><span class="o">[]</span> <span class="n">menuBuf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="mi">500</span><span class="o">];</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">Record</span> <span class="n">record</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Record</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                <span class="n">record</span><span class="o">.</span><span class="na">familyName</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                <span class="n">record</span><span class="o">.</span><span class="na">firstName</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span> <span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                <span class="n">record</span><span class="o">.</span><span class="na">sex</span> <span class="o">=</span> <span class="n">Record</span><span class="o">.</span><span class="na">Sex</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">[</span><span class="mi">0</span><span class="o">]));</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span> <span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                <span class="n">record</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
                
                <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span> <span class="o">,</span> <span class="mi">4</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                <span class="kt">int</span> <span class="n">year</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">4</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span> <span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                <span class="kt">int</span> <span class="n">month</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="mi">31</span><span class="o">;</span> <span class="n">index</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="n">MenuData</span> <span class="n">menu</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MenuData</span><span class="o">();</span>
                    <span class="n">menu</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
                    <span class="n">menu</span><span class="o">.</span><span class="na">month</span> <span class="o">=</span> <span class="n">month</span><span class="o">;</span>
                    
                    <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span> <span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                    <span class="n">menu</span><span class="o">.</span><span class="na">day</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">smallBuf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">menuBuf</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                    <span class="n">menu</span><span class="o">.</span><span class="na">breakfast</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">menuBuf</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">menuBuf</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                    <span class="n">menu</span><span class="o">.</span><span class="na">lunch</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">menuBuf</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">menuBuf</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
                    <span class="n">menu</span><span class="o">.</span><span class="na">dinner</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">menuBuf</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">record</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">reader</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">createTestData</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">)</span> <span class="k">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">Writer</span> <span class="n">writer</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">OutputStreamWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">fileName</span><span class="o">),</span> <span class="n">encoding</span><span class="o">));</span>
            <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
            <span class="n">Record</span><span class="o">.</span><span class="na">Sex</span><span class="o">[]</span> <span class="n">sexValues</span> <span class="o">=</span> <span class="n">Record</span><span class="o">.</span><span class="na">Sex</span><span class="o">.</span><span class="na">values</span><span class="o">();</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">500</span><span class="o">;</span> <span class="n">index</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%-12s&quot;</span><span class="o">,</span> <span class="s">&quot;FamilyName&quot;</span><span class="o">));</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%-12s&quot;</span><span class="o">,</span> <span class="s">&quot;FirstName&quot;</span><span class="o">));</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">sexValues</span><span class="o">[</span><span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">sexValues</span><span class="o">.</span><span class="na">length</span><span class="o">)].</span><span class="na">toString</span><span class="o">());</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%3d&quot;</span><span class="o">,</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">120</span><span class="o">)));</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;2008&quot;</span><span class="o">);</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;03&quot;</span><span class="o">);</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">day</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">day</span> <span class="o">&lt;=</span> <span class="mi">31</span><span class="o">;</span> <span class="n">day</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%02d&quot;</span><span class="o">,</span> <span class="n">day</span><span class="o">));</span>
                    <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%-500s&quot;</span><span class="o">,</span> <span class="s">&quot;breakfast menu.&quot;</span><span class="o">));</span>
                    <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%-500s&quot;</span><span class="o">,</span> <span class="s">&quot;lunch menu.&quot;</span><span class="o">));</span>
                    <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%-500s&quot;</span><span class="o">,</span> <span class="s">&quot;dinner menu.&quot;</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span>

        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">writer</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">Record</span> <span class="o">{</span>
    <span class="k">public</span> <span class="k">enum</span> <span class="n">Sex</span> <span class="o">{</span>
        <span class="n">F</span><span class="o">,</span> <span class="n">M</span><span class="o">,</span> <span class="n">U</span><span class="o">,</span>
    <span class="o">}</span>
    <span class="k">public</span> <span class="n">String</span> <span class="n">familyName</span><span class="o">;</span>
    <span class="k">public</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>
    <span class="k">public</span> <span class="n">Sex</span> <span class="n">sex</span><span class="o">;</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    <span class="k">public</span> <span class="k">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MenuData</span><span class="o">&gt;</span> <span class="n">menuList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">MenuData</span><span class="o">&gt;();</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">MenuData</span> <span class="o">{</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">month</span><span class="o">;</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">day</span><span class="o">;</span>
    <span class="k">public</span> <span class="n">String</span> <span class="n">breakfast</span><span class="o">;</span>
    <span class="k">public</span> <span class="n">String</span> <span class="n">lunch</span><span class="o">;</span>
    <span class="k">public</span> <span class="n">String</span> <span class="n">dinner</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6085/addtag/" class="addtag" id="addtag_6085">Tags</a>:
	
    
    <a href="/web/20081203190621/http://ja.doukaku.org/tag/Java1.5/">Java1.5</a>
    
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6085/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6085/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6085"
  >-</span><span
  class="button yellow"
  id="rating_z_6085"
  >0</span><span 
  class="button green"
  id="rating_p_6085"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6085/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  
    





<div class="comment" id="comment6086">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6086/">#6086</a>(<script language="JavaScript">print_time(new Date("2008/03/28 15:36 GMT"));</script><noscript>2008/03/28 15:36 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>エラー処理をはしょればこんなかんじ?
あと、31日固定として。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">menu_</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">date</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">breakfast</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">lunch</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">supper</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
<span class="p">}</span> <span class="n">menu_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">fixed_</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">last_name</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">first_name</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">gender</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">age</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">year</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">month</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="n">menu_t</span> <span class="n">menus</span><span class="p">[</span><span class="mi">31</span><span class="p">];</span>
<span class="p">}</span> <span class="n">fixed_t</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">FILE</span> <span class="o">*</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
  <span class="n">fixed_t</span> <span class="n">fixed</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">500</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fixed</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">fixed_t</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6086/addtag/" class="addtag" id="addtag_6086">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6086/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6086/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6086"
  >-</span><span
  class="button yellow"
  id="rating_z_6086"
  >0</span><span 
  class="button green"
  id="rating_p_6086"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081203190621/http://ja.doukaku.org/comment/6086/">
    2
    replies
  </a>

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6086/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6087">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/718/" target="_top">mootoh</a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6087/">#6087</a>(<script language="JavaScript">print_time(new Date("2008/03/28 15:37 GMT"));</script><noscript>2008/03/28 15:37 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>匿名で書いてしまいました。mootohです。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6087/addtag/" class="addtag" id="addtag_6087">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6087"
  >-</span><span
  class="button yellow"
  id="rating_z_6087"
  >0</span><span 
  class="button green"
  id="rating_p_6087"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6086/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6087/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6087/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6098">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6098/">#6098</a>(<script language="JavaScript">print_time(new Date("2008/03/29 11:56 GMT"));</script><noscript>2008/03/29 11:56 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>構造体に属する変数が詰まっている保証はないので、例えば4バイトアラインを基本とする処理系だったら、monthとmenusの間に1バイト使われない領域が入ってしまい、入力データのサイズと構造体のsizeofが一致しないかと。
もちろんこのコンパイラにこのオプション付ければ動く、というのはあるかもしれませんが、それはそれでタグを付けていただきたいところです。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6098/addtag/" class="addtag" id="addtag_6098">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6098"
  >-</span><span
  class="button yellow"
  id="rating_z_6098"
  >0</span><span 
  class="button green"
  id="rating_p_6098"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6086/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6098/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081203190621/http://ja.doukaku.org/comment/6098/">
    1
    reply
  </a>

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6098/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6099">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/380/" target="_top">vtwntmtn</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6099/">#6099</a>(<script language="JavaScript">print_time(new Date("2008/03/29 12:05 GMT"));</script><noscript>2008/03/29 12:05 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>#6098書いた者ですが、これ嘘？charのみを使ってるとアライメントされない？</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6099/addtag/" class="addtag" id="addtag_6099">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6099"
  >-</span><span
  class="button yellow"
  id="rating_z_6099"
  >0</span><span 
  class="button green"
  id="rating_p_6099"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6098/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6099/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081203190621/http://ja.doukaku.org/comment/6099/">
    2
    replies
  </a>

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6099/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6106">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6106/">#6106</a>(<script language="JavaScript">print_time(new Date("2008/03/29 17:41 GMT"));</script><noscript>2008/03/29 17:41 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/other/">
	  Other
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  構造体はアライメントの対象になりますが、メンバが全てcharの場合は別です。<br/><br/>自分の理解不足に嘆いて、サンプルを作ってみました。<br/>＜結果＞*VC2005で確認<br/>sizeof&nbsp;A&nbsp;=&nbsp;8<br/>sizeof&nbsp;B&nbsp;=&nbsp;5<br/>sizeof&nbsp;C&nbsp;=&nbsp;16<br/>sizeof&nbsp;D&nbsp;=&nbsp;16<br/>sizeof&nbsp;E&nbsp;=&nbsp;10<br/>sizeof&nbsp;F&nbsp;=&nbsp;24<br/><br/>いまいち釈然としなかったですが、参考ページの「配列にしたときにバイト境界をまたがないように、最小限のパディングが入れられる」という説明を読んでやっと納得できた気がします。
	</div>
	
	<p class="link">
	  see: <a href="/web/20081203190621/http://www.g-ishihara.com/c_st_01.htm"></a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></td><td class="code"><div class="highlight"><pre>#include &lt;stdio.h&gt;

struct A {
    char c[2];  /* |c c|   | */
    int n;      /* |n n n n| */
};
struct B {
    char c[2];  /* |c c|d d| */
    char d[3];  /* |d|     | */
};
struct C { /* AとBの後ろに詰め物 */
    struct A a;
    struct B b;
};
struct D { /* AとBの後ろに詰め物 */
    struct B b;
    struct A a;
};
struct E { /* こいつは10バイトにみっちり詰まる */
    struct B b1;
    struct B b2;
};
struct F {
    char c[3];  /* |c c c| | */
    short s;    /* |s s|   | */
    int n;      /* |n n n n| */
    short t;    /* |t t|d d| */
    char d[3];  /* |d|     | */
    char *p;    /* |p p p p| */
};

int main(void) {
    printf(&quot;sizeof A = %d\n&quot;, sizeof(struct A));
    printf(&quot;sizeof B = %d\n&quot;, sizeof(struct B));
    printf(&quot;sizeof C = %d\n&quot;, sizeof(struct C));
    printf(&quot;sizeof D = %d\n&quot;, sizeof(struct D));
    printf(&quot;sizeof E = %d\n&quot;, sizeof(struct E));
    printf(&quot;sizeof F = %d\n&quot;, sizeof(struct F));
    return 0;
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6106/addtag/" class="addtag" id="addtag_6106">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/other/">
		Other
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6106/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6106/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6106"
  >-</span><span
  class="button yellow"
  id="rating_z_6106"
  >0</span><span 
  class="button green"
  id="rating_p_6106"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6099/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6106/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081203190621/http://ja.doukaku.org/comment/6106/">
    1
    reply
  </a>

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6106/">
  reply
  </a>]
  </div>
</div>
</div>




  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6114">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/380/" target="_top">vtwntmtn</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6114/">#6114</a>(<script language="JavaScript">print_time(new Date("2008/03/30 14:14 GMT"));</script><noscript>2008/03/30 14:14 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>わざわざありがとうございます。理解が曖昧なまま投稿してはいけませんねorz</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6114/addtag/" class="addtag" id="addtag_6114">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6114"
  >-</span><span
  class="button yellow"
  id="rating_z_6114"
  >0</span><span 
  class="button green"
  id="rating_p_6114"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6106/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6114/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6114/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      





<div class="comment" id="comment6107">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6107/">#6107</a>(<script language="JavaScript">print_time(new Date("2008/03/29 17:46 GMT"));</script><noscript>2008/03/29 17:46 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>またもや参考サイトのリンクに失敗。。。
もしかしてページタイトル必須なのか？
つまらないことでレスを伸ばしてすみません。。。</p>

	</div>
	
	<p class="link">
	  see: <a href="/web/20081203190621/http://www.g-ishihara.com/c_st_01.htm">構造体のサイズとアライメント</a>
	</p>  
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6107/addtag/" class="addtag" id="addtag_6107">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6107"
  >-</span><span
  class="button yellow"
  id="rating_z_6107"
  >0</span><span 
  class="button green"
  id="rating_p_6107"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6099/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081203190621/http://ja.doukaku.org/comment/6107/root/"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6107/">
  reply
  </a>]
  </div>
</div>
</div>




  


    </div>
  


    </div>
  


    </div>
  


  

  

  

  

  
    





<div class="comment" id="comment6090">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6090/">#6090</a>(<script language="JavaScript">print_time(new Date("2008/03/28 16:14 GMT"));</script><noscript>2008/03/28 16:14 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>COBOLで書くべきお題がついにきましたね（笑</p>
<p>読み込み処理はfromStringです。テストデータ作成用にtoStringを作成しています。</p>
<p>matchというのが予約語なので、「match」というメソッドが素直に呼び出せないという･･･</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><div class="highlight"><pre>import java.io._
import java.util.Scanner
import java.util.regex._
import scala.io._

object Meal {
  def fromString(text:String) = {
    val scanner = new Scanner(text)
    scanner.findInLine(&quot;^(.{12})(.{12})(.{1})(.{3})(.{4})(.{2})
                         (.{2})(.{500})(.{500})(.{500})$&quot;)
    val data = classOf[Scanner].getMethod(&quot;match&quot;,null).
               invoke(scanner,null).  asInstanceOf[MatchResult].group _:int=&gt;String
    new Meal( data(1).trim, data(2).trim, data(3)(0), data(4).trim.toInt,
              data(5).trim.toInt, data(6).trim.toInt, data(7).trim.toInt, 
              data(8), data(9), data(10))
  }
}

class Meal 
  (var lastName:String, var firstName:String, var sex:char, 
   var age:int, var year:int, var month:int, var day:int,
   var breakfast:String, var lunch:String, var dinner:String) {

  def format(template:String, arg:Any*) = {
    String.format(template, arg.map(_.asInstanceOf[AnyRef]).toArray)
  }

  override def toString = {
    format(&quot;%-12s%-12s%c%3d%04d%02d%02d%-500s%-500s%-500s\n&quot;,
           lastName, firstName, sex, age, year, month, day,
           breakfast, lunch, dinner)
  }

}

Source.fromFile(&quot;test.txt&quot;).getLines.take(500) foreach Meal.fromString
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6090/addtag/" class="addtag" id="addtag_6090">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081203190621/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6090/download/">
		download code
      </a>]
	  [<a href="/web/20081203190621/http://ja.doukaku.org/comment/6090/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6090"
  >-</span><span
  class="button yellow"
  id="rating_z_6090"
  >0</span><span 
  class="button green"
  id="rating_p_6090"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081203190621/http://ja.doukaku.org/170/reply_to/6090/">
  reply
  </a>]
  </div>
</div>
</div>




  


  

  

  

  
    





<div class="comment" id="comment6093">
  <p class="banner"><a href="/web/20081203190621/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081203190621/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081203190621im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081203190621/http://ja.doukaku.org/comment/6093/">#6093</a>(<script language="JavaScript">print_time(new Date("2008/03/29 02:35 GMT"));</script><noscript>2008/03/29 02:35 GMT</noscript>)
	
	
	
	[<a href="/web/20081203190621/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <p>メモリ上の構造≠ファイル上の構造の前提で書きました。
予想以上にstreamの扱いに苦戦。streamと固定長データは相性が良くない…というより、わたしがstreamを使い切れていないというのが正解かも。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;iomanip&gt;</span>
<span class="cp">#include &lt;string&gt;</span>
<span class="cp">#include &lt;vector&gt;</span>
<span class="cp">#include &lt;iterator&gt;</span>

<span class="k">struct</span> <span class="n">Menu</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">date</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">breakfast</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">lunch</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">dinner</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Menu</span><span class="o">&gt;</span> <span class="n">Menus</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Record</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">lastName</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">firstName</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">sex</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">age</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">year</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">month</span><span class="p">;</span>
    <span class="n">Menus</span>       <span class="n">menus</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">std</span><span class="o">::</span><span class="n">istream</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">istream</span><span class="o">&amp;</span> <span class="n">in</span><span class="p">,</span> <span class="n">Menu</span><span class="o">&amp;</span> <span class="n">menu</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">s</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>   <span class="n">menu</span><span class="p">.</span><span class="n">date</span>      <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span> <span class="n">menu</span><span class="p">.</span><span class="n">breakfast</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span> <span class="n">menu</span><span class="p">.</span><span class="n">lunch</span>     <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span> <span class="n">menu</span><span class="p">.</span><span class="n">dinner</span>    <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">in</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">istream</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">istream</span><span class="o">&amp;</span> <span class="n">in</span><span class="p">,</span> <span class="n">Record</span><span class="o">&amp;</span> <span class="n">record</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">s</span><span class="p">[</span><span class="mi">500</span><span class="p">];</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span> <span class="n">record</span><span class="p">.</span><span class="n">lastName</span>  <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span> <span class="n">record</span><span class="p">.</span><span class="n">firstName</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span>  <span class="mi">1</span><span class="p">);</span> <span class="n">record</span><span class="p">.</span><span class="n">sex</span>       <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span>  <span class="mi">1</span><span class="p">);</span>
    <span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">s</span><span class="p">,</span>  <span class="mi">3</span><span class="p">);</span> <span class="n">record</span><span class="p">.</span><span class="n">age</span>       <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">s</span><span class="p">,</span>  <span class="mi">3</span><span class="p">




<!--
     FILE ARCHIVED ON 19:06:21 Dec 3, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 14:46:11 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
