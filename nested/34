
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
トランプの和と積のパズル
どう書く？org </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20101210164636cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20101210164636cs_/http://ja.doukaku.org/static/style/style.css" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20101210164636cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
    <!--<script src="/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<script src="/web/20101210164636js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20101210164636js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20101210164636js_/http://ja.doukaku.org/static/js/addtag.js" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20101210164636js_/http://ja.doukaku.org/static/js/utils.js" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app11.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/34\/nested\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "10";
var displayMonth = "Dec";
var displayYear = "2010";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/34/nested/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20101210164636" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20101110022152/http://ja.doukaku.org/34/nested/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="10 Nov 2010"><strong>NOV</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 16:46:36 Dec 10, 2010">DEC</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Jan
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20101110022152/http://ja.doukaku.org/34/nested/" title="2:21:52 Nov 10, 2010" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 16:46:36 Dec 10, 2010">10</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20080406175311/http://ja.doukaku.org/34/nested/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="6 Apr 2008"><strong>2008</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 16:46:36 Dec 10, 2010">2010</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2011
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20101210164636*/http://ja.doukaku.org/34/nested/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>7 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">13 May 07 - 10 Dec 10</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000010000000_2008:-1:010100000000_2009:-1:000000000000_2010:11:000000000022_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20101210164636/http://ja.doukaku.org/">どう書く？org</a><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20101210164636im_/http://ja.doukaku.org/static/image/star_gold.png' alt=challenge>
<a href="/web/20101210164636/http://ja.doukaku.org/34/">トランプの和と積のパズル</a>
</h2>

    




<div class="comment" id="comment3390"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/564/" target="_top">herumi</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3390/">#3390</a>(<script language="JavaScript">print_time(new Date("2007/07/29 01:51 GMT"));</script><noscript>2007/07/29 01:51 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre>
ここにトランプが一組あります．
司会者がそこから二枚抜いて，その積をAさんに，その和をBさんに教えました．

#トランプにジョーカーはなく、1～13までの数字が書かれたカードであると考えて構いません．
#たとえば，二枚のトランプの数字が2と5なら，Aさんには10，Bさんには7を教えます．
#二つの数は同じかもしれません．

司会者がAさん，Bさんに二つの数字が分かるかと質問しました．
Aさん「(この情報だけでは)分かりません」
Bさん「私も分かりません．ただ，Aさんが『分かりません』というのは分かっていました」
それを聞いたAさん「それなら，分かりました」
それを聞いたBさん「それなら，私も分かりました」
元の二つの数はなんだったのでしょうか．
</pre>
この「2つの数」を求めるプログラムを作ってください。解が複数個ある場合はすべて求めてください。
このお題は光成さんの投稿が元になっています。ご投稿ありがとうございます。

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3390/addtag/" class="addtag" id="addtag_3390">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3390"
  >-</span><span
  class="button yellow"
  id="rating_z_3390"
  >0</span><span 
  class="button green"
  id="rating_p_3390"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/3390/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://reply_to/3390/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3627"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/490/" target="_top">ぴょん</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3627/">#3627</a>(<script language="JavaScript">print_time(new Date("2007/10/31 12:01 GMT"));</script><noscript>2007/10/31 12:01 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>Perl が無かったので取り敢えず。
ぜんぜんフラットですが。
三番目の四番目の条件を誤った理解をして
悩みました。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103</pre></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">solve</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$ceil</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="c1"># 一番目と二番目の条件から組み合わせを絞り込む。</span>
    <span class="k">my</span> <span class="nv">$pairs</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
    <span class="p">{</span>
        <span class="c1"># 最初に二人が取り得る組み合わせ。</span>
        <span class="k">my</span> <span class="nv">$la</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="k">my</span> <span class="nv">$lb</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;=</span> <span class="nv">$ceil</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">my</span> <span class="nv">$j</span> <span class="o">=</span> <span class="nv">$i</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;=</span> <span class="nv">$ceil</span><span class="p">;</span> <span class="nv">$j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nv">$i</span> <span class="o">*</span> <span class="nv">$j</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$la</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">})</span> <span class="p">{</span>
                    <span class="nv">$la</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">}[</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$la</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">}}</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$i</span><span class="p">,</span> <span class="nv">$j</span><span class="p">];</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nv">$la</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">=</span> <span class="p">[[</span><span class="nv">$i</span><span class="p">,</span> <span class="nv">$j</span><span class="p">]];</span>
                <span class="p">}</span>
                <span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$i</span> <span class="o">+</span> <span class="nv">$j</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">})</span> <span class="p">{</span>
                    <span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">}[</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">}}</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$i</span><span class="p">,</span> <span class="nv">$j</span><span class="p">];</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">=</span> <span class="p">[[</span><span class="nv">$i</span><span class="p">,</span> <span class="nv">$j</span><span class="p">]];</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1"># A さんも B さんも教えられた数字(積と和)から</span>
        <span class="c1"># 判定出来ない。</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$k</span> <span class="p">(</span><span class="nb">keys</span><span class="p">(</span><span class="nv">%</span><span class="p">{</span><span class="nv">$la</span><span class="p">}))</span> <span class="p">{</span>
            <span class="nb">delete</span><span class="p">(</span><span class="nv">$la</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$k</span><span class="p">})</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$la</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$k</span><span class="p">}}</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$k</span> <span class="p">(</span><span class="nb">keys</span><span class="p">(</span><span class="nv">%</span><span class="p">{</span><span class="nv">$lb</span><span class="p">}))</span> <span class="p">{</span>
            <span class="nb">delete</span><span class="p">(</span><span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$k</span><span class="p">})</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$k</span><span class="p">}}</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1"># B さんは A が判定不能だと云う事を判っていた。</span>
        <span class="c1"># つまり和を分解して得られる組み合わせの全てに於いて、</span>
        <span class="c1"># その積の取り得る組み合わせが複数在ると云う事。</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$k</span> <span class="p">(</span><span class="nb">keys</span><span class="p">(</span><span class="nv">%</span><span class="p">{</span><span class="nv">$lb</span><span class="p">}))</span> <span class="p">{</span>
            <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$k</span><span class="p">}})</span> <span class="p">{</span>
                <span class="p">(</span><span class="nv">$la</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]})</span> <span class="o">||</span> <span class="nb">delete</span><span class="p">(</span><span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$k</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$k</span> <span class="p">(</span><span class="nb">keys</span><span class="p">(</span><span class="nv">%</span><span class="p">{</span><span class="nv">$lb</span><span class="p">}))</span> <span class="p">{</span>
            <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$lb</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$k</span><span class="p">}})</span> <span class="p">{</span>
                <span class="nv">$pairs</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$pairs</span><span class="p">}</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$e</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># それを聞いた A さんは判ったのであるから、</span>
    <span class="c1"># 残りの組み合わせに積の重複は無い筈。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">$t</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$pairs</span><span class="p">})</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span><span class="o">++</span> <span class="o">||</span> <span class="p">(</span><span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">my</span> <span class="nv">$r</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$pairs</span><span class="p">})</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">(</span><span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$r</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$r</span><span class="p">}</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$e</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$pairs</span> <span class="o">=</span> <span class="nv">$r</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># A さんが判ったと聞いた B さんも判つたので、</span>
    <span class="c1"># 残りの組み合わせに和の重複は無い筈。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">$t</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$pairs</span><span class="p">})</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">&amp;&amp;</span> <span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span><span class="o">++</span> <span class="o">||</span> <span class="p">(</span><span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">my</span> <span class="nv">$r</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$pairs</span><span class="p">})</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">(</span><span class="nv">$t</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$r</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$r</span><span class="p">}</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$e</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$pairs</span> <span class="o">=</span> <span class="nv">$r</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$pairs</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">foreach</span> <span class="k">my</span> <span class="nv">$n</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;%4d: &quot;</span><span class="p">,</span> <span class="nv">$n</span><span class="p">);</span>
    <span class="k">my</span> <span class="nv">$e</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">solve</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$e</span><span class="p">})</span> <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;None&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$f</span> <span class="p">(</span><span class="nb">sort</span> <span class="p">{(</span><span class="nv">$a</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nv">$a</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$e</span><span class="p">})</span> <span class="p">{</span>
            <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;[%2d, %2d], &quot;</span><span class="p">,</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$f</span><span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3627/addtag/" class="addtag" id="addtag_3627">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3627/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3627/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3627"
  >-</span><span
  class="button yellow"
  id="rating_z_3627"
  >0</span><span 
  class="button green"
  id="rating_p_3627"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3390/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3627/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/3627/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3627/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3629"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/490/" target="_top">ぴょん</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3629/">#3629</a>(<script language="JavaScript">print_time(new Date("2007/10/31 13:33 GMT"));</script><noscript>2007/10/31 13:33 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>汚かったので書き直しました。
これから他の人の解答をよんで勉強します。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">_p</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">_s</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span> <span class="p">}</span>
<span class="k">sub </span><span class="nf">_c</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nv">$a</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nv">$a</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="p">}</span>

<span class="k">sub </span><span class="nf">solve</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$ceil</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">@pairs</span><span class="p">;</span> <span class="c1"># 組み合わせのリスト。</span>
    <span class="k">my</span> <span class="nv">%pdup</span><span class="p">;</span>  <span class="c1"># 積の重複度。</span>
    <span class="k">my</span> <span class="nv">%sdup</span><span class="p">;</span>  <span class="c1"># 和の重複度。</span>

    <span class="c1"># 初期状態。全ての組み合わせと、積・和の重複度を求める。</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;=</span> <span class="nv">$ceil</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">my</span> <span class="nv">$j</span> <span class="o">=</span> <span class="nv">$i</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;=</span> <span class="nv">$ceil</span><span class="p">;</span> <span class="nv">$j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">my</span> <span class="nv">$e</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$i</span><span class="p">,</span> <span class="nv">$j</span><span class="p">];</span>
                <span class="nb">push</span><span class="p">(</span><span class="nv">@pairs</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
                <span class="nv">$pdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span> <span class="o">=</span> <span class="o">[]</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$pdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)});</span>
                <span class="nv">$sdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span> <span class="o">=</span> <span class="o">[]</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$sdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)});</span>
                <span class="nv">$pdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}[</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$pdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}}</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$e</span><span class="p">;</span>
                <span class="nv">$sdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}[</span><span class="nv">$#</span><span class="p">{</span><span class="nv">$sdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}}</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$e</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># (1) A さんも B さんも教えられた数字(積と和)から判定出来ない。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">@tmp</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$pdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
            <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$sdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nb">push</span><span class="p">(</span><span class="nv">@tmp</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nv">@pairs</span> <span class="o">=</span> <span class="nv">@tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># (2) B さんは A が判定不能だと云う事を判っていた。</span>
    <span class="c1"># つまり和を分解して得られる組み合わせの全てに於いて、</span>
    <span class="c1"># その積の取り得る組み合わせが複数在ると云う事。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">@tmp</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$is_exclude</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$f</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$sdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}}){</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="nv">$pdup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$f</span><span class="p">)}}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$is_exclude</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="k">last</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nb">push</span><span class="p">(</span><span class="nv">@tmp</span><span class="p">,</span> <span class="nv">$e</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$is_exclude</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nv">@pairs</span> <span class="o">=</span> <span class="nv">@tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># (3) それを聞いた A さんは判ったのであるから、</span>
    <span class="c1"># 残りの組み合わせに積の重複は無い筈。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">@tmp</span><span class="p">;</span>
        <span class="k">my</span> <span class="nv">%dup</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)});</span>
            <span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">push</span><span class="p">(</span><span class="nv">@tmp</span><span class="p">,</span> <span class="nv">$e</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_p</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nv">@pairs</span> <span class="o">=</span> <span class="nv">@tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># (4) A さんが判ったと聞いた B さんも判つたので、</span>
    <span class="c1"># 残りの組み合わせに和の重複は無い筈。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">@tmp</span><span class="p">;</span>
        <span class="k">my</span> <span class="nv">%dup</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)});</span>
            <span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">push</span><span class="p">(</span><span class="nv">@tmp</span><span class="p">,</span> <span class="nv">$e</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$dup</span><span class="p">{</span><span class="o">&amp;</span><span class="n">_s</span><span class="p">(</span><span class="nv">$e</span><span class="p">)}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nv">@pairs</span> <span class="o">=</span> <span class="nv">@tmp</span><span class="p">;;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">@pairs</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">foreach</span> <span class="k">my</span> <span class="nv">$n</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;%4d: &quot;</span><span class="p">,</span> <span class="nv">$n</span><span class="p">);</span>
    <span class="k">my</span> <span class="nv">@pairs</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">solve</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;None&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nb">sort</span> <span class="n">_c</span> <span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;[%2d, %2d], &quot;</span><span class="p">,</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$e</span><span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3629/addtag/" class="addtag" id="addtag_3629">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3629/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3629/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3629"
  >-</span><span
  class="button yellow"
  id="rating_z_3629"
  >0</span><span 
  class="button green"
  id="rating_p_3629"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3627/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3629/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/3629/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3629/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3639"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/490/" target="_top">ぴょん</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3639/">#3639</a>(<script language="JavaScript">print_time(new Date("2007/10/31 20:42 GMT"));</script><noscript>2007/10/31 20:42 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>まとめられるループをまとめました。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">_c</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nv">$a</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nv">$a</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=&gt;</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="p">}</span>

<span class="k">sub </span><span class="nf">solve</span> <span class="p">{</span>
    <span class="k">my</span> <span class="p">(</span><span class="nv">$ceil</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

    <span class="k">my</span> <span class="nv">@pairs</span><span class="p">;</span> <span class="c1"># 組み合わせのリスト。</span>
    <span class="k">my</span> <span class="nv">%pdup</span><span class="p">;</span>  <span class="c1"># 積の重複度。</span>
    <span class="k">my</span> <span class="nv">%sdup</span><span class="p">;</span>  <span class="c1"># 二番目の条件のための判定テーブル。</span>

    <span class="p">{</span>
        <span class="c1"># 積の重複度を求める。</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$i</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="nv">$ceil</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$j</span> <span class="p">(</span><span class="nv">$i</span><span class="o">..</span><span class="nv">$ceil</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nv">$i</span> <span class="o">*</span> <span class="nv">$j</span><span class="p">;</span>
                <span class="nv">$pdup</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nb">exists</span><span class="p">(</span><span class="nv">$pdup</span><span class="p">{</span><span class="nv">$p</span><span class="p">}));</span>
                <span class="nv">$pdup</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1"># 初期状態を作成する。その際に条件(1)を考慮する。</span>
        <span class="c1"># (1) A さんも B さんも教えられた数字(積と和)から判定出来ない。</span>
        <span class="c1"># 更に条件(2)のための判定テーブルを作成する。</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$i</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="nv">$ceil</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$j</span> <span class="p">(</span><span class="nv">$i</span><span class="o">..</span><span class="nv">$ceil</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nv">$i</span> <span class="o">*</span> <span class="nv">$j</span><span class="p">;</span>
                <span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$i</span> <span class="o">+</span> <span class="nv">$j</span><span class="p">;</span>
                <span class="nv">$sdup</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nb">exists</span><span class="p">(</span><span class="nv">$sdup</span><span class="p">{</span><span class="nv">$s</span><span class="p">}));</span>
                <span class="nv">$sdup</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$pdup</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>

                <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$pdup</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
                <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$s</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>
                <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$s</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span>
                <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$s</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nv">$ceil</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
                <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$s</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nv">$ceil</span><span class="p">));</span>
                <span class="nb">push</span><span class="p">(</span><span class="nv">@pairs</span><span class="p">,</span> <span class="p">[</span><span class="nv">$i</span><span class="p">,</span> <span class="nv">$j</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1"># (2) B さんは A が判定不能だと云う事を判っていた。</span>
    <span class="c1"># つまり和を分解して得られる組み合わせの全てに於いて、</span>
    <span class="c1"># その積の取り得る組み合わせが複数在ると云う事。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">@tmp</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nb">push</span><span class="p">(</span><span class="nv">@tmp</span><span class="p">,</span> <span class="nv">$e</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$sdup</span><span class="p">{</span><span class="nv">$s</span><span class="p">});</span>
        <span class="p">}</span>
        <span class="nv">@pairs</span> <span class="o">=</span> <span class="nv">@tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1"># (3) それを聞いた A さんは判ったのであるから、</span>
    <span class="c1"># 残りの組み合わせに積の重複は無い筈。</span>
    <span class="c1"># (4) A さんが判ったと聞いた B さんも判つたので、</span>
    <span class="c1"># 残りの組み合わせに和の重複は無い筈。</span>
    <span class="p">{</span>
        <span class="k">my</span> <span class="nv">@tmp</span><span class="p">;</span>
        <span class="k">my</span> <span class="nv">%dup3</span><span class="p">;</span>
        <span class="k">my</span> <span class="nv">%dup4</span><span class="p">;</span>
        <span class="c1"># 条件(3)のための重複検査を行う。</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nv">$dup3</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nb">exists</span><span class="p">(</span><span class="nv">$dup3</span><span class="p">{</span><span class="nv">$p</span><span class="p">}));</span>
            <span class="nv">$dup3</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1"># 条件(3)の重複を取り除きながら、条件(4)のための</span>
        <span class="c1"># 重複検査を行う。</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$dup3</span><span class="p">{</span><span class="nv">$p</span><span class="p">}</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">);</span>

            <span class="nb">push</span><span class="p">(</span><span class="nv">@tmp</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
            <span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nv">$dup4</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nb">exists</span><span class="p">(</span><span class="nv">$dup4</span><span class="p">{</span><span class="nv">$s</span><span class="p">}));</span>
            <span class="nv">$dup4</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1"># 条件(4)の重複を取り除く。</span>
        <span class="nv">@pairs</span> <span class="o">=</span> <span class="p">();</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nv">@tmp</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">next</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$dup4</span><span class="p">{</span><span class="nv">$s</span><span class="p">}</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nb">push</span><span class="p">(</span><span class="nv">@pairs</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">@pairs</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">foreach</span> <span class="k">my</span> <span class="nv">$n</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;%4d: &quot;</span><span class="p">,</span> <span class="nv">$n</span><span class="p">);</span>
    <span class="k">my</span> <span class="nv">@pairs</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">solve</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;None&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="k">my</span> <span class="nv">$e</span> <span class="p">(</span><span class="nb">sort</span> <span class="n">_c</span> <span class="nv">@pairs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;[%2d, %2d], &quot;</span><span class="p">,</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$e</span><span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3639/addtag/" class="addtag" id="addtag_3639">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3639/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3639/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3639"
  >-</span><span
  class="button yellow"
  id="rating_z_3639"
  >0</span><span 
  class="button green"
  id="rating_p_3639"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3629/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3639/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3639/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  



<div class="indent">
<a href="/web/20101210164636/http://ja.doukaku.org/34/post_comment/">
コメントを投稿する
</a>
</div>


<h2>投稿されたコメント - ネスト表示</h2>
<a href="/web/20101210164636/http://ja.doukaku.org/34/flatten/">フラット表示</a> 
<a href="/web/20101210164636/http://ja.doukaku.org/34/">非表示</a> 


  

  

  

  

  

  

  

  

  

  
    




<div class="comment" id="comment1582"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1582/">#1582</a>(<script language="JavaScript">print_time(new Date("2007/07/30 09:02 GMT"));</script><noscript>2007/07/30 09:02 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  Squeak Smalltalk で。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></td><td class="code"><div class="highlight"><pre>| すべての組み合わせ 和の逆引き 積の逆引き 積 答え 根拠 制約 |

積 := [:二要素配列 | 二要素配列 first * 二要素配列 second].

すべての組み合わせ := OrderedCollection new.
(1 to: 13) do: [:first | first to: 13 do: [:second | すべての組み合わせ add: {first. second}]].

和の逆引き := Dictionary new.
積の逆引き := Dictionary new.
すべての組み合わせ do: [:ペア |
    (積の逆引き at: (積 value: ペア) ifAbsentPut: [OrderedCollection new]) add: ペア.
    (和の逆引き at: ペア sum ifAbsentPut: [OrderedCollection new]) add: ペア].

根拠 := すべての組み合わせ select: [:ペア |
    | 和から |
    (和から := 和の逆引き at: ペア sum) size &gt; 1 and: [
        和から allSatisfy: [:各々 | (積の逆引き at: (積 value: 各々)) size &gt; 1]]].

制約 := [:ペア０ |
    ((積の逆引き at: (積 value: ペア０)) count: [:ペア１ |
        (和の逆引き at: ペア１ sum) allSatisfy: [:ペア２ |
            (積の逆引き at: (積 value: ペア２)) size &gt; 1]]) = 1].

答え := (根拠 select: 制約) select: [:ペア | ((和の逆引き at: ペア sum) count: 制約) = 1].

^答え asArray
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1582/addtag/" class="addtag" id="addtag_1582">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1582/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1582/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1582"
  >-</span><span
  class="button yellow"
  id="rating_z_1582"
  >0</span><span 
  class="button green"
  id="rating_p_1582"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1582/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  

  

  

  

  

  

  

  
    




<div class="comment" id="comment2045"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/31/" target="_top">smeghead</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2045/">#2045</a>(<script language="JavaScript">print_time(new Date("2007/08/09 12:54 GMT"));</script><noscript>2007/08/09 12:54 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>nkmrtksさんにこっそり教えてもらった#1610のロジックを咀嚼してから
再構築したつもりです。(ありがとうございます)
考え易さ第一ということで、速度とかはかなり遅くなってると思います^^；
正直難しかったです。特に爆弾発言部
(print (answer 13))
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></td><td class="code"><div class="highlight"><pre>(defun number-A-knows (pair)
  (if (null pair) nil (* (car pair) (cdr pair))))

(defun number-B-knows (pair)
  (if (null pair) nil (+ (car pair) (cdr pair))))

(defun uniq-if (item fn lst)
  &quot;itemが、lstのpairにfnを適応した結果中に1度だけ現れる場合に、itemを返す。それ以外はnil&quot;
  (if (eql (loop for x in lst 
                 when (equal (funcall fn item)
                             (funcall fn x))
                 count t)
           1)
    item))
(defun uniq-if-not (item fn lst)
  &quot;itemが、lstのpairにfnを適応した結果中に2度以上現れる場合に、itemを返す。それ以外はnil&quot;
  (if (&gt; (loop for x in lst
               when (equal (funcall fn item)
                           (funcall fn x))
               count t)
         1)
    item))

(defun pair-A-dosenot-know-lst (pairs)
  &quot;Aさん「(この情報だけでは)分かりません」&quot;
  (loop for pair in pairs
        when (uniq-if-not pair #&#39;number-A-knows pairs)
        collect it))
(defun pair-B-dosenot-know-lst (pairs)
  &quot;Bさん「私も分かりません．」&quot;
  (loop for pair in pairs
        when (uniq-if-not pair #&#39;number-B-knows pairs)
        collect it))
(defun pair-B-knows-A-dosenot-know-lst (pairs)
  &quot;Bさん「ただ，Aさんが『分かりません』というのは分かっていました」&quot;
  (let* ((pair-A-dosenot-know-lst (pair-A-dosenot-know-lst pairs))
         (number-A-knows-lst (remove-duplicates 
                               (mapcar #&#39;number-B-knows (pair-B-dosenot-know-lst pairs))))
         (A-lst-lst-expected-by-B (loop for n in number-A-knows-lst
                                        collect (loop for pair in pairs
                                                      when (eql n (number-B-knows pair))
                                                      collect pair))))
    (apply #&#39;nconc (remove-if 
                     #&#39;(lambda (lst)
                         (notevery
                           #&#39;(lambda (x)
                               (member x pair-A-dosenot-know-lst :test #&#39;equal))
                           lst))
                     A-lst-lst-expected-by-B))))
(defun pair-A-finds-answer-lst (pairs)
  &quot;それを聞いたAさん「それなら，分かりました」&quot;
  (let ((lst (pair-B-knows-A-dosenot-know-lst pairs)))
    (loop for x in lst
          when (uniq-if x #&#39;number-A-knows lst)
          collect it)))
(defun pair-B-finds-answer-lst (pairs)
  &quot;それを聞いたBさん「それなら，私も分かりました」&quot;
  (let ((lst (pair-A-finds-answer-lst pairs)))
    (loop for x in lst
          when (uniq-if x #&#39;number-B-knows lst)
          collect it)))

(defun answer (n)
  (let ((pairs (loop for i from 1 to n
                     append (loop for j from 1 to n
                                  when (&lt;= i j)
                                  collect (cons i j)))))
    (pair-B-finds-answer-lst pairs)))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2045/addtag/" class="addtag" id="addtag_2045">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2045/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2045/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2045"
  >-</span><span
  class="button yellow"
  id="rating_z_2045"
  >0</span><span 
  class="button green"
  id="rating_p_2045"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/2045/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  
    




<div class="comment" id="comment1567"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/">#1567</a>(<script language="JavaScript">print_time(new Date("2007/07/29 10:36 GMT"));</script><noscript>2007/07/29 10:36 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffcfcf;">-3/3=-1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  なんか、ズルしてるような。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">14</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">14</span><span class="p">)]</span>
<span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">14</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">14</span><span class="p">)]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">14</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">14</span><span class="p">)</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span> <span class="ow">and</span> <span class="n">b</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span><span class="p">]</span>
<span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span><span class="p">]</span>
<span class="k">print</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span> <span class="ow">and</span> <span class="n">b</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/addtag/" class="addtag" id="addtag_1567">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffcfcf;"
  >-3/3=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1567"
  >-</span><span
  class="button yellow"
  id="rating_z_1567"
  >0</span><span 
  class="button green"
  id="rating_p_1567"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/">
    3
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1567/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1573"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1573/">#1573</a>(<script language="JavaScript">print_time(new Date("2007/07/30 02:49 GMT"));</script><noscript>2007/07/30 02:49 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  「==2」じゃなくて「&gt;1」かな、と思ったけども

そういう単純なミスではないみたい…。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1573/addtag/" class="addtag" id="addtag_1573">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1573"
  >-</span><span
  class="button yellow"
  id="rating_z_1573"
  >0</span><span 
  class="button green"
  id="rating_p_1573"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1573/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1573/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1568"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1568/">#1568</a>(<script language="JavaScript">print_time(new Date("2007/07/29 10:53 GMT"));</script><noscript>2007/07/29 10:53 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>なんか条件が足りなくありませんか?
 1から13までの場合はたまたま結果が同じになりますが…

カードが1から15までだと、たぶん答がふたつあり得ると思うんですが
( 1,4　と  3,4 ) 、このアルゴリズムだと1,4しか出ないようです。

ちゃんと追求していませんが、cの時点で可能性がしぼられすぎているような
感じがします。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1568/addtag/" class="addtag" id="addtag_1568">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1568"
  >-</span><span
  class="button yellow"
  id="rating_z_1568"
  >0</span><span 
  class="button green"
  id="rating_p_1568"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1568/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1568/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1568/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1576"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/">#1576</a>(<script language="JavaScript">print_time(new Date("2007/07/30 03:16 GMT"));</script><noscript>2007/07/30 03:16 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>あら、昨夜返信したと思ったら、ミスっていたようです。

根本的に問題が解けていませんでした。
他の方のコードを見てやっと理解できました。

というわけで、効率無視で閉包を多用した新版です。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre><span class="n">n</span><span class="o">=</span><span class="mi">13</span><span class="o">+</span><span class="mi">1</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">n</span><span class="p">)]</span>
<span class="n">a</span><span class="o">=</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span>
<span class="n">d</span><span class="o">=</span><span class="p">{};[(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span><span class="p">)</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">,[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)])</span> <span class="ow">or</span> <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">n</span><span class="p">)]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[];[</span><span class="n">c</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">set</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">a</span><span class="p">)]</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span><span class="p">]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span><span class="p">]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
  <span class="k">print</span> <span class="s">&#39;(</span><span class="si">%d</span><span class="s">,</span><span class="si">%d</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/addtag/" class="addtag" id="addtag_1576">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1576"
  >-</span><span
  class="button yellow"
  id="rating_z_1576"
  >0</span><span 
  class="button green"
  id="rating_p_1576"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1568/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/">
    2
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1576/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1578"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1578/">#1578</a>(<script language="JavaScript">print_time(new Date("2007/07/30 04:46 GMT"));</script><noscript>2007/07/30 04:46 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>閉包(クロージャ)ではなくてリスト内包ですよね。

今「リスト閉包」で検索したら
自分の日記がヒットしました
ごめんなさいorz</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1578/addtag/" class="addtag" id="addtag_1578">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1578"
  >-</span><span
  class="button yellow"
  id="rating_z_1578"
  >0</span><span 
  class="button green"
  id="rating_p_1578"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1578/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1578/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1578/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1586"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1586/">#1586</a>(<script language="JavaScript">print_time(new Date("2007/07/30 10:33 GMT"));</script><noscript>2007/07/30 10:33 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>&gt; 閉包(クロージャ)ではなくてリスト内包ですよね。
あ、そうでした、そうでした。

ところで、上のコードにマイナスの評価がついてますが、
機能的には問題ないですよね。

コードの一文字目を縦読みすると暗号が隠されている、
といった事実はありませんが、見た目が面白いかと
思って並べてみましたが、普通に読みやすく書くほうがいいかな。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1586/addtag/" class="addtag" id="addtag_1586">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1586"
  >-</span><span
  class="button yellow"
  id="rating_z_1586"
  >0</span><span 
  class="button green"
  id="rating_p_1586"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1578/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1586/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1586/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1586/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1590"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1590/">#1590</a>(<script language="JavaScript">print_time(new Date("2007/07/30 12:12 GMT"));</script><noscript>2007/07/30 12:12 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>評価をどういう基準でつけるかは自由なので、
機能以外の所で何か悪い点があると感じた人が
1人いるということでしょう。

「コードの一文字目を縦読みすると暗号が隠されています！」
ということなら少なくとも僕はプラスを押したのですが、残念(^^;</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1590/addtag/" class="addtag" id="addtag_1590">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1590"
  >-</span><span
  class="button yellow"
  id="rating_z_1590"
  >0</span><span 
  class="button green"
  id="rating_p_1590"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1586/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1590/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1590/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1613"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/">#1613</a>(<script language="JavaScript">print_time(new Date("2007/07/31 04:15 GMT"));</script><noscript>2007/07/31 04:15 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #8fff8f;">7/7=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>最終バージョンです。

相変わらず効率は無視してますが、見た目は非常にシンプルになりました。
３行目から７行目がお題のフィルタ条件と1対1に対応しています。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre><span class="n">n</span><span class="o">=</span><span class="mi">13</span><span class="o">+</span><span class="mi">1</span>
<span class="n">o</span><span class="o">=</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">n</span><span class="p">)]</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">o</span> <span class="k">if</span> <span class="p">[</span><span class="n">u</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">o</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span>
<span class="n">o</span><span class="o">=</span><span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">o</span> <span class="k">if</span> <span class="p">[</span><span class="n">u</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">o</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span>
<span class="n">o</span><span class="o">=</span><span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">o</span> <span class="k">if</span> <span class="n">set</span><span class="p">([</span><span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">o</span> <span class="k">if</span> <span class="n">u</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="n">t</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">a</span><span class="p">)]</span>
<span class="n">o</span><span class="o">=</span><span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">o</span> <span class="k">if</span> <span class="p">[</span><span class="n">u</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">o</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
<span class="n">o</span><span class="o">=</span><span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">o</span> <span class="k">if</span> <span class="p">[</span><span class="n">u</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">o</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="n">o</span><span class="p">:</span>
  <span class="k">print</span> <span class="s">&#39;(</span><span class="si">%d</span><span class="s">,</span><span class="si">%d</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/addtag/" class="addtag" id="addtag_1613">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #8fff8f;"
  >7/7=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1613"
  >-</span><span
  class="button yellow"
  id="rating_z_1613"
  >0</span><span 
  class="button green"
  id="rating_p_1613"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1576/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/">
    2
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1613/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1624"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/">#1624</a>(<script language="JavaScript">print_time(new Date("2007/07/31 08:07 GMT"));</script><noscript>2007/07/31 08:07 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  感動したので Squeak Smalltalk に直訳っぽくしてみました。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre>| n o a |
n := 13.
o := (1 to: n) inject: #() into: [:r :i | r, ((i to: n) collect: [:j | {i. j. i*j. i+j}])].
a := o select: [:t | (o count: [:u | u third = t third]) &gt; 1].
o := o select: [:t | (o count: [:u | u fourth = t fourth]) &gt; 1].
o := o select: [:t | a includesAllOf: (o select: [:u | u fourth = t fourth])].
o := o select: [:t | (o count: [:u | u third = t third]) = 1].
o := o select: [:t | (o count: [:u | u fourth = t fourth]) = 1].
^o collect: [:t | t first: 2]
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/addtag/" class="addtag" id="addtag_1624">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1624"
  >-</span><span
  class="button yellow"
  id="rating_z_1624"
  >0</span><span 
  class="button green"
  id="rating_p_1624"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/">
    2
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1624/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1627"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1627/">#1627</a>(<script language="JavaScript">print_time(new Date("2007/07/31 11:27 GMT"));</script><noscript>2007/07/31 11:27 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>最後の方をこんな感じにするのはありですか？(笑

o := o  select: [:t | (o count: [:u | u fourth = t fourth]) = 1].
    ^o collect: [:t | t first: 2]

なんだか
[:t
が顔に見えてくる…</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1627/addtag/" class="addtag" id="addtag_1627">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1627"
  >-</span><span
  class="button yellow"
  id="rating_z_1627"
  >0</span><span 
  class="button green"
  id="rating_p_1627"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1627/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1627/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1628"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1628/">#1628</a>(<script language="JavaScript">print_time(new Date("2007/07/31 11:30 GMT"));</script><noscript>2007/07/31 11:30 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>[:u | 

顔だ…</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1628/addtag/" class="addtag" id="addtag_1628">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1628"
  >-</span><span
  class="button yellow"
  id="rating_z_1628"
  >0</span><span 
  class="button green"
  id="rating_p_1628"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1624/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1628/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1628/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1628/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1632"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1632/">#1632</a>(<script language="JavaScript">print_time(new Date("2007/07/31 14:56 GMT"));</script><noscript>2007/07/31 14:56 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>ホントだ。ｗ

インデントは自由ですので、#1627 も可能です。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1632/addtag/" class="addtag" id="addtag_1632">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1632"
  >-</span><span
  class="button yellow"
  id="rating_z_1632"
  >0</span><span 
  class="button green"
  id="rating_p_1632"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1628/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1632/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1632/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1614"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1614/">#1614</a>(<script language="JavaScript">print_time(new Date("2007/07/31 04:51 GMT"));</script><noscript>2007/07/31 04:51 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  これはある種のアートかも…
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1614/addtag/" class="addtag" id="addtag_1614">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1614"
  >-</span><span
  class="button yellow"
  id="rating_z_1614"
  >0</span><span 
  class="button green"
  id="rating_p_1614"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1613/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1614/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1614/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1574"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1574/">#1574</a>(<script language="JavaScript">print_time(new Date("2007/07/30 03:04 GMT"));</script><noscript>2007/07/30 03:04 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  この問題は、
「Aさんが『分かりません』というのは分かっていました」
というBさんの爆弾発言で大幅に絞り込めることが重要かと思うのですけど、上のコードのどこでその絞り込みが行われているのかがよくわかりません。

一方、Aさんが答えられないからといってcountが2であるとは限らない(3でも4でも答えられない)ので、上の式は絞り込みすぎですね。その二つがうまくかみあわさってたまたま正解が出てしまっているのかもしれません。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1574/addtag/" class="addtag" id="addtag_1574">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1574"
  >-</span><span
  class="button yellow"
  id="rating_z_1574"
  >0</span><span 
  class="button green"
  id="rating_p_1574"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1567/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1574/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1574/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  

  
    




<div class="comment" id="comment1554"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/172/" target="_top">cats</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1554/">#1554</a>(<script language="JavaScript">print_time(new Date("2007/07/29 03:21 GMT"));</script><noscript>2007/07/29 03:21 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  答えは、(1,4)ですかね？
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Program</span>
<span class="k">{</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
  <span class="k">{</span>
    <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;&gt;</span> <span class="n">A</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;&gt;();</span>
    <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;&gt;</span> <span class="n">B</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;&gt;();</span>
    <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">v</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="m">13</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
    <span class="k">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;=</span> <span class="m">13</span><span class="p">;</span> <span class="p">++</span><span class="n">j</span><span class="p">)</span>
      <span class="k">{</span>
        <span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">kv</span> <span class="p">=</span> <span class="k">new</span> <span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">A</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="n">j</span><span class="p">,</span> <span class="k">out</span> <span class="n">v</span><span class="p">))</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span> <span class="p">*</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="n">v</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;();</span>
        <span class="n">v</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">kv</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">B</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="n">i</span> <span class="p">+</span> <span class="n">j</span><span class="p">,</span> <span class="k">out</span> <span class="n">v</span><span class="p">))</span> <span class="n">B</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="n">j</span><span class="p">]</span> <span class="p">=</span> <span class="n">v</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;();</span>
        <span class="n">v</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">kv</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
      <span class="k">}</span>
    <span class="k">}</span>
    <span class="c">// Bさん「私も分かりません．ただ，Aさんが『分かりません』というのは分かっていました」</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="k">in</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="n">B</span><span class="p">.</span><span class="n">Keys</span><span class="p">))</span>
    <span class="k">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">1</span><span class="p">)</span>
      <span class="k">{</span>
        <span class="kt">bool</span> <span class="n">b</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">kv</span> <span class="k">in</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;&gt;(</span><span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Keys</span><span class="p">))</span>
          <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="p">=</span> <span class="n">A</span><span class="p">[</span><span class="n">kv</span><span class="p">.</span><span class="n">Key</span> <span class="p">*</span> <span class="n">kv</span><span class="p">.</span><span class="n">Value</span><span class="p">].</span><span class="n">Count</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">b</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
      <span class="k">}</span>
      <span class="n">B</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="k">}</span>
    <span class="c">// Aさん「(この情報だけでは)分かりません」</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="k">in</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="n">A</span><span class="p">.</span><span class="n">Keys</span><span class="p">))</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Count</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="n">A</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="c">// それを聞いたAさん「それなら，分かりました」</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="k">in</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="n">A</span><span class="p">.</span><span class="n">Keys</span><span class="p">))</span>
    <span class="k">{</span>
      <span class="k">foreach</span> <span class="p">(</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">kv</span> <span class="k">in</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;&gt;(</span><span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Keys</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">B</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">kv</span><span class="p">.</span><span class="n">Key</span> <span class="p">+</span> <span class="n">kv</span><span class="p">.</span><span class="n">Value</span><span class="p">)</span> <span class="p">||</span> <span class="p">!</span><span class="n">B</span><span class="p">[</span><span class="n">kv</span><span class="p">.</span><span class="n">Key</span> <span class="p">+</span> <span class="n">kv</span><span class="p">.</span><span class="n">Value</span><span class="p">].</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">kv</span><span class="p">))</span> <span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Remove</span><span class="p">(</span><span class="n">kv</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Count</span> <span class="p">!=</span> <span class="m">1</span><span class="p">)</span> <span class="n">A</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="k">}</span>
    <span class="c">// それを聞いたBさん「それなら，私も分かりました」  }</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="k">in</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="n">B</span><span class="p">.</span><span class="n">Keys</span><span class="p">))</span>
    <span class="k">{</span>
      <span class="k">foreach</span> <span class="p">(</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">kv</span> <span class="k">in</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;&gt;(</span><span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Keys</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">A</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">kv</span><span class="p">.</span><span class="n">Key</span> <span class="p">*</span> <span class="n">kv</span><span class="p">.</span><span class="n">Value</span><span class="p">)</span> <span class="p">||</span> <span class="p">!</span><span class="n">A</span><span class="p">[</span><span class="n">kv</span><span class="p">.</span><span class="n">Key</span> <span class="p">*</span> <span class="n">kv</span><span class="p">.</span><span class="n">Value</span><span class="p">].</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">kv</span><span class="p">))</span> <span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Remove</span><span class="p">(</span><span class="n">kv</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">Count</span> <span class="p">!=</span> <span class="m">1</span><span class="p">)</span> <span class="n">B</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
    <span class="k">}</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;,</span> <span class="kt">object</span><span class="p">&gt;&gt;</span> <span class="n">kvp</span> <span class="k">in</span> <span class="n">B</span><span class="p">)</span>
    <span class="k">{</span>
      <span class="k">foreach</span> <span class="p">(</span><span class="n">KeyValuePair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">kv</span> <span class="k">in</span> <span class="n">kvp</span><span class="p">.</span><span class="n">Value</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span> <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">kv</span> <span class="p">+</span> <span class="s">&quot;,&quot;</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">();</span>
    <span class="k">}</span>
  <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1554/addtag/" class="addtag" id="addtag_1554">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1554/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1554/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1554"
  >-</span><span
  class="button yellow"
  id="rating_z_1554"
  >0</span><span 
  class="button green"
  id="rating_p_1554"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1554/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment1565"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/212/" target="_top">odz</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1565/">#1565</a>(<script language="JavaScript">print_time(new Date("2007/07/29 07:38 GMT"));</script><noscript>2007/07/29 07:38 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  これはおもしろいなぁ。
各関数でそれぞれのステップでの候補列挙。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">a1</span><span class="p">():</span>
    <span class="n">table</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">13</span> <span class="o">*</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">table</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">lst</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
                <span class="n">c</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c</span>

<span class="k">def</span> <span class="nf">b1</span><span class="p">():</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="n">a1</span><span class="p">()</span>
    <span class="n">table</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">13</span> <span class="o">+</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">table</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>

    <span class="n">c</span> <span class="o">=</span> <span class="n">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">cand</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cand</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">if</span> <span class="n">all</span><span class="p">(</span><span class="n">t</span> <span class="ow">in</span> <span class="n">candidates</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">cand</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">cand</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c</span>

<span class="k">def</span> <span class="nf">a2</span><span class="p">():</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="n">b1</span><span class="p">()</span>
    <span class="n">table</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">table</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">table</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">set</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">itervalues</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">b2</span><span class="p">():</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="n">a2</span><span class="p">()</span>
    <span class="n">table</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">table</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">table</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">set</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">itervalues</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">b2</span><span class="p">():</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1565/addtag/" class="addtag" id="addtag_1565">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1565/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1565/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1565"
  >-</span><span
  class="button yellow"
  id="rating_z_1565"
  >0</span><span 
  class="button green"
  id="rating_p_1565"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1565/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1565/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1566"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/212/" target="_top">odz</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1566/">#1566</a>(<script language="JavaScript">print_time(new Date("2007/07/29 07:51 GMT"));</script><noscript>2007/07/29 07:51 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  あ、コピーするときに最後の出力分が抜けている
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1566/addtag/" class="addtag" id="addtag_1566">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1566"
  >-</span><span
  class="button yellow"
  id="rating_z_1566"
  >0</span><span 
  class="button green"
  id="rating_p_1566"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1565/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1566/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1566/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  
    




<div class="comment" id="comment1556"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1556/">#1556</a>(<script language="JavaScript">print_time(new Date("2007/07/29 03:39 GMT"));</script><noscript>2007/07/29 03:39 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  とりあえず構造化もされていませんが……
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Sample</span> <span class="o">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">final</span> <span class="kt">boolean</span><span class="o">[]</span> <span class="n">prime</span> <span class="o">=</span> <span class="o">{</span>
        <span class="c">/* 0    1     2     3     4      5     6      7     8      9      10 */</span>
        <span class="kc">false</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span>
        <span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">true</span><span class="o">};</span>
        <span class="c">/*11   12     13 */</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">boolean</span><span class="o">[]</span> <span class="n">primeSum</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="mi">27</span><span class="o">];</span>
        <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">productCount</span> <span class="o">=</span> 
            <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;();</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">sumCount</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">27</span><span class="o">];</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">prime</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">prime</span><span class="o">[</span><span class="n">j</span><span class="o">])</span> <span class="o">{</span>
                    <span class="n">primeSum</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(!(</span><span class="n">prime</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">prime</span><span class="o">[</span><span class="n">j</span><span class="o">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">primeSum</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">])</span> <span class="o">{</span>
                    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">productCount</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">))</span> <span class="o">{</span>
                        <span class="n">count</span> <span class="o">=</span> <span class="n">productCount</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="n">productCount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">,</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(!(</span><span class="n">prime</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">prime</span><span class="o">[</span><span class="n">j</span><span class="o">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">primeSum</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">&amp;&amp;</span> 
                    <span class="n">productCount</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">sumCount</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]++;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">((!(</span><span class="n">prime</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">prime</span><span class="o">[</span><span class="n">j</span><span class="o">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">primeSum</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">&amp;&amp;</span>
                     <span class="n">productCount</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">sumCount</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;%d, %d (product = %d, sum = %d)%n&quot;</span><span class="o">,</span> 
                                      <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1556/addtag/" class="addtag" id="addtag_1556">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1556/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1556/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1556"
  >-</span><span
  class="button yellow"
  id="rating_z_1556"
  >0</span><span 
  class="button green"
  id="rating_p_1556"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1556/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1556/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1557"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1557/">#1557</a>(<script language="JavaScript">print_time(new Date("2007/07/29 04:18 GMT"));</script><noscript>2007/07/29 04:18 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  冒頭部分が完全に間違っていました。訂正箇所が多すぎるので全体を投稿しなおします。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Sample</span> <span class="o">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">boolean</span><span class="o">[]</span> <span class="n">sumFlag</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="mi">27</span><span class="o">];</span>
        <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">productCount0</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;();</span>
        <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">productCount</span> <span class="o">=</span> 
            <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;();</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">sumCount</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">27</span><span class="o">];</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">productCount0</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">count</span> <span class="o">=</span> <span class="n">productCount0</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">productCount0</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">,</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">productCount0</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">sumFlag</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">productCount0</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">sumFlag</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">])</span> <span class="o">{</span>
                    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">productCount</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">))</span> <span class="o">{</span>
                        <span class="n">count</span> <span class="o">=</span> <span class="n">productCount</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="n">productCount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">,</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">productCount0</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">sumFlag</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">&amp;&amp;</span> 
                    <span class="n">productCount</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">sumCount</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]++;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">productCount0</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">sumFlag</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">&amp;&amp;</span> 
                    <span class="n">productCount</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">sumCount</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;%d, %d (product = %d, sum = %d)%n&quot;</span><span class="o">,</span> 
                                      <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1557/addtag/" class="addtag" id="addtag_1557">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1557/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1557/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1557"
  >-</span><span
  class="button yellow"
  id="rating_z_1557"
  >0</span><span 
  class="button green"
  id="rating_p_1557"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1556/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1557/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1557/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  

  

  
    




<div class="comment" id="comment1560"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/177/" target="_top">ocean</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/">#1560</a>(<script language="JavaScript">print_time(new Date("2007/07/29 06:31 GMT"));</script><noscript>2007/07/29 06:31 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  結構しんどかったです・・・
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><div class="highlight"><pre><span class="c"># coding: shift_jis</span>

<span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">limit</span> <span class="o">=</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="n">add_table</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">limit</span> <span class="o">+</span> <span class="n">limit</span><span class="p">)]</span>
    <span class="n">mul_table</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">limit</span> <span class="o">*</span> <span class="n">limit</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
            <span class="n">add_table</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
            <span class="n">mul_table</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>

    <span class="c"># すべてのカードの組み合わせを生成</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">limit</span><span class="p">)]</span>

    <span class="c"># Aさん「(この情報だけでは)分かりません」</span>
    <span class="c"># ... すべてのペアが、積のあいまいなペアである</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="p">[</span><span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mul_table</span><span class="p">[</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">]</span>

    <span class="c"># Bさん「私も分かりません．ただ，Aさんが『分かりません』というのは分かっていました」</span>
    <span class="c"># ... 和からとりうるペアは複数あり、そのすべてが積のあいまいなペアである</span>
    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">pair</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">add_table</span><span class="p">[</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">all</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">mul_table</span><span class="p">[</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="p">[</span><span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span> <span class="k">if</span> <span class="n">check</span><span class="p">(</span><span class="n">pair</span><span class="p">)]</span>

    <span class="c"># それを聞いたAさん「それなら，分かりました」</span>
    <span class="c"># ... 残ったペアを見て、積から一意に定まらないものを取り除く</span>
    <span class="c">#（例えば、(1,12),(2,6)が残っていれば積12という情報から決められないので排除）</span>
    <span class="n">h</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>
        <span class="n">h</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">h</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

    <span class="c"># それを聞いたBさん「それなら，私も分かりました」</span>
    <span class="c"># ... 残ったペアを見て、和から一意に定まらないものを取り除く</span>
    <span class="c">#（例えば、(1,3),(2,2)が残っていれば和4という情報から決められないので排除）</span>
    <span class="n">h</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>
        <span class="n">h</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">h</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

    <span class="k">print</span> <span class="n">pairs</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/addtag/" class="addtag" id="addtag_1560">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1560"
  >-</span><span
  class="button yellow"
  id="rating_z_1560"
  >0</span><span 
  class="button green"
  id="rating_p_1560"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/">
    3
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1560/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1591"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1591/">#1591</a>(<script language="JavaScript">print_time(new Date("2007/07/30 12:33 GMT"));</script><noscript>2007/07/30 12:33 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>なるほど、allはそういう使い方をしているんですね…。

でも確かallってあったはず…と調べてみたら、2.5から追加された新しい組み込み関数らしいですね。
http://docs.python.org/lib/built-in-funcs.html#l2h-9

&gt;&gt;&gt; xs = range(5)
&gt;&gt;&gt; all(x &lt; 5 for x in xs)
True

これはこの手の問題をとくのに便利そう…。
ジェネレータ内包表記とセットでなら下のようなコードでも瞬時ですし。

&gt;&gt;&gt; all(x &lt; 5 for x in xrange(1000000000))
False
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1591/addtag/" class="addtag" id="addtag_1591">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1591"
  >-</span><span
  class="button yellow"
  id="rating_z_1591"
  >0</span><span 
  class="button green"
  id="rating_p_1591"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1591/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1591/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1591/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1595"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/177/" target="_top">ocean</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1595/">#1595</a>(<script language="JavaScript">print_time(new Date("2007/07/30 13:15 GMT"));</script><noscript>2007/07/30 13:15 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  おお、なるほど、そうやって使えばいいのか。納得です。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1595/addtag/" class="addtag" id="addtag_1595">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1595"
  >-</span><span
  class="button yellow"
  id="rating_z_1595"
  >0</span><span 
  class="button green"
  id="rating_p_1595"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1591/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1595/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1595/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1562"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/177/" target="_top">ocean</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1562/">#1562</a>(<script language="JavaScript">print_time(new Date("2007/07/29 06:37 GMT"));</script><noscript>2007/07/29 06:37 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/diff/">
	  diff
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  しまった、同じ数が出てくることに気づかなかったときの名残が。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre><span class="gd">--- a.py.orig   Sun Jul 29 15:36:14 2007</span>
<span class="gi">+++ a.py        Sun Jul 29 15:36:23 2007</span>
<span class="gu">@@ -17,7 +17,7 @@</span>
             mul_table[i * j].append((i, j))

     # すべてのカードの組み合わせを生成
<span class="gd">-    pairs = [(i, j) for i in xrange(1, limit) for j in xrange(i + 1, limit)]</span>
<span class="gi">+    pairs = [(i, j) for i in xrange(1, limit) for j in xrange(i, limit)]</span>

     # Aさん「(この情報だけでは)分かりません」
     # ... すべてのペアが、積のあいまいなペアである
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1562/addtag/" class="addtag" id="addtag_1562">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/diff/">
		diff
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1562/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1562/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1562"
  >-</span><span
  class="button yellow"
  id="rating_z_1562"
  >0</span><span 
  class="button green"
  id="rating_p_1562"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1562/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1562/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1562/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1575"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1575/">#1575</a>(<script language="JavaScript">print_time(new Date("2007/07/30 03:11 GMT"));</script><noscript>2007/07/30 03:11 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>実験的に言語に「diff」を追加してみました。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1575/addtag/" class="addtag" id="addtag_1575">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1575"
  >-</span><span
  class="button yellow"
  id="rating_z_1575"
  >0</span><span 
  class="button green"
  id="rating_p_1575"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1562/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1575/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1575/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1575/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1688"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/177/" target="_top">ocean</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1688/">#1688</a>(<script language="JavaScript">print_time(new Date("2007/08/02 06:17 GMT"));</script><noscript>2007/08/02 06:17 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  ありがとうございます。#549，#677 も diff なので、変更お願いできますか？
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1688/addtag/" class="addtag" id="addtag_1688">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1688"
  >-</span><span
  class="button yellow"
  id="rating_z_1688"
  >0</span><span 
  class="button green"
  id="rating_p_1688"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1575/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1688/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1688/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1771"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/177/" target="_top">ocean</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1771/">#1771</a>(<script language="JavaScript">print_time(new Date("2007/08/03 08:11 GMT"));</script><noscript>2007/08/03 08:11 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  無理やり移植。若干ロジックが変わってるところがありますが（テーブルの部分とか）大まかには同じです。bcc5.5とg++で確認しましたが、VC6では通りませんでした。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;algorithm&gt;</span>
<span class="cp">#include &lt;functional&gt;</span>
<span class="cp">#include &lt;iterator&gt;</span>
<span class="cp">#include &lt;vector&gt;</span>
<span class="cp">#include &lt;map&gt;</span>
<span class="cp">#include &lt;utility&gt;</span>

<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">size_t</span><span class="p">,</span> <span class="n">size_t</span><span class="o">&gt;</span> <span class="n">pair_t</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">vague</span> <span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">unary_function</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">explicit</span> <span class="n">vague</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">size_t</span><span class="o">&gt;*</span> <span class="n">p</span><span class="p">)</span> <span class="o">:</span> <span class="n">_p</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">pair_t</span><span class="o">&amp;</span> <span class="n">pair</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">_p</span><span class="p">)[</span><span class="n">pair</span><span class="p">.</span><span class="n">first</span> <span class="o">*</span> <span class="n">pair</span><span class="p">.</span><span class="n">second</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">size_t</span><span class="o">&gt;*</span> <span class="n">_p</span><span class="p">;</span> <span class="c">// 注意！所有権は呼び出し元にあるので、そちらが解放された後に使用してはならない</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">check</span> <span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">unary_function</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">explicit</span> <span class="n">check</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">size_t</span><span class="o">&gt;*</span> <span class="n">p</span><span class="p">)</span> <span class="o">:</span> <span class="n">_p</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">pair_t</span><span class="o">&amp;</span> <span class="n">pair</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">size_t</span><span class="o">&gt;*</span> <span class="n">_p</span><span class="p">;</span> <span class="c">// 同上</span>
<span class="p">};</span>

<span class="kt">bool</span> <span class="n">check</span><span class="o">::</span><span class="k">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">pair_t</span><span class="o">&amp;</span> <span class="n">pair</span><span class="p">)</span> <span class="k">const</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">size_t</span> <span class="n">n</span> <span class="o">=</span> <span class="n">pair</span><span class="p">.</span><span class="n">first</span> <span class="o">+</span> <span class="n">pair</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="o">&gt;</span> <span class="n">pairs</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">const</span> <span class="n">size_t</span> <span class="n">j</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">i</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">j</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pairs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">pairs</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">std</span><span class="o">::</span><span class="n">find_if</span><span class="p">(</span><span class="n">pairs</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">not1</span><span class="p">(</span><span class="n">vague</span><span class="p">(</span><span class="n">_p</span><span class="p">)))</span> <span class="o">==</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Operation</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">unique</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="o">&gt;&amp;</span> <span class="n">pairs</span><span class="p">,</span> <span class="n">Operation</span> <span class="n">op</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">size_t</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="p">,</span> <span class="n">size_t</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">map_t</span><span class="p">;</span>

    <span class="n">map_t</span> <span class="n">map</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="o">&gt;::</span><span class="n">const_iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="p">,</span> <span class="n">size_t</span><span class="o">&gt;&amp;</span> <span class="n">entry</span> <span class="o">=</span> <span class="n">map</span><span class="p">[</span><span class="n">op</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span><span class="p">,</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">)];</span>

        <span class="n">entry</span><span class="p">.</span><span class="n">first</span> <span class="o">=</span> <span class="o">*</span><span class="n">it</span><span class="p">;</span>

        <span class="o">++</span><span class="n">entry</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">pairs</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">map_t</span><span class="o">::</span><span class="n">const_iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">map</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">map</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">.</span><span class="n">second</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pairs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">.</span><span class="n">first</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">size_t</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">13</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c">// すべてのカードの組み合わせを生成</span>

    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="o">&gt;</span> <span class="n">pairs</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">size_t</span><span class="o">&gt;</span> <span class="n">mul_count_table</span><span class="p">(</span><span class="n">limit</span> <span class="o">*</span> <span class="n">limit</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">limit</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">limit</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pairs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">));</span>

            <span class="o">++</span><span class="n">mul_count_table</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c">// Aさん「(この情報だけでは)分かりません」</span>
    <span class="c">// ... すべてのペアが、積のあいまいなペアである</span>

    <span class="n">pairs</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span>
        <span class="n">std</span><span class="o">::</span><span class="n">remove_if</span><span class="p">(</span><span class="n">pairs</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">not1</span><span class="p">(</span><span class="n">vague</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mul_count_table</span><span class="p">))),</span>
        <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">()</span>
    <span class="p">);</span>

    <span class="c">// Bさん「私も分かりません．ただ，Aさんが『分かりません』というのは分かっていました」</span>
    <span class="c">// ... 和からとりうるペアは複数あり、そのすべてが積のあいまいなペアである</span>

    <span class="n">pairs</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span>
        <span class="n">std</span><span class="o">::</span><span class="n">remove_if</span><span class="p">(</span><span class="n">pairs</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">not1</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mul_count_table</span><span class="p">))),</span>
        <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">()</span>
    <span class="p">);</span>

    <span class="c">// それを聞いたAさん「それなら，分かりました」</span>
    <span class="c">// ... 残ったペアを見て、積から一意に定まらないものを取り除く</span>
    <span class="c">//（例えば、(1,12),(2,6)が残っていれば積12という情報から決められないので排除）</span>

    <span class="n">unique</span><span class="p">(</span><span class="n">pairs</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">multiplies</span><span class="o">&lt;</span><span class="n">size_t</span><span class="o">&gt;</span><span class="p">());</span>

    <span class="c">// それを聞いたBさん「それなら，私も分かりました」</span>
    <span class="c">// ... 残ったペアを見て、和から一意に定まらないものを取り除く</span>
    <span class="c">//（例えば、(1,3),(2,2)が残っていれば和4という情報から決められないので排除）</span>

    <span class="n">unique</span><span class="p">(</span><span class="n">pairs</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">plus</span><span class="o">&lt;</span><span class="n">size_t</span><span class="o">&gt;</span><span class="p">());</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">pair_t</span><span class="o">&gt;::</span><span class="n">const_iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;(&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;) &quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1771/addtag/" class="addtag" id="addtag_1771">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1771/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1771/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1771"
  >-</span><span
  class="button yellow"
  id="rating_z_1771"
  >0</span><span 
  class="button green"
  id="rating_p_1771"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1560/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1771/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1771/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  

  

  
    




<div class="comment" id="comment6478"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/793/" target="_top">genzou</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/6478/">#6478</a>(<script language="JavaScript">print_time(new Date("2008/06/12 22:10 GMT"));</script><noscript>2008/06/12 22:10 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/groovy/">
	  Groovy
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>問題のご認識があるかもしれません。
気づいた方連絡ください。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><div class="highlight"><pre>// 準備
def patterns = []
(1..9).each{ x -&gt;
    (x..9).each{ y -&gt;
        patterns &lt;&lt; [x:x, y:y, a:x*y, b:x+y]
    }
}


println &quot;=====シミュレーション=====&quot;
patterns.each{ pattern -&gt;
    try{
        // ■Aさんから見た回答
        def avalue = pattern.a
        def potentialsA = patterns
        potentialsA = potentialsA.findAll{
            it.a == avalue
        }
        if( potentialsA.size() == 1 ){
            throw new Exception(&quot;わかってるジャン！&quot;)
        }
        
        
        // ■Bさんから見た回答
        def bvalue = pattern.b
        def potentialsB = patterns
        potentialsB = potentialsB.findAll{
            it.b == bvalue
        }
        if( potentialsB.size() == 1 ){
            throw new Exception(&quot;わかってるジャン！&quot;)
        }
        //println potentialsB.size()
        //println potentialsB
        // Aさんの回答として２つ以上あるものを抜き出し
        if( potentialsB.collect{ it.a }.unique().size() &lt;= 1 ){
            // 回答がわかっている
            throw new Exception()
        }
        
        
        // ■結果
        def potentials = potentialsA.intersect(potentialsB)
        if( potentials.size() &gt;= 2 ){
            throw new Exception()
        }
        
        println &quot;■カードは ${pattern.x} と ${pattern.y}&quot;
    } catch ( Exception ){
        // 次へ
    }
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/6478/addtag/" class="addtag" id="addtag_6478">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/groovy/">
		Groovy
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/6478/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/6478/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6478"
  >-</span><span
  class="button yellow"
  id="rating_z_6478"
  >0</span><span 
  class="button green"
  id="rating_p_6478"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/6478/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/6478/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment6484"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/793/" target="_top">genzou</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/6484/">#6484</a>(<script language="JavaScript">print_time(new Date("2008/06/13 18:49 GMT"));</script><noscript>2008/06/13 18:49 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/groovy/">
	  Groovy
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>トランプが9マイしかないロジックになってしまっていました････
修正。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><div class="highlight"><pre>// 準備
def patterns = []
(1..13).each{ x -&gt;
    (x..13).each{ y -&gt;
        patterns &lt;&lt; [x:x, y:y, a:x*y, b:x+y]
    }
}


println &quot;=====シミュレーション=====&quot;
patterns.each{ pattern -&gt;
    try{
        // ■Aさんから見た回答
        def avalue = pattern.a
        def potentialsA = patterns
        potentialsA = potentialsA.findAll{
            it.a == avalue
        }
        if( potentialsA.size() == 1 ){
            throw new Exception(&quot;わかってるジャン！&quot;)
        }
        
        
        // ■Bさんから見た回答
        def bvalue = pattern.b
        def potentialsB = patterns
        potentialsB = potentialsB.findAll{
            it.b == bvalue
        }
        if( potentialsB.size() == 1 ){
            throw new Exception(&quot;わかってるジャン！&quot;)
        }
        //println potentialsB.size()
        //println potentialsB
        // Aさんの回答として２つ以上あるものを抜き出し
        if( potentialsB.collect{ it.a }.unique().size() &lt;= 1 ){
            // 回答がわかっている
            throw new Exception()
        }
        
        
        // ■結果
        def potentials = potentialsA.intersect(potentialsB)
        if( potentials.size() &gt;= 2 ){
            throw new Exception()
        }
        
        println &quot;■カードは ${pattern.x} と ${pattern.y}&quot;
    } catch ( Exception ){
        // 次へ
    }
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/6484/addtag/" class="addtag" id="addtag_6484">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/groovy/">
		Groovy
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/6484/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/6484/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6484"
  >-</span><span
  class="button yellow"
  id="rating_z_6484"
  >0</span><span 
  class="button green"
  id="rating_p_6484"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/6478/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/6484/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/6484/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  
    




<div class="comment" id="comment1577"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/84/" target="_top">shuyo</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1577/">#1577</a>(<script language="JavaScript">print_time(new Date("2007/07/30 04:26 GMT"));</script><noscript>2007/07/30 04:26 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  shiroさんと同じく solve 関数に与える引数で値の範囲を指定できるよう一般化。
解の個数はその値の範囲で取り得る素因子が大きな要因になってる感じですね（例えば１３から１４になると解が１つ増えるのは、１４＝２＊７なので、Aに与えられる数に７を素因子として考慮することが出来るようになるため。ちなみに３個に増えるのは３８＝２＊１９のとき）。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">iieach</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
 <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.num</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">y</span><span class="o">|</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.y</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="k">yield</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span> <span class="p">}</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Hash</span>
 <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
   <span class="k">if</span> <span class="nb">self</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="k">then</span> <span class="nb">self</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="k">else</span> <span class="nb">self</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="n">value</span><span class="o">]</span> <span class="k">end</span>
 <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
  <span class="n">finv</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">ginv</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">iieach</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">|</span>
   <span class="n">finv</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="o">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">]</span><span class="p">)</span>
   <span class="n">ginv</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="o">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="c1"># Bさん「私も分かりません．ただ，Aさんが『分かりません』というのは分かっていました」</span>
  <span class="n">b2</span> <span class="o">=</span> <span class="n">ginv</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">ginv</span><span class="o">[</span><span class="n">n</span><span class="o">].</span><span class="n">length</span><span class="o">&gt;</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">ginv</span><span class="o">[</span><span class="n">n</span><span class="o">].</span><span class="n">all?</span><span class="p">{</span><span class="o">|</span><span class="n">z</span><span class="o">|</span> <span class="n">finv</span><span class="o">[</span><span class="n">z</span><span class="o">[</span><span class="mi">0</span><span class="o">]*</span><span class="n">z</span><span class="o">[</span><span class="mi">1</span><span class="o">]].</span><span class="n">length</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">}</span> <span class="p">}</span>
  <span class="n">ginvb2</span> <span class="o">=</span> <span class="n">b2</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="o">[]</span><span class="p">){</span><span class="o">|</span><span class="n">buf</span><span class="p">,</span><span class="n">n</span><span class="o">|</span> <span class="n">buf</span><span class="o">+</span><span class="n">ginv</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="p">}</span>

  <span class="c1"># Aさん「それなら，分かりました」</span>
  <span class="n">a2</span> <span class="o">=</span><span class="n">ginvb2</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">z</span><span class="o">|</span> <span class="n">z</span><span class="o">[</span><span class="mi">0</span><span class="o">]*</span><span class="n">z</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">}</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">xy</span><span class="o">|</span> <span class="p">(</span><span class="n">finv</span><span class="o">[</span><span class="n">xy</span><span class="o">]</span> <span class="o">&amp;</span> <span class="n">ginvb2</span><span class="p">)</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">}</span>
  <span class="n">finva2</span> <span class="o">=</span> <span class="n">a2</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="o">[]</span><span class="p">){</span><span class="o">|</span><span class="n">buf</span><span class="p">,</span><span class="n">n</span><span class="o">|</span> <span class="n">buf</span><span class="o">+</span><span class="n">finv</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="p">}</span>

  <span class="c1"># Bさん「それなら，私も分かりました」</span>
  <span class="n">result</span> <span class="o">=[]</span>
  <span class="n">b2</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">buf</span> <span class="o">=</span> <span class="n">ginv</span><span class="o">[</span><span class="n">n</span><span class="o">]</span> <span class="o">&amp;</span> <span class="n">finva2</span><span class="p">;</span> <span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="n">buf</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="k">if</span> <span class="n">buf</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">}</span>
  <span class="n">result</span><span class="o">.</span><span class="n">sort</span>
<span class="k">end</span>

<span class="n">num</span> <span class="o">=</span> <span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;13&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_i</span>
<span class="nb">p</span> <span class="n">solve</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1577/addtag/" class="addtag" id="addtag_1577">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1577/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1577/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1577"
  >-</span><span
  class="button yellow"
  id="rating_z_1577"
  >0</span><span 
  class="button green"
  id="rating_p_1577"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1577/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1577/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1580"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/84/" target="_top">shuyo</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1580/">#1580</a>(<script language="JavaScript">print_time(new Date("2007/07/30 07:38 GMT"));</script><noscript>2007/07/30 07:38 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  300までの解とかみると、全ての解が 2^n (n&gt;=0) と奇数の組み合わせになってるんだけど、なんかそういう法則性があることを示せたりするのかな～？
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1580/addtag/" class="addtag" id="addtag_1580">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1580"
  >-</span><span
  class="button yellow"
  id="rating_z_1580"
  >0</span><span 
  class="button green"
  id="rating_p_1580"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1577/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1580/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1580/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1580/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1620"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/155/" target="_top">nkmrtks</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1620/">#1620</a>(<script language="JavaScript">print_time(new Date("2007/07/31 06:36 GMT"));</script><noscript>2007/07/31 06:36 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>#1610で試してみたら

(trump-pairs 14)
=&gt; ((3 4) (1 4))
(trump-pairs 38)
=&gt; ((5 8) (4 7) (1 4))
(trump-pairs 300)
=&gt; ((16 43) (16 37) (8 29) (16 19) (8 23) (4 17) (7 8) (1 9) (1 8) (1 4))

で300の時に「2^n (n&gt;=0) と奇数の組み合わせ」になってない(1 9)があるんだけど、これはコッチが間違ってるかな？かな？</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1620/addtag/" class="addtag" id="addtag_1620">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1620"
  >-</span><span
  class="button yellow"
  id="rating_z_1620"
  >0</span><span 
  class="button green"
  id="rating_p_1620"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1580/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1620/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1620/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1620/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1621"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1621/">#1621</a>(<script language="JavaScript">print_time(new Date("2007/07/31 07:47 GMT"));</script><noscript>2007/07/31 07:47 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>試してみました。
[(1, 4), (1, 8), (1, 9), (4, 17), (7, 8), (8, 23), (8, 29), (16, 19), (16, 37), (16, 43)]
(1, 9)ありますねー。

元が
「2^n (n&gt;=0) と奇数の組み合わせ」と書いてあるので(1, 9)も厳密には
「2^0(つまり1)と奇数の組み合わせ」だからOKなのですけど…

でも個人的には
「p^n (pは素数, nは2以上)と、pを約数に含まない数」
という規則性の方がなんかありそうに感じます。

# 全然「どう書く」じゃないけど…いっかぁ、おもしろいし(ぉ</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1621/addtag/" class="addtag" id="addtag_1621">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1621"
  >-</span><span
  class="button yellow"
  id="rating_z_1621"
  >0</span><span 
  class="button green"
  id="rating_p_1621"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1620/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1621/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1621/">
    2
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1621/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3746"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/304/" target="_top">[1..100]&amp;gt;&amp;gt;=pen</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3746/">#3746</a>(<script language="JavaScript">print_time(new Date("2007/11/07 10:40 GMT"));</script><noscript>2007/11/07 10:40 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>1000 での解の中に (56,71), (40,109) という
今までにないパターンのものがありました。
多分間違ってないと思うのですがどなたか検証を。
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3746/addtag/" class="addtag" id="addtag_3746">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3746"
  >-</span><span
  class="button yellow"
  id="rating_z_3746"
  >0</span><span 
  class="button green"
  id="rating_p_3746"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1621/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3746/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/3746/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3746/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3749"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/164/" target="_top">kozima</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3749/">#3749</a>(<script language="JavaScript">print_time(new Date("2007/11/07 15:03 GMT"));</script><noscript>2007/11/07 15:03 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>確認してみました。確かにありますね。
出てきた解は以下の 27 個でした。

(64, 73) (56, 71) (43, 64) (40, 109) (37, 64) (32, 101) (32, 71)
(32, 53) (32, 41) (29, 32) (23, 32) (16, 103) (16, 97) (16, 73)
(16, 61) (16, 43) (16, 37) (13, 32) (11, 16) (8, 101) (8, 89) (8, 31)
(1, 32) (1, 15) (1, 9) (1, 8) (1, 4)</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3749/addtag/" class="addtag" id="addtag_3749">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3749"
  >-</span><span
  class="button yellow"
  id="rating_z_3749"
  >0</span><span 
  class="button green"
  id="rating_p_3749"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3746/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3749/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/3749/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3749/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3750"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/164/" target="_top">kozima</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3750/">#3750</a>(<script language="JavaScript">print_time(new Date("2007/11/07 15:16 GMT"));</script><noscript>2007/11/07 15:16 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>1500 だとそれらが消えて (56, 137), (17, 34) が現れました。
いずれも (素数, 2の冪*素数) ですね。
上限をもっと上げるとそれ以外のパターンも出てくるのでしょうか……</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3750/addtag/" class="addtag" id="addtag_3750">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3750"
  >-</span><span
  class="button yellow"
  id="rating_z_3750"
  >0</span><span 
  class="button green"
  id="rating_p_3750"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3749/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3750/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3750/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1622"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/155/" target="_top">nkmrtks</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1622/">#1622</a>(<script language="JavaScript">print_time(new Date("2007/07/31 07:55 GMT"));</script><noscript>2007/07/31 07:55 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>あー、nが0"以上"か…失礼しました。
整数論でごちゃごちゃやれば何か出てきそうな気はしますねぇ。
＃全然「どう書く」じゃ（ｒｙ。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1622/addtag/" class="addtag" id="addtag_1622">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1622"
  >-</span><span
  class="button yellow"
  id="rating_z_1622"
  >0</span><span 
  class="button green"
  id="rating_p_1622"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1621/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1622/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1622/">
    2
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1622/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3597"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/304/" target="_top">[1..100]&amp;gt;&amp;gt;=pen</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3597/">#3597</a>(<script language="JavaScript">print_time(new Date("2007/10/30 10:10 GMT"));</script><noscript>2007/10/30 10:10 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>(2^m, p) のペアが解になりやすい理由のかなりいい加減な説明です。

説明中の a1,b1,a2,b2 というグループは #1555 shiroさんのプログラムの
ものです。
 
■ b1グループには偶数はほとんどない。

偶数 x は奇素数 p,q で x = p+q と書けるだろう。（ゴールドバッハ予想）
Aさんに知らされた積が p*q だったら ペアの可能性は (1,p*q) と (p,q) の
２通りしかありえないがたいてい p*q は n を超える（本当？）ので答えは
(p,q) しかありえない。つまりAさんは答えがわかる。
これは Bさんの「Aさんが『分かりません』というのは分かっていました」に
反するので b1グループに x は入らない。

■ 約数がほとんど偶数だと a2グループに入りやすい。

Aさんに知らされた積が x とすると AさんはBさんに知らされた和の候補と
して {a+b| a*b = x} を考える。
x の約数がほとんど偶数だと a も b も偶数の確率が高いので a+b も
ほとんど偶数。よってほとんどの a+b は b1グループに属さず残りの可能性
のあるペア (a,b) を絞り込みやすい。
つまりAさんが「それなら，分かりました」となる確率が高い。

■ (2^m)*p （p は奇素数）は a2グループに入りやすい。

(2^m)*p の約数 {1,2,...,2^m,p,2*p,...(2^m)*p} のほとんどは偶数。
（奇数は 1 と p のみ）
よって (2^m)*p は a2グループに入りやすい。

■ 積が (2^m)*p で、和が b1グループに入るペアはたいてい (2^m, p) のみ。

和の候補 {2^i+(2^(m-i))*p| i &lt;= m} のほとんどは偶数で奇数なのは
1+(2^m)*p と p+2^m の２つのみ。(2^m)*p はたいてい n より大きい（本当？）
ので和の可能性があるのは p+2^m。つまりペアは (2^m, p) 。

［注意]

上記は (2^m, p) 以外が解になりにくいことの説明にはないっていません。
a2 を実際に書かせてみればわかるのですが (2^m)*p 以外の値も結構入って
います。それがなぜ最終的に b2グループで (2^m)*p だけに絞られるのかは
全然わかりません。
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3597/addtag/" class="addtag" id="addtag_3597">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3597"
  >-</span><span
  class="button yellow"
  id="rating_z_3597"
  >0</span><span 
  class="button green"
  id="rating_p_3597"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1622/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3597/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3597/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1835"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/155/" target="_top">nkmrtks</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1835/">#1835</a>(<script language="JavaScript">print_time(new Date("2007/08/04 16:41 GMT"));</script><noscript>2007/08/04 16:41 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>#1832をぐるぐる回して1～492までやってみた（中途半端なのは見逃して＞＜）
誰か法則を見つけてみて！私は無理(＞＜)ネムイ
＃全然どう書くじゃ（ｒｙ

カードの枚数 : 組み合わせ
  1～  9 : NIL
 10～ 13 : ((1 4))
 14～ 21 : ((3 4) (1 4))
 22～ 24 : ((1 4))
 25～ 37 : ((4 7) (1 4))
 38～ 45 : ((5 8) (4 7) (1 4))
 46～ 48 : ((4 13) (5 8) (1 4))
 49～ 61 : ((4 13) (5 8) (1 8) (1 4))
 62～ 73 : ((8 11) (4 13) (5 8) (1 8) (1 4))
 74～ 85 : ((8 11) (4 13) (1 8) (1 4))
 86～ 93 : ((8 11) (4 13) (7 8) (1 8) (1 4))
 94～105 : ((8 11) (7 8) (1 8) (1 4))
106～117 : ((13 16) (8 11) (7 8) (1 8) (1 4))
118～120 : ((8 23) (13 16) (8 11) (7 8) (1 8) (1 4))
121～145 : ((8 23) (13 16) (4 19) (8 11) (7 8) (1 8) (1 4))
146～165 : ((8 23) (13 16) (8 11) (7 8) (1 8) (1 4))
166～168 : ((8 23) (13 16) (7 8) (1 8) (1 4))
169～193 : ((8 29) (8 23) (13 16) (8 17) (7 8) (1 9) (1 8) (1 4))
194～205 : ((4 37) (8 29) (8 23) (13 16) (8 17) (7 8) (1 9) (1 8) (1 4))
206～225 : ((4 37) (8 29) (8 23) (13 16) (8 17) (4 17) (7 8) (1 9) (1 8) (1 4))
226～261 : ((16 37) (4 37) (8 29) (16 19) (8 23) (13 16) (8 17) (4 17) (7 8) (1 9) (1 8) (1 4))
262～277 : ((16 37) (4 37) (8 29) (16 19) (8 23) (13 16) (4 17) (7 8) (1 9) (1 8) (1 4))
278～288 : ((16 43) (16 37) (8 29) (16 19) (8 23) (13 16) (4 17) (7 8) (1 9) (1 8) (1 4))
289～322 : ((16 43) (16 37) (8 29) (16 19) (8 23) (4 17) (7 8) (1 9) (1 8) (1 4))
323～333 : ((16 43) (16 37) (8 29) (16 19) (8 23) (7 8) (1 9) (1 8) (1 4))
334～342 : ((4 61) (16 43) (16 37) (16 31) (8 29) (16 19) (8 23) (7 8) (1 9) (1 8) (1 4))
343～360 : ((4 61) (16 43) (16 37) (16 31) (11 32) (8 29) (16 19) (8 23) (7 8) (1 9) (1 8) (1 4))
361      : ((4 61) (16 43) (16 37) (16 31) (11 32) (8 29) (16 19) (8 23) (1 9) (1 8) (1 4))
362～381 : ((4 61) (16 43) (16 37) (16 31) (11 32) (8 29) (16 19) (1 9) (1 8) (1 4))
382～421 : ((8 59) (4 61) (16 43) (16 37) (16 31) (11 32) (8 29) (16 19) (1 9) (1 8) (1 4))
422～457 : ((32 41) (8 59) (4 61) (16 43) (16 37) (16 31) (11 32) (8 29) (16 19) (1 9) (1 8) (1 4))
458～481 : ((32 41) (8 59) (4 61) (16 43) (16 37) (16 31) (11 32) (16 19) (1 9) (1 8) (1 4))
482～492～？ : ((32 41) (8 59) (16 43) (16 37) (16 31) (11 32) (16 19) (1 9) (1 8) (1 4))
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1835/addtag/" class="addtag" id="addtag_1835">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1835"
  >-</span><span
  class="button yellow"
  id="rating_z_1835"
  >0</span><span 
  class="button green"
  id="rating_p_1835"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1622/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1835/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1835/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  


    </div>
  


    </div>
  


  

  

  
    




<div class="comment" id="comment1555"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1555/">#1555</a>(<script language="JavaScript">print_time(new Date("2007/07/29 03:32 GMT"));</script><noscript>2007/07/29 03:32 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>うー、一番乗りできなかった。

というわけで若干一般化して、1からnまでのカードの場合の
解を求めてみました。総当たりなので効率は悪いでしょう。

1から13までの場合は、(1,4)が唯一の解のようですね。
*Main&gt; solve 13
[(1,4)]

カードを増やしてゆくと解が複数出るようになりますが、
解の個数が必ずしも単調増加にならないようで
おもしろいです。

*Main&gt; map (length . solve) [5..50]
[0,0,0,0,0,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,4,4]

</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td class="code"><div class="highlight"><pre><span class="nv">solve</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">answer</span> <span class="kr">where</span>
  <span class="nv">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nv">n</span><span class="p">]</span>
  <span class="nv">picks</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="nv">a</span> <span class="o">&lt;-</span> <span class="nv">numbers</span><span class="p">,</span> <span class="nv">b</span> <span class="o">&lt;-</span> <span class="nv">numbers</span><span class="p">,</span> <span class="nv">a</span><span class="o">&lt;=</span><span class="nv">b</span> <span class="p">]</span>
  <span class="nv">multiplesTo</span> <span class="nv">x</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">picks</span><span class="p">,</span> <span class="nv">a</span><span class="o">*</span><span class="nv">b</span> <span class="o">==</span> <span class="nv">x</span><span class="p">]</span>
  <span class="nv">sumsTo</span> <span class="nv">x</span>      <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">picks</span><span class="p">,</span> <span class="nv">a</span><span class="o">+</span><span class="nv">b</span> <span class="o">==</span> <span class="nv">x</span><span class="p">]</span>

  <span class="nv">a1</span> <span class="o">=</span> <span class="p">[</span><span class="nv">m</span> <span class="o">|</span> <span class="nv">m</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="o">*</span><span class="mi">13</span><span class="p">],</span> <span class="nv">length</span><span class="p">(</span><span class="nv">multiplesTo</span> <span class="nv">m</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>
  <span class="nv">b1</span> <span class="o">=</span> <span class="p">[</span><span class="nv">s</span> <span class="o">|</span> <span class="nv">s</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="o">+</span><span class="mi">13</span><span class="p">],</span> <span class="nv">length</span><span class="p">(</span><span class="nv">sumsTo</span> <span class="nv">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">check</span> <span class="nv">s</span><span class="p">]</span>
    <span class="kr">where</span> <span class="nv">check</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">all</span> <span class="p">(</span><span class="o">\</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">a</span><span class="o">*</span><span class="nv">b</span><span class="p">)</span> <span class="nv">a1</span><span class="p">)</span> <span class="o">$</span> <span class="nv">sumsTo</span> <span class="nv">s</span>

  <span class="nv">a2</span> <span class="o">=</span> <span class="p">[</span><span class="nv">m</span> <span class="o">|</span> <span class="nv">m</span> <span class="o">&lt;-</span> <span class="nv">a1</span><span class="p">,</span> <span class="nv">length</span> <span class="p">(</span><span class="nv">possible</span> <span class="nv">m</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
    <span class="kr">where</span> <span class="nv">possible</span> <span class="nv">m</span> <span class="o">=</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">a</span><span class="o">+</span><span class="nv">b</span><span class="p">)</span> <span class="nv">b1</span><span class="p">)</span> <span class="o">$</span> <span class="nv">multiplesTo</span> <span class="nv">m</span>
  <span class="nv">b2</span> <span class="o">=</span> <span class="p">[</span><span class="nv">s</span> <span class="o">|</span> <span class="nv">s</span> <span class="o">&lt;-</span> <span class="nv">b1</span><span class="p">,</span> <span class="nv">length</span> <span class="p">(</span><span class="nv">possible</span> <span class="nv">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
    <span class="kr">where</span> <span class="nv">possible</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">a</span><span class="o">*</span><span class="nv">b</span><span class="p">)</span> <span class="nv">a2</span><span class="p">)</span> <span class="o">$</span> <span class="nv">sumsTo</span> <span class="nv">s</span>

  <span class="nv">answer</span> <span class="o">=</span> <span class="p">[(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">picks</span><span class="p">,</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">a</span><span class="o">+</span><span class="nv">b</span><span class="p">)</span> <span class="nv">b2</span><span class="p">,</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">a</span><span class="o">*</span><span class="nv">b</span><span class="p">)</span> <span class="nv">a2</span><span class="p">]</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1555/addtag/" class="addtag" id="addtag_1555">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1555/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1555/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1555"
  >-</span><span
  class="button yellow"
  id="rating_z_1555"
  >0</span><span 
  class="button green"
  id="rating_p_1555"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1555/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1555/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1558"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1558/">#1558</a>(<script language="JavaScript">print_time(new Date("2007/07/29 05:26 GMT"));</script><noscript>2007/07/29 05:26 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  うう、13がまだハードコードされてた…
訂正ついでに少し整理。

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><div class="highlight"><pre><span class="nv">solve</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">answer</span> <span class="kr">where</span>
  <span class="nv">picks</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="nv">a</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nv">n</span><span class="p">],</span> <span class="nv">b</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nv">n</span><span class="p">],</span> <span class="nv">a</span><span class="o">&lt;=</span><span class="nv">b</span> <span class="p">]</span>

  <span class="nv">plural</span> <span class="p">(</span><span class="kr">_</span><span class="o">:</span><span class="kr">_</span><span class="o">:</span><span class="kr">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">True</span>
  <span class="nv">plural</span> <span class="kr">_</span>       <span class="o">=</span> <span class="n">False</span>
  <span class="nv">singular</span> <span class="p">[</span><span class="kr">_</span><span class="p">]</span>   <span class="o">=</span> <span class="n">True</span>
  <span class="nv">singular</span> <span class="kr">_</span>     <span class="o">=</span> <span class="n">False</span>

  <span class="nv">multiplesTo</span> <span class="nv">x</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">picks</span><span class="p">,</span> <span class="nv">a</span><span class="o">*</span><span class="nv">b</span> <span class="o">==</span> <span class="nv">x</span><span class="p">]</span>
  <span class="nv">sumsTo</span> <span class="nv">x</span>      <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">picks</span><span class="p">,</span> <span class="nv">a</span><span class="o">+</span><span class="nv">b</span> <span class="o">==</span> <span class="nv">x</span><span class="p">]</span>

  <span class="nv">multipleIn</span> <span class="nv">ms</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">=</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">a</span><span class="o">*</span><span class="nv">b</span><span class="p">)</span> <span class="nv">ms</span>
  <span class="nv">sumIn</span> <span class="nv">ss</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span>      <span class="o">=</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">a</span><span class="o">+</span><span class="nv">b</span><span class="p">)</span> <span class="nv">ss</span>

  <span class="nv">a1</span> <span class="o">=</span> <span class="p">[</span><span class="nv">m</span> <span class="o">|</span> <span class="nv">m</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nv">n</span><span class="o">*</span><span class="nv">n</span><span class="p">],</span> <span class="nv">plural</span> <span class="o">$</span> <span class="nv">multiplesTo</span> <span class="nv">m</span> <span class="p">]</span>
  <span class="nv">b1</span> <span class="o">=</span> <span class="p">[</span><span class="nv">s</span> <span class="o">|</span> <span class="nv">s</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nv">n</span><span class="o">+</span><span class="nv">n</span><span class="p">],</span> <span class="nv">plural</span> <span class="o">$</span> <span class="nv">sumsTo</span> <span class="nv">s</span><span class="p">,</span> <span class="nv">all</span> <span class="p">(</span><span class="nv">multipleIn</span> <span class="nv">a1</span><span class="p">)</span> <span class="o">$</span> <span class="nv">sumsTo</span> <span class="nv">s</span><span class="p">]</span>

  <span class="nv">a2</span> <span class="o">=</span> <span class="p">[</span><span class="nv">m</span> <span class="o">|</span> <span class="nv">m</span> <span class="o">&lt;-</span> <span class="nv">a1</span><span class="p">,</span> <span class="nv">singular</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="nv">sumIn</span> <span class="nv">b1</span><span class="p">)</span> <span class="o">$</span> <span class="nv">multiplesTo</span> <span class="nv">m</span><span class="p">]</span>
  <span class="nv">b2</span> <span class="o">=</span> <span class="p">[</span><span class="nv">s</span> <span class="o">|</span> <span class="nv">s</span> <span class="o">&lt;-</span> <span class="nv">b1</span><span class="p">,</span> <span class="nv">singular</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="nv">multipleIn</span> <span class="nv">a2</span><span class="p">)</span> <span class="o">$</span> <span class="nv">sumsTo</span> <span class="nv">s</span> <span class="p">]</span>

  <span class="nv">answer</span> <span class="o">=</span> <span class="p">[(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">picks</span><span class="p">,</span> <span class="nv">sumIn</span> <span class="nv">b2</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">),</span> <span class="nv">multipleIn</span> <span class="nv">a2</span> <span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)]</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1558/addtag/" class="addtag" id="addtag_1558">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1558/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1558/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1558"
  >-</span><span
  class="button yellow"
  id="rating_z_1558"
  >0</span><span 
  class="button green"
  id="rating_p_1558"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1555/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1558/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1558/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1558/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1608"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1608/">#1608</a>(<script language="JavaScript">print_time(new Date("2007/07/31 02:49 GMT"));</script><noscript>2007/07/31 02:49 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>picks = [ (a,b) | a &lt;- [1..n], b &lt;- [a..n] ]
かな。いっそのこと積も和も持たせてしまうというのもありかも。
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">List</span>

<span class="c1">-- general utilities </span>

<span class="nv">starling</span> <span class="o">::</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span> <span class="o">-&gt;</span> <span class="nv">c</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">c</span><span class="p">)</span>
<span class="nv">starling</span> <span class="nv">f</span> <span class="nv">g</span> <span class="nv">x</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">x</span> <span class="p">(</span><span class="nv">g</span> <span class="nv">x</span><span class="p">)</span>

<span class="nv">binapp</span> <span class="nv">b</span> <span class="nv">f</span> <span class="nv">g</span> <span class="nv">x</span> <span class="nv">y</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">x</span> <span class="p">`</span><span class="nv">b</span><span class="p">`</span> <span class="nv">g</span> <span class="nv">y</span>
<span class="nv">binapp&#39;</span> <span class="nv">b</span> <span class="nv">f</span> <span class="nv">g</span> <span class="o">=</span> <span class="nv">starling</span> <span class="p">(</span><span class="nv">binapp</span> <span class="nv">b</span> <span class="nv">f</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">id</span>

<span class="nv">eqapp</span> <span class="o">::</span> <span class="n">Eq</span> <span class="nv">b</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">a</span> <span class="o">-&gt;</span> <span class="n">Bool</span>
<span class="nv">eqapp</span>  <span class="o">=</span> <span class="nv">starling</span> <span class="p">(</span><span class="nv">binapp</span> <span class="p">(</span><span class="o">==</span><span class="p">))</span> <span class="nv">id</span>

<span class="nv">cmpapp</span> <span class="o">::</span> <span class="n">Ord</span> <span class="nv">b</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">a</span> <span class="o">-&gt;</span> <span class="n">Ordering</span>
<span class="nv">cmpapp</span> <span class="o">=</span> <span class="nv">starling</span> <span class="p">(</span><span class="nv">binapp</span> <span class="nv">compare</span><span class="p">)</span> <span class="nv">id</span>

<span class="nv">singular</span> <span class="p">[</span><span class="kr">_</span><span class="p">]</span> <span class="o">=</span> <span class="n">True</span>
<span class="nv">singular</span> <span class="kr">_</span>   <span class="o">=</span> <span class="n">False</span>

<span class="nv">singulars</span> <span class="nv">f</span> <span class="o">=</span> <span class="nv">concat</span> <span class="o">.</span> <span class="nv">filter</span> <span class="nv">singular</span> <span class="o">.</span> <span class="nv">groupBy</span> <span class="p">(</span><span class="nv">eqapp</span> <span class="nv">f</span><span class="p">)</span> <span class="o">.</span> <span class="nv">sortBy</span> <span class="p">(</span><span class="nv">cmpapp</span> <span class="nv">f</span><span class="p">)</span>
<span class="nv">plurals</span>   <span class="nv">f</span> <span class="o">=</span> <span class="nv">filter</span> <span class="p">(</span><span class="nv">not</span> <span class="o">.</span> <span class="nv">singular</span><span class="p">)</span>  <span class="o">.</span> <span class="nv">groupBy</span> <span class="p">(</span><span class="nv">eqapp</span> <span class="nv">f</span><span class="p">)</span> <span class="o">.</span> <span class="nv">sortBy</span> <span class="p">(</span><span class="nv">cmpapp</span> <span class="nv">f</span><span class="p">)</span>

<span class="c1">-- types</span>

<span class="kr">type</span> <span class="n">Pair</span> <span class="o">=</span> <span class="p">(</span><span class="n">Int</span><span class="p">,</span><span class="n">Int</span><span class="p">)</span>
<span class="kr">type</span> <span class="n">Sum</span>  <span class="o">=</span> <span class="n">Int</span>
<span class="kr">type</span> <span class="n">Mul</span>  <span class="o">=</span> <span class="n">Int</span>

<span class="nv">nmul</span> <span class="o">::</span> <span class="p">(</span><span class="n">Pair</span><span class="p">,(</span><span class="n">Mul</span><span class="p">,</span><span class="n">Sum</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Mul</span>
<span class="nv">nmul</span> <span class="o">=</span> <span class="nv">fst</span> <span class="o">.</span> <span class="nv">snd</span>
<span class="nv">nsum</span> <span class="o">::</span> <span class="p">(</span><span class="n">Pair</span><span class="p">,(</span><span class="n">Mul</span><span class="p">,</span><span class="n">Sum</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Sum</span>
<span class="nv">nsum</span> <span class="o">=</span> <span class="nv">snd</span> <span class="o">.</span> <span class="nv">snd</span>

<span class="nv">solve</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="p">[(</span><span class="n">Pair</span><span class="p">,(</span><span class="n">Mul</span><span class="p">,</span><span class="n">Sum</span><span class="p">))]</span>
<span class="nv">solve</span> <span class="o">=</span> <span class="nv">b2</span>

<span class="nv">xys</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="p">[(</span><span class="n">Pair</span><span class="p">,(</span><span class="n">Mul</span><span class="p">,</span><span class="n">Sum</span><span class="p">))]</span>
<span class="nv">xys</span> <span class="nv">n</span> <span class="o">=</span> <span class="p">[</span> <span class="p">((</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">),(</span><span class="nv">x</span><span class="o">*</span><span class="nv">y</span><span class="p">,</span><span class="nv">x</span><span class="o">+</span><span class="nv">y</span><span class="p">))</span> <span class="o">|</span> <span class="nv">x</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nv">n</span><span class="p">],</span> <span class="nv">y</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="nv">x</span><span class="o">..</span><span class="nv">n</span><span class="p">]]</span>

<span class="nv">a1</span><span class="p">,</span><span class="nv">b1</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="p">[[(</span><span class="n">Pair</span><span class="p">,</span> <span class="p">(</span><span class="n">Mul</span><span class="p">,</span> <span class="n">Sum</span><span class="p">))]]</span>
<span class="nv">a1</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">plurals</span> <span class="nv">nmul</span> 
     <span class="o">$</span> <span class="nv">xys</span> <span class="nv">n</span>

<span class="nv">b1</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">filter</span> <span class="p">(</span><span class="nv">all</span> <span class="nv">id</span> <span class="o">.</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">flip</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">map</span> <span class="p">(</span><span class="nv">nmul</span> <span class="o">.</span> <span class="nv">head</span><span class="p">)</span> <span class="p">(</span><span class="nv">a1</span> <span class="nv">n</span><span class="p">))</span> <span class="o">.</span> <span class="nv">nmul</span><span class="p">))</span> 
     <span class="o">$</span> <span class="nv">plurals</span> <span class="nv">nsum</span> 
     <span class="o">$</span> <span class="nv">xys</span> <span class="nv">n</span>

<span class="nv">a2</span><span class="p">,</span><span class="nv">b2</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="p">[(</span><span class="n">Pair</span><span class="p">,</span> <span class="p">(</span><span class="n">Mul</span><span class="p">,</span> <span class="n">Sum</span><span class="p">))]</span>
<span class="nv">a2</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">singulars</span> <span class="nv">nmul</span> 
     <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="nv">flip</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">map</span> <span class="p">(</span><span class="nv">nsum</span> <span class="o">.</span> <span class="nv">head</span><span class="p">)</span> <span class="p">(</span><span class="nv">b1</span> <span class="nv">n</span><span class="p">))</span> <span class="o">.</span> <span class="nv">nsum</span><span class="p">)</span> 
     <span class="o">$</span> <span class="nv">concat</span> 
     <span class="o">$</span> <span class="nv">a1</span> <span class="nv">n</span>

<span class="nv">b2</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">singulars</span> <span class="nv">nsum</span> 
     <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="nv">flip</span> <span class="nv">elem</span> <span class="p">(</span><span class="nv">map</span> <span class="nv">nmul</span> <span class="p">(</span><span class="nv">a2</span> <span class="nv">n</span><span class="p">))</span> <span class="o">.</span> <span class="nv">nmul</span><span class="p">)</span> 
     <span class="o">$</span> <span class="nv">concat</span> 
     <span class="o">$</span> <span class="nv">b1</span> <span class="nv">n</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1608/addtag/" class="addtag" id="addtag_1608">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1608/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1608/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1608"
  >-</span><span
  class="button yellow"
  id="rating_z_1608"
  >0</span><span 
  class="button green"
  id="rating_p_1608"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1558/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1608/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1608/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1608/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1609"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1609/">#1609</a>(<script language="JavaScript">print_time(new Date("2007/07/31 03:20 GMT"));</script><noscript>2007/07/31 03:20 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>なんかnobsunみたいなコードだなあと思って読んでったらやっぱりnobsunでした:)

積と和も最初からpicksに持たせちゃうってのもやりかけたんですが、
却って長くなってしまったので途中で投げてしまいました。
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1609/addtag/" class="addtag" id="addtag_1609">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1609"
  >-</span><span
  class="button yellow"
  id="rating_z_1609"
  >0</span><span 
  class="button green"
  id="rating_p_1609"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1608/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1609/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1609/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  


  

  
    




<div class="comment" id="comment1655"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/190/" target="_top">fkmn</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1655/">#1655</a>(<script language="JavaScript">print_time(new Date("2007/08/01 12:14 GMT"));</script><noscript>2007/08/01 12:14 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/sql/">
	  SQL
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  MySQL (ver. 5.0.45) で確認。他のDBでも動くはず。

SQL向きの問題かと思ったら、結構手こずってしまった。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre></td><td class="code"><div class="highlight"><pre><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">cards</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">cards</span><span class="p">(</span><span class="n">n</span> <span class="nb">INTEGER</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">cards</span> <span class="k">VALUES</span><span class="p">(</span><span class="mi">13</span><span class="p">);</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">combinations</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">combinations</span> <span class="k">AS</span> 
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">n</span> <span class="k">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">n</span> <span class="k">AS</span> <span class="n">b</span>
  <span class="k">FROM</span> <span class="n">cards</span> <span class="n">a</span><span class="p">,</span> <span class="n">cards</span> <span class="n">b</span>
 <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="n">a</span><span class="p">.</span><span class="n">n</span><span class="p">;</span>

<span class="c1">-- Aさん「(この情報だけでは)分かりません」</span>
<span class="k">DROP</span> <span class="k">VIEW</span> <span class="n">a1</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">a1</span> <span class="k">AS</span> 
<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
  <span class="k">FROM</span> <span class="n">combinations</span>
 <span class="k">WHERE</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> 
                     <span class="k">FROM</span> <span class="n">combinations</span>
                 <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
                   <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">-- Bさん「私も分かりません．ただ，Aさんが『分かりません』というのは分かっていました」</span>
<span class="k">DROP</span> <span class="k">VIEW</span> <span class="n">b1</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">b1</span> <span class="k">AS</span> 
<span class="k">SELECT</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="k">AS</span> <span class="n">n</span>
  <span class="k">FROM</span> <span class="n">combinations</span> <span class="k">c</span>
 <span class="k">WHERE</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
                     <span class="k">FROM</span> <span class="n">combinations</span>
                 <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
                   <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
  <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">=</span> <span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
                                              <span class="k">FROM</span> <span class="n">a1</span>
                                          <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span>
                             <span class="k">THEN</span> <span class="mi">1</span>
                             <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">);</span>

<span class="k">DROP</span> <span class="k">VIEW</span> <span class="n">b2</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">b2</span> <span class="k">AS</span> 
<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
  <span class="k">FROM</span> <span class="n">combinations</span> <span class="k">c</span>
 <span class="k">WHERE</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">n</span> <span class="k">FROM</span> <span class="n">b1</span><span class="p">);</span>

<span class="c1">-- Aさん「それなら，分かりました」</span>
<span class="k">DROP</span> <span class="k">VIEW</span> <span class="n">a2</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">a2</span> <span class="k">AS</span> 
<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
  <span class="k">FROM</span> <span class="n">b2</span> 
 <span class="k">WHERE</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
                     <span class="k">FROM</span> <span class="n">b2</span>
                 <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
                   <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>

<span class="c1">-- Bさん「それなら，私も分かりました」</span>
<span class="k">DROP</span> <span class="k">VIEW</span> <span class="n">b3</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">b3</span> <span class="k">AS</span> 
<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
  <span class="k">FROM</span> <span class="n">a2</span> 
 <span class="k">WHERE</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
                     <span class="k">FROM</span> <span class="n">a2</span>
                 <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
                   <span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">b3</span><span class="p">;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1655/addtag/" class="addtag" id="addtag_1655">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/sql/">
		SQL
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1655/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1655/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1655"
  >-</span><span
  class="button yellow"
  id="rating_z_1655"
  >0</span><span 
  class="button green"
  id="rating_p_1655"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1655/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  

  
    




<div class="comment" id="comment1897"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1897/">#1897</a>(<script language="JavaScript">print_time(new Date("2007/08/06 02:46 GMT"));</script><noscript>2007/08/06 02:46 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/awk/">
	  awk
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>awkの配列の扱いが面倒でちょっと手間がかかりました。面白いパズルですね。
% awk -f tramp.awk 
x=1, y=4
% awk -f tramp.awk -v max=14
x=1, y=4
x=3, y=4
% awk -f tramp.awk -v max=100
x=1, y=4
x=1, y=8
x=7, y=8
x=8, y=11</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre></td><td class="code"><div class="highlight"><pre>#
# 1 ≦ x ≦ y ≦ max とし、
# Aさんに渡る値 xy を a, Bさんに渡る値 x+y を b とおく
#
BEGIN {
	if (max &lt; 1) max = 13
	#
	# a, b がとりうる値にはどんなものがあるか調べておく
	#
	for (x=1; x&lt;=max; x++) {
		for (y=x; y&lt;=max; y++) {
			a = x * y
			b = x + y
			possible_a[a]++
			possible_b[b]++
		}
	}

	#
	# とりうる全ての a について、x*y=a になる x,y,b=x+y の組み合わせを全て得ておく。(x,bのみ保存。カンマ区切り)
	#
	for (a in possible_a) {
		possible_combinations_for_product(a, combinations)
		combinations_count = combinations[0]
		possible_xs = &quot;&quot;
		possible_bs = &quot;&quot;
		for (i=1; i&lt;=combinations_count; i++) {
			x = combinations[i,0]
			y = combinations[i,1]
			b = x + y
			possible_xs = possible_xs &quot;,&quot; x
			possible_bs = possible_bs &quot;,&quot; b # &quot;@&quot; x
		}
		possible_combinations_for_a[a] = combinations_count
		possible_xs_for_a[a] = substr(possible_xs,2)
		possible_bs_for_a[a] = substr(possible_bs,2)
		if (combinations_count == 1) A_can_tell_promptly_if_a_is[a] = 1
	}

	#
	# とりうる全ての b について、x+y=b になる x,y,a=x*y の組み合わせを全て得ておく。(x,aのみ保存。カンマ区切り)
	#
	for (b in possible_b) {
		possible_combinations_for_sum(b, combinations)
		combinations_count = combinations[0]
		possible_xs = &quot;&quot;
		possible_as = &quot;&quot;
		A_can_tell = 0
		for (i=1; i&lt;=combinations_count; i++) {
			x = combinations[i,0]
			y = combinations[i,1]
			a = x * y
			possible_xs = possible_xs &quot;,&quot; x
			possible_as = possible_as &quot;,&quot; a &quot;@&quot; x

			# Aさんに渡るのがこの a だとしたら、Aさんはすぐに分かってしまうか？
			if (A_can_tell_promptly_if_a_is[a]) A_can_tell++
		}
		possible_combinations_for_b[b] = combinations_count
		possible_xs_for_b[b] = substr(possible_xs,2)
		possible_as_with_x_for_b[b] = substr(possible_as,2)
		if (combinations_count == 1) B_can_tell_if_b_is[b] = 1

		# Aさんにもすぐには分からないことが推論できるbなら
		if (A_can_tell == 0) B_knows_A_cannot_tell_if_b_is[b] = 1
	}

	#
	# とりうる全ての a について、Bが「Aさんにはわからない」と断言できる b が１つだけあり、Aさんが x,y を一つに絞れる a
	#
	for (a in possible_a) {
		n = split(possible_bs_for_a[a], bs, &quot;,&quot;)
		b_can_say = 0
		for (i=1; i&lt;=n; i++) {
			b = bs[i]

			# Bさんには「Aさんにはわかるまい」と映る値であれば
			if (B_knows_A_cannot_tell_if_b_is[b]) b_can_say++
		}

		# Bさんには「Aさんにはわかるまい」と映る値がただ１つある（→Aさんはx,yの組み合わせが１つに絞り込める）
		if (b_can_say == 1) A_can_guess_if_a_is[a] = 1
	}


	#
	#
	for (x=1; x&lt;=max; x++) {
		for (y=x; y&lt;=max; y++) {
			a = x * y
			b = x + y

			# Aさん「(この情報だけでは)分かりません」
			if (A_can_tell_promptly_if_a_is[a]) continue

			# Bさん「私も分かりません．ただ，Aさんが『分かりません』というのは分かっていました」
			if (B_can_tell_if_b_is[b]) continue
			if (! B_knows_A_cannot_tell_if_b_is[b]) continue

			# それを聞いたAさん「それなら，分かりました」
			# Aさんが示された値から考えうる x,y の全ての組み合わせについて,(Bさんが見ることになる)積を検討する
			if (! A_can_guess_if_a_is[a]) continue

			# それを聞いたBさん「それなら，私も分かりました」
			a_can_guess = 0
			the_x = 0
			n = split(possible_as_with_x_for_b[b], as, &quot;,&quot;)
			for (i=1; i&lt;=n; i++) {
				split(as[i], a_at_x, &quot;@&quot;)
				a2 = a_at_x[1]
				if (A_can_guess_if_a_is[a2]) {
					a_can_guess++
					the_x = a_at_x[2]
				}
			}

			if (a_can_guess == 1) {
				# Aさんが絞り込める組み合わせが１つしかないのでBさんにもわかる
				the_y = b - the_x
				printf(&quot;x=%d, y=%d¥n&quot;, the_x, the_y)
			}
		}
	}

	exit;
}

function possible_combinations_for_product(xy,s, cnt,x,y)
{
	s[0] = cnt = 0
	for (y=1; y&lt;=max; y++) {
		if (xy % y == 0) {
			x = xy / y
			if (x &lt;= y) {
				cnt++
				s[cnt,0] = x
				s[cnt,1] = y
			}
		}
	}
	s[0] = cnt
}
function possible_combinations_for_sum(sum,s, x,y,a)
{
	s[0] = cnt = 0
	for (x=1; x&lt;=sum/2; x++) {
		y = sum - x
		if (y &lt;= max) {
			cnt++
			s[cnt,0] = x
			s[cnt,1] = y
		}
	}
	s[0] = cnt
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1897/addtag/" class="addtag" id="addtag_1897">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/awk/">
		awk
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1897/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1897/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1897"
  >-</span><span
  class="button yellow"
  id="rating_z_1897"
  >0</span><span 
  class="button green"
  id="rating_p_1897"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1897/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  

  
    




<div class="comment" id="comment1610"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/155/" target="_top">nkmrtks</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1610/">#1610</a>(<script language="JavaScript">print_time(new Date("2007/07/31 03:51 GMT"));</script><noscript>2007/07/31 03:51 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>(trump-pairs 13)
=&gt; ((1 4))

(trump-pairs 14)
=&gt; ((3 4) (1 4))
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></td><td class="code"><div class="highlight"><pre>(defun trump-pairs (num)
  (let (pairs)
    (dotimes (i num)
      (dotimes (j num)
        (let ((n1 (1+ i)) (n2 (1+ j)))
          (and (&lt;= n1 n2)
               (push (list (* n1 n2) (+ n1 n2) n1 n2) pairs)))))
    (setf pairs
          ;Bさん「私も分かりません．…
          (mapcar #&#39;(lambda (p)
                      (if (= 1 (count-if #&#39;(lambda (b) (= (second p) (second b)))
                                         pairs))
                          (append (list (car p) nil) (cddr p))
                        p))
                  ;Aさん「(この情報だけでは)分かりません」
                  (mapcar #&#39;(lambda (p)
                              (if (= 1 (count-if #&#39;(lambda (a) (= (first p) (first a)))
                                                 pairs))
                                  (append &#39;(nil) (cdr p))
                                p))
                          pairs)))
    (setf pairs
          ;…ただ，Aさんが『分かりません』というのは分かっていました」
          (apply #&#39;nconc
                 (delete-if #&#39;(lambda (p)
                                (some #&#39;(lambda (x) (null (first x))) p))
                            (mapcar #&#39;(lambda (b)
                                        (remove-if-not #&#39;(lambda (p)
                                                           (and (integerp (second p))
                                                                (= b (second p))))
                                                       pairs))
                                    (delete-duplicates (delete-if #&#39;null (mapcar #&#39;second pairs)))))))
    (setf pairs
          ;それを聞いたAさん「それなら，分かりました」
          (remove-if-not #&#39;(lambda (p)
                             (= 1 (count-if #&#39;(lambda (a) (= (first p) (first a)))
                                            pairs)))
                         pairs))
    (setf pairs
          ;それを聞いたBさん「それなら，私も分かりました」
          (remove-if-not #&#39;(lambda (p)
                             (= 1 (count-if #&#39;(lambda (b) (= (second p) (second b)))
                                            pairs)))
                         pairs))
    (mapcar #&#39;cddr pairs)))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1610/addtag/" class="addtag" id="addtag_1610">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1610/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1610/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1610"
  >-</span><span
  class="button yellow"
  id="rating_z_1610"
  >0</span><span 
  class="button green"
  id="rating_p_1610"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1610/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1610/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1676"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/155/" target="_top">nkmrtks</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1676/">#1676</a>(<script language="JavaScript">print_time(new Date("2007/08/02 01:03 GMT"));</script><noscript>2007/08/02 01:03 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  ちょこっと高速化。解き方は変わってません。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></td><td class="code"><div class="highlight"><pre>(defun trump-pairs (num)
  (let (pairs)
    (dotimes (i num)
      (dotimes (j num)
        (let ((n1 (1+ i)) (n2 (1+ j)))
          (and (&lt;= n1 n2)
               (push (list (* n1 n2) (+ n1 n2) n1 n2) pairs)))))
    (labels ((pluralp (fn ps x)
               (let ((count 0))
                 (dolist (p ps t)
                   (and (= (funcall fn p) (funcall fn x))
                        (incf count)
                        (and (&gt; count 1) (return nil)))))))
      (setf pairs
            ;Bさん「私も分かりません．…
            (mapcar #&#39;(lambda (p)
                        (if (pluralp #&#39;second pairs p)
                            (append (list (car p) nil) (cddr p))
                          p))
                    ;Aさん「(この情報だけでは)分かりません」
                    (mapcar #&#39;(lambda (p)
                                (if (pluralp #&#39;first pairs p)
                                    (append &#39;(nil) (cdr p))
                                  p))
                            pairs)))
      (setf pairs
            ;…ただ，Aさんが『分かりません』というのは分かっていました」
            (apply #&#39;nconc
                   (let ((bset (delete-duplicates (delete-if #&#39;null (mapcar #&#39;second pairs))))
                         cand)
                     (dolist (b bset cand)
                       (let (a1)
                         (and (dolist (p pairs a1)
                                (and (eql b (second p))
                                     (if (first p)
                                         (push p a1)
                                       (return nil))))
                              (push a1 cand)))))))
      (setf pairs
            ;それを聞いたAさん「それなら，分かりました」
            (remove-if-not #&#39;(lambda (p) (pluralp #&#39;first pairs p))
                           pairs))
      (setf pairs
            ;それを聞いたBさん「それなら，私も分かりました」
            (remove-if-not #&#39;(lambda (p) (pluralp #&#39;second pairs p))
                           pairs))
      (mapcar #&#39;cddr pairs))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1676/addtag/" class="addtag" id="addtag_1676">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1676/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1676/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1676"
  >-</span><span
  class="button yellow"
  id="rating_z_1676"
  >0</span><span 
  class="button green"
  id="rating_p_1676"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1610/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1676/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1676/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1676/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1832"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/155/" target="_top">nkmrtks</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1832/">#1832</a>(<script language="JavaScript">print_time(new Date("2007/08/04 16:24 GMT"));</script><noscript>2007/08/04 16:24 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  まともに高速化。無駄な処理を端折ってみた。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></td><td class="code"><div class="highlight"><pre>(defun trump-pairs (num)
  (let (pairs)
    (dotimes (i num)
      (dotimes (j num)
        (and (&lt;= i j)
             (let ((n1 (1+ i)) (n2 (1+ j)))
               (push (list (* n1 n2) (+ n1 n2) n1 n2) pairs)))))
    (labels ((pluralp (fn ps x)
               (let ((count 0))
                 (dolist (p ps t)
                   (and (= (funcall fn p) (funcall fn x))
                        (incf count)
                        (and (&gt; count 1) (return nil)))))))
      (setf pairs
            ;Bさん「私も分かりません．…
            (let ((bs (list 2 3 (- (* num 2) 1) (* num 2))))
              (mapcar #&#39;(lambda (p)
                          (if (member (second p) bs)
                              (append (list (car p) nil) (cddr p))
                            p))
                      ;Aさん「(この情報だけでは)分かりません」
                      (let ((as (sort (mapcar #&#39;first pairs) #&#39;&lt;)))
                        (mapcar #&#39;(lambda (p)
                                    (if (eql (first p) (cadr (member (first p) as)))
                                        p
                                      (append &#39;(nil) (cdr p))))
                                pairs)))))
      (setf pairs
            ;…ただ，Aさんが『分かりません』というのは分かっていました」
            (apply #&#39;nconc
                   (let ((b 4) bp a1 cand
                         (ps (sort pairs #&#39;(lambda (x y) (and y x (&lt; x y))) :key #&#39;second)))
                     (dolist (p ps cand)
                       (and (setf pb (second p))
                            (cond ((= b pb) (if (first p)
                                                (push p a1)
                                              (setf b (1+ b)
                                                    a1 nil)))
                                  ((&lt; b pb) (and (incf b)
                                                 (not (and a1 (push a1 cand) (setf a1 nil)))
                                                 (if (first p)
                                                     (push p a1)
                                                   (incf b))))
                                  ((&gt; b pb) (setf a1 nil))))))))
      (setf pairs
            ;それを聞いたAさん「それなら，分かりました」
            (remove-if-not #&#39;(lambda (p) (pluralp #&#39;first pairs p))
                           pairs))
      (setf pairs
            ;それを聞いたBさん「それなら，私も分かりました」
            (remove-if-not #&#39;(lambda (p) (pluralp #&#39;second pairs p))
                           pairs))
      (mapcar #&#39;cddr pairs))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1832/addtag/" class="addtag" id="addtag_1832">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1832/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1832/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1832"
  >-</span><span
  class="button yellow"
  id="rating_z_1832"
  >0</span><span 
  class="button green"
  id="rating_p_1832"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1676/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1832/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1832/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1832/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1938"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/155/" target="_top">nkmrtks</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1938/">#1938</a>(<script language="JavaScript">print_time(new Date("2007/08/06 12:56 GMT"));</script><noscript>2007/08/06 12:56 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>いまさらながらpluralpが真逆の名前になっていたことに気づいたのです…
穴があったら埋めてしまいたいorz</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1938/addtag/" class="addtag" id="addtag_1938">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1938"
  >-</span><span
  class="button yellow"
  id="rating_z_1938"
  >0</span><span 
  class="button green"
  id="rating_p_1938"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1832/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1938/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1938/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


    </div>
  


    </div>
  


  

  

  

  
    




<div class="comment" id="comment5153"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/642/" target="_top">saws</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/5153/">#5153</a>(<script language="JavaScript">print_time(new Date("2008/01/03 18:28 GMT"));</script><noscript>2008/01/03 18:28 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>最後の条件3, 4に気付くまで解けない問題だと思ってました.</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Integer</span>
  <span class="k">def</span> <span class="nf">aliquot</span> <span class="c1">#selfの約数を配列にして返す</span>
    <span class="nb">Array</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">div</span><span class="p">(</span><span class="mi">2</span><span class="p">)){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="n">modulo</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="p">:</span> <span class="kp">nil</span>
    <span class="p">}</span><span class="o">.</span><span class="n">compact</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">div_num</span> <span class="c1">#二つの正の整数の和がselfとなる組み合わせを配列にして返す. </span>
    <span class="nb">Array</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">self</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
      <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">y</span> <span class="p">?</span> <span class="o">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">]</span> <span class="p">:</span> <span class="kp">nil</span>
    <span class="p">}</span><span class="o">.</span><span class="n">compact</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="k">def</span> <span class="nf">aliq_size?</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="c1">#nの約数の内, 13以下でかつそれらの要素のいずれか同士の積がnと一致する組み合わせが2つ以上あればtrue.</span>
<span class="c1">#逆にいえば, 13以下の約数でnが一意的に再現できればfalse. </span>
  <span class="n">ary</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">aliquot</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">13</span> <span class="o">?</span> <span class="n">x</span> <span class="p">:</span> <span class="kp">nil</span><span class="p">}</span><span class="o">.</span><span class="n">compact</span>
  <span class="n">size</span> <span class="o">=</span> <span class="n">ary</span><span class="o">.</span><span class="n">size</span>
  <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">size</span><span class="o">.</span><span class="n">times</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="n">i</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span><span class="o">|</span><span class="n">j</span><span class="o">|</span>
      <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">ary</span><span class="o">[</span><span class="n">i</span><span class="o">]*</span><span class="n">ary</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="n">n</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">2</span>
<span class="k">end</span>
<span class="k">def</span> <span class="nf">uniq!</span><span class="p">(</span><span class="n">ary</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="c1">#aryの要素となる配列のn番目の要素でuniq. nは0か1のみに対応.</span>
  <span class="nb">hash</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span>
  <span class="n">ary</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">x</span><span class="o">[</span><span class="n">n</span><span class="o">]</span>
    <span class="n">x</span><span class="o">.</span><span class="n">delete_at</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="nb">hash</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="o">=</span> <span class="nb">hash</span><span class="o">.</span><span class="n">has_key?</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="p">?</span> <span class="kp">nil</span> <span class="p">:</span> <span class="n">x</span>
  <span class="p">}</span>
  <span class="n">ary</span><span class="o">.</span><span class="n">clear</span>
  <span class="nb">hash</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
    <span class="n">ary</span> <span class="o">&lt;&lt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;[key, value].flatten</span><span class="si">#{</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="p">:</span> <span class="s1">&#39;.reverse&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">value</span>
  <span class="p">}</span>
  <span class="n">ary</span>
<span class="k">end</span>
<span class="n">ary</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
<span class="mi">1</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">13</span><span class="p">){</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">13</span><span class="p">){</span><span class="o">|</span><span class="n">j</span><span class="o">|</span> <span class="n">ary</span> <span class="o">&lt;&lt;</span> <span class="o">[</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">]</span><span class="p">}}</span> <span class="c1">#カードの組み合わせを生成. </span>
<span class="n">ary</span><span class="o">.</span><span class="n">map!</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="p">,</span> <span class="n">s</span><span class="o">|</span>
  <span class="p">(</span><span class="n">aliq_size?</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">s</span> <span class="o">&lt;=</span> <span class="mi">24</span><span class="p">)</span> <span class="ow">and</span> 
     <span class="n">s</span><span class="o">.</span><span class="n">div_num</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">|</span> <span class="n">aliq_size?</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="p">)</span> <span class="p">?</span> <span class="kp">true</span> <span class="p">:</span> <span class="kp">nil</span><span class="p">}</span><span class="o">.</span><span class="n">nitems</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">?</span>
  <span class="o">[</span><span class="n">m</span><span class="p">,</span> <span class="n">s</span><span class="o">]</span> <span class="p">:</span> <span class="kp">nil</span>
<span class="p">}</span><span class="o">.</span><span class="n">compact!</span> <span class="c1">#条件1,  2に対応. </span>
<span class="n">uniq!</span><span class="p">(</span><span class="n">ary</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#条件3に対応. </span>
<span class="n">uniq!</span><span class="p">(</span><span class="n">ary</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">#条件4に対応. </span>
<span class="nb">p</span> <span class="n">ary</span> <span class="c1">#=&gt; [[4, 5], [72, 17]]</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/5153/addtag/" class="addtag" id="addtag_5153">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/5153/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/5153/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5153"
  >-</span><span
  class="button yellow"
  id="rating_z_5153"
  >0</span><span 
  class="button green"
  id="rating_p_5153"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/5153/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment1868"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/343/" target="_top">shimakuma</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1868/">#1868</a>(<script language="JavaScript">print_time(new Date("2007/08/05 10:16 GMT"));</script><noscript>2007/08/05 10:16 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><div class="highlight"><pre><span class="k">function</span> <span class="nx">doukaku34</span><span class="p">(</span><span class="nx">X</span><span class="p">){</span>
	<span class="k">var</span> <span class="nx">P</span> <span class="o">=</span> <span class="p">{}</span><span class="o">,</span> <span class="nx">S</span> <span class="o">=</span> <span class="p">{}</span><span class="o">,</span> <span class="nx">R</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">,</span> <span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="o">,</span> <span class="nx">p</span><span class="o">,</span> <span class="nx">s</span><span class="o">;</span>
	<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">X</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="k">for</span><span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span><span class="o">;</span> <span class="nx">j</span> <span class="o">&lt;=</span> <span class="nx">X</span><span class="o">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">){</span>
		<span class="nx">P</span><span class="p">[</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="nx">j</span><span class="p">]</span> <span class="o">?</span> <span class="nx">P</span><span class="p">[</span><span class="nx">p</span><span class="p">].</span><span class="nx">push</span><span class="p">([</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">])</span> <span class="o">:</span> <span class="nx">P</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">]];</span>
		<span class="nx">S</span><span class="p">[</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">j</span><span class="p">]</span> <span class="o">?</span> <span class="nx">S</span><span class="p">[</span><span class="nx">s</span><span class="p">].</span><span class="nx">push</span><span class="p">([</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">])</span> <span class="o">:</span> <span class="nx">S</span><span class="p">[</span><span class="nx">s</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">]];</span>
	<span class="p">}</span>
	<span class="k">function</span> <span class="nx">Adk</span><span class="p">(</span><span class="nx">n</span><span class="o">,</span> <span class="nx">m</span><span class="p">){</span> <span class="k">return</span> <span class="nx">P</span><span class="p">[</span><span class="nx">n</span> <span class="o">*</span> <span class="nx">m</span><span class="p">].</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">}</span> <span class="c">// A doesn&#39;t know.</span>
	<span class="k">function</span> <span class="nx">Bdk</span><span class="p">(</span><span class="nx">n</span><span class="o">,</span> <span class="nx">m</span><span class="p">){</span> <span class="k">return</span> <span class="nx">S</span><span class="p">[</span><span class="nx">n</span> <span class="o">+</span> <span class="nx">m</span><span class="p">].</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">}</span> <span class="c">// B doesn&#39;t know.</span>
	<span class="k">function</span> <span class="nx">BkAdk</span><span class="p">(</span><span class="nx">n</span><span class="o">,</span> <span class="nx">m</span><span class="p">){</span> <span class="c">// B knows A doesn&#39;t know.</span>
		<span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">S</span><span class="p">[</span><span class="nx">n</span> <span class="o">+</span> <span class="nx">m</span><span class="p">]</span><span class="o">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
			<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Adk</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">,</span> <span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
	<span class="p">}</span>
	<span class="k">function</span> <span class="nx">AkiBkAdk</span><span class="p">(</span><span class="nx">n</span><span class="o">,</span> <span class="nx">m</span><span class="p">){</span> <span class="c">// A knows if B knows A doesn&#39;t know.</span>
		<span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">P</span><span class="p">[</span><span class="nx">n</span> <span class="o">*</span> <span class="nx">m</span><span class="p">]</span><span class="o">,</span> <span class="nx">t</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
			<span class="k">if</span><span class="p">(</span><span class="nx">BkAdk</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">,</span> <span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="nx">t</span><span class="o">++;</span>
		<span class="k">return</span> <span class="nx">t</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
	<span class="p">}</span>
	<span class="k">function</span> <span class="nx">BkiAkiBkAdk</span><span class="p">(</span><span class="nx">n</span><span class="o">,</span> <span class="nx">m</span><span class="p">){</span> <span class="c">// B knows if A knows if B knows A doesn&#39;t know.</span>
		<span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">S</span><span class="p">[</span><span class="nx">n</span> <span class="o">+</span> <span class="nx">m</span><span class="p">]</span><span class="o">,</span> <span class="nx">t</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
			<span class="k">if</span><span class="p">(</span><span class="nx">AkiBkAdk</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">,</span> <span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="nx">t</span><span class="o">++;</span>
		<span class="k">return</span> <span class="nx">t</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
	<span class="p">}</span>
	<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">X</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="k">for</span><span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span><span class="o">;</span> <span class="nx">j</span> <span class="o">&lt;=</span> <span class="nx">X</span><span class="o">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">Adk</span><span class="p">(</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">Bdk</span><span class="p">(</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">BkAdk</span><span class="p">(</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">AkiBkAdk</span><span class="p">(</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">BkiAkiBkAdk</span><span class="p">(</span><span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="p">))</span>
			<span class="nx">R</span> <span class="o">+=</span> <span class="s2">&quot;(&quot;</span><span class="o">+</span> <span class="nx">i</span> <span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span> <span class="nx">j</span> <span class="o">+</span><span class="s2">&quot;) &quot;</span><span class="o">;</span>
	<span class="k">return</span> <span class="nx">R</span><span class="o">;</span>
<span class="p">}</span>
<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">WSH</span><span class="p">)</span> <span class="nx">WSH</span><span class="p">.</span><span class="nx">Echo</span><span class="p">(</span><span class="nx">doukaku34</span><span class="p">(</span><span class="nx">WSH</span><span class="p">.</span><span class="nx">Arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">WSH</span><span class="p">.</span><span class="nx">Arguments</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="mi">13</span><span class="p">));</span>
<span class="k">else</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">doukaku34</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">,</span> <span class="mi">13</span><span class="p">))));</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1868/addtag/" class="addtag" id="addtag_1868">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1868/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1868/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1868"
  >-</span><span
  class="button yellow"
  id="rating_z_1868"
  >0</span><span 
  class="button green"
  id="rating_p_1868"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1868/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  

  
    




<div class="comment" id="comment1564"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1564/">#1564</a>(<script language="JavaScript">print_time(new Date("2007/07/29 07:10 GMT"));</script><noscript>2007/07/29 07:10 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  関係ないですが、Scala 2.6.0-RC1でました。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><div class="highlight"><pre>import scala.collection.mutable.HashMap
import scala.collection.mutable.ListBuffer
def solve(_from:int, _to:int) = {
  val lst = for(i &lt;-(_from to _to).toList; j &lt;- (_from to _to) if i &lt;= j) yield (i, j)
  def countBy(lst:List[(int,int)], f:(int,int) =&gt; int) = new AnyRef {
    val m =lst.foldLeft(new HashMap[int, ListBuffer[(int,int)]]){(h,x) =&gt; 
      h.getOrElseUpdate(f(x._1, x._2), new ListBuffer[(int,int)]) += x
      h
    }
    def apply(x:(int,int)) = m(f(x._1, x._2))
  }
  val am = countBy(lst, _*_)
  val bm = countBy(lst, _+_)
  var list = lst.filter(am(_).size != 1)
  list = list.filter(x =&gt; bm(x).size != 1 &amp;&amp; 
                          bm(x).forall(x =&gt; am(x).size != 1))
  val cm = countBy(list, _*_)
  list = list.filter(cm(_).size == 1)
  val dm = countBy(list, _+_)
  list.filter(dm(_).size == 1)
}

println(solve(1,13).mkString(&quot;,&quot;))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1564/addtag/" class="addtag" id="addtag_1564">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1564/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1564/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1564"
  >-</span><span
  class="button yellow"
  id="rating_z_1564"
  >0</span><span 
  class="button green"
  id="rating_p_1564"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1564/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  

  

  

  
    




<div class="comment" id="comment3756"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/304/" target="_top">[1..100]&amp;gt;&amp;gt;=pen</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3756/">#3756</a>(<script language="JavaScript">print_time(new Date("2007/11/08 10:05 GMT"));</script><noscript>2007/11/08 10:05 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>全ペアを同じ和を持つもの同士のリンクと
同じ積を持つもの同士のリンクの縦横（？）の
二つのリンクで結ぶ初期化の後、条件に
合わないペアをリンクから外していきます。

2200 の結果が出るのに４分。この辺りから
GC が起こるのか時間がかかるようになって
2240 の結果が出るのに１８分。
この先はあきらめました。
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></td><td class="code"><div class="highlight"><pre><span class="vg">$s_hash</span> <span class="o">=</span> <span class="p">{}</span>
<span class="vg">$p_hash</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">class</span> <span class="nc">Node</span>
  <span class="kp">attr_accessor</span> <span class="ss">:pair</span><span class="p">,</span> <span class="ss">:s_prev</span><span class="p">,</span> <span class="ss">:s_next</span><span class="p">,</span> <span class="ss">:p_prev</span><span class="p">,</span> <span class="ss">:p_next</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="vi">@pair</span> <span class="o">=</span> <span class="n">pair</span><span class="p">;</span>
    <span class="vi">@s_prev</span> <span class="o">=</span> <span class="vi">@p_prev</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="vi">@s_next</span> <span class="o">=</span> <span class="n">s</span> <span class="o">=</span> <span class="vg">$s_hash</span><span class="o">[</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">]</span>
    <span class="vi">@p_next</span> <span class="o">=</span> <span class="nb">p</span> <span class="o">=</span> <span class="vg">$p_hash</span><span class="o">[</span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="o">]</span>
    <span class="n">s</span><span class="o">.</span><span class="n">s_prev</span> <span class="o">=</span> <span class="nb">self</span> <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="nb">p</span><span class="o">.</span><span class="n">p_prev</span> <span class="o">=</span> <span class="nb">self</span> <span class="k">if</span> <span class="p">(</span><span class="nb">p</span><span class="p">)</span>
    <span class="vg">$s_hash</span><span class="o">[</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">]</span> <span class="o">=</span> <span class="vg">$p_hash</span><span class="o">[</span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="o">]</span> <span class="o">=</span> <span class="nb">self</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">s_del</span>
      <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="vi">@pair</span>
      <span class="k">if</span> <span class="p">(</span><span class="vi">@s_prev</span><span class="p">);</span> <span class="vi">@s_prev</span><span class="o">.</span><span class="n">s_next</span> <span class="o">=</span> <span class="vi">@s_next</span><span class="p">;</span> <span class="k">else</span><span class="p">;</span> <span class="vg">$s_hash</span><span class="o">[</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">]</span> <span class="o">=</span> <span class="vi">@s_next</span><span class="p">;</span> <span class="k">end</span>
      <span class="vi">@s_next</span><span class="o">.</span><span class="n">s_prev</span> <span class="o">=</span> <span class="vi">@s_prev</span> <span class="k">if</span> <span class="p">(</span><span class="vi">@s_next</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">p_del</span>
      <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="vi">@pair</span>
      <span class="k">if</span> <span class="p">(</span><span class="vi">@p_prev</span><span class="p">);</span> <span class="vi">@p_prev</span><span class="o">.</span><span class="n">p_next</span> <span class="o">=</span> <span class="vi">@p_next</span><span class="p">;</span> <span class="k">else</span><span class="p">;</span> <span class="vg">$p_hash</span><span class="o">[</span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="o">]</span> <span class="o">=</span> <span class="vi">@p_next</span><span class="p">;</span> <span class="k">end</span>
      <span class="vi">@p_next</span><span class="o">.</span><span class="n">p_prev</span> <span class="o">=</span> <span class="vi">@p_prev</span> <span class="k">if</span> <span class="p">(</span><span class="vi">@p_next</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">s_plural?</span><span class="p">(</span><span class="n">node</span><span class="p">);</span> <span class="n">node</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">.</span><span class="n">s_next</span><span class="p">;</span> <span class="k">end</span>
<span class="k">def</span> <span class="nf">p_plural?</span><span class="p">(</span><span class="n">node</span><span class="p">);</span> <span class="n">node</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">.</span><span class="n">p_next</span><span class="p">;</span> <span class="k">end</span>

<span class="k">def</span> <span class="nf">s_dellines</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
  <span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span>
    <span class="n">node</span> <span class="o">=</span> <span class="vg">$s_hash</span><span class="o">[</span><span class="n">k</span><span class="o">]</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">node</span><span class="p">);</span> <span class="n">node</span><span class="o">.</span><span class="n">p_del</span><span class="p">;</span> <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">s_next</span><span class="p">;</span> <span class="k">end</span>
    <span class="vg">$s_hash</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="vg">$p_hash</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$p_hash</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">unless</span> <span class="n">v</span><span class="p">}</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">p_dellines</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
  <span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span>
    <span class="n">node</span> <span class="o">=</span> <span class="vg">$p_hash</span><span class="o">[</span><span class="n">k</span><span class="o">]</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">node</span><span class="p">);</span> <span class="n">node</span><span class="o">.</span><span class="n">s_del</span><span class="p">;</span> <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">p_next</span><span class="p">;</span> <span class="k">end</span>
    <span class="vg">$p_hash</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="vg">$s_hash</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="vg">$s_hash</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">unless</span> <span class="n">v</span><span class="p">}</span>
<span class="k">end</span>

<span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;13&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_i</span>

<span class="c1"># 全ペアをリンク</span>
<span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span>
  <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">b</span><span class="o">|</span>
    <span class="n">node</span> <span class="o">=</span> <span class="no">Node</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">]</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1"># Aさんが一発で分かるペアの和と同じ和を持つペアを除外</span>
<span class="n">keys</span> <span class="o">=</span> <span class="vg">$p_hash</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">p_plural?</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">?</span> <span class="kp">nil</span><span class="p">:</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">pair</span><span class="p">;</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)}</span><span class="o">.</span><span class="n">compact</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">uniq</span>
<span class="n">s_dellines</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

<span class="c1"># Aさんが「それなら，分かりました」とならないペアを除外</span>
<span class="n">p_dellines</span><span class="p">(</span><span class="vg">$p_hash</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">p_plural?</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">?</span> <span class="n">k</span><span class="p">:</span> <span class="kp">nil</span><span class="p">}</span><span class="o">.</span><span class="n">compact</span><span class="p">)</span>

<span class="c1"># Bさんが「それなら，分かりました」とならないペアを除外</span>
<span class="n">s_dellines</span><span class="p">(</span><span class="vg">$s_hash</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">s_plural?</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">?</span> <span class="n">k</span><span class="p">:</span> <span class="kp">nil</span><span class="p">}</span><span class="o">.</span><span class="n">compact</span><span class="p">)</span>

<span class="vg">$s_hash</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="nb">p</span> <span class="n">v</span><span class="o">.</span><span class="n">pair</span><span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3756/addtag/" class="addtag" id="addtag_3756">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3756/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3756/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3756"
  >-</span><span
  class="button yellow"
  id="rating_z_3756"
  >0</span><span 
  class="button green"
  id="rating_p_3756"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3756/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment2076"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2076/">#2076</a>(<script language="JavaScript">print_time(new Date("2007/08/12 07:07 GMT"));</script><noscript>2007/08/12 07:07 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  関数名や変数名がややこしくなってロジックが見えにくくなってきたので、日本語で行くことにしました。
1〜13程度では大した事はありませんが、カードの値域が広くなるとメモ化が威力を発揮します。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-1</span><span class="p">)</span>

<span class="p">(</span><span class="k">define </span><span class="nv">*</span><span class="err">カードの数リスト</span><span class="nv">*</span> <span class="p">(</span><span class="nf">iota</span> <span class="mi">13</span> <span class="mi">1</span><span class="p">))</span> <span class="c1">;&#39;(1 2 3 4 5 6 7 8 9 10 11 12 13)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">*A</span><span class="err">に教える数の算出法</span><span class="nv">*</span> <span class="nv">*</span><span class="p">)</span> <span class="c1">;(lambda (x y) (* x y)))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">*B</span><span class="err">に教える数の算出法</span><span class="nv">*</span> <span class="nv">+</span><span class="p">)</span> <span class="c1">;(lambda (x y) (+ x y)))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="err">組合せを作る</span> <span class="err">数</span><span class="mi">1</span> <span class="err">数</span><span class="mi">2</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">A</span><span class="err">の数</span> <span class="p">(</span><span class="nf">*A</span><span class="err">に教える数の算出法</span><span class="nv">*</span> <span class="err">数</span><span class="mi">1</span> <span class="err">数</span><span class="mi">2</span><span class="p">))</span>
		<span class="p">(</span><span class="nf">B</span><span class="err">の数</span> <span class="p">(</span><span class="nf">*B</span><span class="err">に教える数の算出法</span><span class="nv">*</span> <span class="err">数</span><span class="mi">1</span> <span class="err">数</span><span class="mi">2</span><span class="p">)))</span>
	<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">dispatch</span> <span class="nv">m</span><span class="p">)</span>
	  <span class="p">(</span><span class="k">case </span><span class="nv">m</span>
		<span class="p">((</span><span class="err">数</span><span class="mi">1</span><span class="p">)</span> <span class="err">数</span><span class="mi">1</span><span class="p">)</span>
		<span class="p">((</span><span class="err">数</span><span class="mi">2</span><span class="p">)</span> <span class="err">数</span><span class="mi">2</span><span class="p">)</span>
		<span class="p">((</span><span class="nf">A</span><span class="err">の数</span><span class="p">)</span> <span class="nv">A</span><span class="err">の数</span><span class="p">)</span>
		<span class="p">((</span><span class="nf">B</span><span class="err">の数</span><span class="p">)</span> <span class="nv">B</span><span class="err">の数</span><span class="p">)</span>
		<span class="p">((</span><span class="nf">x</span><span class="err">≦</span><span class="nv">y?</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;= </span><span class="err">数</span><span class="mi">1</span> <span class="err">数</span><span class="mi">2</span><span class="p">))</span>
		<span class="p">(</span><span class="k">else </span><span class="ss">&#39;ignored</span><span class="p">)))</span>
	<span class="nv">dispatch</span><span class="p">))</span>

<span class="p">(</span><span class="k">define </span><span class="err">全ての組合せ</span>
  <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">組合せ</span><span class="p">)</span> <span class="err">[組合せ</span><span class="ss">&#39;x</span><span class="err">≦</span><span class="nv">y?</span><span class="err">]</span><span class="p">)</span>
		  <span class="p">(</span><span class="nb">apply </span><span class="nv">append</span>
				 <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">数</span><span class="mi">1</span><span class="p">)</span>
						<span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">数</span><span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="err">組合せを作る</span> <span class="err">数</span><span class="mi">1</span> <span class="err">数</span><span class="mi">2</span><span class="p">))</span>
							 <span class="nv">*</span><span class="err">カードの数リスト</span><span class="nv">*</span><span class="p">))</span>
					  <span class="nv">*</span><span class="err">カードの数リスト</span><span class="nv">*</span><span class="p">))))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="err">メモ化版</span> <span class="nv">f</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">memo</span> <span class="o">&#39;</span><span class="p">()))</span>
	<span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">arg</span><span class="p">)</span> 
	  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">found</span> <span class="p">(</span><span class="nb">assoc </span><span class="nv">arg</span> <span class="nv">memo</span><span class="p">)))</span>
		<span class="p">(</span><span class="k">if </span><span class="nv">found</span>
			<span class="p">(</span><span class="nb">cdr </span><span class="nv">found</span><span class="p">)</span>
			<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">value</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">arg</span><span class="p">)))</span>
			  <span class="p">(</span><span class="k">set! </span><span class="nv">memo</span> <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">cons </span><span class="nv">arg</span> <span class="nv">value</span><span class="p">)</span> <span class="nv">memo</span><span class="p">))</span>
			  <span class="nv">value</span><span class="p">))))))</span>
<span class="c1">;(define (メモ化版 f) f) ; ← メモ化しないならコメントを外す</span>

<span class="c1">;(define (Aの数から考えられる組合せ Aの数)</span>
<span class="c1">;  (filter (lambda (組合せ) (= Aの数 [組合せ&#39;Aの数]))</span>
<span class="c1">;		  全ての組合せ))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">A</span><span class="err">の数から考えられる組合せ</span>
  <span class="p">(</span><span class="err">メモ化版</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">A</span><span class="err">の数</span><span class="p">)</span>
			  <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">組合せ</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">A</span><span class="err">の数</span> <span class="err">[組合せ</span><span class="ss">&#39;A</span><span class="err">の数]</span><span class="p">))</span>
					  <span class="err">全ての組合せ</span><span class="p">))</span> <span class="p">))</span>

<span class="c1">;(define (Bの数から考えられる組合せ Bの数)</span>
<span class="c1">;  (filter (lambda (組合せ) (= Bの数 [組合せ&#39;Bの数]))</span>
<span class="c1">;		  全ての組合せ))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">B</span><span class="err">の数から考えられる組合せ</span>
  <span class="p">(</span><span class="err">メモ化版</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">B</span><span class="err">の数</span><span class="p">)</span>
			  <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">組合せ</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">B</span><span class="err">の数</span> <span class="err">[組合せ</span><span class="ss">&#39;B</span><span class="err">の数]</span><span class="p">))</span>
					  <span class="err">全ての組合せ</span><span class="p">))</span> <span class="p">))</span>

<span class="c1">;(define (Aの数から組合せを一つに絞り込める? Aの数)</span>
<span class="c1">;  (= 1 (length (Aの数から考えられる組合せ Aの数))))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">A</span><span class="err">の数から組合せを一つに絞り込める</span><span class="nv">?</span>
  <span class="p">(</span><span class="err">メモ化版</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">A</span><span class="err">の数</span><span class="p">)</span>
			  <span class="p">(</span><span class="nb">= </span><span class="mi">1</span> <span class="p">(</span><span class="nb">length </span><span class="p">(</span><span class="nf">A</span><span class="err">の数から考えられる組合せ</span> <span class="nv">A</span><span class="err">の数</span><span class="p">))))</span> <span class="p">))</span>

<span class="c1">;(define (Bの数から組合せを一つに絞り込める? Bの数)</span>
<span class="c1">;  (= 1 (length (Bの数から考えられる組合せ Bの数))))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">B</span><span class="err">の数から組合せを一つに絞り込める</span><span class="nv">?</span>
  <span class="p">(</span><span class="err">メモ化版</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">B</span><span class="err">の数</span><span class="p">)</span>
			  <span class="p">(</span><span class="nb">= </span><span class="mi">1</span> <span class="p">(</span><span class="nb">length </span><span class="p">(</span><span class="nf">B</span><span class="err">の数から考えられる組合せ</span> <span class="nv">B</span><span class="err">の数</span><span class="p">))))</span> <span class="p">))</span>

<span class="c1">;</span>
<span class="c1">; ４つの条件</span>
<span class="c1">;</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">A</span><span class="err">の数からは組合せを一つに絞り込めない</span><span class="nv">?</span> <span class="nv">A</span><span class="err">の数</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nf">A</span><span class="err">の数から組合せを一つに絞り込める</span><span class="nv">?</span> <span class="nv">A</span><span class="err">の数</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">B</span><span class="err">の数からは組合せを一つに絞り込めないが</span><span class="nv">A</span><span class="err">にも分からないだろうという事は</span><span class="nv">B</span><span class="err">に言える</span><span class="nv">?</span> <span class="nv">B</span><span class="err">の数</span><span class="p">)</span>
  <span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nf">B</span><span class="err">の数から組合せを一つに絞り込める</span><span class="nv">?</span> <span class="nv">B</span><span class="err">の数</span><span class="p">))</span>
	   <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">B</span><span class="err">の数から考えられる全ての</span><span class="nv">A</span><span class="err">の数</span>
			  <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">組合せ</span><span class="p">)</span> <span class="err">[組合せ</span><span class="ss">&#39;A</span><span class="err">の数]</span><span class="p">)</span> <span class="p">(</span><span class="nf">B</span><span class="err">の数から考えられる組合せ</span> <span class="nv">B</span><span class="err">の数</span><span class="p">))))</span>
		 <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">B</span><span class="err">の数から考えられる全ての</span><span class="nv">A</span><span class="err">の数の中で、</span><span class="nv">A</span><span class="err">が聞いたらすぐに組合せを一つに絞り込めてしまうもの</span>
				<span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">A</span><span class="err">の数</span><span class="p">)</span> <span class="p">(</span><span class="nf">A</span><span class="err">の数から組合せを一つに絞り込める</span><span class="nv">?</span> <span class="nv">A</span><span class="err">の数</span><span class="p">))</span> <span class="nv">B</span><span class="err">の数から考えられる全ての</span><span class="nv">A</span><span class="err">の数</span><span class="p">)))</span>
		   <span class="p">(</span><span class="nb">null? </span><span class="nv">B</span><span class="err">の数から考えられる全ての</span><span class="nv">A</span><span class="err">の数の中で、</span><span class="nv">A</span><span class="err">が聞いたらすぐに組合せを一つに絞り込めてしまうもの</span><span class="p">)</span> <span class="p">))))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">A</span><span class="err">には分からないと</span><span class="nv">B</span><span class="err">の数から予測できるのなら</span><span class="nv">A</span><span class="err">は絞り込める</span><span class="nv">?</span> <span class="nv">A</span><span class="err">の数</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">let1</span> <span class="err">可能な組合せ</span>
		<span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">組合せ</span><span class="p">)</span> <span class="p">(</span><span class="nf">B</span><span class="err">の数からは組合せを一つに絞り込めないが</span><span class="nv">A</span><span class="err">にも分からないだろうという事は</span><span class="nv">B</span><span class="err">に言える</span><span class="nv">?</span> <span class="err">[組合せ</span><span class="ss">&#39;B</span><span class="err">の数]</span><span class="p">))</span>
				<span class="p">(</span><span class="nf">A</span><span class="err">の数から考えられる組合せ</span> <span class="nv">A</span><span class="err">の数</span><span class="p">))</span>
		<span class="p">(</span><span class="nb">= </span><span class="mi">1</span> <span class="p">(</span><span class="nb">length </span><span class="err">可能な組合せ</span><span class="p">))</span> <span class="p">))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">A</span><span class="err">には分からないと</span><span class="nv">B</span><span class="err">の数から予測できるのなら</span><span class="nv">A</span><span class="err">は絞り込めるというのなら</span><span class="nv">B</span><span class="err">も絞り込める</span><span class="nv">?</span> <span class="nv">B</span><span class="err">の数</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">let1</span> <span class="err">可能な組合せ</span>
		<span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">組合せ</span><span class="p">)</span> <span class="p">(</span><span class="nf">A</span><span class="err">には分からないと</span><span class="nv">B</span><span class="err">の数から予測できるのなら</span><span class="nv">A</span><span class="err">は絞り込める</span><span class="nv">?</span> <span class="err">[組合せ</span><span class="ss">&#39;A</span><span class="err">の数]</span><span class="p">))</span>
				<span class="p">(</span><span class="nf">B</span><span class="err">の数から考えられる組合せ</span> <span class="nv">B</span><span class="err">の数</span><span class="p">))</span>
		<span class="p">(</span><span class="nb">= </span><span class="mi">1</span> <span class="p">(</span><span class="nb">length </span><span class="err">可能な組合せ</span><span class="p">))</span> <span class="p">))</span>

<span class="c1">;</span>
<span class="c1">; ４つの条件を満たす組合せを表示</span>
<span class="c1">;</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="err">４つの条件を満たす</span><span class="nv">?</span> <span class="err">ある組合せ</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">A</span><span class="err">の数</span> <span class="err">[ある組合せ</span><span class="ss">&#39;A</span><span class="err">の数]</span><span class="p">)</span>
		<span class="p">(</span><span class="nf">B</span><span class="err">の数</span> <span class="err">[ある組合せ</span><span class="ss">&#39;B</span><span class="err">の数]</span><span class="p">))</span>
	<span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nf">A</span><span class="err">の数からは組合せを一つに絞り込めない</span><span class="nv">?</span> <span class="nv">A</span><span class="err">の数</span><span class="p">)</span>
		 <span class="p">(</span><span class="nf">B</span><span class="err">の数からは組合せを一つに絞り込めないが</span><span class="nv">A</span><span class="err">にも分からないだろうという事は</span><span class="nv">B</span><span class="err">に言える</span><span class="nv">?</span> <span class="nv">B</span><span class="err">の数</span><span class="p">)</span>
		 <span class="p">(</span><span class="nf">A</span><span class="err">には分からないと</span><span class="nv">B</span><span class="err">の数から予測できるのなら</span><span class="nv">A</span><span class="err">は絞り込める</span><span class="nv">?</span> <span class="nv">A</span><span class="err">の数</span><span class="p">)</span>
		 <span class="p">(</span><span class="nf">A</span><span class="err">には分からないと</span><span class="nv">B</span><span class="err">の数から予測できるのなら</span><span class="nv">A</span><span class="err">は絞り込めるというのなら</span><span class="nv">B</span><span class="err">も絞り込める</span><span class="nv">?</span> <span class="nv">B</span><span class="err">の数</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">for-each </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="err">組合せ</span><span class="p">)</span> <span class="p">(</span><span class="nf">print</span> <span class="err">[組合せ</span><span class="o">&#39;</span><span class="err">数</span><span class="mi">1</span><span class="err">]</span> <span class="s">&quot;,&quot;</span> <span class="err">[組合せ</span><span class="o">&#39;</span><span class="err">数</span><span class="mi">2</span><span class="err">]</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">filter</span> <span class="err">４つの条件を満たす</span><span class="nv">?</span> <span class="err">全ての組合せ</span><span class="p">))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2076/addtag/" class="addtag" id="addtag_2076">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2076/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2076/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2076"
  >-</span><span
  class="button yellow"
  id="rating_z_2076"
  >0</span><span 
  class="button green"
  id="rating_p_2076"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/2076/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  

  
    




<div class="comment" id="comment2042"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/153/" target="_top">Mistfeal</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2042/">#2042</a>(<script language="JavaScript">print_time(new Date("2007/08/09 07:49 GMT"));</script><noscript>2007/08/09 07:49 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/php/">
	  PHP
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  他の方々のコードを見て、ようやく解けました。　難しかったです。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">CardPuzzle</span><span class="p">(</span><span class="nv">$max</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nv">$i</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;=</span> <span class="nv">$max</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span> <span class="nv">$j</span> <span class="o">=</span> <span class="nv">$i</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;=</span> <span class="nv">$max</span><span class="p">;</span> <span class="nv">$j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$sum</span><span class="p">[]</span>  <span class="o">=</span> <span class="nv">$i</span> <span class="o">+</span> <span class="nv">$j</span><span class="p">;</span>
			<span class="nv">$prd</span><span class="p">[]</span>  <span class="o">=</span> <span class="nv">$i</span> <span class="o">*</span> <span class="nv">$j</span><span class="p">;</span>
			<span class="nv">$pair</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$i</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">$j</span><span class="s2">&quot;</span><span class="p">);</span>
			<span class="nv">$flg</span><span class="p">[]</span>  <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nv">$k</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="nv">$k</span> <span class="o">&lt;</span> <span class="nf">count</span><span class="p">(</span><span class="nv">$flg</span><span class="p">);</span> <span class="nv">$k</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nf">count</span><span class="p">(</span><span class="nf">array_keys</span><span class="p">(</span><span class="nv">$prd</span><span class="p">,</span><span class="nv">$prd</span><span class="p">[</span><span class="nv">$k</span><span class="p">]))</span> <span class="o">==</span> <span class="m">1</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$flg</span><span class="p">[</span><span class="nv">$k</span><span class="p">]</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
			<span class="k">continue</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="nv">$keys</span> <span class="o">=</span> <span class="nf">array_keys</span><span class="p">(</span><span class="nv">$sum</span><span class="p">,</span><span class="nv">$sum</span><span class="p">[</span><span class="nv">$k</span><span class="p">]);</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nf">count</span><span class="p">(</span><span class="nv">$keys</span><span class="p">)</span> <span class="o">==</span> <span class="m">1</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$flg</span><span class="p">[</span><span class="nv">$k</span><span class="p">]</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
			<span class="k">continue</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$keys</span> <span class="k">as</span> <span class="nv">$key</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nf">count</span><span class="p">(</span><span class="nf">array_keys</span><span class="p">(</span><span class="nv">$prd</span><span class="p">,</span><span class="nv">$prd</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span> <span class="o">==</span> <span class="m">1</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nv">$flg</span><span class="p">[</span><span class="nv">$k</span><span class="p">]</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$flg</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nv">$val</span> <span class="o">==</span> <span class="m">1</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$prd</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
			<span class="nv">$sum</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$flg</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nf">count</span><span class="p">(</span><span class="nf">array_keys</span><span class="p">(</span><span class="nv">$prd</span><span class="p">,</span><span class="nv">$prd</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span> <span class="o">&gt;</span> <span class="m">1</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$flg</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
			<span class="nv">$sum</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$flg</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nf">count</span><span class="p">(</span><span class="nf">array_keys</span><span class="p">(</span><span class="nv">$sum</span><span class="p">,</span><span class="nv">$sum</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span> <span class="o">&gt;</span> <span class="m">1</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$flg</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$pair</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nv">$flg</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">==</span> <span class="m">0</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$rtn</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nv">$rtn</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">print_r</span><span class="p">(</span><span class="nx">CardPuzzle</span><span class="p">(</span><span class="m">13</span><span class="p">));</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2042/addtag/" class="addtag" id="addtag_2042">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/php/">
		PHP
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2042/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2042/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2042"
  >-</span><span
  class="button yellow"
  id="rating_z_2042"
  >0</span><span 
  class="button green"
  id="rating_p_2042"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/2042/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  

  
    




<div class="comment" id="comment2202"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/91/" target="_top">yooskeh</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2202/">#2202</a>(<script language="JavaScript">print_time(new Date("2007/08/15 12:38 GMT"));</script><noscript>2007/08/15 12:38 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/prolog/">
	  Prolog
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  Prologが無いようなので書いてみました。<br/>あんまりPrologっぽく書けなかった...<br/>たぶん遅いです。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><div class="highlight"><pre>partition(_, [], [], []).
partition(P, [X|Xs], [X|Ys], Zs) :-
	call(P, X), !,
	partition(P, Xs, Ys, Zs).
partition(P, [X|Xs], Ys, [X|Zs]) :-
	partition(P, Xs, Ys, Zs).

quot_set(_, [], []).
quot_set(Eq, [X|Xs], [[X|Ys]|Yss]) :-
	partition(call(Eq, X), Xs, Ys, Zs),
	quot_set(Eq, Zs, Yss).

quot_filter(Eq, P, Xs, Ys) :-
	quot_set(Eq, Xs, Xss),
	sublist(P, Xss, Yss),
	flatten(Yss, Ys).

addeq((X,Y), (Z,W)) :- X + Y =:= Z + W.
muleq((X,Y), (Z,W)) :- X * Y =:= Z * W.

clr([_]).
obs([_,_|_]).
obssub(S, L) :- obs(L), subset(L, S).

solve(N) :-
	findall((X,Y), (between(1,N,X),between(X,N,Y)), L0),
	quot_filter(muleq, obs, L0, L1),         % A-1
	quot_filter(addeq, obssub(L1), L0, L2),  % B-1
	quot_filter(muleq, clr, L2, L3),         % A-2
	quot_filter(addeq, clr, L3, L4),         % B-2
	writeln(L4).

:- solve(13).
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/2202/addtag/" class="addtag" id="addtag_2202">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/prolog/">
		Prolog
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2202/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/2202/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2202"
  >-</span><span
  class="button yellow"
  id="rating_z_2202"
  >0</span><span 
  class="button green"
  id="rating_p_2202"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/2202/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/2202/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment3234"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/424/" target="_top">satooM</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3234/">#3234</a>(<script language="JavaScript">print_time(new Date("2007/10/02 13:14 GMT"));</script><noscript>2007/10/02 13:14 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>集合論的な書き方がとてもきれいですね。
Haskellに移植してみました。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">List</span> <span class="p">(</span><span class="nv">partition</span><span class="p">)</span>
<span class="kr">import</span> <span class="n">Control</span><span class="o">.</span><span class="n">Applicative</span> <span class="p">(</span><span class="nv">liftA2</span><span class="p">)</span>

<span class="c1">-- 写像 f による定義域の分割</span>
<span class="nv">quotSet</span> <span class="o">::</span> <span class="n">Eq</span> <span class="nv">b</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="nv">a</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[[</span><span class="nv">a</span><span class="p">]]</span>
<span class="nv">quotSet</span> <span class="kr">_</span> <span class="p">[]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nv">quotSet</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">zs</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span><span class="o">:</span><span class="nv">quotSet</span> <span class="nv">f</span> <span class="nv">zs&#39;</span>
  <span class="kr">where</span>
    <span class="nv">x</span> <span class="o">===</span> <span class="nv">y</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">x</span> <span class="o">==</span> <span class="nv">f</span> <span class="nv">y</span>
    <span class="p">(</span><span class="nv">xs</span><span class="p">,</span><span class="nv">zs&#39;</span><span class="p">)</span> <span class="o">=</span> <span class="nv">partition</span> <span class="p">(</span><span class="nv">x</span> <span class="o">===</span><span class="p">)</span> <span class="nv">zs</span>

<span class="nv">quotFilter</span> <span class="o">::</span> <span class="n">Eq</span> <span class="nv">b</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">([</span><span class="nv">a</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="nv">a</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="nv">a</span><span class="p">]</span>
<span class="nv">quotFilter</span> <span class="nv">f</span> <span class="nv">p</span> <span class="o">=</span> <span class="nv">concat</span> <span class="o">.</span> <span class="nv">filter</span> <span class="nv">p</span> <span class="o">.</span> <span class="nv">quotSet</span> <span class="nv">f</span>

<span class="nv">s</span> <span class="p">`</span><span class="nv">subset</span><span class="p">`</span> <span class="nv">l</span> <span class="o">=</span> <span class="nv">all</span> <span class="p">(`</span><span class="nv">elem</span><span class="p">`</span> <span class="nv">l</span><span class="p">)</span> <span class="nv">s</span>

<span class="nv">mul</span> <span class="o">=</span> <span class="nv">uncurry</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="nv">add</span> <span class="o">=</span> <span class="nv">uncurry</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span>
<span class="nv">clr</span> <span class="p">[</span><span class="kr">_</span><span class="p">]</span> <span class="o">=</span> <span class="n">True</span>
<span class="nv">clr</span> <span class="kr">_</span>   <span class="o">=</span> <span class="n">False</span>
<span class="nv">obs</span> <span class="o">=</span> <span class="nv">not</span> <span class="o">.</span> <span class="nv">clr</span>

<span class="p">(</span><span class="o">&amp;&amp;&amp;</span><span class="p">)</span> <span class="o">::</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="n">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="n">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="n">Bool</span><span class="p">)</span>
<span class="p">(</span><span class="o">&amp;&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="nv">liftA2</span> <span class="p">(</span><span class="o">&amp;&amp;</span><span class="p">)</span>
<span class="c1">--    = \f1 f2 x -&gt; f1 x &amp;&amp; f2 x</span>

<span class="nv">solve</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">l4</span> <span class="kr">where</span>
  <span class="nv">l0</span> <span class="o">=</span> <span class="p">[(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">|</span> <span class="nv">a</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nv">n</span><span class="p">],</span> <span class="nv">b</span> <span class="o">&lt;-</span> <span class="p">[</span><span class="nv">a</span><span class="o">..</span><span class="nv">n</span><span class="p">]]</span>
  <span class="nv">l1</span> <span class="o">=</span> <span class="nv">quotFilter</span> <span class="nv">mul</span> <span class="nv">obs</span> <span class="nv">l0</span>
  <span class="nv">l2</span> <span class="o">=</span> <span class="nv">quotFilter</span> <span class="nv">add</span> <span class="p">(</span><span class="nv">obs</span> <span class="o">&amp;&amp;&amp;</span> <span class="p">(`</span><span class="nv">subset</span><span class="p">`</span> <span class="nv">l1</span><span class="p">))</span> <span class="nv">l0</span>
  <span class="nv">l3</span> <span class="o">=</span> <span class="nv">quotFilter</span> <span class="nv">mul</span> <span class="nv">clr</span> <span class="nv">l2</span>
  <span class="nv">l4</span> <span class="o">=</span> <span class="nv">quotFilter</span> <span class="nv">add</span> <span class="nv">clr</span> <span class="nv">l3</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/3234/addtag/" class="addtag" id="addtag_3234">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3234/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/3234/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3234"
  >-</span><span
  class="button yellow"
  id="rating_z_3234"
  >0</span><span 
  class="button green"
  id="rating_p_3234"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/2202/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/3234/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/3234/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  

  
    




<div class="comment" id="comment1909"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/228/" target="_top">tell</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1909/">#1909</a>(<script language="JavaScript">print_time(new Date("2007/08/06 04:43 GMT"));</script><noscript>2007/08/06 04:43 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>これで合ってるかな？

問題文の読解と，無駄にワンライナーで書いていたのが時間を喰ってしまった．
あと実行にも時間がかかるかもしれない(未確認)．

それにしても面白い構造をしている．数って素晴しい．</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">deterministics</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
  <span class="n">multiples</span> <span class="o">=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span><span class="o">|</span> <span class="nb">hash</span><span class="p">,</span><span class="n">key</span> <span class="o">|</span> <span class="mi">0</span> <span class="p">}</span>
  
  <span class="n">middle_result</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">.</span><span class="n">.</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span> <span class="n">sum</span> <span class="o">|</span>
    <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="p">(</span> <span class="n">sum</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">))</span><span class="o">.</span><span class="n">to_a</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span> <span class="n">i</span> <span class="o">|</span>
      <span class="o">[</span> <span class="n">i</span><span class="p">,</span> <span class="n">sum</span> <span class="o">-</span> <span class="n">i</span> <span class="o">]</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span> <span class="n">inv_sum</span> <span class="o">|</span>
    <span class="k">if</span> <span class="n">inv_sum</span><span class="o">.</span><span class="n">all?</span> <span class="p">{</span><span class="o">|</span> <span class="n">candidate</span> <span class="o">|</span>
        <span class="p">((</span><span class="mi">2</span><span class="o">.</span><span class="n">.x</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span> <span class="o">-</span> <span class="n">candidate</span><span class="p">)</span><span class="o">.</span><span class="n">any?</span> <span class="p">{</span><span class="o">|</span> <span class="n">factor</span> <span class="o">|</span>
          <span class="mi">0</span> <span class="o">==</span> <span class="p">(</span> <span class="n">candidate</span><span class="o">[</span><span class="mi">0</span><span class="o">]*</span><span class="n">candidate</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="p">)</span> <span class="o">%</span> <span class="n">factor</span> <span class="ow">and</span> <span class="p">\</span>
          <span class="n">x</span> <span class="o">&gt;=</span> <span class="p">(</span> <span class="n">candidate</span><span class="o">[</span><span class="mi">0</span><span class="o">]*</span><span class="n">candidate</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="p">)</span> <span class="o">/</span> <span class="n">factor</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="k">then</span>
      <span class="n">inv_sum</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span> <span class="n">candidate</span> <span class="o">|</span>
        <span class="n">multiples</span><span class="o">[</span> <span class="p">(</span> <span class="n">candidate</span><span class="o">[</span><span class="mi">0</span><span class="o">]*</span><span class="n">candidate</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="p">)</span> <span class="o">]</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="k">else</span>
      <span class="kp">false</span>
    <span class="k">end</span>
  <span class="p">}</span>
    
  <span class="n">middle_result</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span> <span class="n">candidates</span> <span class="o">|</span>
    <span class="n">candidates</span><span class="o">.</span><span class="n">reject</span> <span class="p">{</span><span class="o">|</span> <span class="n">candidate</span> <span class="o">|</span>
      <span class="n">multiples</span><span class="o">[</span> <span class="n">candidate</span><span class="o">[</span><span class="mi">0</span><span class="o">]*</span><span class="n">candidate</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">]</span> <span class="o">&gt;</span> <span class="mi">1</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="o">.</span><span class="n">reject</span> <span class="p">{</span><span class="o">|</span> <span class="n">candidates</span> <span class="o">|</span>
    <span class="n">candidates</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">1</span>
  <span class="p">}</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span> <span class="o">[]</span> <span class="p">)</span> <span class="p">{</span><span class="o">|</span> <span class="n">e</span><span class="p">,</span> <span class="n">t</span> <span class="o">|</span>
    <span class="n">e</span> <span class="o">+</span> <span class="n">t</span>
  <span class="p">}</span>
<span class="k">end</span>

<span class="c1">## 以下テスト</span>

<span class="mi">2</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span> <span class="mi">100</span> <span class="p">)</span> <span class="p">{</span><span class="o">|</span> <span class="n">i</span> <span class="o">|</span>
  <span class="nb">puts</span><span class="p">(</span> <span class="s2">&quot;deterministics(%3d) = %s&quot;</span> <span class="o">%</span> <span class="o">[</span> <span class="n">i</span><span class="p">,</span> <span class="n">deterministics</span><span class="p">(</span> <span class="n">i</span> <span class="p">)</span><span class="o">.</span><span class="n">inspect</span> <span class="o">]</span> <span class="p">)</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1909/addtag/" class="addtag" id="addtag_1909">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1909/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/1909/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1909"
  >-</span><span
  class="button yellow"
  id="rating_z_1909"
  >0</span><span 
  class="button green"
  id="rating_p_1909"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101210164636/http://ja.doukaku.org/comment/1909/">
    1
    reply
  </a>

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1909/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment1910"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/228/" target="_top">tell</a><a href="/web/20101210164636/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1910/">#1910</a>(<script language="JavaScript">print_time(new Date("2007/08/06 04:49 GMT"));</script><noscript>2007/08/06 04:49 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  関数名はdetermineよりもcandidateが良かったな．英語は苦手だ．
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/1910/addtag/" class="addtag" id="addtag_1910">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1910"
  >-</span><span
  class="button yellow"
  id="rating_z_1910"
  >0</span><span 
  class="button green"
  id="rating_p_1910"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1909/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101210164636/http://ja.doukaku.org/comment/1910/root/"><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/1910/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  

  
    




<div class="comment" id="comment8172"><!--dj-->
  <p class="banner"><a href="/web/20101210164636/http://ja.doukaku.org/user/973/" target="_top">taninsw</a>

	
	&nbsp;
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/8172/">#8172</a>(<script language="JavaScript">print_time(new Date("2008/12/14 15:19 GMT"));</script><noscript>2008/12/14 15:19 GMT</noscript>)
	
	
	
	[<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>ghciでゴニョゴニョやってたのたのを無理矢理ソースにしただけなので、ほとんど解読不能です。</p>
<p>答は一つになりました。</p>
<p>いつか気がむいたら清書するかも。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">List</span> 
<span class="nv">ls</span> <span class="o">=</span> <span class="p">[(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">)</span><span class="o">|</span><span class="nv">x</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">y</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">x</span><span class="o">&lt;=</span><span class="nv">y</span><span class="p">]</span>
<span class="nv">t</span> <span class="o">=</span> <span class="p">[(</span><span class="nv">x</span><span class="o">*</span><span class="nv">y</span><span class="p">,</span><span class="nv">x</span><span class="o">+</span><span class="nv">y</span><span class="p">)</span><span class="o">|</span><span class="nv">x</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">y</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">x</span><span class="o">&lt;=</span><span class="nv">y</span><span class="p">]</span>
<span class="nv">m</span> <span class="o">=</span> <span class="p">[(</span><span class="nv">x</span><span class="o">*</span><span class="nv">y</span><span class="p">)</span><span class="o">|</span><span class="nv">x</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">y</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">x</span><span class="o">&lt;=</span><span class="nv">y</span><span class="p">]</span>
<span class="nv">p</span> <span class="o">=</span> <span class="p">[(</span><span class="nv">x</span><span class="o">+</span><span class="nv">y</span><span class="p">)</span><span class="o">|</span><span class="nv">x</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">y</span><span class="o">&lt;-</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">13</span><span class="p">],</span><span class="nv">x</span><span class="o">&lt;=</span><span class="nv">y</span><span class="p">]</span>

<span class="nv">a</span> <span class="o">=</span> <span class="nv">map</span> <span class="nv">fst</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="nv">snd</span> <span class="nv">x</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="p">(</span><span class="nv">head</span> <span class="nv">x</span><span class="p">,</span><span class="nv">length</span> <span class="nv">x</span><span class="p">))</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="nv">n</span><span class="o">-&gt;</span> <span class="nv">n</span><span class="o">==</span><span class="nv">x</span><span class="p">)</span> <span class="nv">m</span><span class="p">)</span> <span class="p">(</span><span class="nv">nub</span> <span class="nv">m</span><span class="p">)</span>

<span class="nv">fa</span> <span class="o">=</span> <span class="nv">map</span> <span class="nv">fst</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="p">((</span><span class="kr">_</span><span class="p">,</span><span class="kr">_</span><span class="p">),</span><span class="nv">x</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nv">elem</span> <span class="nv">x</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nv">zip</span> <span class="nv">ls</span> <span class="nv">m</span><span class="p">)</span>

<span class="nv">b</span> <span class="o">=</span> <span class="nv">map</span> <span class="nv">fst</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="nv">snd</span> <span class="nv">x</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="p">(</span><span class="nv">head</span> <span class="nv">x</span><span class="p">,</span><span class="nv">length</span> <span class="nv">x</span><span class="p">))</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="nv">n</span><span class="o">-&gt;</span> <span class="nv">n</span><span class="o">==</span><span class="nv">x</span><span class="p">)</span> <span class="nv">p</span><span class="p">)</span> <span class="p">(</span><span class="nv">nub</span> <span class="nv">p</span><span class="p">)</span>

<span class="nv">fb</span> <span class="o">=</span> <span class="nv">map</span> <span class="nv">fst</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="p">((</span><span class="kr">_</span><span class="p">,</span><span class="kr">_</span><span class="p">),</span><span class="nv">x</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nv">elem</span> <span class="nv">x</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nv">zip</span> <span class="nv">ls</span> <span class="nv">p</span><span class="p">)</span>

<span class="nv">b_</span> <span class="o">=</span> <span class="nv">filter</span> <span class="nv">fn</span> <span class="nv">b</span> 
<span class="nv">fb_</span> <span class="o">=</span> <span class="nv">map</span> <span class="nv">fst</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="nv">elem</span> <span class="p">(</span><span class="nv">snd</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">b_</span><span class="p">)(</span><span class="nv">zip</span> <span class="nv">ls</span> <span class="nv">p</span><span class="p">)</span>
<span class="c1">--</span>
<span class="nv">fn</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">all</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span> <span class="nv">elem</span> <span class="nv">x</span> <span class="nv">a</span><span class="p">)</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">fst</span><span class="o">.</span><span class="nv">snd</span><span class="p">)</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="p">((</span><span class="kr">_</span><span class="p">,</span><span class="kr">_</span><span class="p">),(</span><span class="kr">_</span><span class="p">,</span><span class="nv">x</span><span class="p">))</span><span class="o">-&gt;</span><span class="nv">x</span><span class="o">==</span><span class="nv">n</span><span class="p">)</span> <span class="p">(</span><span class="nv">zip</span> <span class="nv">ls</span> <span class="nv">t</span><span class="p">)</span>

<span class="nv">an</span> <span class="o">=</span>  <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span><span class="o">-&gt;</span><span class="p">((</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">),</span><span class="nv">a</span><span class="o">*</span><span class="nv">b</span><span class="p">))</span> <span class="nv">fb_</span>
<span class="nv">a2</span> <span class="o">=</span>  <span class="nv">map</span> <span class="nv">fst</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="nv">snd</span> <span class="nv">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="p">((</span><span class="nv">fst</span><span class="o">.</span><span class="nv">head</span><span class="p">)</span> <span class="nv">x</span><span class="p">,</span><span class="nv">length</span> <span class="nv">x</span><span class="p">))</span> <span class="o">$</span>
          <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">a</span><span class="o">-&gt;</span><span class="nv">filter</span><span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="nv">snd</span> <span class="nv">x</span><span class="o">==</span><span class="nv">a</span><span class="p">)</span> <span class="nv">an</span><span class="p">)</span>  <span class="p">(</span><span class="nv">nub</span> <span class="p">(</span><span class="nv">map</span> <span class="nv">snd</span> <span class="nv">an</span><span class="p">))</span>

<span class="nv">bn</span> <span class="o">=</span>  <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span><span class="o">-&gt;</span><span class="p">((</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">),</span><span class="nv">a</span><span class="o">+</span><span class="nv">b</span><span class="p">))</span> <span class="nv">a2</span>
<span class="nv">b2</span> <span class="o">=</span>  <span class="nv">map</span> <span class="nv">fst</span> <span class="o">$</span> <span class="nv">filter</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="nv">snd</span> <span class="nv">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="p">((</span><span class="nv">fst</span><span class="o">.</span><span class="nv">head</span><span class="p">)</span> <span class="nv">x</span><span class="p">,</span><span class="nv">length</span> <span class="nv">x</span><span class="p">))</span> <span class="o">$</span>
           <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">a</span><span class="o">-&gt;</span><span class="nv">filter</span><span class="p">(</span><span class="o">\</span><span class="nv">x</span><span class="o">-&gt;</span><span class="nv">snd</span> <span class="nv">x</span><span class="o">==</span><span class="nv">a</span><span class="p">)</span> <span class="nv">bn</span><span class="p">)</span>  <span class="p">(</span><span class="nv">nub</span> <span class="p">(</span><span class="nv">map</span> <span class="nv">snd</span> <span class="nv">bn</span><span class="p">))</span>

<span class="nv">answer</span> <span class="o">=</span> <span class="nv">b2</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101210164636/http://ja.doukaku.org/comment/8172/addtag/" class="addtag" id="addtag_8172">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101210164636/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20101210164636/http://ja.doukaku.org/comment/8172/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101210164636/http://ja.doukaku.org/comment/8172/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8172"
  >-</span><span
  class="button yellow"
  id="rating_z_8172"
  >0</span><span 
  class="button green"
  id="rating_p_8172"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101210164636/http://ja.doukaku.org/34/reply_to/8172/">
  返信
  </a>]
  </div>
</div>
</div>



  


  







</div>

<div id="side_menu" class="compact">

<iframe src="/web/20101210164636if_/http://ja.doukaku.org/login_info/" frameborder=0 width=100% id="login_info">
iframe required
</iframe>

<h4 class="semi_compact">一覧</h4>

<ul>
<li><a href="/web/20101210164636/http://ja.doukaku.org/lang/">言語</a>
<li><a href="/web/20101210164636/http://ja.doukaku.org/challenge/">お題</a>
<li><a href="/web/20101210164636/http://ja.doukaku.org/topic/">トピック</a>
<li><a href="/web/20101210164636/http://ja.doukaku.org/comment/">投稿</a>
<li><a href="/web/20101210164636/http://ja.doukaku.org/good_comments/">評価の高い投稿</a>
<li><a href="/web/20101210164636/http://ja.doukaku.org/tag/">タグ</a>
</ul>

<h4 class="compact">フィード</h4>
<ul>
<li><a href="/web/20101210164636/http://ja.doukaku.org/feeds/topics/">最新のトピック</a><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20101210164636/http://ja.doukaku.org/feeds/comments/">新着投稿</a><img src="/web/20101210164636im_/http://ja.doukaku.org/static/image/feed_icon.png">
</ul>

<h4 class="compact">その他</h4>
<ul>
<li><a href="/web/20101210164636/http://ja.doukaku.org/qa/">Q&amp;A</a>
<li><a href="/web/20101210164636/http://ja.doukaku.org/feedback/">フィードバック</a>
<!--<li><a href="/terms">用語集</a>-->
</ul>


<h4 class="compact">リンク</h4>
<ul>
<li><a href="/web/20101210164636/http://labs.cybozu.co.jp/">サイボウズ・ラボ</a>
<li><a href="/web/20101210164636/http://www.djangoproject.com/">Django</a>
</ul>


</div>
</div>


<div id="page_foot" class="bordered">
<a rel="license" href="/web/20101210164636/http://creativecommons.org/licenses/by/2.1/jp/">
<img alt="Creative Commons License" style="border-width:0" src="/web/20101210164636im_/http://i.creativecommons.org/l/by/2.1/jp/88x31.png" /></a>
このサイトの内容は、
<a rel="license" href="/web/20101210164636/http://creativecommons.org/licenses/by/2.1/jp/">クリエイティブ・コモンズ・ライセンス</a>の下でライセンスされています。
<a href="/web/20101210164636/http://ja.doukaku.org/qa/#licence">[詳細]</a>
</div>

</body>



<script type="text/javascript">
$(document).ready(function(){$("#doukaku_org").after("<script src='/web/20101210164636/http://api.pathtraq.com/pages?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&api=json&callback=addPathtraq'><" + "/script>")});
</script>

<script src="/web/20101210164636js_/http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2136157-1";
urchinTracker();
</script>



</html>





<!--
     FILE ARCHIVED ON 16:46:36 Dec 10, 2010 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 15:21:06 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
