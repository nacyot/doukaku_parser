
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
HTTPでGET　その2
どう書く？org </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20101211073215cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20101211073215cs_/http://ja.doukaku.org/static/style/style.css" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20101211073215cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
    <!--<script src="/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<script src="/web/20101211073215js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20101211073215js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20101211073215js_/http://ja.doukaku.org/static/js/addtag.js" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20101211073215js_/http://ja.doukaku.org/static/js/utils.js" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app17.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/113\/nested\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "11";
var displayMonth = "Dec";
var displayYear = "2010";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/113/nested/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20101211073215" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20100106050123/http://ja.doukaku.org/113/nested/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="6 Jan 2010"><strong>JAN</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 7:32:15 Dec 11, 2010">DEC</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Jan
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20100106050123/http://ja.doukaku.org/113/nested/" title="5:01:23 Jan 6, 2010" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 7:32:15 Dec 11, 2010">11</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20091130022126/http://ja.doukaku.org/113/nested/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="30 Nov 2009"><strong>2009</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 7:32:15 Dec 11, 2010">2010</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2011
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20101211073215*/http://ja.doukaku.org/113/nested/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>13 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">13 May 07 - 11 Dec 10</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000010000001_2008:-1:011100000000_2009:-1:000000020020_2010:11:200000000002_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20101211073215/http://ja.doukaku.org/">どう書く？org</a><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20101211073215im_/http://ja.doukaku.org/static/image/star_gold.png' alt=challenge>
<a href="/web/20101211073215/http://ja.doukaku.org/113/">HTTPでGET　その2</a>
</h2>

    




<div class="comment" id="comment4798"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/166/" target="_top">ところてん</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4798/">#4798</a>(<script language="JavaScript">print_time(new Date("2007/12/13 07:17 GMT"));</script><noscript>2007/12/13 07:17 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>HTTPでGET　その２

前回のお題
http://ja.doukaku.org/18/

HTTPで指定されたURLをGETするコードを書いてください。 
URLは「http://ja.doukaku.org/feeds/comments/」とします。 

ただし
・Proxyサーバを経由してGETしてください。
・タイムアウトを1秒に設定してください。
　(デフォルトが1秒でも、1秒に変更してください)
・タイムアウトを十分に小さくした場合、GETが失敗することを確認してください。

もしOSに依存する場合はそのOS名のタグを、 依存しない場合は「OS非依存」というタグをつけてください。
 わからなければつけなくても構いません。</pre>
	</div>
	
	<p class="link">
	  参考: <a href="/web/20101211073215/http://ja.doukaku.org/18/"> HTTPでGET</a>
	</p>  
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4798/addtag/" class="addtag" id="addtag_4798">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4798"
  >-</span><span
  class="button yellow"
  id="rating_z_4798"
  >0</span><span 
  class="button green"
  id="rating_p_4798"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://reply_to/4798/">
  返信
  </a>]
  </div>
</div>
</div>



  



<div class="indent">
<a href="/web/20101211073215/http://ja.doukaku.org/113/post_comment/">
コメントを投稿する
</a>
</div>


<h2>投稿されたコメント - ネスト表示</h2>
<a href="/web/20101211073215/http://ja.doukaku.org/113/flatten/">フラット表示</a> 
<a href="/web/20101211073215/http://ja.doukaku.org/113/">非表示</a> 


  
    




<div class="comment" id="comment5990"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/758/" target="_top">yharada</a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5990/">#5990</a>(<script language="JavaScript">print_time(new Date("2008/03/08 14:11 GMT"));</script><noscript>2008/03/08 14:11 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/groovy/">
	  Groovy
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>groovyです。こちらにも解答してみます
timeout=10でjava.net.SocketTimeoutExceptionがthrowされることを確認しました</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre>proxyHost = &quot;localhost&quot;
proxyPort = 8000
url = &quot;http://ja.doukaku.org/feeds/comments/&quot;
timeout = 1000

a = new URL(&quot;http&quot;, proxyHost, proxyPort, url).openConnection()
a.setReadTimeout(timeout) 
println a.getInputStream().getText(&quot;UTF8&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5990/addtag/" class="addtag" id="addtag_5990">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/groovy/">
		Groovy
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5990/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5990/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5990"
  >-</span><span
  class="button yellow"
  id="rating_z_5990"
  >0</span><span 
  class="button green"
  id="rating_p_5990"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/5990/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  
    




<div class="comment" id="comment4889"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/28/" target="_top">minke</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4889/">#4889</a>(<script language="JavaScript">print_time(new Date("2007/12/19 19:10 GMT"));</script><noscript>2007/12/19 19:10 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>Net::HTTP::Proxy を利用する</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;net/http&#39;</span>
<span class="k">def</span> <span class="nf">get_with_proxy</span><span class="p">(</span><span class="n">proxy_server</span><span class="p">,</span> <span class="n">proxy_port</span><span class="p">)</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Proxy</span><span class="p">(</span><span class="n">proxy_server</span><span class="p">,</span> <span class="n">proxy_port</span><span class="p">)</span>
    <span class="n">http</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;ja.doukaku.org&#39;</span><span class="p">)</span>
    <span class="n">http</span><span class="o">.</span><span class="n">open_timeout</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">http</span><span class="o">.</span><span class="n">start</span> <span class="k">do</span> <span class="o">|</span><span class="n">h</span><span class="o">|</span>
      <span class="n">response</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/feeds/comments/&#39;</span><span class="p">)</span>
      <span class="nb">puts</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4889/addtag/" class="addtag" id="addtag_4889">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4889/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4889/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4889"
  >-</span><span
  class="button yellow"
  id="rating_z_4889"
  >0</span><span 
  class="button green"
  id="rating_p_4889"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4889/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment5936"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/744/" target="_top">howking</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5936/">#5936</a>(<script language="JavaScript">print_time(new Date("2008/03/04 17:49 GMT"));</script><noscript>2008/03/04 17:49 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/erlang/">
	  Erlang
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>ざっくりと。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre>1&gt; inets:start().
ok
2&gt; http:set_options([{proxy,{{&quot;pro.xy.ip.addr&quot;, 8080},[]}}]).
ok
3&gt; http:request(get,{&quot;http://ja.doukaku.org/feeds/comments/&quot;,[]},[{timeout,1000}],[]).
{error,timeout} ... Timeout1秒だと失敗
4&gt; http:request(get,{&quot;http://ja.doukaku.org/feeds/comments/&quot;,[]},[{timeout,10000}],[]).
{ok,{{&quot;HTTP/1.0&quot;,200,&quot;OK&quot;}, ... (Timeout10秒だとOK)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5936/addtag/" class="addtag" id="addtag_5936">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/erlang/">
		Erlang
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5936/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5936/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5936"
  >-</span><span
  class="button yellow"
  id="rating_z_5936"
  >0</span><span 
  class="button green"
  id="rating_p_5936"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/5936/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4922"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4922/">#4922</a>(<script language="JavaScript">print_time(new Date("2007/12/21 16:42 GMT"));</script><noscript>2007/12/21 16:42 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/php/">
	  PHP
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>Zend Frameworkで</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="s1">&#39;Zend/Http/Client.php&#39;</span><span class="p">;</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;adapter&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;Zend_Http_Client_Adapter_Proxy&#39;</span><span class="p">,</span>
    <span class="s1">&#39;proxy_host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ugnews.net&#39;</span><span class="p">,</span>
    <span class="s1">&#39;timeout&#39;</span><span class="o">=&gt;</span> <span class="m">1</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_Http_Client</span><span class="p">(</span><span class="s1">&#39;http://ja.doukaku.org/feeds/comments/&#39;</span><span class="p">,</span> <span class="nv">$config</span><span class="p">);</span>
<span class="nf">print_r</span><span class="p">(</span><span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">));</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4922/addtag/" class="addtag" id="addtag_4922">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/php/">
		PHP
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4922/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4922/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4922"
  >-</span><span
  class="button yellow"
  id="rating_z_4922"
  >0</span><span 
  class="button green"
  id="rating_p_4922"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4922/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment5266"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/448/" target="_top">naranja</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5266/">#5266</a>(<script language="JavaScript">print_time(new Date("2008/01/11 08:30 GMT"));</script><noscript>2008/01/11 08:30 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/d/">
	  D
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  libcurl&nbsp;を使ってみました。使い方は怪しいですが。<br/>若干古いライブラリなので最近の&nbsp;D&nbsp;2.0&nbsp;コンパイラではダメだと思われます。<br/>こちらでは&nbsp;dmd&nbsp;1.025&nbsp;を&nbsp;bud&nbsp;経由で使いました。
	</div>
	
	<p class="link">
	  参考: <a href="/web/20101211073215/http://curl.haxx.se/libcurl/d/">libcurl for D</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="n">std</span>.<span class="n">stdio</span>;
<span class="k">import</span> <span class="n">libcurl</span>;
<span class="k">import</span> <span class="n">curldef</span>;

<span class="kt">void</span> <span class="n">main</span>(){
    <span class="k">auto</span> <span class="n">curl</span> = <span class="k">new</span> <span class="n">LibCurl</span>();
    <span class="n">ProxyData</span> <span class="n">proxy</span>;
    <span class="n">proxy</span>.<span class="n">url</span> = <span class="s">&quot;proxy.example.net:8001&quot;</span>;
    <span class="n">curl</span>.<span class="n">proxy</span>(<span class="n">proxy</span>);
    <span class="n">curl</span>.<span class="n">URL</span>(<span class="s">&quot;http://ja.doukaku.org/feeds/comments/&quot;</span>);
    <span class="n">curl</span>.<span class="n">setOption</span>(<span class="n">CURLOPT_TIMEOUT</span>, <span class="mi">1</span>);

    <span class="k">auto</span> <span class="n">str</span> = <span class="n">curl</span>.<span class="n">downloadToString</span>();
    <span class="n">writefln</span>(<span class="s">&quot;%s&quot;</span>, <span class="n">str</span>);
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5266/addtag/" class="addtag" id="addtag_5266">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/d/">
		D
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5266/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5266/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5266"
  >-</span><span
  class="button yellow"
  id="rating_z_5266"
  >0</span><span 
  class="button green"
  id="rating_p_5266"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/5266/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment6349"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/760/" target="_top">turugina</a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/6349/">#6349</a>(<script language="JavaScript">print_time(new Date("2008/05/27 02:00 GMT"));</script><noscript>2008/05/27 02:00 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>Boost.Asioでゴリゴリ.</pre>
	</div>
	
	<p class="link">
	  参考: <a href="/web/20101211073215/http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio.html">Boost.Asio</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;boost/array.hpp&gt;</span>
<span class="cp">#include &lt;boost/asio.hpp&gt;</span>
<span class="cp">#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</span>
<span class="cp">#include &lt;boost/lexical_cast.hpp&gt;</span>
<span class="cp">#include &lt;boost/regex.hpp&gt;</span>
<span class="cp">#include &lt;boost/shared_ptr.hpp&gt;</span>

<span class="cp">#include &lt;cstring&gt;</span>
<span class="cp">#include &lt;exception&gt;</span>
<span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;string&gt;</span>

<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">socket</span><span class="o">&gt;</span> <span class="n">g_socket</span><span class="p">;</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">deadline_timer</span><span class="o">&gt;</span> <span class="n">g_timer</span><span class="p">;</span>
<span class="n">boost</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="mi">128</span><span class="o">&gt;</span> <span class="n">g_recv_buf</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">on_read</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span><span class="o">&amp;</span> <span class="n">err</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">size_t</span> <span class="n">bytes_transfered</span>
    <span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">err</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">error</span><span class="o">::</span><span class="n">eof</span> <span class="p">)</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">system_error</span><span class="p">(</span><span class="n">err</span><span class="p">).</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">g_timer</span> <span class="p">)</span>
      <span class="n">g_timer</span><span class="o">-&gt;</span><span class="n">cancel</span><span class="p">();</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">g_recv_buf</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="n">bytes_transfered</span><span class="p">);</span>
  <span class="n">g_socket</span><span class="o">-&gt;</span><span class="n">async_read_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">g_recv_buf</span><span class="p">,</span> <span class="n">g_recv_buf</span><span class="p">.</span><span class="n">size</span><span class="p">()),</span> <span class="n">on_read</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">on_timeout</span><span class="p">(</span><span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span><span class="o">&amp;</span> <span class="n">err</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">error</span><span class="o">::</span><span class="n">operation_aborted</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;TIMEOUT!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="n">g_socket</span> <span class="p">)</span>
        <span class="n">g_socket</span><span class="o">-&gt;</span><span class="n">shutdown</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">socket</span><span class="o">::</span><span class="n">shutdown_both</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">system_error</span><span class="p">(</span><span class="n">err</span><span class="p">).</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">timeout_sec</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;usage: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &lt;url&gt; [&lt;proxy url&gt; [&lt;timeour sec&gt;]]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">const</span> <span class="kt">bool</span> <span class="n">use_proxy</span> <span class="o">=</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">std</span><span class="o">::</span><span class="n">strlen</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">proxy_url</span><span class="p">(</span><span class="n">use_proxy</span> <span class="o">?</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">target_url</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="n">timeout_sec</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">lexical_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;invalid timeout sec (&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;) :&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">proto</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">path</span><span class="p">;</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">regex</span> <span class="n">r</span><span class="p">(</span><span class="s">&quot;(?:([^:]+)://)?([^:/]+)(?::(</span><span class="se">\\</span><span class="s">d+))?/?(.*$)&quot;</span><span class="p">);</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">smatch</span> <span class="n">m</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">url</span> <span class="o">=</span> <span class="n">use_proxy</span> <span class="o">?</span> <span class="n">proxy_url</span> <span class="o">:</span> <span class="n">target_url</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">boost</span><span class="o">::</span><span class="n">regex_match</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="n">proto</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">str</span><span class="p">()</span> <span class="o">:</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;http&quot;</span><span class="p">);</span>
      <span class="n">host</span>  <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
      <span class="n">port</span>  <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
      <span class="n">path</span>  <span class="o">=</span> <span class="n">use_proxy</span> <span class="o">?</span> <span class="n">target_url</span> <span class="o">:</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;given url (&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">url</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;) doesn&#39;t match!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;error while analyzing url(&quot;</span>
      <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">use_proxy</span> <span class="o">?</span> <span class="n">proxy_url</span> <span class="o">:</span> <span class="n">target_url</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;) : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="k">using</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="p">;</span>

    <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">io_service</span> <span class="n">io_service</span><span class="p">;</span>
    
    <span class="n">tcp</span><span class="o">::</span><span class="n">resolver</span> <span class="n">resolver</span><span class="p">(</span><span class="n">io_service</span><span class="p">);</span>
    <span class="n">g_timer</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">new</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">deadline_timer</span><span class="p">(</span><span class="n">io_service</span><span class="p">));</span>

    <span class="n">tcp</span><span class="o">::</span><span class="n">resolver</span><span class="o">::</span><span class="n">query</span> <span class="n">query</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="n">proto</span> <span class="o">:</span> <span class="n">port</span> <span class="p">);</span>

    <span class="n">tcp</span><span class="o">::</span><span class="n">resolver</span><span class="o">::</span><span class="n">iterator</span> <span class="n">endpoint_iterator</span> <span class="o">=</span> <span class="n">resolver</span><span class="p">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
    <span class="n">tcp</span><span class="o">::</span><span class="n">resolver</span><span class="o">::</span><span class="n">iterator</span> <span class="n">end</span><span class="p">;</span>

    <span class="n">g_socket</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">new</span> <span class="n">tcp</span><span class="o">::</span><span class="n">socket</span><span class="p">(</span><span class="n">io_service</span><span class="p">));</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span> <span class="n">err</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">error</span><span class="o">::</span><span class="n">host_not_found</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">err</span> <span class="o">&amp;&amp;</span> <span class="n">endpoint_iterator</span> <span class="o">!=</span> <span class="n">end</span> <span class="p">)</span> <span class="p">{</span>
      <span class="n">g_socket</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">();</span>
      <span class="n">g_socket</span><span class="o">-&gt;</span><span class="n">connect</span><span class="p">(</span><span class="o">*</span><span class="n">endpoint_iterator</span><span class="o">++</span><span class="p">,</span> <span class="n">err</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">err</span> <span class="p">)</span>
      <span class="k">throw</span> <span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">system_error</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>

    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">message</span><span class="p">(</span><span class="s">&quot;GET &quot;</span> <span class="o">+</span> <span class="n">path</span> <span class="o">+</span> <span class="s">&quot; HTTP/1.0</span><span class="se">\r\n\r\n</span><span class="s">&quot;</span><span class="p">);</span>

    <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">write</span><span class="p">(</span><span class="o">*</span><span class="n">g_socket</span><span class="p">,</span> <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">message</span><span class="p">),</span>
        <span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">transfer_all</span><span class="p">(),</span> <span class="n">err</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">err</span> <span class="p">)</span>
      <span class="k">throw</span> <span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">system_error</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>


    <span class="n">g_timer</span><span class="o">-&gt;</span><span class="n">expires_from_now</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">posix_time</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="n">timeout_sec</span><span class="p">));</span>
    <span class="n">g_socket</span><span class="o">-&gt;</span><span class="n">async_read_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="n">g_recv_buf</span><span class="p">,</span> <span class="n">g_recv_buf</span><span class="p">.</span><span class="n">size</span><span class="p">()),</span> <span class="n">on_read</span><span class="p">);</span>
    <span class="n">g_timer</span><span class="o">-&gt;</span><span class="n">async_wait</span><span class="p">(</span><span class="n">on_timeout</span><span class="p">);</span>
    <span class="n">io_service</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>

    <span class="n">g_socket</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>
    <span class="n">g_timer</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/6349/addtag/" class="addtag" id="addtag_6349">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/6349/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/6349/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6349"
  >-</span><span
  class="button yellow"
  id="rating_z_6349"
  >0</span><span 
  class="button green"
  id="rating_p_6349"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/6349/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  

  
    




<div class="comment" id="comment4895"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4895/">#4895</a>(<script language="JavaScript">print_time(new Date("2007/12/20 07:49 GMT"));</script><noscript>2007/12/20 07:49 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre><span class="k">from</span> <span class="nn">urllib2</span> <span class="k">import</span> <span class="o">*</span>
<span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s">&quot;http://ja.doukaku.org/feeds/comments/&quot;</span><span class="p">)</span>
<span class="n">req</span><span class="o">.</span><span class="n">set_proxy</span><span class="p">(</span><span class="s">&quot;localhost:8000&quot;</span><span class="p">,</span> <span class="s">&quot;http&quot;</span><span class="p">)</span>
<span class="n">socket</span><span class="o">.</span><span class="n">setdefaulttimeout</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="k">print</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4895/addtag/" class="addtag" id="addtag_4895">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4895/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4895/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4895"
  >-</span><span
  class="button yellow"
  id="rating_z_4895"
  >0</span><span 
  class="button green"
  id="rating_p_4895"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4895/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4902"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4902/">#4902</a>(<script language="JavaScript">print_time(new Date("2007/12/20 15:47 GMT"));</script><noscript>2007/12/20 15:47 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  ProxyサーバとTIMEOUTを設定してGETしています。<br/>TIMEOUTを100msにした場合、java.net.SocketTimeoutException&nbsp;が発生します。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Sample</span> <span class="o">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">final</span> <span class="n">String</span> <span class="n">SITE</span> <span class="o">=</span> <span class="s">&quot;http://ja.doukaku.org/feeds/comments/&quot;</span><span class="o">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">final</span> <span class="n">String</span> <span class="n">PROXY_HOST</span> <span class="o">=</span> <span class="s">&quot;filter.nifty.com&quot;</span><span class="o">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">final</span> <span class="kt">int</span> <span class="n">PROXY_PORT</span> <span class="o">=</span> <span class="mi">8080</span><span class="o">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">final</span> <span class="kt">int</span> <span class="n">TIMEOUT</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">;</span> <span class="c">// m sec</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="k">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">Proxy</span> <span class="n">proxy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Proxy</span><span class="o">(</span><span class="n">Proxy</span><span class="o">.</span><span class="na">Type</span><span class="o">.</span><span class="na">HTTP</span><span class="o">,</span> 
                                <span class="k">new</span> <span class="n">InetSocketAddress</span><span class="o">(</span><span class="n">PROXY_HOST</span><span class="o">,</span> <span class="n">PROXY_PORT</span><span class="o">));</span>
        <span class="n">URLConnection</span> <span class="n">uc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">SITE</span><span class="o">).</span><span class="na">openConnection</span><span class="o">(</span><span class="n">proxy</span><span class="o">);</span>
        <span class="n">uc</span><span class="o">.</span><span class="na">setConnectTimeout</span><span class="o">(</span><span class="n">TIMEOUT</span><span class="o">);</span>
        <span class="n">uc</span><span class="o">.</span><span class="na">setReadTimeout</span><span class="o">(</span><span class="n">TIMEOUT</span><span class="o">);</span>
        <span class="n">uc</span><span class="o">.</span><span class="na">connect</span><span class="o">();</span>
        <span class="n">BufferedReader</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span>
                <span class="n">uc</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">));</span>
        <span class="n">String</span> <span class="n">str</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">str</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4902/addtag/" class="addtag" id="addtag_4902">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4902/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4902/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4902"
  >-</span><span
  class="button yellow"
  id="rating_z_4902"
  >0</span><span 
  class="button green"
  id="rating_p_4902"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4902/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4897"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4897/">#4897</a>(<script language="JavaScript">print_time(new Date("2007/12/20 08:18 GMT"));</script><noscript>2007/12/20 08:18 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre>import java.io._
import java.net._

val con = (new URL(&quot;http&quot;, &quot;localhost&quot;, 8000, &quot;http://ja.doukaku.org/feeds/comments/&quot;)).openConnection.asInstanceOf[HttpURLConnection]
con.setConnectTimeout(1000)
con.setReadTimeout(1000)
con.setRequestMethod(&quot;GET&quot;)
val read = (new BufferedReader(new InputStreamReader(con.getInputStream))).readLine _

def printContents:unit = read() match{
  case null =&gt;()
  case s =&gt; println(s);printContents
}
printContents
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4897/addtag/" class="addtag" id="addtag_4897">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4897/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4897/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4897"
  >-</span><span
  class="button yellow"
  id="rating_z_4897"
  >0</span><span 
  class="button green"
  id="rating_p_4897"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4897/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4896"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4896/">#4896</a>(<script language="JavaScript">print_time(new Date("2007/12/20 07:56 GMT"));</script><noscript>2007/12/20 07:56 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>タイムアウトをこのデータ取得関数全体でのタイムアウトだと解釈して
すべてのメソッド呼び出し前にタイムアウトを設定しなおしています。

確認できませんがposix系でしか動かないかもしれません。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">socket</span>
<span class="k">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">time</span>

<span class="k">def</span> <span class="nf">geturl</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">proxy_host</span><span class="p">,</span> <span class="n">proxy_port</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
  <span class="n">timeout</span> <span class="o">+=</span> <span class="n">time</span><span class="p">()</span>
  <span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
  <span class="n">s</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">timeout</span><span class="o">-</span><span class="n">time</span><span class="p">())</span>
  <span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">proxy_host</span><span class="p">,</span> <span class="n">proxy_port</span><span class="p">))</span>
  <span class="n">s</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">timeout</span><span class="o">-</span><span class="n">time</span><span class="p">())</span>
  <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&#39;GET </span><span class="si">%s</span><span class="s"> HTTP/1.1</span><span class="se">\r\n\r\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
  <span class="n">s</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">timeout</span><span class="o">-</span><span class="n">time</span><span class="p">())</span>
  <span class="n">r</span> <span class="o">=</span> <span class="n">d</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">2048</span><span class="p">)</span>
  <span class="k">while</span> <span class="n">d</span><span class="p">:</span>
    <span class="n">s</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="n">timeout</span><span class="o">-</span><span class="n">time</span><span class="p">())</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">2048</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">+=</span> <span class="n">d</span>
  <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
  <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\r\n\r\n</span><span class="s">&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span><span class="p">:]</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4896/addtag/" class="addtag" id="addtag_4896">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4896/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4896/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4896"
  >-</span><span
  class="button yellow"
  id="rating_z_4896"
  >0</span><span 
  class="button green"
  id="rating_p_4896"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4896/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4892"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4892/">#4892</a>(<script language="JavaScript">print_time(new Date("2007/12/20 00:50 GMT"));</script><noscript>2007/12/20 00:50 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>特にproxy用のインタフェースはありませんが、http-getのserver引数にproxyサーバ、url引数に目的とする絶対URLを指定してやればproxyを通したアクセスになります。</p>
<p>タイムアウトはhttp-get自体ではまだサポートしていないので、スレッドを使ってみました。なのでpthreadサポートが必要ですが、pthreadが動けばOS非依存のはず。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">rfc</span><span class="o">.</span><span class="nv">http</span><span class="p">)</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">gauche</span><span class="o">.</span><span class="nv">threads</span><span class="p">)</span>

<span class="p">(</span><span class="k">define </span><span class="nv">*proxy*</span> <span class="s">&quot;localhost&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">*timeout*</span> <span class="mf">1.0</span><span class="p">)</span> <span class="c1">;seconds</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">get/proxy-and-timeout</span> <span class="nv">url</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">let1</span> <span class="nv">t</span> <span class="p">(</span><span class="nf">make-thread</span> <span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">receive</span> <span class="nv">r</span> <span class="p">(</span><span class="nf">http-get</span> <span class="nv">*proxy*</span> <span class="nv">url</span><span class="p">)</span> <span class="nv">r</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">or </span><span class="p">(</span><span class="nf">thread-join!</span> <span class="p">(</span><span class="nf">thread-start!</span> <span class="nv">t</span><span class="p">)</span> <span class="nv">*timeout*</span> <span class="no">#f</span><span class="p">)</span>
        <span class="p">(</span><span class="k">begin </span><span class="p">(</span><span class="nf">thread-terminate!</span> <span class="nv">t</span><span class="p">)</span> <span class="no">#f</span><span class="p">))))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4892/addtag/" class="addtag" id="addtag_4892">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4892/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4892/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4892"
  >-</span><span
  class="button yellow"
  id="rating_z_4892"
  >0</span><span 
  class="button green"
  id="rating_p_4892"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4892/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4899"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4899/">#4899</a>(<script language="JavaScript">print_time(new Date("2007/12/20 10:55 GMT"));</script><noscript>2007/12/20 10:55 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>WWW::Mechanizeで．</p>
<p>うちの環境では，timeout 1秒だと成功するorzので，0.1秒にしました．</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/local/bin/ruby</span>
<span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;mechanize&#39;</span>

<span class="k">class</span> <span class="nc">Crawler</span> <span class="o">&lt;</span> <span class="no">WWW</span><span class="o">::</span><span class="no">Mechanize</span>
  <span class="kp">attr_accessor</span> <span class="ss">:agent</span>

  <span class="no">PROXY_HOST</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>
  <span class="no">PROXY_PORT</span> <span class="o">=</span> <span class="s1">&#39;8080&#39;</span>
  <span class="no">URI</span> <span class="o">=</span> <span class="s1">&#39;http://ja.doukaku.org/feeds/comments/&#39;</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">conf</span> <span class="o">=</span> <span class="p">{})</span>
    <span class="k">super</span><span class="p">()</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">max_history</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># 幸せになるおまじない</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">set_proxy</span><span class="p">(</span><span class="no">PROXY_HOST</span><span class="p">,</span> <span class="no">PROXY_PORT</span><span class="p">)</span>
    <span class="n">conf</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="nb">method</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span> <span class="nb">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">method</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">fetch</span>
    <span class="n">get</span><span class="p">(</span><span class="no">URI</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># puts Crawler.new.fetch.body  # =&gt; succeed</span>
<span class="nb">puts</span> <span class="no">Crawler</span><span class="o">.</span><span class="n">new</span><span class="p">({</span><span class="ss">:open_timeout</span><span class="o">=</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="ss">:read_timeout</span><span class="o">=</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">})</span><span class="o">.</span><span class="n">fetch</span><span class="o">.</span><span class="n">body</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4899/addtag/" class="addtag" id="addtag_4899">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4899/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4899/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4899"
  >-</span><span
  class="button yellow"
  id="rating_z_4899"
  >0</span><span 
  class="button green"
  id="rating_p_4899"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101211073215/http://ja.doukaku.org/comment/4899/">
    1
    reply
  </a>

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4899/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment4900"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/560/" target="_top">ihag</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4900/">#4900</a>(<script language="JavaScript">print_time(new Date("2007/12/20 11:42 GMT"));</script><noscript>2007/12/20 11:42 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>う，ログインし忘れてた．</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4900/addtag/" class="addtag" id="addtag_4900">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4900"
  >-</span><span
  class="button yellow"
  id="rating_z_4900"
  >0</span><span 
  class="button green"
  id="rating_p_4900"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101211073215/http://ja.doukaku.org/comment/4899/"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101211073215/http://ja.doukaku.org/comment/4900/root/"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4900/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  
    




<div class="comment" id="comment9244"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/674/" target="_top">ryugate</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/9244/">#9244</a>(<script language="JavaScript">print_time(new Date("2009/06/26 07:11 GMT"));</script><noscript>2009/06/26 07:11 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>プロパティをいじる方法で、Sourceを使ってみました。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre>import scala.io.Source

System.setProperty(&quot;http.proxyHost&quot;,&quot;proxy.server.jp&quot;)
System.setProperty(&quot;http.proxyPort&quot;,&quot;8080&quot;)

println(
  Source.fromURL(&quot;http://ja.doukaku.org/feeds/comments/&quot;)
        .getLines
        .mkString
       )
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/9244/addtag/" class="addtag" id="addtag_9244">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/9244/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/9244/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_9244"
  >-</span><span
  class="button yellow"
  id="rating_z_9244"
  >0</span><span 
  class="button green"
  id="rating_p_9244"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/9244/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4890"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4890/">#4890</a>(<script language="JavaScript">print_time(new Date("2007/12/19 20:01 GMT"));</script><noscript>2007/12/19 20:01 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span>

<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">LWP::</span><span class="n">UserAgent</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$ua</span> <span class="o">=</span> <span class="nn">LWP::</span><span class="n">UserAgent</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">;</span>
<span class="nv">$ua</span><span class="o">-&gt;</span><span class="n">timeout</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nv">$ua</span><span class="o">-&gt;</span><span class="n">proxy</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">,</span> <span class="s">&#39;http://proxy.example.net:8001/&#39;</span><span class="p">);</span>

<span class="k">my</span> <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$ua</span><span class="o">-&gt;</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://ja.doukaku.org/feeds/comments&#39;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$res</span><span class="o">-&gt;</span><span class="n">is_success</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="nv">$res</span><span class="o">-&gt;</span><span class="n">content</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="nb">die</span> <span class="nv">$res</span><span class="o">-&gt;</span><span class="n">status_line</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4890/addtag/" class="addtag" id="addtag_4890">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4890/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4890/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4890"
  >-</span><span
  class="button yellow"
  id="rating_z_4890"
  >0</span><span 
  class="button green"
  id="rating_p_4890"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4890/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4920"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4920/">#4920</a>(<script language="JavaScript">print_time(new Date("2007/12/21 16:24 GMT"));</script><noscript>2007/12/21 16:24 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  Squeak&nbsp;Smalltalk&nbsp;で。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre>| sock url crlf list contents secs |
HTTPSocket useProxyServerNamed: &#39;proxy.example.com&#39; port: 8080.
url := &#39;http://ja.doukaku.org/feeds/comments/&#39; asUrl.
crlf := String crlf.
secs := HTTPSocket deadlineSecs: 1.
sock := HTTPSocket initHTTPSocket: url wait: secs ifError: [:err | ^err].
sock sendCommand: &#39;GET &#39;, url fullPath, &#39; HTTP/1.1&#39;, crlf, crlf.
list := sock getResponseUpTo: crlf, crlf ignoring: String cr.
contents := (sock getRestOfBuffer: list third) contents.
sock destroy.
HTTPSocket stopUsingProxyServer.
^contents
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4920/addtag/" class="addtag" id="addtag_4920">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4920/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4920/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4920"
  >-</span><span
  class="button yellow"
  id="rating_z_4920"
  >0</span><span 
  class="button green"
  id="rating_p_4920"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4920/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4901"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/405/" target="_top">mc</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4901/">#4901</a>(<script language="JavaScript">print_time(new Date("2007/12/20 15:39 GMT"));</script><noscript>2007/12/20 15:39 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>(http-get/proxy-&amp;-timeout "http://ja.doukaku.org/feeds/comments/")
;時間内
; ==&gt;http-requestの結果
;タイムアウト時
; ==&gt; nil

Drakmaとタイムアウトの制御に、Portable-Threadsを使ってみました。
・Clozure CL 1.2 Linux/x86_64 
・SBCL 1.0.12 Linux/x86_64 
・Allegro 8.1 Express MacOSX/PPC
・CLISP 2.41 MacOSX/PPC
・LispWorks PE 5.0.1 MacOSX/PPC
で動作確認しています。
;; LispWorks限定ということならhttp-requestはタイムアウト制御の引数を取ることが
;; 可能なようです。</pre>
	</div>
	
	<p class="link">
	  参考: <a href="/web/20101211073215/http://www.cliki.net/Portable-Threads">Portable-Threads</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre>(require :portable-threads)
(require :drakma)

(defun http-get/proxy-&amp;-timeout (uri &amp;optional (expire 1) proxy port)
  (portable-threads:with-timeout (expire nil)
    (drakma:http-request uri :proxy (and proxy `(,proxy ,port)))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4901/addtag/" class="addtag" id="addtag_4901">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4901/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4901/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4901"
  >-</span><span
  class="button yellow"
  id="rating_z_4901"
  >0</span><span 
  class="button green"
  id="rating_p_4901"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4901/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4988"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/343/" target="_top">shimakuma</a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4988/">#4988</a>(<script language="JavaScript">print_time(new Date("2007/12/27 04:08 GMT"));</script><noscript>2007/12/27 04:08 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p><a class="reference" href="/web/20101211073215/http://ja.doukaku.org/113/lang/java/">Java</a>
/
<a class="reference" href="/web/20101211073215/http://ja.doukaku.org/113/lang/scala/">Scala</a>
とほぼ同じ。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><div class="highlight"><pre><span class="nx">importPackage</span><span class="p">(</span><span class="nx">java</span><span class="p">.</span><span class="nx">net</span><span class="p">);</span>
<span class="nx">importPackage</span><span class="p">(</span><span class="nx">java</span><span class="p">.</span><span class="nx">io</span><span class="p">);</span>

<span class="p">(</span><span class="k">function</span> <span class="nx">doukaku113</span><span class="p">(</span><span class="nx">prox</span><span class="o">,</span> <span class="nx">timeout</span><span class="o">,</span> <span class="nx">port</span><span class="p">){</span> <span class="nx">port</span> <span class="o">||</span> <span class="p">(</span><span class="nx">port</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">);</span>
  <span class="nx">prox</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Proxy</span><span class="p">(</span><span class="nx">Proxy</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">HTTP</span><span class="o">,</span> <span class="k">new</span> <span class="nx">InetSocketAddress</span><span class="p">(</span><span class="nx">prox</span><span class="o">,</span> <span class="nx">port</span><span class="p">));</span>
  <span class="k">with</span><span class="p">(</span><span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="s1">&#39;http://ja.doukaku.org/feeds/comments/&#39;</span><span class="p">).</span><span class="nx">openConnection</span><span class="p">(</span><span class="nx">prox</span><span class="p">))</span> <span class="k">try</span><span class="p">{</span>
    <span class="nx">setConnectTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
    <span class="nx">setReadTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
    <span class="nx">connect</span><span class="p">();</span>
    <span class="k">with</span><span class="p">(</span><span class="k">new</span> <span class="nx">BufferedReader</span><span class="p">(</span><span class="k">new</span> <span class="nx">InputStreamReader</span><span class="p">(</span><span class="nx">getInputStream</span><span class="p">()</span><span class="o">,</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">)))</span>
      <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">b</span><span class="o">;</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">readLine</span><span class="p">();)</span> <span class="nx">print</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="nx">print</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="o">;</span>
<span class="p">})(</span>
  <span class="s1">&#39;localhost&#39;</span><span class="o">,</span> <span class="mi">1000</span>
  <span class="c">// =&gt; &lt;?xml version=&quot;1.0&quot; ...</span>
<span class="p">)(</span>
  <span class="s1">&#39;localhost&#39;</span><span class="o">,</span> <span class="mi">100</span>
  <span class="c">// =&gt; JavaException: java.net.SocketTimeoutException: Read timed out</span>
<span class="p">);</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4988/addtag/" class="addtag" id="addtag_4988">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4988/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4988/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4988"
  >-</span><span
  class="button yellow"
  id="rating_z_4988"
  >0</span><span 
  class="button green"
  id="rating_p_4988"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4988/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment5920"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/481/" target="_top">mtsuyugu</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5920/">#5920</a>(<script language="JavaScript">print_time(new Date("2008/03/02 01:59 GMT"));</script><noscript>2008/03/02 01:59 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>#3704 を元にしています。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;curlpp/cURLpp.hpp&gt;</span>
<span class="cp">#include &lt;curlpp/Easy.hpp&gt;</span>
<span class="cp">#include &lt;curlpp/Options.hpp&gt;</span>
<span class="cp">#include &lt;string&gt;</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">content</span><span class="p">;</span>

<span class="n">size_t</span> <span class="n">writeMemoryCallback</span><span class="p">(</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">nmemb</span>  <span class="p">){</span>
   <span class="n">size_t</span> <span class="n">realsize</span> <span class="o">=</span> <span class="n">size</span> <span class="o">*</span> <span class="n">nmemb</span><span class="p">;</span>
   <span class="n">content</span><span class="p">.</span><span class="n">append</span><span class="p">(</span>  <span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*&gt;</span><span class="p">(</span> <span class="n">ptr</span> <span class="p">),</span> <span class="n">realsize</span> <span class="p">);</span>
   <span class="k">return</span> <span class="n">realsize</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]</span> <span class="p">){</span>

   <span class="k">try</span> <span class="p">{</span>
      <span class="n">cURLpp</span><span class="o">::</span><span class="n">Cleanup</span> <span class="n">cleaner</span><span class="p">;</span>
      <span class="n">cURLpp</span><span class="o">::</span><span class="n">Easy</span> <span class="n">request</span><span class="p">;</span>
      <span class="n">request</span><span class="p">.</span><span class="n">setOpt</span><span class="p">(</span> <span class="k">new</span> <span class="n">cURLpp</span><span class="o">::</span><span class="n">Options</span><span class="o">::</span><span class="n">Url</span><span class="p">(</span> <span class="s">&quot;http://ja.doukaku.org/feeds/comments/&quot;</span> <span class="p">)</span> <span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="n">setOpt</span><span class="p">(</span> <span class="k">new</span> <span class="n">cURLpp</span><span class="o">::</span><span class="n">Options</span><span class="o">::</span><span class="n">WriteFunction</span><span class="p">(</span>
                      <span class="n">cURLpp</span><span class="o">::</span><span class="n">Types</span><span class="o">::</span><span class="n">WriteFunctionFunctor</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">writeMemoryCallback</span> <span class="p">)));</span>
      <span class="n">request</span><span class="p">.</span><span class="n">setOpt</span><span class="p">(</span> <span class="k">new</span> <span class="n">cURLpp</span><span class="o">::</span><span class="n">Options</span><span class="o">::</span><span class="n">Proxy</span><span class="p">(</span> <span class="s">&quot;example.com:80&quot;</span> <span class="p">)</span> <span class="p">);</span>
      <span class="n">request</span><span class="p">.</span><span class="n">setOpt</span><span class="p">(</span> <span class="k">new</span> <span class="n">cURLpp</span><span class="o">::</span><span class="n">Options</span><span class="o">::</span><span class="n">Timeout</span><span class="p">(</span> <span class="mi">1</span> <span class="p">));</span>
      <span class="n">request</span><span class="p">.</span><span class="n">perform</span><span class="p">();</span>
   <span class="p">}</span>
   <span class="k">catch</span> <span class="p">(</span> <span class="n">cURLpp</span><span class="o">::</span><span class="n">LogicError</span> <span class="o">&amp;</span> <span class="n">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">catch</span> <span class="p">(</span> <span class="n">cURLpp</span><span class="o">::</span><span class="n">RuntimeError</span> <span class="o">&amp;</span> <span class="n">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">content</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/5920/addtag/" class="addtag" id="addtag_5920">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5920/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/5920/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5920"
  >-</span><span
  class="button yellow"
  id="rating_z_5920"
  >0</span><span 
  class="button green"
  id="rating_p_5920"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/5920/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4906"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4906/">#4906</a>(<script language="JavaScript">print_time(new Date("2007/12/20 23:49 GMT"));</script><noscript>2007/12/20 23:49 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>HTTPパッケージにあるモジュール群を使う．
タイムアウトは ghc-6.8.2 で標準になったSystem.TImeout モジュールを使う</p>

	</div>
	
	<p class="link">
	  参考: <a href="/web/20101211073215/http://hackage.haskell.org/cgi-bin/hackage-scripts/package/HTTP-3001.0.4">HackageDB:HTTP-3001.0.4</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></td><td class="code"><div class="highlight"><pre><span class="kr">module</span> <span class="n">Main</span> <span class="p">(</span><span class="nv">main</span><span class="p">)</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">Maybe</span>
<span class="kr">import</span> <span class="n">Network</span><span class="o">.</span><span class="n">Browser</span>
<span class="kr">import</span> <span class="n">Network</span><span class="o">.</span><span class="n">HTTP</span>
<span class="kr">import</span> <span class="n">Network</span><span class="o">.</span><span class="n">URI</span>
<span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">Environment</span>
<span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">IO</span>
<span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">Timeout</span>
<span class="c1">-- import qualified System.IO.UTF8 as U</span>

<span class="nv">main</span> <span class="o">::</span> <span class="n">IO</span> <span class="p">()</span>
<span class="nv">main</span> <span class="o">=</span> <span class="kr">do</span> <span class="p">{</span> <span class="nv">prog</span> <span class="o">&lt;-</span> <span class="nv">getProgName</span>
          <span class="p">;</span> <span class="nv">args</span> <span class="o">&lt;-</span> <span class="nv">getArgs</span>
          <span class="p">;</span> <span class="kr">case</span> <span class="nv">args</span> <span class="kr">of</span>
              <span class="p">[</span><span class="nv">h</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="kr">do</span> <span class="p">{</span> <span class="nv">mr</span> <span class="o">&lt;-</span> <span class="nv">timeout</span> <span class="nv">tolerance</span> <span class="o">$</span> <span class="nv">httpRequest</span> <span class="p">(</span><span class="nv">mkreq</span> <span class="nv">h</span><span class="p">)</span>
                        <span class="p">;</span> <span class="kr">case</span> <span class="nv">mr</span> <span class="kr">of</span>
                            <span class="n">Nothing</span> <span class="o">-&gt;</span> <span class="nv">hPutStrLn</span> <span class="nv">stderr</span> <span class="o">$</span> <span class="nv">prog</span> <span class="o">++</span> <span class="s">&quot;: timeout&quot;</span>
                            <span class="n">Just</span> <span class="p">(</span><span class="n">Right</span> <span class="nv">resp</span><span class="p">)</span>
                              <span class="o">-&gt;</span> <span class="nv">hPutStrLn</span> <span class="nv">stdout</span> <span class="o">$</span> <span class="nv">rspBody</span> <span class="nv">resp</span>
                        <span class="p">}</span>
              <span class="kr">_</span>   <span class="o">-&gt;</span> <span class="nv">usage</span> <span class="nv">prog</span>
          <span class="p">}</span>
  <span class="kr">where</span> 
    <span class="nv">mkreq</span> <span class="nv">h</span> <span class="o">=</span> <span class="n">Request</span> <span class="nv">uri</span> <span class="n">GET</span> <span class="p">[</span><span class="n">Header</span> <span class="n">HdrHost</span> <span class="nv">h&#39;</span><span class="p">]</span> <span class="s">&quot;&quot;</span>
      <span class="kr">where</span> 
         <span class="nv">uri</span> <span class="o">=</span> <span class="nv">fromJust</span> <span class="o">$</span> <span class="nv">parseURI</span> <span class="nv">h</span>
         <span class="nv">h&#39;</span>  <span class="o">=</span> <span class="nv">uriRegName</span> <span class="o">$</span> <span class="nv">fromJust</span> <span class="o">$</span> <span class="nv">uriAuthority</span> <span class="nv">uri</span>
         
<span class="nv">tolerance</span> <span class="o">::</span> <span class="n">Int</span>
<span class="nv">tolerance</span> <span class="o">=</span> <span class="mi">10</span><span class="o">^</span><span class="mi">6</span> <span class="c1">-- micro sec</span>
                            
<span class="nv">usage</span> <span class="o">::</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="p">()</span>
<span class="nv">usage</span> <span class="nv">prog</span> <span class="o">=</span> <span class="nv">hPutStrLn</span> <span class="nv">stderr</span> <span class="o">$</span> <span class="s">&quot;usage: &quot;</span><span class="o">++</span><span class="nv">prog</span><span class="o">++</span><span class="s">&quot; &lt;uri&gt;&quot;</span>

<span class="nv">httpRequest</span> <span class="o">::</span> <span class="n">Request</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="p">(</span><span class="n">Result</span> <span class="n">Response</span><span class="p">)</span>
<span class="nv">httpRequest</span> <span class="nv">req</span>
 <span class="o">=</span> <span class="kr">do</span> <span class="p">{</span> <span class="nv">proxy</span> <span class="o">&lt;-</span> <span class="nv">catch</span>
                   <span class="p">(</span><span class="nv">getEnv</span> <span class="s">&quot;HTTP_PROXY&quot;</span> <span class="o">&gt;&gt;=</span> <span class="nv">return</span> <span class="o">.</span> <span class="p">(</span><span class="nv">flip</span> <span class="n">Proxy</span> <span class="n">Nothing</span><span class="p">))</span>
                   <span class="p">(</span><span class="o">\</span><span class="kr">_</span> <span class="o">-&gt;</span> <span class="nv">return</span> <span class="n">NoProxy</span><span class="p">)</span>
      <span class="p">;</span> <span class="p">(</span><span class="kr">_</span><span class="p">,</span> <span class="nv">resp</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">browse</span> <span class="p">(</span><span class="nv">setProxy</span> <span class="nv">proxy</span> <span class="o">&gt;&gt;</span> <span class="nv">request</span> <span class="nv">req</span><span class="p">)</span>
      <span class="p">;</span> <span class="nv">return</span> <span class="p">(</span><span class="n">Right</span> <span class="nv">resp</span><span class="p">)</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4906/addtag/" class="addtag" id="addtag_4906">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4906/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4906/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4906"
  >-</span><span
  class="button yellow"
  id="rating_z_4906"
  >0</span><span 
  class="button green"
  id="rating_p_4906"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101211073215/http://ja.doukaku.org/comment/4906/">
    1
    reply
  </a>

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4906/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment4907"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4907/">#4907</a>(<script language="JavaScript">print_time(new Date("2007/12/21 00:39 GMT"));</script><noscript>2007/12/21 00:39 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>補足：プロキシは環境変数 HTTP_PROXY を見るようにしてあります。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4907/addtag/" class="addtag" id="addtag_4907">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4907"
  >-</span><span
  class="button yellow"
  id="rating_z_4907"
  >0</span><span 
  class="button green"
  id="rating_p_4907"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101211073215/http://ja.doukaku.org/comment/4906/"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101211073215/http://ja.doukaku.org/comment/4907/root/"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4907/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  
    




<div class="comment" id="comment7112"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/232/" target="_top">kkobayashi</a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/7112/">#7112</a>(<script language="JavaScript">print_time(new Date("2008/08/12 13:50 GMT"));</script><noscript>2008/08/12 13:50 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/r/">
	  R
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>タイムアウトはtimeoutというオプション、プロキシサーバーはhttp_proxyという環境変数でそれぞれ指定します。</p>
<p>http_proxyは、起動後初回のダウンロード処理を実行する前に、一度だけ設定可能です。その後は設定可・不可の切り替えはできますが、プロキシサーバーのホストを変更することはできません(These environment variables must be set before the download code is first used: they cannot be altered later by calling Sys.setenv)。</p>
<p>タイムアウトを1秒にすると、大抵のGETは失敗してしまうみたいですね。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre>http.get &lt;- function(url, proxy=&#39;&#39;, timeout.value=1){
  options(timeout=timeout.value)
  Sys.setenv(http_proxy=proxy)
  readLines(url)
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/7112/addtag/" class="addtag" id="addtag_7112">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/r/">
		R
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/7112/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/7112/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_7112"
  >-</span><span
  class="button yellow"
  id="rating_z_7112"
  >0</span><span 
  class="button green"
  id="rating_p_7112"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/7112/">
  返信
  </a>]
  </div>
</div>
</div>



  


  

  
    




<div class="comment" id="comment4894"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/540/" target="_top">SiroKuro</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4894/">#4894</a>(<script language="JavaScript">print_time(new Date("2007/12/20 01:52 GMT"));</script><noscript>2007/12/20 01:52 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  WebRequest.Timeout&nbsp;と&nbsp;WebRequest.Proxy&nbsp;から。意外と短く書けます。<br/>OS&nbsp;非依存。Mono&nbsp;とかでも動くのかな。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>
<span class="k">static</span> <span class="k">class</span> <span class="nc">Program</span> <span class="k">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span> <span class="k">{</span>
        <span class="n">WebRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="n">WebRequest</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&quot;http://ja.doukaku.org/feeds/comments/&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Timeout</span> <span class="p">=</span> <span class="m">1000</span><span class="p">;</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Proxy</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebProxy</span><span class="p">(</span><span class="s">&quot;http://proxy.example.net:8001/&quot;</span><span class="p">);</span>
        <span class="n">request</span><span class="p">.</span><span class="n">Proxy</span><span class="p">.</span><span class="n">Credentials</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NetworkCredential</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">);</span>
        <span class="k">using</span> <span class="p">(</span><span class="n">StreamReader</span> <span class="n">sr</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">GetResponse</span><span class="p">().</span><span class="n">GetResponseStream</span><span class="p">()))</span> <span class="k">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">sr</span><span class="p">.</span><span class="n">ReadToEnd</span><span class="p">());</span>
        <span class="k">}</span>
    <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4894/addtag/" class="addtag" id="addtag_4894">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4894/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/4894/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4894"
  >-</span><span
  class="button yellow"
  id="rating_z_4894"
  >0</span><span 
  class="button green"
  id="rating_p_4894"
  >+</span></span></span>
  
<p>

  

  <a href="/web/20101211073215/http://ja.doukaku.org/comment/4894/">
    1
    reply
  </a>

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4894/">
  返信
  </a>]
  </div>
</div>
</div>



  
    <div class="indent compact" style="position: relative;">
      <img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/1x1dark_green.png" width=10 style="position: absolute;top:-10px;margin-left:8px;">
      




<div class="comment" id="comment4904"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/540/" target="_top">SiroKuro</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4904/">#4904</a>(<script language="JavaScript">print_time(new Date("2007/12/20 18:54 GMT"));</script><noscript>2007/12/20 18:54 GMT</noscript>)
	
	
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  おっと。失敗の確認に関して何も報告してなかった。<br/>タイムアウト時には&nbsp;GetResponse&nbsp;が&nbsp;WebException&nbsp;を投げてきます。<br/>自分の環境だと、１秒ではまず間違いなく例外が投げられますね。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/4904/addtag/" class="addtag" id="addtag_4904">タグ</a>:
	なし&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4904"
  >-</span><span
  class="button yellow"
  id="rating_z_4904"
  >0</span><span 
  class="button green"
  id="rating_p_4904"
  >+</span></span></span>
  
<p>

  
    <a href="/web/20101211073215/http://ja.doukaku.org/comment/4894/"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20101211073215/http://ja.doukaku.org/comment/4904/root/"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/4904/">
  返信
  </a>]
  </div>
</div>
</div>



  


    </div>
  


  

  

  
    




<div class="comment" id="comment8185"><!--dj-->
  <p class="banner"><a href="/web/20101211073215/http://ja.doukaku.org/user/560/" target="_top">ihag</a><a href="/web/20101211073215/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/8185/">#8185</a>(<script language="JavaScript">print_time(new Date("2008/12/15 13:07 GMT"));</script><noscript>2008/12/15 13:07 GMT</noscript>)
	
	
	
	[<a href="/web/20101211073215/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;
<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>

  <div class="comment_content" >
	<div class="comment_body">
	  <p>libfetchがあれば動きます．</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;sys/param.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;fetch.h&gt;</span>
<span class="cp">#include &lt;unistd.h&gt;</span>

<span class="cp">#define handle_error_fetch(str) do { \</span>
<span class="cp">    fprintf(stderr, &quot;%s: %s\n&quot;, str, fetchLastErrString); \</span>
<span class="cp">    exit(EXIT_FAILURE); \</span>
<span class="cp">} while(0)</span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">URL</span> <span class="o">=</span> <span class="s">&quot;http://ja.doukaku.org/feeds/comments&quot;</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">PROXY_DEFAULT</span> <span class="o">=</span> <span class="s">&quot;http://localhost:8080&quot;</span><span class="p">;</span>
    <span class="n">FILE</span> <span class="o">*</span><span class="n">fd</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">len_r</span><span class="p">,</span> <span class="n">len_w</span><span class="p">;</span>
    <span class="n">u_char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">8192</span><span class="p">],</span> <span class="o">*</span><span class="n">buf_p</span><span class="p">;</span>

    <span class="n">fetchTimeout</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>   <span class="c">/* in seconds */</span>
    <span class="n">setenv</span><span class="p">(</span><span class="s">&quot;HTTP_PROXY&quot;</span><span class="p">,</span> <span class="n">PROXY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>


    <span class="k">if</span> <span class="p">((</span><span class="n">fd</span> <span class="o">=</span> <span class="n">fetchGetURL</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">))</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">handle_error_fetch</span><span class="p">(</span><span class="s">&quot;fetchGetURL&quot;</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">feof</span><span class="p">(</span><span class="n">fd</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">len_r</span> <span class="o">=</span> <span class="n">fread</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="n">fd</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">buf_p</span> <span class="o">=</span> <span class="n">buf</span><span class="p">;</span> <span class="p">(</span><span class="n">buf_p</span> <span class="o">-</span> <span class="n">buf</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">len_r</span><span class="p">;</span> <span class="n">buf_p</span> <span class="o">+=</span> <span class="n">len_w</span><span class="p">)</span>
            <span class="n">len_w</span> <span class="o">=</span> <span class="n">fwrite</span><span class="p">(</span><span class="n">buf_p</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">len_r</span> <span class="o">-</span> <span class="p">(</span><span class="n">buf_p</span> <span class="o">-</span> <span class="n">buf</span><span class="p">),</span> <span class="n">stdout</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">fclose</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>

    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_SUCCESS</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20101211073215/http://ja.doukaku.org/comment/8185/addtag/" class="addtag" id="addtag_8185">タグ</a>:
	なし&nbsp;

	
      [<a href="/web/20101211073215/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20101211073215/http://ja.doukaku.org/comment/8185/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20101211073215/http://ja.doukaku.org/comment/8185/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8185"
  >-</span><span
  class="button yellow"
  id="rating_z_8185"
  >0</span><span 
  class="button green"
  id="rating_p_8185"
  >+</span></span></span>
  
<p>

  

  

  [<a href="/web/20101211073215/http://ja.doukaku.org/113/reply_to/8185/">
  返信
  </a>]
  </div>
</div>
</div>



  


  







</div>

<div id="side_menu" class="compact">

<iframe src="/web/20101211073215if_/http://ja.doukaku.org/login_info/" frameborder=0 width=100% id="login_info">
iframe required
</iframe>

<h4 class="semi_compact">一覧</h4>

<ul>
<li><a href="/web/20101211073215/http://ja.doukaku.org/lang/">言語</a>
<li><a href="/web/20101211073215/http://ja.doukaku.org/challenge/">お題</a>
<li><a href="/web/20101211073215/http://ja.doukaku.org/topic/">トピック</a>
<li><a href="/web/20101211073215/http://ja.doukaku.org/comment/">投稿</a>
<li><a href="/web/20101211073215/http://ja.doukaku.org/good_comments/">評価の高い投稿</a>
<li><a href="/web/20101211073215/http://ja.doukaku.org/tag/">タグ</a>
</ul>

<h4 class="compact">フィード</h4>
<ul>
<li><a href="/web/20101211073215/http://ja.doukaku.org/feeds/topics/">最新のトピック</a><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20101211073215/http://ja.doukaku.org/feeds/comments/">新着投稿</a><img src="/web/20101211073215im_/http://ja.doukaku.org/static/image/feed_icon.png">
</ul>

<h4 class="compact">その他</h4>
<ul>
<li><a href="/web/20101211073215/http://ja.doukaku.org/qa/">Q&amp;A</a>
<li><a href="/web/20101211073215/http://ja.doukaku.org/feedback/">フィードバック</a>
<!--<li><a href="/terms">用語集</a>-->
</ul>


<h4 class="compact">リンク</h4>
<ul>
<li><a href="/web/20101211073215/http://labs.cybozu.co.jp/">サイボウズ・ラボ</a>
<li><a href="/web/20101211073215/http://www.djangoproject.com/">Django</a>
</ul>


</div>
</div>


<div id="page_foot" class="bordered">
<a rel="license" href="/web/20101211073215/http://creativecommons.org/licenses/by/2.1/jp/">
<img alt="Creative Commons License" style="border-width:0" src="/web/20101211073215im_/http://i.creativecommons.org/l/by/2.1/jp/88x31.png" /></a>
このサイトの内容は、
<a rel="license" href="/web/20101211073215/http://creativecommons.org/licenses/by/2.1/jp/">クリエイティブ・コモンズ・ライセンス</a>の下でライセンスされています。
<a href="/web/20101211073215/http://ja.doukaku.org/qa/#licence">[詳細]</a>
</div>

</body>



<script type="text/javascript">
$(document).ready(function(){$("#doukaku_org").after("<script src='/web/20101211073215/http://api.pathtraq.com/pages?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&api=json&callback=addPathtraq'><" + "/script>")});
</script>

<script src="/web/20101211073215js_/http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2136157-1";
urchinTracker();
</script>



</html>





<!--
     FILE ARCHIVED ON 7:32:15 Dec 11, 2010 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 15:00:28 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
