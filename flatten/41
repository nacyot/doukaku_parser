
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
JPEGをGETして色反転して保存
どう書く？org </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20080331051423cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20080331051423cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20080331051423cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
<meta name="robots" content="noindex,nofollow">

    <!--<script src="/web/20080331051423/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20080331051423/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20080331051423js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20080331051423js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20080331051423js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20080331051423js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app2.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/41\/flatten\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "31";
var displayMonth = "Mar";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/41/flatten/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20080331051423" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20071231115004/http://ja.doukaku.org/41/flatten/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="31 Dec 2007"><strong>DEC</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 5:14:23 Mar 31, 2008">MAR</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Apr
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20071231115004/http://ja.doukaku.org/41/flatten/" title="11:50:04 Dec 31, 2007" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 5:14:23 Mar 31, 2008">31</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2007
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 5:14:23 Mar 31, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2009
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20080331051423*/http://ja.doukaku.org/41/flatten/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>3 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">13 May 07 - 31 Mar 08</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000010000001_2008:2:001000000000_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20080331051423/http://ja.doukaku.org/">どう書く？org</a><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png' alt=お題(出題済み)>
<a href="/web/20080331051423/http://ja.doukaku.org/41/">JPEGをGETして色反転して保存</a>
</h2>

    





<div class="comment" id="comment3397">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/3397/">#3397</a>(<script language="JavaScript">print_time(new Date("2007/08/04 15:09 GMT"));</script><noscript>2007/08/04 15:09 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  ネットからのデータ取得（これはすでにありましたが…）および画像データの取り扱いに関係したライブラリの理解をとう問題として次のようなものはいかがでしょう。　
<p>
『ネットで公開されている JPEG ファイルを取得し、色反転して保存するスクリプトを記述せよ。』　
<p>
もちろん例によって Squeak Smalltalk からの挑戦状でもあります。
<p>
<p>
このお題はsumimさんからの投稿です。ご投稿ありがとうございます。
画像の処理という切り口も面白いですね。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/3397/addtag/" class="addtag" id="addtag_3397">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3397"
  >-</span><span
  class="button yellow"
  id="rating_z_3397"
  >0</span><span 
  class="button green"
  id="rating_p_3397"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/3397/">
  返信
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20080331051423/http://ja.doukaku.org/41/post_comment/">
投稿する
</a>
</div>


<h2>投稿されたコメント - フラット表示</h2>
<a href="/web/20080331051423/http://ja.doukaku.org/41/nested/">ネスト表示</a>
<a href="/web/20080331051423/http://ja.doukaku.org/41/">非表示</a> 


  
  




<div class="comment" id="comment1821">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1821/">#1821</a>(<script language="JavaScript">print_time(new Date("2007/08/04 15:41 GMT"));</script><noscript>2007/08/04 15:41 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  http://www.pythonware.com/products/pil/ から取得できる Python Imaging Library (PIL) を使います。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">PIL.Image</span>
<span class="k">import</span> <span class="nn">PIL.ImageOps</span>
<span class="k">import</span> <span class="nn">urllib</span>
<span class="k">import</span> <span class="nn">cStringIO</span>

<span class="k">def</span> <span class="nf">invert</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">PIL</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">cStringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()))</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">PIL</span><span class="o">.</span><span class="n">ImageOps</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">invert</span><span class="p">(</span><span class="s">&quot;http://www.python.org/images/success/nasa.jpg&quot;</span><span class="p">,</span> <span class="s">&quot;nasa.jpg&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1821/addtag/" class="addtag" id="addtag_1821">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/PIL/">PIL</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1821/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1821/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1821"
  >-</span><span
  class="button yellow"
  id="rating_z_1821"
  >0</span><span 
  class="button green"
  id="rating_p_1821"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1821/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1823">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/241/" target="_top">？せんたくいた</a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1823/">#1823</a>(<script language="JavaScript">print_time(new Date("2007/08/04 15:48 GMT"));</script><noscript>2007/08/04 15:48 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/bash/">
	  Bash
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #7fff7f;">8/8=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>wget と convert 駆使するとワンライナー。
せっかくなので「元ファイル名_r.jpg」で保存するようなスクリプトに。
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="nv">url</span><span class="o">=</span><span class="s2">&quot;$1&quot;</span>
<span class="nv">file</span><span class="o">=</span><span class="k">${</span><span class="nv">url</span><span class="p">##*/</span><span class="k">}</span>

wget -q -O - <span class="nv">$url</span> |convert -negate jpg:- <span class="k">${</span><span class="nv">file</span><span class="p">%.jpg</span><span class="k">}</span>_r.jpg
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1823/addtag/" class="addtag" id="addtag_1823">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/ImageMagick/">ImageMagick</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/wget/">wget</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/bash/">
		Bash
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1823/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1823/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #7fff7f;"
  >8/8=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1823"
  >-</span><span
  class="button yellow"
  id="rating_z_1823"
  >0</span><span 
  class="button green"
  id="rating_p_1823"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080331051423/http://ja.doukaku.org/comment/1823/">
    1
    reply
  </a>

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1823/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1840">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/25/" target="_top">hamano</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1840/">#1840</a>(<script language="JavaScript">print_time(new Date("2007/08/04 17:51 GMT"));</script><noscript>2007/08/04 17:51 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>libcurl と libgd を使用しています。
% gcc invert.c -o invert -lcurl -lgd
% ./invert URL</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#include &lt;libgen.h&gt;</span>
<span class="cp">#include &lt;curl/curl.h&gt;</span>
<span class="cp">#include &lt;gd.h&gt;</span>

<span class="cp">#define TMP_FILE &quot;tmp.jpg&quot;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]){</span>
    <span class="n">CURL</span> <span class="o">*</span><span class="n">curl</span><span class="p">;</span>
    <span class="n">CURLcode</span> <span class="n">res</span><span class="p">;</span>
    <span class="n">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="p">;</span>
    <span class="n">gdImagePtr</span> <span class="n">img</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">TMP_FILE</span><span class="p">,</span> <span class="s">&quot;w+&quot;</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">fp</span><span class="p">)</span> <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="n">curl</span> <span class="o">=</span> <span class="n">curl_easy_init</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">curl</span><span class="p">)</span> <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span> <span class="n">CURLOPT_URL</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span> <span class="n">CURLOPT_WRITEDATA</span><span class="p">,</span> <span class="n">fp</span><span class="p">);</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">curl_easy_perform</span><span class="p">(</span><span class="n">curl</span><span class="p">);</span>
    <span class="n">curl_easy_cleanup</span><span class="p">(</span><span class="n">curl</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">res</span> <span class="o">!=</span> <span class="n">CURLE_OK</span><span class="p">)</span> <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="n">fseek</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">);</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">gdImageCreateFromJpeg</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">img</span><span class="p">)</span> <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s">&quot;w&quot;</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">fp</span><span class="p">)</span> <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">img</span><span class="o">-&gt;</span><span class="n">colorsTotal</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">img</span><span class="o">-&gt;</span><span class="n">red</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">img</span><span class="o">-&gt;</span><span class="n">red</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">img</span><span class="o">-&gt;</span><span class="n">green</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">img</span><span class="o">-&gt;</span><span class="n">green</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">img</span><span class="o">-&gt;</span><span class="n">blue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">img</span><span class="o">-&gt;</span><span class="n">blue</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="n">gdImageJpeg</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
    <span class="n">gdImageDestroy</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1840/addtag/" class="addtag" id="addtag_1840">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1840/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1840/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1840"
  >-</span><span
  class="button yellow"
  id="rating_z_1840"
  >0</span><span 
  class="button green"
  id="rating_p_1840"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1840/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1844">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1844/">#1844</a>(<script language="JavaScript">print_time(new Date("2007/08/04 18:23 GMT"));</script><noscript>2007/08/04 18:23 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  JDKのサンプルのJava2D/Images/ImageOpsから引っ張ってきました。（op.filter(image, image); は src と dst で同じイメージを使ってるけど、いいのかな？動いてるからいいか・・・）
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.awt.image.BufferedImage</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.awt.image.ByteLookupTable</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.awt.image.LookupOp</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="k">import</span> <span class="nn">javax.imageio.ImageIO</span><span class="o">;</span>


<span class="k">class</span> <span class="nc">MeApp</span>
<span class="o">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="k">throws</span> <span class="n">Exception</span>
    <span class="o">{</span>
        <span class="n">invert</span><span class="o">(</span><span class="s">&quot;http://www.python.org/images/success/nasa.jpg&quot;</span><span class="o">,</span> <span class="s">&quot;nasa.jpg&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">invert</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">,</span> <span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="k">throws</span> <span class="n">Exception</span>
    <span class="o">{</span>
        <span class="k">final</span> <span class="n">BufferedImage</span> <span class="n">image</span> <span class="o">=</span> <span class="n">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">url</span><span class="o">));</span>

        <span class="k">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">256</span><span class="o">];</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="mi">255</span> <span class="o">-</span> <span class="n">i</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">final</span> <span class="n">LookupOp</span> <span class="n">op</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LookupOp</span><span class="o">(</span><span class="k">new</span> <span class="n">ByteLookupTable</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">data</span><span class="o">),</span> <span class="kc">null</span><span class="o">);</span>

        <span class="n">op</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="n">image</span><span class="o">);</span>

        <span class="n">ImageIO</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="s">&quot;jpeg&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">path</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1844/addtag/" class="addtag" id="addtag_1844">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1844/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1844/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1844"
  >-</span><span
  class="button yellow"
  id="rating_z_1844"
  >0</span><span 
  class="button green"
  id="rating_p_1844"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1844/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1845">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/232/" target="_top">kkobayashi</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1845/">#1845</a>(<script language="JavaScript">print_time(new Date("2007/08/04 18:25 GMT"));</script><noscript>2007/08/04 18:25 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/r/">
	  R
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>Rは標準で様々な画像フォーマットへの書き出しをサポートしているのですが（グラフとか描けます）
読み取りにはrimageライブラリーが必要になるようです。
doukaku.jpg =&gt; doukaku.inv.jpg という名前で保存します。
グラフィックデバイスの取り扱いに癖があるのであまりキレイではないですね・・・</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre>require(rimage)
jpeg.inverter &lt;- function(url.image){
    filename &lt;- basename(url.image)
    download.file(url.image, filename, method=&quot;auto&quot;, mode=&quot;wb&quot;, quiet=TRUE)
    img &lt;- read.jpeg(filename)
    jpeg(sub(&quot;(.+)\\.&quot;, &quot;\\1.inv.&quot;, filename), height=dim(img)[1], width=dim(img)[2])
    oldpar &lt;- par(no.readonly = TRUE)
    par(mai=c(0,0,0,0), omi=c(0,0,0,0))
    plot(1-img)
    par(oldpar)
    dev.off()
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1845/addtag/" class="addtag" id="addtag_1845">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/r/">
		R
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1845/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1845/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1845"
  >-</span><span
  class="button yellow"
  id="rating_z_1845"
  >0</span><span 
  class="button green"
  id="rating_p_1845"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1845/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1856">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1856/">#1856</a>(<script language="JavaScript">print_time(new Date("2007/08/05 03:37 GMT"));</script><noscript>2007/08/05 03:37 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>Gauche-gd ( http://fixedpoint.jp/gauche-gd/ ) を使ってみました。

実行例:
gosh&gt; (get-and-invert-jpeg "practical-scheme.net" "/images/practical-scheme-icon.jpg" "t.jpg")
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">graphics</span><span class="o">.</span><span class="nv">gd</span><span class="p">)</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">rfc</span><span class="o">.</span><span class="nv">http</span><span class="p">)</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-42</span><span class="p">)</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">get-and-invert-jpeg</span> <span class="nv">host</span> <span class="nv">path</span> <span class="nv">output</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">receive</span> <span class="p">(</span><span class="nf">status</span> <span class="nv">hdrs</span> <span class="nv">body</span><span class="p">)</span> <span class="p">(</span><span class="nf">http-get</span> <span class="nv">host</span> <span class="nv">path</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">unless</span> <span class="p">(</span><span class="nb">equal? </span><span class="nv">status</span> <span class="s">&quot;200&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nf">error</span> <span class="s">&quot;http-get failed:&quot;</span> <span class="nv">status</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">let1</span> <span class="nv">img</span> <span class="p">(</span><span class="nf">read-gd-image</span> <span class="p">(</span><span class="nf">open-input-string</span> <span class="nv">body</span><span class="p">)</span> <span class="ss">&#39;jpg</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">do-ec</span> <span class="p">(</span><span class="nf">:</span> <span class="nv">x</span> <span class="p">(</span><span class="nf">gd-image-sx</span> <span class="nv">img</span><span class="p">))</span> <span class="p">(</span><span class="nf">:</span> <span class="nv">y</span> <span class="p">(</span><span class="nf">gd-image-sy</span> <span class="nv">img</span><span class="p">))</span>
             <span class="p">(</span><span class="nf">let1</span> <span class="nv">pixel</span> <span class="p">(</span><span class="nf">gd-image-get-pixel</span> <span class="nv">img</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span>
               <span class="p">(</span><span class="nf">gd-image-set-pixel</span> <span class="nv">img</span> <span class="nv">x</span> <span class="nv">y</span>
                                   <span class="p">(</span><span class="nf">gd-true-color</span> <span class="p">(</span><span class="nb">- </span><span class="mi">255</span> <span class="p">(</span><span class="nf">gd-image-red</span> <span class="nv">img</span> <span class="nv">pixel</span><span class="p">))</span>
                                                  <span class="p">(</span><span class="nb">- </span><span class="mi">255</span> <span class="p">(</span><span class="nf">gd-image-green</span> <span class="nv">img</span> <span class="nv">pixel</span><span class="p">))</span>
                                                  <span class="p">(</span><span class="nb">- </span><span class="mi">255</span> <span class="p">(</span><span class="nf">gd-image-blue</span> <span class="nv">img</span> <span class="nv">pixel</span><span class="p">))))))</span>
      <span class="p">(</span><span class="nb">call-with-output-file </span><span class="nv">output</span> <span class="p">(</span><span class="nf">cut</span> <span class="nv">write-as</span> <span class="nv">img</span> <span class="ss">&#39;jpg</span> <span class="nv">&lt;&gt;</span><span class="p">)))))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1856/addtag/" class="addtag" id="addtag_1856">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/gauche/">gauche</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1856/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1856/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1856"
  >-</span><span
  class="button yellow"
  id="rating_z_1856"
  >0</span><span 
  class="button green"
  id="rating_p_1856"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1856/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1858">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/340/" target="_top">whitebell</a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1858/">#1858</a>(<script language="JavaScript">print_time(new Date("2007/08/05 04:08 GMT"));</script><noscript>2007/08/05 04:08 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ImageMagickでもいいのだけど、好みはImager。

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span>
<span class="c1"># perl invert.pl URI</span>
<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>

<span class="k">use</span> <span class="n">Imager</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">LWP::</span><span class="n">Simple</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$uri</span> <span class="o">=</span> <span class="nb">shift</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;input uri&quot;</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$content</span> <span class="o">=</span> <span class="n">get</span> <span class="nv">$uri</span><span class="p">;</span>
<span class="nb">defined</span> <span class="nv">$content</span> <span class="ow">or</span> <span class="nb">die</span> <span class="s">&quot;Could&#39;t get it: $uri&quot;</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$img</span> <span class="o">=</span> <span class="n">Imager</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">;</span>

<span class="nv">$img</span><span class="o">-&gt;</span><span class="nb">read</span><span class="p">(</span><span class="n">data</span> <span class="o">=&gt;</span> <span class="nv">$content</span><span class="p">,</span> <span class="n">type</span> <span class="o">=&gt;</span> <span class="s">&#39;jpeg&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="n">filter</span><span class="p">(</span><span class="n">type</span> <span class="o">=&gt;</span> <span class="s">&#39;hardinvert&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nb">write</span><span class="p">(</span><span class="n">file</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nb">split</span> <span class="sr">/\//</span><span class="p">,</span> <span class="nv">$uri</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">.</span> <span class="s">&#39;.i.jpg&#39;</span><span class="p">,</span> <span class="n">type</span> <span class="o">=&gt;</span> <span class="s">&#39;jpeg&#39;</span><span class="p">)</span>
    <span class="ow">or</span> <span class="nb">die</span> <span class="nv">$img</span><span class="o">-&gt;</span><span class="n">errstr</span><span class="p">;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1858/addtag/" class="addtag" id="addtag_1858">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1858/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1858/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1858"
  >-</span><span
  class="button yellow"
  id="rating_z_1858"
  >0</span><span 
  class="button green"
  id="rating_p_1858"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1858/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1860">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1860/">#1860</a>(<script language="JavaScript">print_time(new Date("2007/08/05 04:49 GMT"));</script><noscript>2007/08/05 04:49 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  Squeak Smalltalk で。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3</pre></td><td class="code"><div class="highlight"><pre>| url |
url := &#39;http://static.squeak.org/new_style/mouse.jpg&#39;.
(HTTPSocket httpJpeg: url) reverse writeJPEGfileNamed: &#39;nega.jpg&#39;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1860/addtag/" class="addtag" id="addtag_1860">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1860/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1860/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1860"
  >-</span><span
  class="button yellow"
  id="rating_z_1860"
  >0</span><span 
  class="button green"
  id="rating_p_1860"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1860/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1864">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1864/">#1864</a>(<script language="JavaScript">print_time(new Date("2007/08/05 07:33 GMT"));</script><noscript>2007/08/05 07:33 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  安直な方法ですが。（たぶん遅い）
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.awt.image.BufferedImage</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">javax.imageio.ImageIO</span><span class="o">;</span>

<span class="k">class</span> <span class="nc">MeApp</span>
<span class="o">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="k">throws</span> <span class="n">Exception</span>
    <span class="o">{</span>
        <span class="n">invert</span><span class="o">(</span><span class="s">&quot;http://www.python.org/images/success/nasa.jpg&quot;</span><span class="o">,</span> <span class="s">&quot;nasa.jpg&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">invert</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">,</span> <span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="k">throws</span> <span class="n">Exception</span>
    <span class="o">{</span>
        <span class="k">final</span> <span class="n">BufferedImage</span> <span class="n">image</span> <span class="o">=</span> <span class="n">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">url</span><span class="o">));</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">image</span><span class="o">.</span><span class="na">getHeight</span><span class="o">();</span> <span class="o">++</span><span class="n">y</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">image</span><span class="o">.</span><span class="na">getWidth</span><span class="o">();</span> <span class="o">++</span><span class="n">x</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">image</span><span class="o">.</span><span class="na">setRGB</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mh">0xffffff</span> <span class="o">-</span> <span class="n">image</span><span class="o">.</span><span class="na">getRGB</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">ImageIO</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="s">&quot;jpeg&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">path</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1864/addtag/" class="addtag" id="addtag_1864">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/%E3%80%80%EF%BD%84%EF%BD%84%EF%BD%84%E3%80%80%EF%BD%84%EF%BD%84/">　ｄｄｄ　ｄｄ</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1864/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1864/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1864"
  >-</span><span
  class="button yellow"
  id="rating_z_1864"
  >0</span><span 
  class="button green"
  id="rating_p_1864"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1864/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1875">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/235/" target="_top">onjo</a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1875/">#1875</a>(<script language="JavaScript">print_time(new Date("2007/08/05 14:01 GMT"));</script><noscript>2007/08/05 14:01 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  http クライアントとして DRAKMA を、画像処理は CL-GD で。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td class="code"><div class="highlight"><pre>(defpackage :doukaku-41 (:use :cl :cl-gd))
(in-package :doukaku-41)

(defun download-and-invert (url)
  (let ((vec (drakma:http-request url :force-binary t)))
    ;; オリジナルの保存
    (with-open-file (s &quot;original.jpg&quot; :direction :output
                                      :if-exists :supersede
                                      :element-type &#39;(unsigned-byte 8))
      (write-sequence vec s))
    (with-image-from-file* (&quot;original.jpg&quot;)
      ;; 色調を反転
      (do-pixels ()
        (setf (raw-pixel) (lognot (raw-pixel))))
      ;; 結果を保存
      (write-image-to-file &quot;output.jpg&quot; :if-exists :supersede))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1875/addtag/" class="addtag" id="addtag_1875">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1875/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1875/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1875"
  >-</span><span
  class="button yellow"
  id="rating_z_1875"
  >0</span><span 
  class="button green"
  id="rating_p_1875"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1875/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1892">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/172/" target="_top">cats</a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1892/">#1892</a>(<script language="JavaScript">print_time(new Date("2007/08/06 01:02 GMT"));</script><noscript>2007/08/06 01:02 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Drawing</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Program</span>
<span class="k">{</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
  <span class="k">{</span>
    <span class="n">WebClient</span> <span class="n">wc</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebClient</span><span class="p">();</span>
    <span class="kt">string</span> <span class="n">url</span> <span class="p">=</span> <span class="s">&quot;http://www.google.co.jp/intl/ja_jp/images/logo.gif&quot;</span><span class="p">;</span>
    <span class="k">using</span> <span class="p">(</span><span class="n">Stream</span> <span class="n">st</span> <span class="p">=</span> <span class="n">wc</span><span class="p">.</span><span class="n">OpenRead</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
    <span class="k">{</span>
      <span class="n">Bitmap</span> <span class="n">bmp0</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Bitmap</span><span class="p">(</span><span class="n">st</span><span class="p">);</span>
      <span class="n">Bitmap</span> <span class="n">bmp</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Bitmap</span><span class="p">(</span><span class="n">bmp0</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">bmp</span><span class="p">.</span><span class="n">Width</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="n">bmp</span><span class="p">.</span><span class="n">Height</span><span class="p">;</span> <span class="p">++</span><span class="n">j</span><span class="p">)</span>
          <span class="n">bmp</span><span class="p">.</span><span class="n">SetPixel</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">FromArgb</span>
            <span class="p">(</span><span class="m">0</span><span class="n">x00ffffff</span> <span class="p">^</span> <span class="n">bmp</span><span class="p">.</span><span class="n">GetPixel</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">).</span><span class="n">ToArgb</span><span class="p">()));</span>
      <span class="kt">string</span> <span class="n">fnam</span> <span class="p">=</span> <span class="s">&quot;test.gif&quot;</span><span class="p">;</span>
      <span class="n">bmp</span><span class="p">.</span><span class="n">Save</span><span class="p">(</span><span class="n">fnam</span><span class="p">);</span>
      <span class="n">System</span><span class="p">.</span><span class="n">Diagnostics</span><span class="p">.</span><span class="n">Process</span><span class="p">.</span><span class="n">Start</span><span class="p">(</span><span class="n">fnam</span><span class="p">);</span>
    <span class="k">}</span>
  <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1892/addtag/" class="addtag" id="addtag_1892">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1892/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1892/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1892"
  >-</span><span
  class="button yellow"
  id="rating_z_1892"
  >0</span><span 
  class="button green"
  id="rating_p_1892"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1892/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1899">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/323/" target="_top">tomatsu</a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1899/">#1899</a>(<script language="JavaScript">print_time(new Date("2007/08/06 02:50 GMT"));</script><noscript>2007/08/06 02:50 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/pnuts/">
	  Pnuts
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre>import java.awt.image.*
b=list(project(range(255,0), byte))
invert_op = LookupOp(ByteLookupTable(0,[b,b,b]), null)

function invert(imagefile, dest){
  im = readImage(imagefile)
  im2 = makeImage(im.width, im.height, null, im.type)
  invert_op.filter(im, im2)
  writeImage(im2, dest)
}

invert(&quot;white-pants.jpg&quot;, &quot;black-pants.jpg&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1899/addtag/" class="addtag" id="addtag_1899">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/Pnuts/">Pnuts</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/pnuts/">
		Pnuts
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1899/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1899/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1899"
  >-</span><span
  class="button yellow"
  id="rating_z_1899"
  >0</span><span 
  class="button green"
  id="rating_p_1899"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080331051423/http://ja.doukaku.org/comment/1899/">
    1
    reply
  </a>

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1899/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1914">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/153/" target="_top">Mistfeal</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1914/">#1914</a>(<script language="JavaScript">print_time(new Date("2007/08/06 06:04 GMT"));</script><noscript>2007/08/06 06:04 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/php/">
	  PHP
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  PHP5+GD とかなり環境が限定されますが一応。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">GET_jpg</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span><span class="nv">$filename</span><span class="p">)</span> <span class="p">{</span>
	<span class="nv">$im</span> <span class="o">=</span> <span class="nf">imagecreatefromjpeg</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
	<span class="nf">imagefilter</span><span class="p">(</span><span class="nv">$im</span><span class="p">,</span> <span class="nx">IMG_FILTER_NEGATE</span><span class="p">);</span>
	<span class="nf">imagejpeg</span><span class="p">(</span><span class="nv">$im</span><span class="p">,</span> <span class="nv">$filename</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">GET_jpg</span><span class="p">(</span><span class="s2">&quot;http://example.com/sample.jpg&quot;</span><span class="p">,</span><span class="s2">&quot;sample.jpg&quot;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1914/addtag/" class="addtag" id="addtag_1914">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/GD/">GD</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/PHP5/">PHP5</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/php/">
		PHP
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1914/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1914/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1914"
  >-</span><span
  class="button yellow"
  id="rating_z_1914"
  >0</span><span 
  class="button green"
  id="rating_p_1914"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1914/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1929">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1929/">#1929</a>(<script language="JavaScript">print_time(new Date("2007/08/06 11:11 GMT"));</script><noscript>2007/08/06 11:11 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><div class="highlight"><pre>import java.awt.Component
import java.awt.image._
import java.io.File;
import java.net.URL;
import javax.imageio.ImageIO;

def invert(url:String, out:String) = {
  val im = new Component{} createImage(new FilteredImageSource(
                ImageIO.read(new URL(url)).getSource,
                  new RGBImageFilter {
                    override def filterRGB(x:int,y:int,rgb:int):int = {
                      (rgb &amp; 0xff000000 )+((rgb &amp; 0xffffff) ^ 0xffffff)
                    }
              }))
  val bim = new BufferedImage(im.getWidth(null), im.getHeight(null),
  BufferedImage.TYPE_INT_RGB)
  val g = bim.createGraphics
  g.drawImage(im, 0, 0, null)
  g.dispose
  ImageIO.write(bim, url.split(&quot;\\.&quot;).last, new File(out))
}

invert(&quot;http://news.google.com/images/jp.gif&quot;, &quot;test2.gif&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1929/addtag/" class="addtag" id="addtag_1929">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1929/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/1929/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1929"
  >-</span><span
  class="button yellow"
  id="rating_z_1929"
  >0</span><span 
  class="button green"
  id="rating_p_1929"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1929/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1979">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/148/" target="_top">takano32</a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1979/">#1979</a>(<script language="JavaScript">print_time(new Date("2007/08/07 09:55 GMT"));</script><noscript>2007/08/07 09:55 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  あら？
仕様ですとネットの画像を操作することになっているようですよ。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/1979/addtag/" class="addtag" id="addtag_1979">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1979"
  >-</span><span
  class="button yellow"
  id="rating_z_1979"
  >0</span><span 
  class="button green"
  id="rating_p_1979"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/1899/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/1979/root/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/1979/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2036">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2036/">#2036</a>(<script language="JavaScript">print_time(new Date("2007/08/08 18:13 GMT"));</script><noscript>2007/08/08 18:13 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>41.rb http://example.org/foo.jpg /tmp/output.jpg
41.rb /tmp/src.jpg /tmp/output.jpg
などと使う。Rubyのopen-urlライブラリはopenを拡張するのでローカルファイルでもok。
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;RMagick&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;tempfile&#39;</span>

<span class="n">url</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="no">ARGV</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="no">Tempfile</span><span class="o">.</span><span class="n">new</span> <span class="s2">&quot;doukaku&quot;</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">write</span> <span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">close</span>
<span class="n">img</span> <span class="o">=</span> <span class="no">Magick</span><span class="o">::</span><span class="no">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">negate</span>
<span class="n">img</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2036/addtag/" class="addtag" id="addtag_2036">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/RMagick/">RMagick</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2036/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2036/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2036"
  >-</span><span
  class="button yellow"
  id="rating_z_2036"
  >0</span><span 
  class="button green"
  id="rating_p_2036"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/2036/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2308">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2308/">#2308</a>(<script language="JavaScript">print_time(new Date("2007/08/18 13:54 GMT"));</script><noscript>2007/08/18 13:54 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffcfcf;">-3/3=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>これを見てしまうと、こんな解しか思い浮ばなくなってしまう。つくづく、怠け者です &gt; 儂</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre><span class="kr">module</span> <span class="n">Main</span> <span class="p">(</span><span class="nv">main</span><span class="p">)</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">Cmd</span>
<span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">Environment</span>
<span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">FilePath</span>

<span class="nv">main</span> <span class="o">::</span> <span class="n">IO</span> <span class="p">()</span>
<span class="nv">main</span> <span class="o">=</span> <span class="kr">do</span> <span class="p">{</span> <span class="nv">url</span><span class="o">:</span><span class="kr">_</span> <span class="o">&lt;-</span> <span class="nv">getArgs</span>
          <span class="p">;</span> <span class="kr">let</span> <span class="nv">f</span> <span class="o">=</span> <span class="nv">dropExtensions</span> <span class="p">(</span><span class="nv">takeFileName</span> <span class="nv">url</span><span class="p">)</span>
          <span class="p">;</span> <span class="nv">system</span> <span class="o">$</span> <span class="s">&quot;wget -q -O - &quot;</span><span class="o">++</span><span class="nv">url</span><span class="o">++</span><span class="s">&quot; | gm convert -negate jpg:- &quot;</span><span class="o">++</span><span class="nv">f</span><span class="o">++</span><span class="s">&quot;_r.jpg&quot;</span>
          <span class="p">;</span> <span class="nv">return</span> <span class="p">()</span>
          <span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2308/addtag/" class="addtag" id="addtag_2308">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/System.Cmd/">System.Cmd</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/gm/">gm</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/wget/">wget</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2308/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2308/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffcfcf;"
  >-3/3=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2308"
  >-</span><span
  class="button yellow"
  id="rating_z_2308"
  >0</span><span 
  class="button green"
  id="rating_p_2308"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/1823/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/2308/root/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/2308/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2548">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2548/">#2548</a>(<script language="JavaScript">print_time(new Date("2007/08/26 14:59 GMT"));</script><noscript>2007/08/26 14:59 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  C++BuilderのVCLを使います。（C++Builder5で確認）<br/><br/>C++Builder上で「VCLを使用するコンソールアプリ」を新規作成し、ソースに以下のコードを指定してください。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;vcl.h&gt;</span>
<span class="cp">#pragma hdrstop</span>
<span class="cp">#include &lt;jpeg.hpp&gt;</span>

<span class="cp">#include &lt;wininet.h&gt;</span>
<span class="cp">#pragma comment(lib, &quot;wininet.lib&quot;)</span>

<span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;memory&gt;</span>

<span class="k">class</span> <span class="nc">TInternet</span> <span class="o">:</span> <span class="k">public</span> <span class="n">TObject</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kr">__fastcall</span> <span class="n">TInternet</span><span class="p">();</span>

    <span class="k">virtual</span> <span class="kr">__fastcall</span> <span class="o">~</span><span class="n">TInternet</span><span class="p">();</span>

    <span class="kt">void</span> <span class="kr">__fastcall</span> <span class="n">Load</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">url</span><span class="p">,</span> <span class="n">TStream</span><span class="o">*</span> <span class="n">stream</span><span class="p">);</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">HINTERNET</span> <span class="n">_hInternet</span><span class="p">;</span>
<span class="p">};</span>

<span class="kr">__fastcall</span> <span class="n">TInternet</span><span class="o">::</span><span class="n">TInternet</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">_hInternet</span> <span class="o">=</span> <span class="o">::</span><span class="n">InternetOpen</span><span class="p">(</span>
        <span class="s">&quot;&quot;</span><span class="p">,</span>
        <span class="n">INTERNET_OPEN_TYPE_PRECONFIG</span><span class="p">,</span>
        <span class="nb">NULL</span><span class="p">,</span>
        <span class="nb">NULL</span><span class="p">,</span>
        <span class="mi">0</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="n">_hInternet</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">RaiseLastWin32Error</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">__fastcall</span> <span class="n">TInternet</span><span class="o">::~</span><span class="n">TInternet</span><span class="p">()</span>
<span class="p">{</span>
    <span class="o">::</span><span class="n">InternetCloseHandle</span><span class="p">(</span><span class="n">_hInternet</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="kr">__fastcall</span> <span class="n">TInternet</span><span class="o">::</span><span class="n">Load</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">url</span><span class="p">,</span> <span class="n">TStream</span><span class="o">*</span> <span class="n">stream</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">HANDLE</span> <span class="n">hFile</span> <span class="o">=</span> <span class="o">::</span><span class="n">InternetOpenUrl</span><span class="p">(</span>
        <span class="n">_hInternet</span><span class="p">,</span>
        <span class="n">url</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span>
        <span class="nb">NULL</span><span class="p">,</span>
        <span class="mi">0</span><span class="p">,</span>
        <span class="n">INTERNET_FLAG_RELOAD</span> <span class="o">|</span> <span class="n">INTERNET_FLAG_DONT_CACHE</span> <span class="o">|</span> <span class="n">INTERNET_FLAG_EXISTING_CONNECT</span><span class="p">,</span>
        <span class="mi">0</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">hFile</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">RaiseLastWin32Error</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">2048</span><span class="p">];</span>

            <span class="n">DWORD</span> <span class="n">read</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="o">::</span><span class="n">InternetReadFile</span><span class="p">(</span><span class="n">hFile</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">read</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">RaiseLastWin32Error</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">read</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">stream</span><span class="o">-&gt;</span><span class="n">Write</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">read</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kr">__finally</span>
    <span class="p">{</span>
        <span class="o">::</span><span class="n">InternetCloseHandle</span><span class="p">(</span><span class="n">hFile</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">TJPEGImage</span><span class="o">&gt;</span> <span class="n">Load</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">url</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">TInternet</span><span class="o">&gt;</span> <span class="n">internet</span><span class="p">(</span><span class="k">new</span> <span class="n">TInternet</span><span class="p">());</span>

    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">TStream</span><span class="o">&gt;</span> <span class="n">stream</span><span class="p">(</span><span class="k">new</span> <span class="n">TMemoryStream</span><span class="p">());</span>

    <span class="n">internet</span><span class="o">-&gt;</span><span class="n">Load</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

    <span class="n">stream</span><span class="o">-&gt;</span><span class="n">Position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">TJPEGImage</span><span class="o">&gt;</span> <span class="n">image</span><span class="p">(</span><span class="k">new</span> <span class="n">TJPEGImage</span><span class="p">());</span>

    <span class="n">image</span><span class="o">-&gt;</span><span class="n">LoadFromStream</span><span class="p">(</span><span class="n">stream</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

    <span class="k">return</span> <span class="n">image</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Invert</span><span class="p">(</span><span class="n">Graphics</span><span class="o">::</span><span class="n">TBitmap</span><span class="o">*</span> <span class="n">bitmap</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">bitmap</span><span class="o">-&gt;</span><span class="n">Height</span><span class="p">;</span> <span class="o">++</span><span class="n">y</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">bitmap</span><span class="o">-&gt;</span><span class="n">Width</span><span class="p">;</span> <span class="o">++</span><span class="n">x</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">DWORD</span> <span class="n">color</span> <span class="o">=</span> <span class="n">bitmap</span><span class="o">-&gt;</span><span class="n">Canvas</span><span class="o">-&gt;</span><span class="n">Pixels</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">];</span>

            <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="n">color</span> <span class="o">&amp;</span> <span class="mh">0xff000000</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mh">0x00ffffff</span> <span class="o">-</span> <span class="p">(</span><span class="n">color</span> <span class="o">&amp;</span> <span class="mh">0x00ffffff</span><span class="p">));</span>

            <span class="n">bitmap</span><span class="o">-&gt;</span><span class="n">Canvas</span><span class="o">-&gt;</span><span class="n">Pixels</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Invert</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">url</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">path</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">TJPEGImage</span><span class="o">&gt;</span> <span class="n">jpeg</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">url</span><span class="p">);</span>

    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">Graphics</span><span class="o">::</span><span class="n">TBitmap</span><span class="o">&gt;</span> <span class="n">bitmap</span><span class="p">(</span><span class="k">new</span> <span class="n">Graphics</span><span class="o">::</span><span class="n">TBitmap</span><span class="p">());</span>

    <span class="n">bitmap</span><span class="o">-&gt;</span><span class="n">Assign</span><span class="p">(</span><span class="n">jpeg</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

    <span class="n">Invert</span><span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

    <span class="n">jpeg</span><span class="o">-&gt;</span><span class="n">Assign</span><span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>

    <span class="n">jpeg</span><span class="o">-&gt;</span><span class="n">SaveToStream</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">TStream</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">TFileStream</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">fmCreate</span><span class="p">)).</span><span class="n">get</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">Invert</span><span class="p">(</span><span class="s">&quot;http://www.python.org/images/success/nasa.jpg&quot;</span><span class="p">,</span> <span class="s">&quot;nasa.jpg&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">.</span><span class="n">c_str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2548/addtag/" class="addtag" id="addtag_2548">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/VCL/">VCL</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/Windows/">Windows</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2548/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2548/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2548"
  >-</span><span
  class="button yellow"
  id="rating_z_2548"
  >0</span><span 
  class="button green"
  id="rating_p_2548"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080331051423/http://ja.doukaku.org/comment/2548/">
    1
    reply
  </a>

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/2548/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2553">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2553/">#2553</a>(<script language="JavaScript">print_time(new Date("2007/08/27 10:21 GMT"));</script><noscript>2007/08/27 10:21 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  -1 orz。商用コンパイラが必要だからとかかなあ。そんなにひどいコードじゃないと思うけど・・・
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2553/addtag/" class="addtag" id="addtag_2553">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2553"
  >-</span><span
  class="button yellow"
  id="rating_z_2553"
  >0</span><span 
  class="button green"
  id="rating_p_2553"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/2548/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/2553/root/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/2553/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2558">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/343/" target="_top">shimakuma</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2558/">#2558</a>(<script language="JavaScript">print_time(new Date("2007/08/27 21:38 GMT"));</script><noscript>2007/08/27 21:38 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  &nbsp;Win専用。IE&nbsp;からクリップボード経由で&nbsp;ImageMagick&nbsp;へ。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nx">url</span><span class="o">,</span> <span class="nx">out</span><span class="p">){</span> <span class="k">var</span> <span class="nx">img</span><span class="o">,</span> <span class="nx">rng</span><span class="o">;</span>
  <span class="k">with</span><span class="p">(</span><span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s1">&#39;InternetExplorer.Application&#39;</span><span class="p">))</span> <span class="k">try</span> <span class="p">{</span> <span class="c">//visible = true;</span>
    <span class="nx">navigate</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>     <span class="k">while</span><span class="p">(</span><span class="nx">busy</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!=</span> <span class="s2">&quot;complete&quot;</span><span class="p">)</span> <span class="nx">WSH</span><span class="p">.</span><span class="nx">sleep</span><span class="p">(</span><span class="mi">41</span><span class="p">);</span>
    <span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstChild</span><span class="o">;</span> <span class="k">while</span><span class="p">(</span><span class="nx">img</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!=</span> <span class="s2">&quot;complete&quot;</span><span class="p">)</span> <span class="nx">WSH</span><span class="p">.</span><span class="nx">sleep</span><span class="p">(</span><span class="mi">41</span><span class="p">);</span>
    <span class="p">(</span><span class="nx">rng</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">createControlRange</span><span class="p">()).</span><span class="nx">add</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>
    <span class="nx">rng</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s2">&quot;copy&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="nx">finally</span> <span class="p">{</span> <span class="nx">quit</span><span class="p">()</span> <span class="p">}</span>
  <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s1">&#39;ImageMagickObject.MagickImage&#39;</span><span class="p">).</span><span class="nx">convert</span><span class="p">(</span><span class="s1">&#39;clipboard:&#39;</span><span class="o">,</span> <span class="s1">&#39;-negate&#39;</span><span class="o">,</span> <span class="nx">out</span><span class="p">);</span>
<span class="p">})(</span><span class="s1">&#39;http://magiccards.info/scans/en/wl/82.jpg&#39;</span><span class="o">,</span> <span class="s1">&#39;shimakuma_inv.jpg&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2558/addtag/" class="addtag" id="addtag_2558">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/IE/">IE</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/ImageMagick/">ImageMagick</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/WSH/">WSH</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2558/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2558/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2558"
  >-</span><span
  class="button yellow"
  id="rating_z_2558"
  >0</span><span 
  class="button green"
  id="rating_p_2558"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/2558/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2685">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/409/" target="_top">130R</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2685/">#2685</a>(<script language="JavaScript">print_time(new Date("2007/08/30 09:24 GMT"));</script><noscript>2007/08/30 09:24 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/powershell/">
	  PowerShell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>遅い遅い。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre>[void][reflection.assembly]::loadwithpartialname(&quot;system.drawing&quot;)
$img = new-object system.drawing.bitmap(&quot;c:\img.jpg&quot;)
 
for ($x = 0; $x -lt $img.width; $x++) {
	for ($y = 0; $y -lt $img.height; $y++) {
		$c = 0xffffffff - $img.getpixel($x, $y).toargb()
		$img.setpixel($x, $y, [system.drawing.color]::fromargb($c))
	}
}
$img.save(&quot;c:\rev.jpg&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2685/addtag/" class="addtag" id="addtag_2685">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/powershell/">
		PowerShell
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2685/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2685/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2685"
  >-</span><span
  class="button yellow"
  id="rating_z_2685"
  >0</span><span 
  class="button green"
  id="rating_p_2685"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080331051423/http://ja.doukaku.org/comment/2685/">
    1
    reply
  </a>

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/2685/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2691">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/409/" target="_top">130R</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2691/">#2691</a>(<script language="JavaScript">print_time(new Date("2007/08/30 11:10 GMT"));</script><noscript>2007/08/30 11:10 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/powershell/">
	  PowerShell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>前のは条件満たしてませんでした。すいません。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre>$url = &quot;http://***.jpg&quot;
$img = new-object system.drawing.bitmap($(new-object net.webclient).openread($url)))
for ($x = 0; $x -lt $img.width; $x++) {
	for ($y = 0; $y -lt $img.height; $y++) {
		$c = 0xffffffff - $img.getpixel($x, $y).toargb()
		$img.setpixel($x, $y, [system.drawing.color]::fromargb($c))
	}
}
$img.save(&quot;c:\rev.jpg&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/2691/addtag/" class="addtag" id="addtag_2691">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/powershell/">
		PowerShell
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2691/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/2691/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2691"
  >-</span><span
  class="button yellow"
  id="rating_z_2691"
  >0</span><span 
  class="button green"
  id="rating_p_2691"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/2685/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/2691/root/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/2691/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment3295">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/415/" target="_top">yohei</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/3295/">#3295</a>(<script language="JavaScript">print_time(new Date("2007/10/08 12:27 GMT"));</script><noscript>2007/10/08 12:27 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/prolog/">
	  Prolog
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>SWI-Prologで，http_client，XPCEを使用．</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre>:- use_module(library(&#39;http/http_client&#39;)).
:- use_module(library(pce)).

get_inv(URL, SavePath) :-
	http_get(URL, Buff, [codes]),
	new(Image, image),
	send(Image, load(text_buffer(Buff))),
	send(Image, invert),
	send(Image, save(SavePath, jpeg)).

:- get_inv(&#39;http://example.com/sample.jpg&#39;, &#39;sample.jpg&#39;).
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/3295/addtag/" class="addtag" id="addtag_3295">タグ</a>:
	
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/SWI-Prolog/">SWI-Prolog</a>
    
    <a href="/web/20080331051423/http://ja.doukaku.org/tag/XPCE/">XPCE</a>
    
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/prolog/">
		Prolog
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/3295/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/3295/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3295"
  >-</span><span
  class="button yellow"
  id="rating_z_3295"
  >0</span><span 
  class="button green"
  id="rating_p_3295"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/3295/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  <br/>

  
  




<div class="comment" id="comment3770">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/3770/">#3770</a>(<script language="JavaScript">print_time(new Date("2007/11/09 06:14 GMT"));</script><noscript>2007/11/09 06:14 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/nadesico/">
	  なでしこ
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  なでしこだと標準でライブラリがあります。<br/>確認していないが出来るはず...
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre>image_uri=&quot;image uri&quot;と尋ねる
image_file=&quot;{テンポラリーフォルダ}temp.{image_uriから拡張子抽出}&quot;
image_uriからimage_fileへHTTPダウンロード
img_objとはイメージ
img_objの画像はimage_file
img_objを画像ネガポジ
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/3770/addtag/" class="addtag" id="addtag_3770">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/nadesico/">
		なでしこ
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/3770/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/3770/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3770"
  >-</span><span
  class="button yellow"
  id="rating_z_3770"
  >0</span><span 
  class="button green"
  id="rating_p_3770"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/3770/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5361">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/507/" target="_top">fujidig</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/5361/">#5361</a>(<script language="JavaScript">print_time(new Date("2008/01/16 10:14 GMT"));</script><noscript>2008/01/16 10:14 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/hsp/">
	  HSP
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ローカルのJPEGファイルを読み込んで色反転して表示するだけなら、なんのプラグインやモジュールも使わずに出来るのになーとか思いましたが。<br/>mod_imgとbmpsaveを使ってみました＞＜<br/>画像サイズが幅が640px、高さが480pxより大きいときっと切れてしまうと思います。<br/>保存はBMPでしかできません＞＜<br/>これじゃあまりにアレなので、後ほどIImgCtxとhspcvを使ったきちんとしたのも投稿したいです。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre>#include &quot;mod_img.as&quot;
buffer 2
imgload &quot;http://www.example.com/example.jpg&quot;
w=size@mod_imgctx:h=size@mod_imgctx.1
buffer 1,w,h
gmode 6,w,h,256
gcopy 2
dialog &quot;bmp&quot;,17
if stat:bmpsave refstr
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/5361/addtag/" class="addtag" id="addtag_5361">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/hsp/">
		HSP
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/5361/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/5361/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5361"
  >-</span><span
  class="button yellow"
  id="rating_z_5361"
  >0</span><span 
  class="button green"
  id="rating_p_5361"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080331051423/http://ja.doukaku.org/comment/5361/">
    1
    reply
  </a>

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/5361/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5362">
  <p class="banner"><a href="/web/20080331051423/http://ja.doukaku.org/user/507/" target="_top">fujidig</a><a href="/web/20080331051423/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/5362/">#5362</a>(<script language="JavaScript">print_time(new Date("2008/01/16 10:47 GMT"));</script><noscript>2008/01/16 10:47 GMT</noscript>)
	
	
	
	[<a href="/web/20080331051423/http://ja.doukaku.org/lang/hsp/">
	  HSP
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  &gt;&nbsp;これじゃあまりにアレなので、後ほどIImgCtxとhspcvを使ったきちんとしたのも投稿したいです。<br/>というわけで投稿。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><div class="highlight"><pre>#include &quot;hspcv.as&quot;
#define IID_IImgCtx   &quot;{3050f3d7-98b5-11cf-bb82-00aa00bdce0b}&quot;
#define CLSID_IImgCtx &quot;{3050f3d6-98b5-11cf-bb82-00aa00bdce0b}&quot;

#usecom  ImgCtx IID_IImgCtx CLSID_IImgCtx
#comfunc IImgCtx_Load 3 wstr,int
#comfunc IImgCtx_GetStateInfo 8 var,var,int
#comfunc IImgCtx_StretchBlt 12 int,int,int,int,int,int,int,int,int,int

    load_url = &quot;http://www.example.com/examle.jpg&quot;
    save_file_name = &quot;save.jpg&quot;

    newcom pImage, ImgCtx
    IImgCtx_Load pImage, load_url, 0
    dim size, 4
    repeat
        IImgCtx_GetStateInfo pImage, flg, size, 1
        if ( flg &amp; 0x00200000 )==0 : break
        wait 4
    loop
    IImgCtx_GetStateInfo pImage, flg, size, 0
    buffer 1, size(0), size(1)
    IImgCtx_StretchBlt pImage, hdc, 0, 0, size(0), size(1), 0, 0, size(0), size(1), 0xCC0020
    delcom pImage

    cvbuffer 0, size(0), size(1)
    cvputimg 0
    cvxors
    cvsave save_file_name, 0
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080331051423/http://ja.doukaku.org/comment/5362/addtag/" class="addtag" id="addtag_5362">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080331051423/http://ja.doukaku.org/lang/hsp/">
		HSP
      </a>]
	  
      [<a href="/web/20080331051423/http://ja.doukaku.org/comment/5362/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080331051423/http://ja.doukaku.org/comment/5362/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5362"
  >-</span><span
  class="button yellow"
  id="rating_z_5362"
  >0</span><span 
  class="button green"
  id="rating_p_5362"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/5361/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080331051423/http://ja.doukaku.org/comment/5362/root/"><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080331051423/http://ja.doukaku.org/41/reply_to/5362/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>







</div>

<div id="side_menu" class="compact">

<iframe src="/web/20080331051423if_/http://ja.doukaku.org/login_info/" frameborder=0 width=100% id="login_info">
iframe required
</iframe>

<h4 class="semi_compact">一覧</h4>

<ul>
<!--<li><a href="/web/20080331051423/http://ja.doukaku.org/user/">ユーザ</a>-->
<li><a href="/web/20080331051423/http://ja.doukaku.org/lang/">言語</a>
<li><a href="/web/20080331051423/http://ja.doukaku.org/challenge/">お題</a>
<li><a href="/web/20080331051423/http://ja.doukaku.org/topic/">トピック</a>
<li><a href="/web/20080331051423/http://ja.doukaku.org/comment/">投稿</a>
<li><a href="/web/20080331051423/http://ja.doukaku.org/good_comments/">評価の高い投稿</a>
<li><a href="/web/20080331051423/http://ja.doukaku.org/tag/">タグ</a>
</ul>

<h4 class="compact">フィード</h4>
<ul>
<li><a href="/web/20080331051423/http://ja.doukaku.org/feeds/challenges/">最新のお題</a><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080331051423/http://ja.doukaku.org/feeds/topics/">最新のトピック</a><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080331051423/http://ja.doukaku.org/feeds/comments/">新着投稿</a><img src="/web/20080331051423im_/http://ja.doukaku.org/static/image/feed_icon.png">
</ul>







<h4 class="compact">その他</h4>
<ul>
<li><a href="/web/20080331051423/http://ja.doukaku.org/qa/">Q&A</a>
<li><a href="/web/20080331051423/http://ja.doukaku.org/feedback/">フィードバック</a>
<!--<li><a href="/web/20080331051423/http://ja.doukaku.org/terms">用語集</a>-->
</ul>


<h4 class="compact">リンク</h4>
<ul>
<li><a href="/web/20080331051423/http://www.lingr.com/room/doukaku_ja">チャットルーム(Lingr)</a>
<li><a href="/web/20080331051423/http://labs.cybozu.co.jp/">サイボウズ・ラボ</a>
<li><a href="/web/20080331051423/http://www.djangoproject.com/">Django</a>
</ul>

<h4 id="pathtraq" class="compact"><a href="/web/20080331051423/http://pathtraq.com/analytics?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&m=popular">Pathtraq</a></h4>
<div class="indent">
<span id="pathtraq_sentinel">loading...</span>
</div>


</div>
</div>


<div id="page_foot" class="bordered">

<a rel="license" href="/web/20080331051423/http://creativecommons.org/licenses/by/2.1/jp/">
<img alt="Creative Commons License" style="border-width:0" src="/web/20080331051423im_/http://i.creativecommons.org/l/by/2.1/jp/88x31.png" /></a>
このサイトの内容は、
<a rel="license" href="/web/20080331051423/http://creativecommons.org/licenses/by/2.1/jp/">クリエイティブ・コモンズ・ライセンス</a>の下でライセンスされています。
<a href="/web/20080331051423/http://ja.doukaku.org/qa/#licence">[詳細]</a>

</div>

</body>




<script type="text/javascript">
$(document).ready(function(){$("#doukaku_org").after("<script src='/web/20080331051423/http://api.pathtraq.com/pages?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&api=json&callback=addPathtraq'><" + "/script>")});
</script>

<script src="/web/20080331051423js_/http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2136157-1";
urchinTracker();
</script>




</html>





<!--
     FILE ARCHIVED ON 5:14:23 Mar 31, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:48:54 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
