
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
与えた条件を満たす候補
DouKaku? </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20081204193937cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20081204193937cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20081204193937cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
<meta name="robots" content="noindex,nofollow">

    <!--<script src="/web/20081204193937/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20081204193937/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20081204193937js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20081204193937js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20081204193937js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20081204193937js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app3.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/43\/flatten\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "4";
var displayMonth = "Dec";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/43/flatten/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20081204193937" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20070513180302/http://ja.doukaku.org/43/flatten/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="13 May 2007"><strong>MAY</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 19:39:37 Dec 4, 2008">DEC</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Jan
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20070513180302/http://ja.doukaku.org/43/flatten/" title="18:03:02 May 13, 2007" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 19:39:37 Dec 4, 2008">4</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20070513180302/http://ja.doukaku.org/43/flatten/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="13 May 2007"><strong>2007</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 19:39:37 Dec 4, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2009
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20081204193937*/http://ja.doukaku.org/43/flatten/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>2 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">13 May 07 - 4 Dec 08</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000010000000_2008:11:000000000001_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20081204193937/http://ja.doukaku.org/">DouKaku?</a><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png' alt=challenge>
<a href="/web/20081204193937/http://ja.doukaku.org/43/">与えた条件を満たす候補</a>
</h2>

    





<div class="comment" id="comment3399">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/3399/">#3399</a>(<script language="JavaScript">print_time(new Date("2007/08/13 09:15 GMT"));</script><noscript>2007/08/13 09:15 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class="box">
['and', 'or', 'not', 'and']
のような入力が与えられた場合に、
式 x1 and x2 or not x3 and x4 の値が
Trueとなるような、x1～x4の組み合わせを全て
出力するプログラムを作成してください。
x1～x4には真と偽の2通りの値だけが入るものとします。

Pythonであれば上の入力に対し、
(True, True, True, True)
(True, True, False, True)
(True, False, False, True)
(False, True, False, True)
(False, False, False, True)
と出力します。

andとorの優先順位は同じで左結合性、
つまりa and b or c and dは
(((a and b) or c) and d)
という順番で評価されるものとします。

参考：
<a href="/web/20081204193937/http://www.kmonos.net/wlog/70.html#_2111070226">d.y.d.</a>

キミならどう書く2.0の小町算問題と似てますが。
</pre>

このお題はmorchinさんの投稿をもとに作成しました。
ご投稿ありがとうございました。
<br/>
元ネタの
<a href="/web/20081204193937/http://ja.wikipedia.org/wiki/%E5%85%85%E8%B6%B3%E5%8F%AF%E8%83%BD%E6%80%A7%E5%95%8F%E9%A1%8C">充足可能性問題 - Wikipedia</a>
は、
同じリテラル(x1とかnot x2とか)が複数回出てくることを想定しているので、
今回の問題のようにそれぞれ別の変数でだと<a href="/web/20081204193937/http://ja.wikipedia.org/wiki/%E4%B9%97%E6%B3%95%E6%A8%99%E6%BA%96%E5%BD%A2">乗法標準形 - Wikipedia</a>にした場合に、答えが…と色々悩みどころでした。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/3399/addtag/" class="addtag" id="addtag_3399">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3399"
  >-</span><span
  class="button yellow"
  id="rating_z_3399"
  >0</span><span 
  class="button green"
  id="rating_p_3399"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/3399/">
  reply
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20081204193937/http://ja.doukaku.org/43/post_comment/">
post comment
</a>
</div>


<h2>Posted feedbacks - Flatten</h2>
<a href="/web/20081204193937/http://ja.doukaku.org/43/nested/">Nested</a>
<a href="/web/20081204193937/http://ja.doukaku.org/43/">Hidden</a> 


  
  




<div class="comment" id="comment2104">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2104/">#2104</a>(<script language="JavaScript">print_time(new Date("2007/08/13 10:06 GMT"));</script><noscript>2007/08/13 10:06 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  すみません、サンプル出力が間違ってましたorz 修正しました
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2104/addtag/" class="addtag" id="addtag_2104">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2104"
  >-</span><span
  class="button yellow"
  id="rating_z_2104"
  >0</span><span 
  class="button green"
  id="rating_p_2104"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2104/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2105">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/84/" target="_top">shuyo</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2105/">#2105</a>(<script language="JavaScript">print_time(new Date("2007/08/13 10:07 GMT"));</script><noscript>2007/08/13 10:07 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>こんな感じ。prodloop のところはもう少しましにしたかったけど、うーん。

&gt; solve(['and', 'or', 'not', 'and'])
[true, true, true, true]
[true, true, false, true]
[true, false, false, true]
[false, true, false, true]
[false, false, false, true]
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">prodloop</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">arg</span><span class="o">=[]</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="p">(</span><span class="n">prodloop</span> <span class="n">count</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">arg</span> <span class="o">+</span> <span class="o">[</span><span class="kp">true</span><span class="o">]</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">prodloop</span> <span class="n">count</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">arg</span> <span class="o">+</span> <span class="o">[</span><span class="kp">false</span><span class="o">]</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="o">[</span><span class="n">arg</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
  <span class="n">expression</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
  <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">list</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">op</span><span class="o">|</span>
    <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;not&quot;</span>
      <span class="n">expression</span> <span class="o">+=</span> <span class="s2">&quot; not &quot;</span>
    <span class="k">else</span>
      <span class="n">expression</span> <span class="o">+=</span> <span class="s2">&quot; arg[</span><span class="si">#{</span><span class="n">idx</span><span class="si">}</span><span class="s2">] </span><span class="si">#{</span><span class="n">op</span><span class="si">}</span><span class="s2"> &quot;</span>
      <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="n">expression</span> <span class="o">+=</span> <span class="s2">&quot; arg[</span><span class="si">#{</span><span class="n">idx</span><span class="si">}</span><span class="s2">] &quot;</span>
  <span class="n">prodloop</span><span class="p">(</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">arg</span><span class="o">|</span>
    <span class="nb">p</span> <span class="n">arg</span> <span class="k">if</span> <span class="nb">eval</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2105/addtag/" class="addtag" id="addtag_2105">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2105/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2105/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2105"
  >-</span><span
  class="button yellow"
  id="rating_z_2105"
  >0</span><span 
  class="button green"
  id="rating_p_2105"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2105/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2106">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2106/">#2106</a>(<script language="JavaScript">print_time(new Date("2007/08/13 11:17 GMT"));</script><noscript>2007/08/13 11:17 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  Squeak Smalltalk で。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre>| input selStream |
input := #(and or not and).
input replaceAll: #and with: #&amp;.
input replaceAll: #or with: #|.
selStream := input readStream.
World findATranscript: nil.
{true. false} asDigitsToPower: 4 do: [:xs |
    selStream reset.
    (xs allButFirst inject: xs first into: [:result :each |
        | selector |
        selector := selStream next.
        selStream peek = #not ifTrue: [each := each perform: selStream next].
        result perform: selector with: each]) ifTrue: [Transcript cr; show: xs]]

&quot;=&gt; #(true true true true)
   #(true true false true)
   #(true false false true)
   #(false true false true)
   #(false false false true) &quot;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2106/addtag/" class="addtag" id="addtag_2106">Tags</a>:
	
    
    <a href="/web/20081204193937/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2106/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2106/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2106"
  >-</span><span
  class="button yellow"
  id="rating_z_2106"
  >0</span><span 
  class="button green"
  id="rating_p_2106"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2106/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2106/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2109">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/49/" target="_top">iwk</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2109/">#2109</a>(<script language="JavaScript">print_time(new Date("2007/08/13 13:07 GMT"));</script><noscript>2007/08/13 13:07 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/ocaml/">
	  OCaml
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>イマイチ。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></td><td class="code"><div class="highlight"><pre><span class="k">#</span><span class="n">light</span>
<span class="kr">type</span> <span class="n">ListBuilder</span> <span class="k">()</span> <span class="k">=</span>
    <span class="n">member</span> <span class="n">l</span><span class="k">.</span><span class="n">Bind</span> <span class="k">(</span><span class="n">v</span><span class="k">,</span><span class="n">f</span><span class="k">)</span> <span class="k">=</span> <span class="n">List</span><span class="k">.</span><span class="n">concat</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="n">f</span> <span class="n">v</span><span class="k">)</span>
    <span class="n">member</span> <span class="n">l</span><span class="k">.</span><span class="n">Return</span> <span class="n">x</span> <span class="k">=</span> <span class="k">[</span><span class="n">x</span><span class="k">]</span>
    <span class="n">member</span> <span class="n">l</span><span class="k">.</span><span class="n">Let</span><span class="k">(</span><span class="n">v</span><span class="k">,</span><span class="n">f</span><span class="k">)</span> <span class="k">=</span> <span class="n">f</span> <span class="n">v</span>

<span class="kr">let</span> <span class="n">guard</span> <span class="n">c</span> <span class="k">=</span> <span class="kr">if</span> <span class="n">c</span> <span class="kr">then</span> <span class="k">[()]</span> <span class="kr">else</span> <span class="k">[]</span>

<span class="kr">let</span> <span class="n">doList</span> <span class="k">=</span> <span class="kr">new</span> <span class="n">ListBuilder</span><span class="k">()</span>

<span class="kr">let</span> <span class="kr">rec</span> <span class="n">all_comb</span> <span class="k">=</span> <span class="kr">function</span>
    <span class="k">|</span> <span class="mi">0</span> <span class="k">-&gt;</span> <span class="k">[[]]</span>
    <span class="k">|</span> <span class="n">n</span> <span class="k">-&gt;</span> <span class="n">doList</span> <span class="k">{</span> <span class="kr">let</span><span class="o">!</span> <span class="n">rest</span> <span class="k">=</span> <span class="n">all_comb</span> <span class="k">(</span><span class="n">n</span><span class="k">-</span><span class="mi">1</span><span class="k">)</span>
                    <span class="kr">let</span><span class="o">!</span> <span class="n">result</span> <span class="k">=</span> <span class="k">[(</span><span class="kr">true</span><span class="k">::</span><span class="n">rest</span><span class="k">);(</span><span class="kr">false</span><span class="k">::</span><span class="n">rest</span><span class="k">)]</span>
                    <span class="n">return</span> <span class="n">result</span> <span class="k">}</span>

<span class="kr">let</span> <span class="n">num_args</span> <span class="n">cmds</span> <span class="k">=</span>
    <span class="n">List</span><span class="k">.</span><span class="n">filter</span> <span class="k">((&lt;&gt;)</span> <span class="s2">&quot;not&quot;</span><span class="k">)</span> <span class="n">cmds</span>
    <span class="k">|&gt;</span> <span class="n">List</span><span class="k">.</span><span class="n">length</span>
    <span class="k">|&gt;</span> <span class="k">(+)</span> <span class="mi">1</span>

<span class="kr">let</span> <span class="kr">rec</span> <span class="n">satisfy</span> <span class="k">(</span><span class="n">cmds</span><span class="k">:</span><span class="n">string</span> <span class="n">list</span><span class="k">)</span> <span class="k">(</span><span class="n">bools</span><span class="k">:</span><span class="n">bool</span> <span class="n">list</span><span class="k">)</span> <span class="k">=</span>
    <span class="kr">match</span> <span class="n">cmds</span><span class="k">,</span><span class="n">bools</span> <span class="kr">with</span>
    <span class="k">|</span> <span class="k">[],</span><span class="n">b</span><span class="k">::[]</span>            <span class="k">-&gt;</span> <span class="n">b</span>
    <span class="k">|</span> <span class="s2">&quot;not&quot;</span><span class="k">::[],</span><span class="n">b</span><span class="k">::[]</span>     <span class="k">-&gt;</span> <span class="n">not</span> <span class="n">b</span>
    <span class="k">|</span> <span class="s2">&quot;not&quot;</span><span class="k">::</span><span class="n">cs</span><span class="k">,</span><span class="n">b</span><span class="k">::</span><span class="n">bs</span>     <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="n">cs</span> <span class="k">((</span><span class="n">not</span> <span class="n">b</span><span class="k">)::</span><span class="n">bs</span><span class="k">)</span>
    <span class="k">|</span> <span class="s2">&quot;and&quot;</span><span class="k">::</span><span class="s2">&quot;not&quot;</span><span class="k">::</span><span class="n">cs</span><span class="k">,</span><span class="n">b</span><span class="k">::</span><span class="n">b&#39;</span><span class="k">::</span><span class="n">bs</span> <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="n">cs</span> <span class="k">((</span><span class="n">b</span> <span class="k">&amp;&amp;</span> <span class="k">(</span><span class="n">not</span> <span class="n">b&#39;</span><span class="k">))::</span><span class="n">bs</span><span class="k">)</span>
    <span class="k">|</span> <span class="s2">&quot;or&quot;</span><span class="k">::</span><span class="s2">&quot;not&quot;</span><span class="k">::</span><span class="n">cs</span><span class="k">,</span><span class="n">b</span><span class="k">::</span><span class="n">b&#39;</span><span class="k">::</span><span class="n">bs</span>  <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="n">cs</span> <span class="k">((</span><span class="n">b</span> <span class="k">||</span> <span class="k">(</span><span class="n">not</span> <span class="n">b&#39;</span><span class="k">))::</span><span class="n">bs</span><span class="k">)</span>
    <span class="k">|</span> <span class="s2">&quot;and&quot;</span><span class="k">::</span><span class="n">cs</span><span class="k">,</span><span class="n">b</span><span class="k">::</span><span class="n">b&#39;</span><span class="k">::</span><span class="n">bs</span> <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="n">cs</span> <span class="k">((</span><span class="n">b</span> <span class="k">&amp;&amp;</span> <span class="n">b&#39;</span><span class="k">)::</span><span class="n">bs</span><span class="k">)</span>
    <span class="k">|</span> <span class="s2">&quot;or&quot;</span><span class="k">::</span><span class="n">cs</span><span class="k">,</span><span class="n">b</span><span class="k">::</span><span class="n">b&#39;</span><span class="k">::</span><span class="n">bs</span>  <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="n">cs</span> <span class="k">((</span><span class="n">b</span> <span class="k">||</span> <span class="n">b&#39;</span><span class="k">)::</span><span class="n">bs</span><span class="k">)</span>

<span class="kr">let</span> <span class="n">get_combs</span> <span class="n">cmds</span> <span class="k">=</span>
    <span class="n">doList</span> <span class="k">{</span> <span class="kr">let</span><span class="o">!</span> <span class="n">cont</span> <span class="k">=</span> <span class="n">all_comb</span> <span class="k">(</span><span class="n">num_args</span> <span class="n">cmds</span><span class="k">)</span>
             <span class="kr">do</span><span class="o">!</span> <span class="n">guard</span> <span class="k">(</span><span class="n">satisfy</span> <span class="n">cmds</span> <span class="n">cont</span><span class="k">)</span>
             <span class="n">return</span> <span class="n">cont</span> <span class="k">}</span>

<span class="kr">do</span> <span class="n">get_combs</span> <span class="k">[</span><span class="s2">&quot;and&quot;</span><span class="k">;</span><span class="s2">&quot;or&quot;</span><span class="k">;</span><span class="s2">&quot;not&quot;</span><span class="k">;</span><span class="s2">&quot;and&quot;</span><span class="k">]</span>
   <span class="k">|&gt;</span> <span class="k">(</span><span class="n">print_any</span> <span class="k">&gt;&gt;</span> <span class="n">print_newline</span><span class="k">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2109/addtag/" class="addtag" id="addtag_2109">Tags</a>:
	
    
    <a href="/web/20081204193937/http://ja.doukaku.org/tag/F%23/">F#</a>
    
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/ocaml/">
		OCaml
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2109/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2109/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2109"
  >-</span><span
  class="button yellow"
  id="rating_z_2109"
  >0</span><span 
  class="button green"
  id="rating_p_2109"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2109/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2109/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2110">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/375/" target="_top">nskj77</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2110/">#2110</a>(<script language="JavaScript">print_time(new Date("2007/08/13 13:23 GMT"));</script><noscript>2007/08/13 13:23 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #afffaf;">5/5=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>こんな感じ。
*Main&gt; f ["and","or","not","and"]
(True,True,True,True)
(True,True,False,True)
(True,False,False,True)
(False,True,False,True)
(False,False,False,True)</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre><span class="nv">t</span> <span class="o">::</span> <span class="p">(</span><span class="n">Bool</span> <span class="o">-&gt;</span> <span class="n">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Bool</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">Bool</span>
<span class="nv">t</span> <span class="nv">prev</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="p">[])</span> <span class="kr">_</span> <span class="o">=</span> <span class="nv">prev</span> <span class="nv">x</span>
<span class="nv">t</span> <span class="nv">prev</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="p">(</span><span class="nv">op</span><span class="o">:</span><span class="nv">ops</span><span class="p">)</span> <span class="o">|</span> <span class="nv">op</span> <span class="o">==</span> <span class="s">&quot;not&quot;</span> <span class="o">=</span> <span class="nv">t</span> <span class="nv">prev</span> <span class="p">(</span><span class="nv">not</span> <span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="nv">ops</span>
                       <span class="o">|</span> <span class="nv">op</span> <span class="o">==</span> <span class="s">&quot;and&quot;</span> <span class="o">=</span> <span class="nv">t</span> <span class="p">((</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="p">(</span><span class="nv">prev</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">xs</span> <span class="nv">ops</span>
                       <span class="o">|</span> <span class="nv">op</span> <span class="o">==</span> <span class="s">&quot;or&quot;</span>  <span class="o">=</span> <span class="nv">t</span> <span class="p">((</span><span class="o">||</span><span class="p">)</span> <span class="p">(</span><span class="nv">prev</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">xs</span> <span class="nv">ops</span>

<span class="nv">f</span> <span class="o">::</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="p">()</span>
<span class="nv">f</span> <span class="nv">ops</span> <span class="o">=</span> <span class="nv">mapM_</span> <span class="nv">print</span> <span class="p">[(</span><span class="nv">b1</span><span class="p">,</span><span class="nv">b2</span><span class="p">,</span><span class="nv">b3</span><span class="p">,</span><span class="nv">b4</span><span class="p">)</span> <span class="o">|</span> <span class="nv">bs</span><span class="o">@</span><span class="p">(</span><span class="nv">b1</span><span class="o">:</span><span class="nv">b2</span><span class="o">:</span><span class="nv">b3</span><span class="o">:</span><span class="p">[</span><span class="nv">b4</span><span class="p">])</span> <span class="o">&lt;-</span> <span class="nv">bss</span><span class="p">,</span> <span class="nv">test</span> <span class="nv">bs</span> <span class="nv">ops</span><span class="p">]</span>
  <span class="kr">where</span> <span class="nv">bss</span> <span class="o">=</span> <span class="nv">sequence</span> <span class="o">$</span> <span class="nv">replicate</span> <span class="mi">4</span> <span class="p">[</span><span class="n">True</span><span class="p">,</span><span class="n">False</span><span class="p">]</span>
        <span class="nv">test</span> <span class="o">=</span> <span class="nv">t</span> <span class="nv">id</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2110/addtag/" class="addtag" id="addtag_2110">Tags</a>:
	
    
    <a href="/web/20081204193937/http://ja.doukaku.org/tag/Haskell/">Haskell</a>
    
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2110/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2110/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #afffaf;"
  >5/5=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2110"
  >-</span><span
  class="button yellow"
  id="rating_z_2110"
  >0</span><span 
  class="button green"
  id="rating_p_2110"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2110/">
    2
    replies
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2110/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2114">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/49/" target="_top">iwk</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2114/">#2114</a>(<script language="JavaScript">print_time(new Date("2007/08/13 14:10 GMT"));</script><noscript>2007/08/13 14:10 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/ocaml/">
	  OCaml
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>nskj77さんのコードを参考に修正してみました。</pre>
	</div>
	
	<p class="link">
	  see: <a href="/web/20081204193937/http://ja.doukaku.org/comment/2110/"></a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><div class="highlight"><pre><span class="k">#</span><span class="n">light</span>
<span class="kr">type</span> <span class="n">ListBuilder</span> <span class="k">()</span> <span class="k">=</span>
    <span class="n">member</span> <span class="n">l</span><span class="k">.</span><span class="n">Bind</span> <span class="k">(</span><span class="n">v</span><span class="k">,</span><span class="n">f</span><span class="k">)</span> <span class="k">=</span> <span class="n">List</span><span class="k">.</span><span class="n">concat</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="n">f</span> <span class="n">v</span><span class="k">)</span>
    <span class="n">member</span> <span class="n">l</span><span class="k">.</span><span class="n">Return</span> <span class="n">x</span> <span class="k">=</span> <span class="k">[</span><span class="n">x</span><span class="k">]</span>
    <span class="n">member</span> <span class="n">l</span><span class="k">.</span><span class="n">Let</span><span class="k">(</span><span class="n">v</span><span class="k">,</span><span class="n">f</span><span class="k">)</span> <span class="k">=</span> <span class="n">f</span> <span class="n">v</span>

<span class="kr">let</span> <span class="n">guard</span> <span class="n">c</span> <span class="k">=</span> <span class="kr">if</span> <span class="n">c</span> <span class="kr">then</span> <span class="k">[()]</span> <span class="kr">else</span> <span class="k">[]</span>

<span class="kr">let</span> <span class="n">doList</span> <span class="k">=</span> <span class="kr">new</span> <span class="n">ListBuilder</span><span class="k">()</span>

<span class="kr">let</span> <span class="kr">rec</span> <span class="n">satisfy</span> <span class="n">prev</span> <span class="n">bs</span> <span class="n">cmds</span> <span class="k">=</span>
    <span class="kr">match</span> <span class="n">bs</span><span class="k">,</span> <span class="n">cmds</span> <span class="kr">with</span>
    <span class="k">|</span> <span class="n">b</span><span class="k">::[],</span> <span class="k">_</span>     <span class="k">-&gt;</span> <span class="n">prev</span> <span class="n">b</span>
    <span class="k">|</span> <span class="n">b</span><span class="k">::</span><span class="n">bs</span><span class="k">,</span> <span class="n">cmd</span><span class="k">::</span><span class="n">cmds</span> <span class="k">-&gt;</span>
            <span class="kr">match</span> <span class="n">cmd</span> <span class="kr">with</span>
            <span class="k">|</span> <span class="s2">&quot;not&quot;</span> <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="n">prev</span> <span class="k">((</span><span class="n">not</span> <span class="n">b</span><span class="k">)::</span><span class="n">bs</span><span class="k">)</span> <span class="n">cmds</span>
            <span class="k">|</span> <span class="s2">&quot;and&quot;</span> <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="k">((&amp;&amp;)</span> <span class="k">(</span><span class="n">prev</span> <span class="n">b</span><span class="k">))</span> <span class="n">bs</span> <span class="n">cmds</span>
            <span class="k">|</span> <span class="s2">&quot;or&quot;</span>  <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="k">((||)</span> <span class="k">(</span><span class="n">prev</span> <span class="n">b</span><span class="k">))</span> <span class="n">bs</span> <span class="n">cmds</span>

<span class="kr">let</span> <span class="kr">rec</span> <span class="n">all_comb</span> <span class="k">=</span> <span class="kr">function</span>
    <span class="k">|</span> <span class="mi">0</span> <span class="k">-&gt;</span> <span class="k">[[]]</span>
    <span class="k">|</span> <span class="n">n</span> <span class="k">-&gt;</span> <span class="n">doList</span> <span class="k">{</span> <span class="kr">let</span><span class="o">!</span> <span class="n">rest</span> <span class="k">=</span> <span class="n">all_comb</span> <span class="k">(</span><span class="n">n</span><span class="k">-</span><span class="mi">1</span><span class="k">)</span>
                    <span class="kr">let</span><span class="o">!</span> <span class="n">result</span> <span class="k">=</span> <span class="k">[(</span><span class="kr">true</span><span class="k">::</span><span class="n">rest</span><span class="k">);(</span><span class="kr">false</span><span class="k">::</span><span class="n">rest</span><span class="k">)]</span>
                    <span class="n">return</span> <span class="n">result</span> <span class="k">}</span>

<span class="kr">let</span> <span class="n">get_combs</span> <span class="n">cmds</span> <span class="k">=</span>
    <span class="kr">let</span> <span class="n">len</span> <span class="k">=</span> <span class="mi">1</span> <span class="k">+</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">length</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">filter</span> <span class="k">((&lt;&gt;)</span> <span class="s2">&quot;not&quot;</span><span class="k">)</span> <span class="n">cmds</span><span class="k">))</span>
    <span class="n">doList</span> <span class="k">{</span> <span class="kr">let</span><span class="o">!</span> <span class="n">bs</span> <span class="k">=</span> <span class="n">all_comb</span> <span class="n">len</span>
             <span class="kr">do</span><span class="o">!</span> <span class="n">guard</span> <span class="k">(</span><span class="n">satisfy</span> <span class="k">(</span><span class="kr">fun</span> <span class="n">x</span> <span class="k">-&gt;</span> <span class="n">x</span><span class="k">)</span> <span class="n">bs</span> <span class="n">cmds</span><span class="k">)</span>
             <span class="n">return</span> <span class="n">bs</span> <span class="k">}</span>

<span class="kr">do</span> <span class="n">get_combs</span> <span class="k">[</span><span class="s2">&quot;and&quot;</span><span class="k">;</span><span class="s2">&quot;or&quot;</span><span class="k">;</span><span class="s2">&quot;not&quot;</span><span class="k">;</span><span class="s2">&quot;and&quot;</span><span class="k">]</span>
   <span class="k">|&gt;</span> <span class="k">(</span><span class="n">print_any</span> <span class="k">&gt;&gt;</span> <span class="n">print_newline</span><span class="k">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2114/addtag/" class="addtag" id="addtag_2114">Tags</a>:
	
    
    <a href="/web/20081204193937/http://ja.doukaku.org/tag/F%23/">F#</a>
    
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/ocaml/">
		OCaml
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2114/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2114/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2114"
  >-</span><span
  class="button yellow"
  id="rating_z_2114"
  >0</span><span 
  class="button green"
  id="rating_p_2114"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2109/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2114/root/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2114/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2114/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2115">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2115/">#2115</a>(<script language="JavaScript">print_time(new Date("2007/08/13 14:17 GMT"));</script><noscript>2007/08/13 14:17 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/awk/">
	  awk
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></td><td class="code"><div class="highlight"><pre>{
#	and or not and --&gt; x1&amp;x2|!x3&amp;x4
	s = &quot;&quot;
	cnt = 0

	for (i=1; i&lt;=NF; i++) {
		op = $i
		if (op ‾ /not/) {
			s = s &quot;!&quot;
		} else if (op ‾ /and/) {
			s = s &quot;x&quot; ++cnt &quot;&amp;&quot;
		} else if (op ‾ /or/) {
			s = s &quot;x&quot; ++cnt &quot;|&quot;
		}
	}
	s = s &quot;x&quot; ++cnt

	for (i=2^cnt-1; i&gt;0; i--) {
		expr = make_expr(s,i,x,cnt)
		if (apply_expr(expr)) show(x,cnt)
	}
}

function make_expr(s,n,x,digits, i)
{
	for (i=digits; i&gt;=1; i--) {
		x[i] = n % 2
		sub(&quot;x&quot;i, x[i], s)
		n = (n - x[i]) / 2
	}
	return s
}

function apply_expr(expr, n,tmp,i,result)
{
	# not を先に処理
	gsub(/!1/,&quot;0&quot;, expr)
	gsub(/!0/,&quot;1&quot;, expr)
	# これで and と or だけ考えればよくなる
	n = split(expr,tmp,&quot;&quot;)
	result = tmp[1]
	for (i=2; i&lt;=n; i+=2) {
		if (tmp[i] ‾ /&amp;/)
			result = result &amp;&amp; tmp[i+1]
		else
			result = result || tmp[i+1]
	}
	return result
}

function show(x,cnt, i)
{
	printf &quot;(&quot;
	for (i=1; i&lt;=cnt; i++) {
		printf(&quot;%s&quot;, x[i] == 1 ? &quot;True&quot; : &quot;False&quot;)
		if (i &lt; cnt) printf &quot;, &quot;
	}
	printf &quot;)¥n&quot;
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2115/addtag/" class="addtag" id="addtag_2115">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/awk/">
		awk
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2115/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2115/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2115"
  >-</span><span
  class="button yellow"
  id="rating_z_2115"
  >0</span><span 
  class="button green"
  id="rating_p_2115"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2115/">
    2
    replies
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2115/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2116">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2116/">#2116</a>(<script language="JavaScript">print_time(new Date("2007/08/13 14:25 GMT"));</script><noscript>2007/08/13 14:25 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>自己レスです。

使い方ですが
% awk -f and-or-not.awk
and
(True, True)
or
(True, True)
(True, False)
(False, True)
and or
(True, True, True)
(True, True, False)
(True, False, True)
(False, True, True)
(False, False, True)
and or not and
(True, True, True, True)
(True, True, False, True)
(True, False, False, True)
(False, True, False, True)
(False, False, False, True)

コード中のバックスラッシュやチルダが化けてしまうのはどうにかならないものでしょうか・・・</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2116/addtag/" class="addtag" id="addtag_2116">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2116"
  >-</span><span
  class="button yellow"
  id="rating_z_2116"
  >0</span><span 
  class="button green"
  id="rating_p_2116"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2115/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2116/root/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2116/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2116/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2119">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/49/" target="_top">iwk</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2119/">#2119</a>(<script language="JavaScript">print_time(new Date("2007/08/13 14:36 GMT"));</script><noscript>2007/08/13 14:36 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/ocaml/">
	  OCaml
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>さらにモナドを使わずに書き直してみました。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><div class="highlight"><pre><span class="k">#</span><span class="n">light</span>
<span class="kr">let</span> <span class="kr">rec</span> <span class="n">satisfy</span> <span class="n">prev</span> <span class="n">bs</span> <span class="n">cmds</span> <span class="k">=</span>
    <span class="kr">match</span> <span class="n">bs</span><span class="k">,</span> <span class="n">cmds</span> <span class="kr">with</span>
    <span class="k">|</span> <span class="n">b</span><span class="k">::[],</span> <span class="k">_</span>     <span class="k">-&gt;</span> <span class="n">prev</span> <span class="n">b</span>
    <span class="k">|</span> <span class="n">b</span><span class="k">::</span><span class="n">bs</span><span class="k">,</span> <span class="n">cmd</span><span class="k">::</span><span class="n">cmds</span> <span class="k">-&gt;</span>
            <span class="kr">match</span> <span class="n">cmd</span> <span class="kr">with</span>
            <span class="k">|</span> <span class="s2">&quot;not&quot;</span> <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="n">prev</span> <span class="k">((</span><span class="n">not</span> <span class="n">b</span><span class="k">)::</span><span class="n">bs</span><span class="k">)</span> <span class="n">cmds</span>
            <span class="k">|</span> <span class="s2">&quot;and&quot;</span> <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="k">((&amp;&amp;)</span> <span class="k">(</span><span class="n">prev</span> <span class="n">b</span><span class="k">))</span> <span class="n">bs</span> <span class="n">cmds</span>
            <span class="k">|</span> <span class="s2">&quot;or&quot;</span>  <span class="k">-&gt;</span> <span class="n">satisfy</span> <span class="k">((||)</span> <span class="k">(</span><span class="n">prev</span> <span class="n">b</span><span class="k">))</span> <span class="n">bs</span> <span class="n">cmds</span>

<span class="kr">let</span> <span class="kr">rec</span> <span class="n">all_comb</span> <span class="k">=</span> <span class="kr">function</span>
    <span class="k">|</span> <span class="mi">0</span> <span class="k">-&gt;</span> <span class="k">[[]]</span>
    <span class="k">|</span> <span class="n">n</span> <span class="k">-&gt;</span> <span class="k">[</span> <span class="kr">for</span> <span class="n">res</span> <span class="kr">in</span> <span class="n">all_comb</span> <span class="k">(</span><span class="n">n</span><span class="k">-</span><span class="mi">1</span><span class="k">)</span> <span class="k">-&gt;&gt;</span> <span class="k">[</span><span class="kr">true</span><span class="k">::</span><span class="n">res</span><span class="k">;</span><span class="kr">false</span><span class="k">::</span><span class="n">res</span><span class="k">]</span> <span class="k">]</span>

<span class="kr">let</span> <span class="n">get_combs</span> <span class="n">cmds</span> <span class="k">=</span>
    <span class="kr">let</span> <span class="n">len</span> <span class="k">=</span> <span class="mi">1</span> <span class="k">+</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">length</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">filter</span> <span class="k">((&lt;&gt;)</span> <span class="s2">&quot;not&quot;</span><span class="k">)</span> <span class="n">cmds</span><span class="k">))</span>
    <span class="k">[</span><span class="kr">for</span> <span class="n">bs</span> <span class="kr">in</span> <span class="n">all_comb</span> <span class="n">len</span> <span class="kr">when</span> <span class="n">satisfy</span> <span class="k">(</span><span class="kr">fun</span> <span class="n">x</span> <span class="k">-&gt;</span> <span class="n">x</span><span class="k">)</span> <span class="n">bs</span> <span class="n">cmds</span> <span class="k">-&gt;</span> <span class="n">bs</span><span class="k">]</span>

<span class="kr">do</span> <span class="n">get_combs</span> <span class="k">[</span><span class="s2">&quot;and&quot;</span><span class="k">;</span><span class="s2">&quot;or&quot;</span><span class="k">;</span><span class="s2">&quot;not&quot;</span><span class="k">;</span><span class="s2">&quot;and&quot;</span><span class="k">]</span>
   <span class="k">|&gt;</span> <span class="k">(</span><span class="n">print_any</span> <span class="k">&gt;&gt;</span> <span class="n">print_newline</span><span class="k">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2119/addtag/" class="addtag" id="addtag_2119">Tags</a>:
	
    
    <a href="/web/20081204193937/http://ja.doukaku.org/tag/F%23/">F#</a>
    
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/ocaml/">
		OCaml
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2119/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2119/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2119"
  >-</span><span
  class="button yellow"
  id="rating_z_2119"
  >0</span><span 
  class="button green"
  id="rating_p_2119"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2114/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2119/root/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2119/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2121">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2121/">#2121</a>(<script language="JavaScript">print_time(new Date("2007/08/13 16:00 GMT"));</script><noscript>2007/08/13 16:00 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>S式に変換するところでめちゃくちゃ苦労した。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></td><td class="code"><div class="highlight"><pre>(defpackage doukaku43 (:use common-lisp))
(in-package :doukaku43)

(defun make-sexp (operators)
  &quot;入力から式を生成。&quot;
  (labels ((tmp (ops)
             (loop for op in ops
                with i = -1
                appending
                (if (eq op &#39;not)
                    (list &#39;not)
                    (list `(nth ,(incf i) l) op)) into lst
                finally
                (return `(,@lst (nth ,(incf i) l)))))
           (parse-not (ops)
             (let ((pos (position &#39;not ops :from-end t)))
               (if pos
                   (parse-not (replace ops `((not ,(nth (1+ pos) ops)) nil) :start1 pos))
                   (delete nil ops))))
           (infix2prefix (ops)
             (loop for (op x) on (cdr ops) by #&#39;cddr with res = (car ops)
                do (setf res `(,op ,res ,x))
                finally (return res))))
    (infix2prefix (parse-not (tmp operators)))))

;; テスト
(make-sexp &#39;(and or not and))           ; =&gt; (AND (OR (AND (NTH 0 L) (NTH 1 L)) (NOT (NTH 2 L))) (NTH 3 L))
(make-sexp &#39;(not not not))              ; =&gt; (NOT (NOT (NOT (NTH 0 L))))

(defun func (operators)
  &quot;入力から式を計算する関数を返す。&quot;
  (let ((sexp (make-sexp operators)))
    (lambda (l)
      (declare (special l))
      (eval sexp))))

(defun boolean-combination (n)
  &quot;[t,nil]のN個の全組み合わせ。&quot;
  (cond ((= n 1)
         &#39;((t) (nil)))
        (t
         (let ((it (boolean-combination (1- n))))
           (loop for c in it appending
                `((t ,@c) (nil ,@c)))))))

(defun arity (operators)
  (- (length operators) (count &#39;not operators) -1))

(defun solve (operators)
  (let ((expr (func operators)))
    (loop for bools in (boolean-combination (arity operators))
       when (funcall expr bools)
       collecting bools)))

(solve &#39;(and or not and))               ; =&gt; ((T T T T) (T T NIL T) (NIL T NIL T) (T NIL NIL T) (NIL NIL NIL T))
(solve &#39;(not not not))                  ; =&gt; ((NIL))
(solve &#39;())                             ; =&gt; ((T))
(solve &#39;(and and and and and and))      ; =&gt; ((T T T T T T T))
(solve &#39;(and))                          ; =&gt; ((T T))
(solve &#39;(or))                           ; =&gt; ((T T) (NIL T) (T NIL))
(solve &#39;(and or))                       ; =&gt; ((T T T) (NIL T T) (T NIL T) (NIL NIL T) (T T NIL))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2121/addtag/" class="addtag" id="addtag_2121">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2121/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2121/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2121"
  >-</span><span
  class="button yellow"
  id="rating_z_2121"
  >0</span><span 
  class="button green"
  id="rating_p_2121"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2121/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2122">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2122/">#2122</a>(<script language="JavaScript">print_time(new Date("2007/08/13 16:35 GMT"));</script><noscript>2007/08/13 16:35 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><div class="highlight"><pre>type bool = Boolean
type f2   = Function2[bool,bool,bool]

class Solver(lst:List[String]) {
  val fs = {
    def factory(t:String, f:bool=&gt;bool)(v1:bool, v2:bool) = t match {
      case &quot;and&quot; =&gt; v1&amp;&amp;f(v2)
      case &quot;or&quot; =&gt;  v1||f(v2)
    }
    def it(lst:List[String]):List[f2] = lst match {
      case n::&quot;not&quot;::xs =&gt; factory(n, !_) _::it(xs)
      case n::xs    =&gt;     factory(n, x=&gt;x) _::it(xs)
      case Nil      =&gt;     Nil
    }
    it(lst)
  }

  def solve() = {
    val eachv = List(true, false).foreach _
    def apply(v1:bool, fs:List[f2], res:List[bool]):unit = fs match {
      case Nil if v1 =&gt; println(res.reverse)
      case f::fs   =&gt; eachv(x=&gt; apply(f(v1,x),fs, x::res))
      case _ =&gt; ()
    }
    eachv(x=&gt; apply(x,fs,List(x)))
  }
}

new Solver(List(&quot;and&quot;, &quot;or&quot;, &quot;not&quot;, &quot;and&quot;)) solve
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2122/addtag/" class="addtag" id="addtag_2122">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2122/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2122/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2122"
  >-</span><span
  class="button yellow"
  id="rating_z_2122"
  >0</span><span 
  class="button green"
  id="rating_p_2122"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2122/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2122/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2125">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2125/">#2125</a>(<script language="JavaScript">print_time(new Date("2007/08/13 20:02 GMT"));</script><noscript>2007/08/13 20:02 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>盆休みで生活リズム乱れまくり。

["not","not","not"]みたいなケースに対応してみた。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></td><td class="code"><div class="highlight"><pre>type bool = Boolean
type f2   = Function2[bool,bool,bool]
type pred = Function1[bool,bool]
type tokens = List[String]
class Solver(lst:tokens) {

  val nlst = { 
    def it(lst:tokens,i:int):tokens = lst match {
      case &quot;not&quot;::xs =&gt; it(xs, i+1)
      case n::xs     =&gt; it(xs, 0):::List(n, if(i%2==0){&quot;&quot;}else{&quot;not&quot;})
      case Nil       =&gt; (if(i%2==0){&quot;&quot;}else{&quot;not&quot;})::Nil
    }
    it(lst, 0).reverse.filter(_!=&quot;&quot;)
  }

  val fs = {
    def factory(t:String, f1:pred, f2:pred)(v1:bool, v2:bool) = t match {
      case &quot;and&quot; =&gt; f1(v1)&amp;&amp;f2(v2)
      case &quot;or&quot; =&gt;  f1(v1)||f2(v2)
    }
    def it(lst:tokens, f:pred):List[f2] = lst match {
      case &quot;not&quot;::xs =&gt; it(xs, !_)
      case n::&quot;not&quot;::xs =&gt; factory(n, f, !_) _::it(xs, x=&gt;x)
      case n::xs    =&gt;     factory(n, f, x=&gt;x) _::it(xs, x=&gt;x)
      case Nil      =&gt;     Nil
    }
    it(nlst, x=&gt;x)
  }

  def solve() = nlst.length match{
    case 0 =&gt; println(List(true))
    case 1 if nlst.head == &quot;not&quot; =&gt; println(List(false))
    case _ =&gt; 
      val eachv = List(true, false).foreach _
      def apply(v1:bool, fs:List[f2], res:List[bool]):unit = fs match {
        case Nil if v1 =&gt; println(res.reverse)
        case f::fs   =&gt; eachv(x=&gt; apply(f(v1,x),fs, x::res))
        case _ =&gt; ()
      }
      eachv(x=&gt; apply(x,fs,List(x)))
  }
}

new Solver(List(&quot;and&quot;, &quot;or&quot;,&quot;not&quot;, &quot;and&quot;)) solve
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2125/addtag/" class="addtag" id="addtag_2125">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2125/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2125/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2125"
  >-</span><span
  class="button yellow"
  id="rating_z_2125"
  >0</span><span 
  class="button green"
  id="rating_p_2125"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2122/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2125/root/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2125/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2126">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/343/" target="_top">matyr</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2126/">#2126</a>(<script language="JavaScript">print_time(new Date("2007/08/13 20:32 GMT"));</script><noscript>2007/08/13 20:32 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  身も蓋も無し。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre><span class="k">function</span> <span class="nx">doukaku43</span><span class="p">(){</span>
	<span class="k">var</span> <span class="nx">exp</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">,</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[]</span><span class="o">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">X</span><span class="o">,</span> <span class="nx">i</span><span class="o">,</span> <span class="nx">j</span><span class="o">,</span> <span class="nx">l</span><span class="o">;</span>
	<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">switch</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]){</span>
	<span class="nx">case</span> <span class="s2">&quot;and&quot;</span><span class="o">:</span> <span class="nx">exp</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span><span class="o">+</span> <span class="nx">exp</span> <span class="o">+</span> <span class="s2">&quot;X[&quot;</span><span class="o">+</span> <span class="nx">x</span><span class="o">++</span> <span class="o">+</span><span class="s2">&quot;]) &amp;&amp; &quot;</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
	<span class="nx">case</span> <span class="s2">&quot;or&quot;</span> <span class="o">:</span> <span class="nx">exp</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span><span class="o">+</span> <span class="nx">exp</span> <span class="o">+</span> <span class="s2">&quot;X[&quot;</span><span class="o">+</span> <span class="nx">x</span><span class="o">++</span> <span class="o">+</span><span class="s2">&quot;]) || &quot;</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
	<span class="nx">case</span> <span class="s2">&quot;not&quot;</span><span class="o">:</span> <span class="nx">exp</span> <span class="o">+=</span> <span class="s2">&quot;!&quot;</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
	<span class="p">}</span>
	<span class="nx">exp</span> <span class="o">+=</span> <span class="s2">&quot;X[&quot;</span><span class="o">+</span> <span class="nx">x</span><span class="o">++</span> <span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="o">;</span>
	<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="nx">x</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
		<span class="k">for</span><span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">x</span><span class="o">,</span> <span class="nx">X</span> <span class="o">=</span> <span class="p">[];</span> <span class="nx">j</span><span class="o">--;</span><span class="p">)</span> <span class="nx">X</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="o">!!</span><span class="p">(</span><span class="nx">i</span> <span class="o">&gt;&gt;</span> <span class="nx">j</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">));</span>
		<span class="k">if</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="nx">exp</span><span class="p">))</span> <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">X</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">result</span><span class="o">;</span>
<span class="p">}</span>
<span class="p">(</span><span class="k">function</span><span class="p">(){</span>
	<span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">r</span><span class="o">,</span> <span class="nx">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">j</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
		<span class="nx">r</span> <span class="o">=</span> <span class="nx">doukaku43</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
		<span class="nx">s</span> <span class="o">+=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="o">+</span><span class="s2">&quot; :\n&quot;</span><span class="o">;</span>
		<span class="k">for</span><span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="nx">s</span> <span class="o">+=</span> <span class="s2">&quot;  &quot;</span><span class="o">+</span> <span class="nx">r</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;\n&quot;</span><span class="o">;</span>
	<span class="p">}</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">WSH</span> <span class="o">?</span> <span class="nx">WSH</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">:</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
<span class="p">})([</span><span class="s1">&#39;and&#39;</span><span class="o">,</span> <span class="s1">&#39;or&#39;</span><span class="o">,</span> <span class="s1">&#39;not&#39;</span><span class="o">,</span> <span class="s1">&#39;and&#39;</span><span class="p">]</span><span class="o">,</span> <span class="p">[</span><span class="s1">&#39;not&#39;</span><span class="o">,</span> <span class="s1">&#39;or&#39;</span><span class="o">,</span> <span class="s1">&#39;and&#39;</span><span class="p">]</span><span class="o">,</span> <span class="p">[</span><span class="s1">&#39;not&#39;</span><span class="o">,</span> <span class="s1">&#39;not&#39;</span><span class="p">]);</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2126/addtag/" class="addtag" id="addtag_2126">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2126/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2126/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2126"
  >-</span><span
  class="button yellow"
  id="rating_z_2126"
  >0</span><span 
  class="button green"
  id="rating_p_2126"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2126/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2128">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2128/">#2128</a>(<script language="JavaScript">print_time(new Date("2007/08/14 00:28 GMT"));</script><noscript>2007/08/14 00:28 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/awk/">
	  awk
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>not だけの組合せが処理できないので改訂版。

% awk -f and-or-not-2.awk
not
(False)
not not
(True)
not not not
(False)
not and not
(False, False)
not not and not
(True, False)
not or not
(True, False)
(False, True)
(False, False)
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></td><td class="code"><div class="highlight"><pre>{
#    and or not and --&gt; x1&amp;x2|!x3&amp;x4
    s = &quot;&quot;
    cnt = 0

    for (i=1; i&lt;=NF; i++) {
        op = $i
        if (op ~ /not/) {
            s = s &quot;!&quot;
        } else if (op ~ /and/) {
            s = s &quot;x&quot; ++cnt &quot;&amp;&quot;
        } else if (op ~ /or/) {
            s = s &quot;x&quot; ++cnt &quot;|&quot;
        }
    }
    s = s &quot;x&quot; ++cnt

#    for (i=2^cnt-1; i&gt;0; i--) {
    for (i=2^cnt-1; i&gt;=0; i--) { # i=0は (False,False,...,False)
        expr = make_expr(s,i,x,cnt)
        if (apply_expr(expr)) show(x,cnt)
    }
}

function make_expr(s,n,x,digits, i)
{
    for (i=digits; i&gt;=1; i--) {
        x[i] = n % 2
        sub(&quot;x&quot;i, x[i], s)
        n = (n - x[i]) / 2
    }
    return s
}

function apply_expr(expr, n,tmp,i,result)
{
    # not を先に処理
#    gsub(/!1/,&quot;0&quot;, expr)
#    gsub(/!0/,&quot;1&quot;, expr)
	r = expr
	gsub(/[^!]/,&quot;&quot;,r) # expr の中の ! だけを抽出した文字列を得る
	for (i=length(r); i&gt;0; i--) {
		gsub(r 1, (i + 1) % 2, expr)
		gsub(r 0, i % 2, expr)
		r = substr(r,2) # １字短縮
	}

    # これで and と or だけ考えればよくなる
    n = split(expr,tmp,&quot;&quot;)
    result = tmp[1]
    for (i=2; i&lt;=n; i+=2) {
        if (tmp[i] ~ /&amp;/)
            result = result &amp;&amp; tmp[i+1]
        else
            result = result || tmp[i+1]
    }
    return result
}

function show(x,cnt, i)
{
    printf &quot;(&quot;
    for (i=1; i&lt;=cnt; i++) {
        printf(&quot;%s&quot;, x[i] == 1 ? &quot;True&quot; : &quot;False&quot;)
        if (i &lt; cnt) printf &quot;, &quot;
    }
    printf &quot;)\n&quot;
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2128/addtag/" class="addtag" id="addtag_2128">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/awk/">
		awk
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2128/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2128/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2128"
  >-</span><span
  class="button yellow"
  id="rating_z_2128"
  >0</span><span 
  class="button green"
  id="rating_p_2128"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2115/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2128/root/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2128/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2129">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/172/" target="_top">cats</a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2129/">#2129</a>(<script language="JavaScript">print_time(new Date("2007/08/14 01:41 GMT"));</script><noscript>2007/08/14 01:41 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text.RegularExpressions</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Program</span>
<span class="k">{</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
  <span class="k">{</span>
    <span class="n">Show</span><span class="p">(</span><span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="k">{</span> <span class="s">&quot;and&quot;</span><span class="p">,</span> <span class="s">&quot;or&quot;</span><span class="p">,</span> <span class="s">&quot;not&quot;</span><span class="p">,</span> <span class="s">&quot;and&quot;</span> <span class="k">}</span><span class="p">);</span>
  <span class="k">}</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Show</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">ss</span><span class="p">)</span>
  <span class="k">{</span>
    <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">l</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>
    <span class="c">// 全組合わせ作成</span>
    <span class="n">Get</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">string</span> <span class="n">s</span> <span class="k">in</span> <span class="n">l</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">Check</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="n">Show</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
  <span class="k">}</span>
  <span class="k">static</span> <span class="kt">string</span> <span class="nf">Rev</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="p">)</span> <span class="k">{</span> <span class="k">return</span> <span class="n">c</span> <span class="p">!=</span> <span class="sc">&#39;F&#39;</span> <span class="p">?</span> <span class="s">&quot;F&quot;</span> <span class="p">:</span> <span class="s">&quot;T&quot;</span><span class="p">;</span> <span class="k">}</span>
  <span class="k">static</span> <span class="kt">bool</span> <span class="nf">Check</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
  <span class="k">{</span>
    <span class="n">Match</span> <span class="n">m</span><span class="p">;</span>
    <span class="n">Regex</span> <span class="n">r1</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Regex</span><span class="p">(</span><span class="s">&quot;![TF]&quot;</span><span class="p">,</span> <span class="n">RegexOptions</span><span class="p">.</span><span class="n">Compiled</span><span class="p">);</span>
    <span class="n">Regex</span> <span class="n">r2</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Regex</span><span class="p">(</span><span class="s">&quot;^[TF]&amp;[TF]&quot;</span><span class="p">,</span> <span class="n">RegexOptions</span><span class="p">.</span><span class="n">Compiled</span><span class="p">);</span>
    <span class="n">Regex</span> <span class="n">r3</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Regex</span><span class="p">(</span><span class="s">&quot;^[TF]|[TF]&quot;</span><span class="p">,</span> <span class="n">RegexOptions</span><span class="p">.</span><span class="n">Compiled</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">1</span><span class="p">)</span>
    <span class="k">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="n">m</span> <span class="p">=</span> <span class="n">r1</span><span class="p">.</span><span class="n">Match</span><span class="p">(</span><span class="n">s</span><span class="p">)).</span><span class="n">Success</span><span class="p">)</span>
        <span class="n">s</span> <span class="p">=</span> <span class="n">s</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">Index</span><span class="p">)</span> <span class="p">+</span> <span class="n">Rev</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">Value</span><span class="p">[</span><span class="m">1</span><span class="p">])</span> <span class="p">+</span> <span class="n">s</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">Index</span> <span class="p">+</span> <span class="m">2</span><span class="p">);</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">m</span> <span class="p">=</span> <span class="n">r2</span><span class="p">.</span><span class="n">Match</span><span class="p">(</span><span class="n">s</span><span class="p">)).</span><span class="n">Success</span><span class="p">)</span>
        <span class="n">s</span> <span class="p">=</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;T&amp;T&quot;</span><span class="p">)</span> <span class="p">?</span> <span class="s">&quot;T&quot;</span> <span class="p">:</span> <span class="s">&quot;F&quot;</span><span class="p">)</span> <span class="p">+</span> <span class="n">s</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">m</span> <span class="p">=</span> <span class="n">r3</span><span class="p">.</span><span class="n">Match</span><span class="p">(</span><span class="n">s</span><span class="p">)).</span><span class="n">Success</span><span class="p">)</span>
        <span class="n">s</span> <span class="p">=</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;F|F&quot;</span><span class="p">)</span> <span class="p">?</span> <span class="s">&quot;F&quot;</span> <span class="p">:</span> <span class="s">&quot;T&quot;</span><span class="p">)</span> <span class="p">+</span> <span class="n">s</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
    <span class="k">}</span>
    <span class="k">return</span> <span class="n">s</span> <span class="p">!=</span> <span class="s">&quot;F&quot;</span><span class="p">;</span>
  <span class="k">}</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Show</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
  <span class="k">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;(&quot;</span><span class="p">);</span>
    <span class="kt">bool</span> <span class="n">bFirst</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="k">in</span> <span class="n">s</span><span class="p">)</span>
    <span class="k">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s">&quot;&amp;|!&quot;</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(!</span><span class="n">bFirst</span><span class="p">)</span> <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">);</span>
      <span class="n">bFirst</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
      <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">c</span> <span class="p">!=</span> <span class="sc">&#39;F&#39;</span><span class="p">);</span>
    <span class="k">}</span>
    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;)&quot;</span><span class="p">);</span>
  <span class="k">}</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Get</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">ss</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pos</span><span class="p">,</span> <span class="kt">string</span> <span class="n">cur</span><span class="p">,</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">l</span><span class="p">)</span>
  <span class="k">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="p">==</span> <span class="n">ss</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
    <span class="k">{</span>
      <span class="n">l</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">cur</span> <span class="p">+</span> <span class="s">&quot;T&quot;</span><span class="p">);</span>
      <span class="n">l</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">cur</span> <span class="p">+</span> <span class="s">&quot;F&quot;</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="k">}</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span>
    <span class="k">{</span>
      <span class="k">case</span> <span class="s">&quot;and&quot;</span><span class="p">:</span>
        <span class="n">Get</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="n">pos</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">cur</span> <span class="p">+</span> <span class="s">&quot;T&amp;&quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
        <span class="n">Get</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="n">pos</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">cur</span> <span class="p">+</span> <span class="s">&quot;F&amp;&quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s">&quot;or&quot;</span><span class="p">:</span>
        <span class="n">Get</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="n">pos</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">cur</span> <span class="p">+</span> <span class="s">&quot;T|&quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
        <span class="n">Get</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="n">pos</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">cur</span> <span class="p">+</span> <span class="s">&quot;F|&quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s">&quot;not&quot;</span><span class="p">:</span>
        <span class="n">Get</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="n">pos</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">cur</span> <span class="p">+</span> <span class="s">&quot;!&quot;</span><span class="p">,</span> <span class="n">l</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">}</span>
  <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2129/addtag/" class="addtag" id="addtag_2129">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2129/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2129/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2129"
  >-</span><span
  class="button yellow"
  id="rating_z_2129"
  >0</span><span 
  class="button green"
  id="rating_p_2129"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2129/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2132">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2132/">#2132</a>(<script language="JavaScript">print_time(new Date("2007/08/14 02:56 GMT"));</script><noscript>2007/08/14 02:56 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>#(not not not) などに対応できる版を Squeak Smalltalk で。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre>| input numArgs |
input := #(&amp; | not &amp;).
numArgs := (input collect: [:sel | sel numArgs]) sum + 1.
World findATranscript: nil.
{true. false} asDigitsToPower: numArgs do: [:xs |
     | xsStream expression |
     xsStream := xs readStream.
     expression := input inject: xsStream next printString into: [:expStr :sel |
          expStr, &#39; &#39;, sel, (sel == #not ifFalse: [xsStream next printString] ifTrue: [&#39;&#39;])].
     (Compiler evaluate: expression) ifTrue: [Transcript cr; show: xs]]
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2132/addtag/" class="addtag" id="addtag_2132">Tags</a>:
	
    
    <a href="/web/20081204193937/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2132/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2132/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2132"
  >-</span><span
  class="button yellow"
  id="rating_z_2132"
  >0</span><span 
  class="button green"
  id="rating_p_2132"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2106/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2132/root/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2132/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2133">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2133/">#2133</a>(<script language="JavaScript">print_time(new Date("2007/08/14 03:02 GMT"));</script><noscript>2007/08/14 03:02 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>むむ、化けますか？</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2133/addtag/" class="addtag" id="addtag_2133">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2133"
  >-</span><span
  class="button yellow"
  id="rating_z_2133"
  >0</span><span 
  class="button green"
  id="rating_p_2133"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2116/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081204193937/http://ja.doukaku.org/comment/2133/root/"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2133/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2133/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2134">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2134/">#2134</a>(<script language="JavaScript">print_time(new Date("2007/08/14 03:04 GMT"));</script><noscript>2007/08/14 03:04 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>お題の入力の条件を、'not'を削除すると3つの'or'または'and'からなるもの、と解釈しましたが違う？

'not'の処理のみ最初に済ませ、あとはカッコで優先順位をかえたevalで手抜きしました。
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span>
    <span class="n">o</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">8</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">8</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
    <span class="k">while</span> <span class="s">&#39;not&#39;</span> <span class="ow">in</span> <span class="n">b</span><span class="p">:</span>
      <span class="n">i</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;not&#39;</span><span class="p">)</span>
      <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="n">b</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">eval</span><span class="p">(</span><span class="s">&#39;(((</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">) </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">) </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">])):</span>
      <span class="k">print</span> <span class="n">o</span>

<span class="n">f</span><span class="p">([</span><span class="s">&#39;and&#39;</span><span class="p">,</span> <span class="s">&#39;or&#39;</span><span class="p">,</span> <span class="s">&#39;not&#39;</span><span class="p">,</span> <span class="s">&#39;and&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">([</span><span class="s">&#39;not&#39;</span><span class="p">,</span> <span class="s">&#39;not&#39;</span><span class="p">,</span> <span class="s">&#39;and&#39;</span><span class="p">,</span> <span class="s">&#39;or&#39;</span><span class="p">,</span> <span class="s">&#39;not&#39;</span><span class="p">,</span> <span class="s">&#39;not&#39;</span><span class="p">,</span> <span class="s">&#39;not&#39;</span><span class="p">,</span> <span class="s">&#39;and&#39;</span><span class="p">])</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2134/addtag/" class="addtag" id="addtag_2134">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2134/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2134/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2134"
  >-</span><span
  class="button yellow"
  id="rating_z_2134"
  >0</span><span 
  class="button green"
  id="rating_p_2134"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2134/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2134/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2140">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/388/" target="_top">drop</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2140/">#2140</a>(<script language="JavaScript">print_time(new Date("2007/08/14 04:36 GMT"));</script><noscript>2007/08/14 04:36 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>Main&gt; f ["and","or","not","and"]
[True,True,True,True]
[True,True,False,True]
[False,True,False,True]
[True,False,False,True]
[False,False,False,True]

解を直接構成。"and"を100個並べて入力してもすぐ終わる(もちろん"or"だと無理です)。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre><span class="nv">f</span> <span class="o">=</span> <span class="nv">mapM_</span> <span class="p">(</span><span class="nv">print</span> <span class="o">.</span> <span class="nv">reverse</span><span class="p">)</span> <span class="o">.</span> <span class="nv">g</span> <span class="o">.</span> <span class="nv">reverse</span>
<span class="nv">g</span> <span class="p">[]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">True</span><span class="p">]]</span>
<span class="nv">g</span> <span class="p">(</span><span class="s">&quot;not&quot;</span><span class="o">:</span><span class="nv">ops</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="nv">not</span> <span class="nv">b</span><span class="o">:</span><span class="nv">bs</span> <span class="o">|</span> <span class="p">(</span><span class="nv">b</span><span class="o">:</span><span class="nv">bs</span><span class="p">)</span><span class="o">&lt;-</span><span class="nv">g</span> <span class="nv">ops</span><span class="p">]</span>
<span class="nv">g</span> <span class="p">(</span><span class="s">&quot;and&quot;</span><span class="o">:</span><span class="nv">ops</span><span class="p">)</span> <span class="o">=</span> <span class="nv">map</span> <span class="p">(</span><span class="n">True</span><span class="o">:</span><span class="p">)</span> <span class="p">(</span><span class="nv">g</span> <span class="nv">ops</span><span class="p">)</span> 
<span class="nv">g</span> <span class="p">(</span><span class="s">&quot;or&quot;</span><span class="o">:</span><span class="nv">ops</span><span class="p">)</span> <span class="o">=</span> <span class="nv">map</span> <span class="p">(</span><span class="n">False</span><span class="o">:</span><span class="p">)</span> <span class="p">(</span><span class="nv">g</span> <span class="nv">ops</span><span class="p">)</span> <span class="o">++</span> <span class="nv">map</span> <span class="p">(</span><span class="n">True</span><span class="o">:</span><span class="p">)</span> <span class="nv">anybs</span>
 <span class="kr">where</span> <span class="nv">anybs</span> <span class="o">=</span> <span class="nv">sequence</span> <span class="o">$</span> <span class="p">(</span><span class="nv">replicate</span><span class="o">.</span><span class="nv">length</span><span class="o">.</span><span class="nv">head</span><span class="o">.</span><span class="nv">g</span><span class="p">)</span> <span class="nv">ops</span> <span class="p">[</span><span class="n">True</span><span class="p">,</span><span class="n">False</span><span class="p">]</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2140/addtag/" class="addtag" id="addtag_2140">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2140/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2140/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2140"
  >-</span><span
  class="button yellow"
  id="rating_z_2140"
  >0</span><span 
  class="button green"
  id="rating_p_2140"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081204193937/http://ja.doukaku.org/comment/2140/">
    1
    reply
  </a>

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2140/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2141">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/127/" target="_top">raynstard</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2141/">#2141</a>(<script language="JavaScript">print_time(new Date("2007/08/14 04:43 GMT"));</script><noscript>2007/08/14 04:43 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>総当たりがうまく思いつかなかったのでビット配列に変換してしまいました。。。

NOTの計算がやっつけぽくてあまり好ましくないですがまぁ、いっか(笑
gcc -std=c99 -Wall doukaku43.c -o a</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;memory.h&gt;</span>

<span class="kt">int</span> <span class="nf">dec2bin</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">bufsize</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="sc">&#39;\0&#39;</span><span class="p">,</span> <span class="n">bufsize</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span> <span class="n">bufsize</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">buf</span><span class="p">[</span><span class="n">bufsize</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">bufsize</span> <span class="o">--</span><span class="p">;</span>
        <span class="n">n</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">solver</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">op</span><span class="p">[],</span> <span class="n">size_t</span> <span class="n">nop</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">bits</span> <span class="o">=</span> <span class="n">nop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="p">;</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">m</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">nop</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="c">/* NOTは右辺のみなので値無し */</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">op</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="s">&quot;not&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="n">bits</span> <span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">char</span> <span class="n">x</span><span class="p">[</span><span class="n">bits</span><span class="p">];</span>

    <span class="n">bits</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">bits</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="n">n</span><span class="o">=</span><span class="n">bits</span><span class="p">;</span> <span class="n">n</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">;</span> <span class="n">n</span><span class="o">--</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">dec2bin</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">n</span><span class="p">);</span> <span class="c">/* ビット配列に変換 */</span>
        <span class="n">result</span>  <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">;</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">op</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&quot;not&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="o">~</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span> <span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">nop</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">,</span><span class="n">m</span><span class="o">++</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">nop</span><span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="c">/* NOTの場合は先に計算する */</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">op</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="s">&quot;not&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="n">x</span><span class="p">[</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">~</span><span class="n">x</span><span class="p">[</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span><span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">op</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="s">&quot;not&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="n">m</span><span class="o">--</span><span class="p">;</span> <span class="c">/* 計算済みなので次も同じ値を使用する */</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">op</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="s">&quot;and&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="n">result</span> <span class="o">&amp;=</span> <span class="n">x</span><span class="p">[</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">op</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="s">&quot;or&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>  <span class="n">result</span> <span class="o">|=</span> <span class="n">x</span><span class="p">[</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">op</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="s">&quot;xor&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span> <span class="o">^</span> <span class="n">x</span><span class="p">[</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;invalid opration:[%s]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">op</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="c">/* 結果出力 */</span>
            <span class="n">dec2bin</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">n</span><span class="p">);</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;(&quot;</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span> <span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">m</span><span class="o">&lt;</span><span class="k">sizeof</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">m</span><span class="o">++</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s, &quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">m</span><span class="p">])</span><span class="o">?</span><span class="s">&quot;True&quot;</span><span class="o">:</span><span class="s">&quot;False&quot;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">m</span><span class="p">])</span><span class="o">?</span><span class="s">&quot;True&quot;</span><span class="o">:</span><span class="s">&quot;False&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">solver</span><span class="p">(</span> <span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">[]){</span><span class="s">&quot;and&quot;</span><span class="p">,</span><span class="s">&quot;or&quot;</span><span class="p">,</span><span class="s">&quot;not&quot;</span><span class="p">,</span><span class="s">&quot;and&quot;</span><span class="p">},</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2141/addtag/" class="addtag" id="addtag_2141">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2141/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2141/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2141"
  >-</span><span
  class="button yellow"
  id="rating_z_2141"
  >0</span><span 
  class="button green"
  id="rating_p_2141"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2141/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2142">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/91/" target="_top">yooskeh</a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2142/">#2142</a>(<script language="JavaScript">print_time(new Date("2007/08/14 05:21 GMT"));</script><noscript>2007/08/14 05:21 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/prolog/">
	  Prolog
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>?- solve([and, or, not, and]).
[true, true, true, true]
[true, true, fail, true]
[true, fail, fail, true]
[fail, true, fail, true]
[fail, fail, fail, true]

と言う感じです。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td class="code"><div class="highlight"><pre>solve(Ps) :-
	forall((tf(Ps, Pt, T, X), solve(Pt, T, Xs)),
	       writeln([X|Xs])).

solve([], T, []) :-
	T, !.
solve([P|Ps], T, [X|Xs]) :-
	tf(Ps, Pt, U, X),
	(   P = and -&gt; solve(Pt, (T,U), Xs)
	;   P = or  -&gt; solve(Pt, (T;U), Xs)
	).

tf([not|Ps], Pt, \+T, X) :-
	!, tf(Ps, Pt, T, X).
tf(Ps, Ps, X, X) :-
	member(X, [true, fail]).
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2142/addtag/" class="addtag" id="addtag_2142">Tags</a>:
	
    
    <a href="/web/20081204193937/http://ja.doukaku.org/tag/SWI-Prolog/">SWI-Prolog</a>
    
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/prolog/">
		Prolog
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2142/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2142/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2142"
  >-</span><span
  class="button yellow"
  id="rating_z_2142"
  >0</span><span 
  class="button green"
  id="rating_p_2142"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081204193937/http://ja.doukaku.org/43/reply_to/2142/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2145">
  <p class="banner"><a href="/web/20081204193937/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081204193937/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081204193937im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2145/">#2145</a>(<script language="JavaScript">print_time(new Date("2007/08/14 06:29 GMT"));</script><noscript>2007/08/14 06:29 GMT</noscript>)
	
	
	
	[<a href="/web/20081204193937/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>guard をつかってみた</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Control</span><span class="o">.</span><span class="n">Monad</span>

<span class="nv">starling</span> <span class="nv">f</span> <span class="nv">g</span> <span class="nv">x</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">x</span> <span class="p">(</span><span class="nv">g</span> <span class="nv">x</span><span class="p">)</span>

<span class="nv">f</span> <span class="o">::</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[[</span><span class="n">Bool</span><span class="p">]]</span>
<span class="nv">f</span> <span class="nv">cs</span> <span class="o">=</span> <span class="nv">sequence</span> <span class="p">(</span><span class="nv">replicate</span> <span class="mi">4</span> <span class="p">[</span><span class="n">False</span><span class="p">,</span><span class="n">True</span><span class="p">])</span>
   <span class="o">&gt;&gt;=</span> <span class="nv">starling</span> <span class="p">((</span><span class="o">&gt;&gt;</span><span class="p">)</span> <span class="o">.</span> <span class="nv">guard</span> <span class="o">.</span> <span class="nv">flip</span> <span class="p">(</span><span class="nv">t</span> <span class="nv">id</span><span class="p">)</span> <span class="nv">cs</span><span class="p">)</span> <span class="nv">return</span>

<span class="nv">t</span> <span class="o">::</span> <span class="p">(</span><span class="n">Bool</span> <span class="o">-&gt;</span> <span class="n">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Bool</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">Bool</span>
<span class="nv">t</span> <span class="nv">prev</span> <span class="p">[</span><span class="nv">x</span><span class="p">]</span>    <span class="kr">_</span>           <span class="o">=</span> <span class="nv">prev</span> <span class="nv">x</span>
<span class="nv">t</span> <span class="nv">prev</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="p">(</span><span class="s">&quot;not&quot;</span><span class="o">:</span><span class="nv">ops</span><span class="p">)</span> <span class="o">=</span> <span class="nv">t</span> <span class="nv">prev</span> <span class="p">(</span><span class="nv">not</span> <span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="nv">ops</span>
<span class="nv">t</span> <span class="nv">prev</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="p">(</span><span class="s">&quot;and&quot;</span><span class="o">:</span><span class="nv">ops</span><span class="p">)</span> <span class="o">=</span> <span class="nv">t</span> <span class="p">(</span><span class="nv">prev</span> <span class="nv">x</span> <span class="o">&amp;&amp;</span><span class="p">)</span> <span class="nv">xs</span>  <span class="nv">ops</span>
<span class="nv">t</span> <span class="nv">prev</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="p">(</span><span class="s">&quot;or&quot;</span> <span class="o">:</span><span class="nv">ops</span><span class="p">)</span> <span class="o">=</span> <span class="nv">t</span> <span class="p">(</span><span class="nv">prev</span> <span class="nv">x</span> <span class="o">||</span><span class="p">)</span> <span class="nv">xs</span>  <span class="nv">ops</span>

<span class="cm">{-</span>
<span class="cm">*Main&gt; f [&quot;and&quot;,&quot;or&quot;,&quot;not&quot;,&quot;and&quot;]</span>
<span class="cm">[[False,False,False,True]</span>
<span class="cm">,[False,True,False,True]</span>
<span class="cm">,[True,False,False,True]</span>
<span class="cm">,[True,True,False,True]</span>
<span class="cm">,[True,True,True,True]]</span>
<span class="cm">-}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081204193937/http://ja.doukaku.org/comment/2145/addtag/" class="addtag" id="addtag_2145">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081204193937/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2145/download/">
		download code
      </a>]
	  [<a href="/web/20081204193937/http://ja.doukaku.org/comment/2145/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2145"
  >-</span><span
  class="button yellow"
  id="rating_z_2145"
  >0</span><span 
  class="button green"
  id="rating_p_2145"
  >+</span></s>




<!--
     FILE ARCHIVED ON 19:39:37 Dec 4, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:48:20 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
