
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
整数の漢数字表記
どう書く？org </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20080225222953cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20080225222953cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20080225222953cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
<meta name="robots" content="noindex,nofollow">

    <!--<script src="/web/20080225222953/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20080225222953/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20080225222953js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20080225222953js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20080225222953js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20080225222953js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app10.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/38\/flatten\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "25";
var displayMonth = "Feb";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/38/flatten/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20080225222953" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20071222032306/http://ja.doukaku.org/38/flatten/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="22 Dec 2007"><strong>DEC</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 22:29:53 Feb 25, 2008">FEB</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Mar
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20071222032306/http://ja.doukaku.org/38/flatten/" title="3:23:06 Dec 22, 2007" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 22:29:53 Feb 25, 2008">25</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2007
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 22:29:53 Feb 25, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2009
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20080225222953*/http://ja.doukaku.org/38/flatten/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>3 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">13 May 07 - 25 Feb 08</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000010000001_2008:1:010000000000_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20080225222953/http://ja.doukaku.org/">どう書く？org</a><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png' alt=お題(出題済み)>
<a href="/web/20080225222953/http://ja.doukaku.org/38/">整数の漢数字表記</a>
</h2>

    





<div class="comment" id="comment3394">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3394/">#3394</a>(<script language="JavaScript">print_time(new Date("2007/08/03 11:32 GMT"));</script><noscript>2007/08/03 11:32 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  キーボードから正の整数を入力すると、それを漢数字で表示するプログラムを作ってください☆
例えば「1732050807568877」なら「千七百三十二兆 五百八億 七百五十六万 八千八百七十七」といった感じです☆
「一七三二兆 〇五〇八億 〇七五六万 八八七七」ではダメですよ＾＾；
<p>
このお題は匿名での投稿です。
与えられる整数の範囲は一京未満(10000000000000000未満)としたいと思います。
ご投稿ありがとうございます。
<p>
2年前のLL Day&Nightの「キミならどう書く」で、
これ専用のCPANモジュールが作られていたような記憶があるので
勝手にPerlからの挑戦状とみなしておきます(笑)
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3394/addtag/" class="addtag" id="addtag_3394">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3394"
  >-</span><span
  class="button yellow"
  id="rating_z_3394"
  >0</span><span 
  class="button green"
  id="rating_p_3394"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/3394/">
  返信
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20080225222953/http://ja.doukaku.org/38/post_comment/">
投稿する
</a>
</div>


<h2>投稿されたコメント - フラット表示</h2>
<a href="/web/20080225222953/http://ja.doukaku.org/38/nested/">ネスト表示</a>
<a href="/web/20080225222953/http://ja.doukaku.org/38/">非表示</a> 


  
  




<div class="comment" id="comment1777">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/101/" target="_top">沢渡 みかげ</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1777/">#1777</a>(<script language="JavaScript">print_time(new Date("2007/08/03 12:17 GMT"));</script><noscript>2007/08/03 12:17 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>初の1番乗り？
きれいなコードではないですが．．．

&gt; perl suuzi.pl 1732050807568877
千七百三十二兆五百八億七百五十六万八千八百七十七

</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span>

<span class="k">my</span> <span class="nv">$num</span> <span class="o">=</span> <span class="nv">$ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="k">my</span> <span class="nv">@name0</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="sx">qw(一 二 三 四 五 六 七 八 九)</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">@name1</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="sx">qw(十 百 千)</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">@name2</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="sx">qw(万 億 兆)</span><span class="p">);</span>

<span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$res</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="nv">$num</span> <span class="o">=~</span> <span class="sr">s/(\d)$//</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">my</span> <span class="nv">$d</span> <span class="o">=</span> <span class="nv">$1</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nv">$d</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$name0</span><span class="p">[</span><span class="nv">$d</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$name1</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$res</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">elsif</span><span class="p">(</span><span class="nv">$d</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nv">$i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$name1</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$res</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nv">$i</span> <span class="nv">%</span> <span class="nv">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$j</span><span class="o">++</span><span class="p">;</span>
    <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$name2</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$res</span> <span class="k">if</span><span class="p">(</span><span class="nv">$num</span> <span class="ow">ne</span> <span class="s">&#39;&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">print</span> <span class="nv">$res</span><span class="p">,</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1777/addtag/" class="addtag" id="addtag_1777">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1777/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1777/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1777"
  >-</span><span
  class="button yellow"
  id="rating_z_1777"
  >0</span><span 
  class="button green"
  id="rating_p_1777"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1777/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1777/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1778">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1778/">#1778</a>(<script language="JavaScript">print_time(new Date("2007/08/03 12:22 GMT"));</script><noscript>2007/08/03 12:22 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">num2K</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">u</span><span class="s">&quot;零&quot;</span>
  <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
  
  <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">reversed</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)))):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">:</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2K</span><span class="o">.</span><span class="n">table2</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">+</span><span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">u</span><span class="s">&quot; &quot;</span> <span class="ow">or</span> <span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2K</span><span class="o">.</span><span class="n">table2</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)]</span><span class="o">+</span><span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">4</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">v</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">4</span><span class="p">])</span>
  <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">reversed</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">num2K</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;十&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;百&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;千&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;万&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;億&quot;</span><span class="p">,</span><span class="mi">12</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;兆&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;京&quot;</span><span class="p">}</span>
<span class="n">num2K</span><span class="o">.</span><span class="n">table2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;一&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;二&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;三&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;四&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;五&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;六&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;七&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;八&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;九&quot;</span><span class="p">}</span>



<span class="k">print</span> <span class="n">num2K</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">u</span><span class="s">&quot;&gt;&gt;&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1778/addtag/" class="addtag" id="addtag_1778">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1778/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1778/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1778"
  >-</span><span
  class="button yellow"
  id="rating_z_1778"
  >0</span><span 
  class="button green"
  id="rating_p_1778"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1778/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1778/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1779">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/101/" target="_top">沢渡 みかげ</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1779/">#1779</a>(<script language="JavaScript">print_time(new Date("2007/08/03 12:48 GMT"));</script><noscript>2007/08/03 12:48 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>バグがありました（汗
1の位の1の処理条件が抜けていました．

シャワー浴びていたときにふと気づきましたが，手遅れ．

というわけで一番乗りは無かったことにしていただけないでしょうか．．．（恥</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span>

<span class="k">my</span> <span class="nv">$num</span> <span class="o">=</span> <span class="nv">$ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="k">my</span> <span class="nv">@name0</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="sx">qw(一 二 三 四 五 六 七 八 九)</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">@name1</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="sx">qw(十 百 千)</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">@name2</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="sx">qw(万 億 兆)</span><span class="p">);</span>

<span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$res</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="nv">$num</span> <span class="o">=~</span> <span class="sr">s/(\d)$//</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">my</span> <span class="nv">$d</span> <span class="o">=</span> <span class="nv">$1</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nv">$d</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$name0</span><span class="p">[</span><span class="nv">$d</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$name1</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$res</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">elsif</span><span class="p">(</span><span class="nv">$d</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nv">$i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$name1</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$res</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">elsif</span><span class="p">(</span><span class="nv">$d</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nv">$i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$name0</span><span class="p">[</span><span class="nv">$d</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$res</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nv">$i</span> <span class="nv">%</span> <span class="nv">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$j</span><span class="o">++</span><span class="p">;</span>
    <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nv">$res</span> <span class="o">=</span> <span class="nv">$name2</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$res</span> <span class="k">if</span><span class="p">(</span><span class="nv">$num</span> <span class="ow">ne</span> <span class="s">&#39;&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">print</span> <span class="nv">$res</span><span class="p">,</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1779/addtag/" class="addtag" id="addtag_1779">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1779/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1779/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1779"
  >-</span><span
  class="button yellow"
  id="rating_z_1779"
  >0</span><span 
  class="button green"
  id="rating_p_1779"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1777/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1779/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1779/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1780">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1780/">#1780</a>(<script language="JavaScript">print_time(new Date("2007/08/03 13:10 GMT"));</script><noscript>2007/08/03 13:10 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  日本語コケるのでエスケープしてます。こういうときのためにソースコードのASCII以外をエスケープするスクリプトを作ってあるのですが、役に立ちました。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre>object num2K {
  val table = Map(0-&gt;&quot;&quot;, 1-&gt;&quot;\u5341&quot;,2-&gt;&quot;\u767e&quot;,3-&gt;&quot;\u5343&quot;,4-&gt;&quot;\u4e07&quot;,8-&gt;&quot;\u5104&quot;,12-&gt;&quot;\u5146&quot;,16-&gt;&quot;\u4eac&quot;)
  val table2 = Map(0-&gt;&quot;&quot;,1-&gt;&quot;\u4e00&quot;,2-&gt;&quot;\u4e8c&quot;,3-&gt;&quot;\u4e09&quot;,4-&gt;&quot;\u56db&quot;, 5-&gt;&quot;\u4e94&quot;, 6-&gt;&quot;\u516d&quot;, 7-&gt;&quot;\u4e03&quot;, 8-&gt;&quot;\u516b&quot;, 9-&gt;&quot;\u4e5d&quot;)
  def apply(num:long):String = {
    if(num == 0) return &quot;\u96f6&quot;
    val lst = num.toString.reverse.map(x=&gt;Integer.parseInt(x+&quot;&quot;))
    (0 to lst.length-1).foldLeft(List(&quot;&quot;)){(r, i) =&gt; 
      if(table.contains(i)) {
        table2(lst(i))+table(i)+(if(i&gt;3){&quot; &quot;}else{&quot;&quot;})::r
      }else if(lst(i) &gt; 1){
        table2(lst(i))+table(i%4)::r
      }else if(lst(i) != 0){
        table(i%4)::r
      }else{
        r
      }
    }.mkString(&quot;&quot;)
  }
}

print(&quot;&gt;&gt;&quot;)
println(num2K(readLong))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1780/addtag/" class="addtag" id="addtag_1780">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1780/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1780/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1780"
  >-</span><span
  class="button yellow"
  id="rating_z_1780"
  >0</span><span 
  class="button green"
  id="rating_p_1780"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1780/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1780/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1781">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/320/" target="_top">ApplePedlar</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1781/">#1781</a>(<script language="JavaScript">print_time(new Date("2007/08/03 13:25 GMT"));</script><noscript>2007/08/03 13:25 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  途中からわけがわからなくなりましたが、多分できました。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">Test</span> <span class="o">{</span>
	<span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;args[0] = &quot;</span> <span class="o">+</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
		<span class="n">String</span> <span class="n">res</span> <span class="o">=</span> <span class="n">num2K</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">res</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="k">static</span> <span class="n">String</span><span class="o">[]</span> <span class="n">unitStr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;&quot;</span><span class="o">,</span> <span class="s">&quot;万&quot;</span><span class="o">,</span> <span class="s">&quot;億&quot;</span><span class="o">,</span> <span class="s">&quot;兆&quot;</span><span class="o">,</span> <span class="c">/*&quot;京&quot;, &quot;垓&quot;, </span>
<span class="c">	&quot;穰&quot;, &quot;溝&quot;, &quot;澗&quot;, &quot;正&quot;, &quot;載&quot;, &quot;極&quot;,</span>
<span class="c">	&quot;恒河沙&quot;, &quot;阿僧祇&quot;, &quot;那由他&quot;, &quot;不可思議&quot;, &quot;無量大数&quot;,*/</span> <span class="o">};</span> 
	<span class="k">static</span> <span class="n">String</span><span class="o">[]</span> <span class="n">unitStr2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;千&quot;</span><span class="o">,</span> <span class="s">&quot;百&quot;</span><span class="o">,</span> <span class="s">&quot;十&quot;</span><span class="o">,</span> <span class="o">};</span>
	<span class="k">static</span> <span class="n">String</span> <span class="n">numStr</span> <span class="o">=</span> <span class="s">&quot;零一ニ三四五六七八九&quot;</span><span class="o">;</span>
	<span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="n">num2K</span><span class="o">(</span><span class="kt">long</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">num2K</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="n">num2K</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">Character</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">numStr</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="o">));</span>
		<span class="o">}</span>
		<span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
		<span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="kt">int</span> <span class="n">mod</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">-</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">%</span> <span class="mi">4</span><span class="o">;</span>
			<span class="kt">int</span> <span class="n">div</span> <span class="o">=</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">4</span><span class="o">;</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">div</span> <span class="o">&gt;=</span> <span class="n">unitStr</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
			<span class="o">}</span>
			<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="o">;</span>
			<span class="n">flag</span> <span class="o">|=</span> <span class="n">num</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">;</span>
			
			<span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">mod</span> <span class="o">!=</span> <span class="mi">3</span> <span class="o">||</span> <span class="n">div</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(!</span><span class="n">flag</span> <span class="o">||</span> <span class="n">mod</span> <span class="o">!=</span> <span class="mi">3</span><span class="o">))</span> <span class="o">{</span>
				<span class="k">continue</span><span class="o">;</span>
			<span class="o">}</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">mod</span> <span class="o">!=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="o">!(</span><span class="n">mod</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">div</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">numStr</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">num</span><span class="o">));</span>
			<span class="o">}</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">mod</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">unitStr</span><span class="o">[</span><span class="n">div</span><span class="o">]);</span>
				<span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">unitStr2</span><span class="o">[</span><span class="n">mod</span><span class="o">]);</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1781/addtag/" class="addtag" id="addtag_1781">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1781/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1781/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1781"
  >-</span><span
  class="button yellow"
  id="rating_z_1781"
  >0</span><span 
  class="button green"
  id="rating_p_1781"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1781/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1782">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1782/">#1782</a>(<script language="JavaScript">print_time(new Date("2007/08/03 13:27 GMT"));</script><noscript>2007/08/03 13:27 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>&gt;&gt;10001
一万 千百十一

と表示されます。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1782/addtag/" class="addtag" id="addtag_1782">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1782"
  >-</span><span
  class="button yellow"
  id="rating_z_1782"
  >0</span><span 
  class="button green"
  id="rating_p_1782"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1778/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1782/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1782/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1782/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1783">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1783/">#1783</a>(<script language="JavaScript">print_time(new Date("2007/08/03 13:39 GMT"));</script><noscript>2007/08/03 13:39 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  うわーすみません。これで大丈夫かな？
あと、1000と100は千、百、でいいんですよね、これ。でも一千はありなのかな。とりあえず、10000からは一万とかにしました。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">num2K</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">u</span><span class="s">&quot;零&quot;</span>
  <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
  
  <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">reversed</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)))):</span>
    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
      <span class="k">continue</span>
    <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2K</span><span class="o">.</span><span class="n">table2</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">+</span><span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">u</span><span class="s">&quot; &quot;</span> <span class="ow">or</span> <span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">))</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">or</span> <span class="n">num2K</span><span class="o">.</span><span class="n">table2</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">u</span><span class="s">&quot; &quot;</span> <span class="ow">or</span> <span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2K</span><span class="o">.</span><span class="n">table2</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)]</span><span class="o">+</span><span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">4</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">v</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2K</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">4</span><span class="p">])</span>
  <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">reversed</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">num2K</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;十&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;百&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;千&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;万&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;億&quot;</span><span class="p">,</span><span class="mi">12</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;兆&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;京&quot;</span><span class="p">}</span>
<span class="n">num2K</span><span class="o">.</span><span class="n">table2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;一&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;二&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;三&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;四&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;五&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;六&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;七&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;八&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;九&quot;</span><span class="p">}</span>



<span class="k">print</span> <span class="n">num2K</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">u</span><span class="s">&quot;&gt;&gt;&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1783/addtag/" class="addtag" id="addtag_1783">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1783/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1783/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1783"
  >-</span><span
  class="button yellow"
  id="rating_z_1783"
  >0</span><span 
  class="button green"
  id="rating_p_1783"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1782/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1783/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1783/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1783/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1784">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1784/">#1784</a>(<script language="JavaScript">print_time(new Date("2007/08/03 13:42 GMT"));</script><noscript>2007/08/03 13:42 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  多分できました。終了するときは、CTRL+Zを押してリターンキーを押します。（Windows以外ではもしかしたら違うキーかも）
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></td><td class="code"><div class="highlight"><pre><span class="c"># coding: shift_jis</span>

<span class="k">class</span> <span class="nc">SolveError</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">n</span> <span class="o">%</span> <span class="n">m</span>
        <span class="n">n</span> <span class="o">//=</span> <span class="n">m</span>

<span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SolveError</span><span class="p">(</span><span class="s">&quot;not an integer&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">10000000000000000</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SolveError</span><span class="p">(</span><span class="s">&quot;not in range&quot;</span><span class="p">)</span>

    <span class="n">large</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;万&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;億&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;兆&quot;</span><span class="p">]</span>
    <span class="n">small</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;十&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;百&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;千&quot;</span><span class="p">]</span>
    <span class="n">digit</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;一&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;二&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;三&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;四&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;五&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;六&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;七&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;八&quot;</span><span class="p">,</span> <span class="n">u</span><span class="s">&quot;九&quot;</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">convert</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">i_large</span><span class="p">,</span> <span class="n">n_large</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">split</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">n_large</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i_large</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">u</span><span class="s">&quot; &quot;</span>
                <span class="k">yield</span> <span class="n">large</span><span class="p">[</span><span class="n">i_large</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">i_small</span><span class="p">,</span> <span class="n">n_small</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">split</span><span class="p">(</span><span class="n">n_large</span><span class="p">,</span> <span class="mi">10</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">n_small</span><span class="p">:</span>
                        <span class="k">yield</span> <span class="n">small</span><span class="p">[</span><span class="n">i_small</span><span class="p">]</span>
                        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">n_small</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">i_small</span><span class="p">):</span>
                            <span class="k">yield</span> <span class="n">digit</span><span class="p">[</span><span class="n">n_small</span><span class="p">]</span>
    <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">convert</span><span class="p">())))</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;&gt; &quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">EOFError</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">solve</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">SolveError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;error:&quot;</span><span class="p">,</span> <span class="n">e</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1784/addtag/" class="addtag" id="addtag_1784">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1784/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1784/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1784"
  >-</span><span
  class="button yellow"
  id="rating_z_1784"
  >0</span><span 
  class="button green"
  id="rating_p_1784"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1784/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1788">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/323/" target="_top">tomatsu</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1788/">#1788</a>(<script language="JavaScript">print_time(new Date("2007/08/03 14:12 GMT"));</script><noscript>2007/08/03 14:12 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/pnuts/">
	  Pnuts
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><div class="highlight"><pre>function num2K(num){
  table = {0=&gt;&quot;&quot;, 1=&gt;&quot;十&quot;,2=&gt;&quot;百&quot;,3=&gt;&quot;千&quot;,4=&gt;&quot;万&quot;,8=&gt;&quot;億&quot;,12=&gt;&quot;兆&quot;,16=&gt;&quot;京&quot;}
  table2 = [&quot;&quot;,&quot;一&quot;,&quot;二&quot;,&quot;三&quot;,&quot;四&quot;,&quot;五&quot;,&quot;六&quot;,&quot;七&quot;,&quot;八&quot;,&quot;九&quot;]
  if (num == 0) return &quot;零&quot;
  i = 0
  s = {}
  for (v : project(reverse(string(num)), {a-&gt;a-&#39;0&#39;})){
    if (table.containsKey(i)){
      s.add(table2[v] + table[i] + (i &gt; 3 ? &quot; &quot; : &quot;&quot; ))
    } else if (v &gt; 1){
      s.add(table2[v] + table[i%4])
    } else if (v != 0){
      s.add(table[i%4])
    }
    i++
  }
  join(&quot;&quot;, reverse(s))
}

print(&quot;&gt;&gt;&quot;); flush(); println(num2K(readLine(System.in))) 
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1788/addtag/" class="addtag" id="addtag_1788">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Pnuts/">Pnuts</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/pnuts/">
		Pnuts
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1788/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1788/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1788"
  >-</span><span
  class="button yellow"
  id="rating_z_1788"
  >0</span><span 
  class="button green"
  id="rating_p_1788"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1788/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1790">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/147/" target="_top">es</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1790/">#1790</a>(<script language="JavaScript">print_time(new Date("2007/08/03 14:53 GMT"));</script><noscript>2007/08/03 14:53 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">text</span><span class="o">.</span><span class="nv">tree</span><span class="p">)</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">util</span><span class="o">.</span><span class="nv">list</span><span class="p">)</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">positive-&gt;kansuji</span> <span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">keta-split</span> <span class="nv">n</span> <span class="nv">keta</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">receive</span> <span class="p">(</span><span class="nf">q</span> <span class="nv">r</span><span class="p">)</span> <span class="p">(</span><span class="nf">quotient&amp;remainder</span> <span class="nv">n</span> <span class="nv">keta</span><span class="p">)</span>
             <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">q</span> <span class="nv">keta</span><span class="p">)</span>
                 <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">q</span><span class="p">)</span>
                     <span class="p">(</span><span class="nb">list </span><span class="nv">r</span><span class="p">)</span>
                     <span class="p">(</span><span class="nb">list </span><span class="nv">r</span> <span class="nv">q</span><span class="p">))</span>
                 <span class="p">(</span><span class="nb">cons </span><span class="nv">r</span> <span class="p">(</span><span class="nf">keta-split</span> <span class="nv">q</span> <span class="nv">keta</span><span class="p">)))))</span>
  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">add-tanni</span> <span class="nv">lst</span> <span class="nv">tanni</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">fold</span>
     <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span> <span class="nv">t</span> <span class="nv">l</span><span class="p">)</span>
       <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="k">and </span><span class="p">(</span><span class="nb">equal? </span><span class="mi">1</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">equal? </span><span class="nv">t</span> <span class="s">&quot;&quot;</span><span class="p">)))</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
                         <span class="p">((</span><span class="nb">integer? </span><span class="nv">x</span><span class="p">)</span>
                          <span class="p">(</span><span class="nb">list-ref </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;&quot;</span> <span class="s">&quot;一&quot;</span> <span class="s">&quot;二&quot;</span> <span class="s">&quot;三&quot;</span> <span class="s">&quot;四&quot;</span> <span class="s">&quot;五&quot;</span> <span class="s">&quot;六&quot;</span> <span class="s">&quot;七&quot;</span> <span class="s">&quot;八&quot;</span> <span class="s">&quot;九&quot;</span><span class="p">)</span> <span class="nv">x</span><span class="p">))</span>
                         <span class="p">(</span><span class="k">else </span><span class="nv">x</span><span class="p">))</span>
                   <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nb">equal? </span><span class="mi">0</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">equal? </span><span class="nv">t</span> <span class="s">&quot;&quot;</span><span class="p">)))</span>
                       <span class="s">&quot;&quot;</span>
                       <span class="nv">t</span><span class="p">))</span>
             <span class="nv">l</span><span class="p">))</span>
     <span class="o">&#39;</span><span class="p">()</span> <span class="nv">lst</span> <span class="nv">tanni</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">tree-&gt;string</span>
   <span class="p">(</span><span class="nf">intersperse</span> <span class="s">&quot; &quot;</span> <span class="p">(</span><span class="nf">add-tanni</span> <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
                                      <span class="p">(</span><span class="nf">add-tanni</span> <span class="p">(</span><span class="nf">keta-split</span> <span class="nv">n</span> <span class="mi">10</span><span class="p">)</span>
                                                 <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;&quot;</span> <span class="s">&quot;十&quot;</span> <span class="s">&quot;百&quot;</span> <span class="s">&quot;千&quot;</span><span class="p">)))</span>
                                    <span class="p">(</span><span class="nf">keta-split</span> <span class="nv">n</span> <span class="mi">10000</span><span class="p">))</span>
                               <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;&quot;</span> <span class="s">&quot;万&quot;</span> <span class="s">&quot;億&quot;</span> <span class="s">&quot;兆&quot;</span><span class="p">)))))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1790/addtag/" class="addtag" id="addtag_1790">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/gauche/">gauche</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1790/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1790/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1790"
  >-</span><span
  class="button yellow"
  id="rating_z_1790"
  >0</span><span 
  class="button green"
  id="rating_p_1790"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1790/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1791">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/235/" target="_top">onjo</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1791/">#1791</a>(<script language="JavaScript">print_time(new Date("2007/08/03 15:04 GMT"));</script><noscript>2007/08/03 15:04 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  寝る前にのぞいたらまた増えてる…ペースはやいですね。とりあえずぐっちゃぐっちゃと回答。うごいてるっぽい。

DOUKAKU-38&gt; (number-to-kanji 1732050807568877)
"千七百三十二兆五百八億七百五十六万八千八百七十七"
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><div class="highlight"><pre>(defun number-to-kanji (num)
  (let ((digit   #(&quot;零&quot; &quot;一&quot; &quot;二&quot; &quot;三&quot; &quot;四&quot; &quot;五&quot; &quot;六&quot; &quot;七&quot; &quot;八&quot; &quot;九&quot;))
        (subunit #(&quot;&quot; &quot;十&quot; &quot;百&quot; &quot;千&quot;))
        (unit    #(&quot;&quot; &quot;万&quot; &quot;億&quot; &quot;兆&quot;)))
    (loop for i from 0
          initially (if (= num 0) (return (aref digit 0)))
          for (n m) = (multiple-value-list (floor num 10000)) ; 4 桁ずつ区切る
          until (and (= n 0) (= m 0))
          for value = (loop for j from 0 to 3 ; 位
                            for x = (mod (floor m (expt 10 j)) 10) ; 数字
                            when (/= x 0) ; 零千 零百 零十 対策
                            collect (format nil &quot;~A~A&quot; 
                                            ; 一千 一百 一十 対策
                                            (if (and (= x 1) (&gt; j 0)) &quot;&quot; (aref digit x)) 
                                            (aref subunit j)))
           when value appending (cons (aref unit i) value) into result
           do (setf num n)
           finally (return (apply #&#39;concatenate (cons &#39;string (reverse result)))))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1791/addtag/" class="addtag" id="addtag_1791">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1791/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1791/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1791"
  >-</span><span
  class="button yellow"
  id="rating_z_1791"
  >0</span><span 
  class="button green"
  id="rating_p_1791"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1791/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1792">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/">#1792</a>(<script language="JavaScript">print_time(new Date("2007/08/03 15:27 GMT"));</script><noscript>2007/08/03 15:27 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  昔のコード、漢数字名があるかぎり表示可能
123456789012345678901234567890
=&gt;十二穣三千四百五十六禾予七千八百九十外千二百三十四京五千六百七十八兆九千十二億三千四百五十六万七千八百九十

Data.UTF8 は手製のライブラリ
http://www.sampou.org/cgi-bin/haskell.cgi?nobsun%3autf8
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></td><td class="code"><div class="highlight"><pre><span class="kr">module</span> <span class="n">Main</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">Environment</span>
<span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">List</span>
<span class="kr">import</span> <span class="nv">qualified</span> <span class="n">Data</span><span class="o">.</span><span class="n">UTF8</span> <span class="nv">as</span> <span class="n">U</span>

<span class="nv">main</span> <span class="o">=</span> <span class="kr">do</span> <span class="p">{</span> <span class="nv">a</span><span class="o">:</span><span class="kr">_</span> <span class="o">&lt;-</span> <span class="nv">getArgs</span>
          <span class="p">;</span> <span class="n">U</span><span class="o">.</span><span class="nv">putStrLn</span> <span class="o">$</span> <span class="nv">toKanSuuji</span> <span class="nv">a</span>
          <span class="p">}</span>

<span class="nv">toKan</span><span class="p">,</span><span class="nv">toKan&#39;</span> <span class="o">::</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="n">String</span>
<span class="nv">toKan</span>  <span class="o">=</span> <span class="nv">concat</span> <span class="o">.</span> <span class="nv">reverse</span> <span class="o">.</span><span class="nv">zipWith</span> <span class="nv">mkname</span> <span class="nv">base10000</span> 
       <span class="o">.</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">concat</span> <span class="o">.</span> <span class="nv">reverse</span> <span class="o">.</span> <span class="nv">conv4</span><span class="p">)</span> <span class="o">.</span> <span class="nv">slices</span> <span class="mi">4</span>
<span class="nv">toKan&#39;</span> <span class="o">=</span> <span class="nv">concat</span> <span class="o">.</span> <span class="nv">reverse</span> <span class="o">.</span> <span class="nv">zipWith</span> <span class="nv">mkname</span> <span class="nv">baseBig</span> 
       <span class="o">.</span> <span class="nv">map</span> <span class="nv">toKan</span> <span class="o">.</span> <span class="nv">slices</span> <span class="mi">8</span>

<span class="nv">toKanSuuji</span> <span class="nv">str</span>
 <span class="o">=</span> <span class="kr">case</span> <span class="nv">splitAt</span> <span class="mi">52</span> <span class="o">$</span> <span class="nv">reverse</span> <span class="nv">str</span> <span class="kr">of</span>
     <span class="p">(</span><span class="nv">s</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">toKan</span> <span class="o">$</span> <span class="nv">padding</span> <span class="mi">4</span> <span class="nv">s</span>
     <span class="p">(</span><span class="nv">s</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kr">if</span> <span class="nv">length</span> <span class="nv">b</span> <span class="o">&gt;</span> <span class="mi">40</span>
                 <span class="kr">then</span> <span class="s">&quot;こんな大きな数の漢字数字名は知りません&quot;</span>
                 <span class="kr">else</span> <span class="p">(</span><span class="nv">toKan&#39;</span> <span class="o">$</span> <span class="nv">padding</span> <span class="mi">8</span> <span class="nv">b</span><span class="p">)</span> <span class="o">++</span> <span class="nv">toKan</span> <span class="nv">s</span>
   <span class="kr">where</span>
     <span class="nv">padding</span> <span class="nv">n</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">s</span> <span class="o">++</span> <span class="nv">replicate</span> <span class="p">((</span><span class="nv">n</span> <span class="o">-</span> <span class="p">(</span><span class="nv">length</span> <span class="nv">s</span> <span class="p">`</span><span class="nv">mod</span><span class="p">`</span> <span class="nv">n</span><span class="p">))</span> <span class="p">`</span><span class="nv">mod</span><span class="p">`</span> <span class="nv">n</span><span class="p">)</span> <span class="sc">&#39;0&#39;</span>

<span class="nv">slices</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="nv">a</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[[</span><span class="nv">a</span><span class="p">]]</span>
<span class="nv">slices</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">unfoldr</span> <span class="nv">phi</span>
  <span class="kr">where</span> <span class="nv">phi</span> <span class="p">[]</span> <span class="o">=</span> <span class="n">Nothing</span>
        <span class="nv">phi</span> <span class="nv">xs</span> <span class="o">=</span> <span class="n">Just</span> <span class="o">$</span> <span class="nv">splitAt</span> <span class="nv">n</span> <span class="nv">xs</span>

<span class="nv">base1</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="s">&quot;一&quot;</span><span class="p">,</span><span class="s">&quot;二&quot;</span><span class="p">,</span><span class="s">&quot;三&quot;</span><span class="p">,</span><span class="s">&quot;四&quot;</span><span class="p">,</span><span class="s">&quot;五&quot;</span><span class="p">,</span><span class="s">&quot;六&quot;</span><span class="p">,</span><span class="s">&quot;七&quot;</span><span class="p">,</span><span class="s">&quot;八&quot;</span><span class="p">,</span><span class="s">&quot;九&quot;</span><span class="p">]</span>
<span class="nv">base10</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="s">&quot;十&quot;</span><span class="p">,</span><span class="s">&quot;百&quot;</span><span class="p">,</span><span class="s">&quot;千&quot;</span><span class="p">]</span>
<span class="nv">base10000</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="s">&quot;万&quot;</span><span class="p">,</span><span class="s">&quot;億&quot;</span><span class="p">,</span><span class="s">&quot;兆&quot;</span><span class="p">,</span><span class="s">&quot;京&quot;</span><span class="p">,</span><span class="s">&quot;外&quot;</span><span class="p">,</span><span class="s">&quot;禾予&quot;</span><span class="p">,</span><span class="s">&quot;穣&quot;</span><span class="p">,</span><span class="s">&quot;溝&quot;</span><span class="p">,</span><span class="s">&quot;澗&quot;</span><span class="p">,</span><span class="s">&quot;正&quot;</span><span class="p">,</span><span class="s">&quot;載&quot;</span><span class="p">,</span><span class="s">&quot;極&quot;</span><span class="p">]</span>
<span class="nv">baseBig</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;恒河沙&quot;</span><span class="p">,</span><span class="s">&quot;阿僧祇&quot;</span><span class="p">,</span><span class="s">&quot;那由多&quot;</span><span class="p">,</span><span class="s">&quot;不可思議&quot;</span><span class="p">,</span><span class="s">&quot;無量大数&quot;</span><span class="p">]</span>

<span class="nv">conv4</span> <span class="o">=</span> <span class="nv">zipWith</span> <span class="nv">mkname&#39;</span> <span class="nv">base10</span> <span class="o">.</span> <span class="nv">map</span> <span class="p">((</span><span class="nv">base1</span> <span class="o">!!</span><span class="p">)</span> <span class="o">.</span> <span class="nv">read</span> <span class="o">.</span> <span class="p">(</span><span class="o">:</span><span class="p">[]))</span>

<span class="nv">mkname</span> <span class="s">&quot;&quot;</span> <span class="s">&quot;&quot;</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="nv">mkname</span> <span class="s">&quot;&quot;</span> <span class="nv">d</span> <span class="o">=</span> <span class="nv">d</span>
<span class="nv">mkname</span> <span class="nv">p</span> <span class="s">&quot;&quot;</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="nv">mkname</span> <span class="nv">p</span> <span class="nv">d</span> <span class="o">=</span> <span class="nv">d</span><span class="o">++</span><span class="nv">p</span>

<span class="nv">mkname&#39;</span> <span class="s">&quot;&quot;</span> <span class="s">&quot;&quot;</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="nv">mkname&#39;</span> <span class="s">&quot;&quot;</span> <span class="nv">d</span> <span class="o">=</span> <span class="nv">d</span>
<span class="nv">mkname&#39;</span> <span class="nv">p</span> <span class="s">&quot;&quot;</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="nv">mkname&#39;</span> <span class="nv">p</span> <span class="s">&quot;一&quot;</span> <span class="o">=</span> <span class="nv">p</span>
<span class="nv">mkname&#39;</span> <span class="nv">p</span> <span class="nv">d</span> <span class="o">=</span> <span class="nv">d</span><span class="o">++</span><span class="nv">p</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/addtag/" class="addtag" id="addtag_1792">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Haskell/">Haskell</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1792"
  >-</span><span
  class="button yellow"
  id="rating_z_1792"
  >0</span><span 
  class="button green"
  id="rating_p_1792"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/">
    3
    replies
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1792/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1793">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1793/">#1793</a>(<script language="JavaScript">print_time(new Date("2007/08/03 15:52 GMT"));</script><noscript>2007/08/03 15:52 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  さらに突き詰めてみました。たぶんいけているハズ。

この方法だと、どれだけ単位が増えても単純にテーブルに追加するだけでいけます。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">num2kanji</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">u</span><span class="s">&quot;零&quot;</span>
  <span class="n">num_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
  <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">num_str</span><span class="p">)):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">n</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num2kanji</span><span class="o">.</span><span class="n">table</span> <span class="k">else</span> <span class="n">n</span><span class="o">%</span><span class="mi">4</span>
    <span class="n">sep</span> <span class="o">=</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">3</span> <span class="ow">and</span> <span class="n">u</span><span class="s">&quot; &quot;</span><span class="ow">or</span><span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">num_str</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span><span class="o">!=</span><span class="n">u</span><span class="s">&quot;0000&quot;</span><span class="p">:</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2kanji</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">sep</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2kanji</span><span class="o">.</span><span class="n">table2</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">+</span><span class="n">num2kanji</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">sep</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num2kanji</span><span class="o">.</span><span class="n">table</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">or</span> <span class="n">num2kanji</span><span class="o">.</span><span class="n">table2</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">+</span><span class="n">sep</span><span class="p">)</span>
  <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">reversed</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>

<span class="n">num2kanji</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;十&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;百&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;千&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;万&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;億&quot;</span><span class="p">,</span><span class="mi">12</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;兆&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;京&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;垓&quot;</span><span class="p">,</span><span class="mi">24</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;予&quot;</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;穣&quot;</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;溝&quot;</span><span class="p">,</span> <span class="mi">36</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;潤&quot;</span><span class="p">,</span> <span class="mi">40</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;正&quot;</span><span class="p">,</span> <span class="mi">44</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;載&quot;</span><span class="p">,</span> <span class="mi">48</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;極&quot;</span><span class="p">,</span> <span class="mi">52</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;恒河沙&quot;</span><span class="p">,</span> <span class="mi">56</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;阿僧祇&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;那由多&quot;</span><span class="p">,</span> <span class="mi">64</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;不可思議&quot;</span><span class="p">,</span> <span class="mi">68</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;無量大数&quot;</span><span class="p">}</span>
<span class="n">num2kanji</span><span class="o">.</span><span class="n">table2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;一&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;二&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;三&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;四&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;五&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;六&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;七&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;八&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span><span class="n">u</span><span class="s">&quot;九&quot;</span><span class="p">}</span>

<span class="k">print</span> <span class="n">num2kanji</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">u</span><span class="s">&quot;&gt;&gt;&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1793/addtag/" class="addtag" id="addtag_1793">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1793/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1793/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1793"
  >-</span><span
  class="button yellow"
  id="rating_z_1793"
  >0</span><span 
  class="button green"
  id="rating_p_1793"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1783/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1793/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1793/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1793/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1795">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1795/">#1795</a>(<script language="JavaScript">print_time(new Date("2007/08/03 15:57 GMT"));</script><noscript>2007/08/03 15:57 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  うへぇ 外じゃなくて 垓 ですね。タトしちゃった。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1795/addtag/" class="addtag" id="addtag_1795">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1795"
  >-</span><span
  class="button yellow"
  id="rating_z_1795"
  >0</span><span 
  class="button green"
  id="rating_p_1795"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1795/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1795/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1796">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1796/">#1796</a>(<script language="JavaScript">print_time(new Date("2007/08/03 16:31 GMT"));</script><noscript>2007/08/03 16:31 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ミスってたので修正。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre>object num2K {
  val table = Map(0-&gt;&quot;&quot;, 1-&gt;&quot;\u5341&quot;,2-&gt;&quot;\u767e&quot;,3-&gt;&quot;\u5343&quot;,4-&gt;&quot;\u4e07&quot;,8-&gt;&quot;\u5104&quot;,12-&gt;&quot;\u5146&quot;,16-&gt;&quot;\u4eac&quot;)
  val table2 = Map(0-&gt;&quot;&quot;,1-&gt;&quot;\u4e00&quot;,2-&gt;&quot;\u4e8c&quot;,3-&gt;&quot;\u4e09&quot;,4-&gt;&quot;\u56db&quot;, 5-&gt;&quot;\u4e94&quot;, 6-&gt;&quot;\u516d&quot;, 7-&gt;&quot;\u4e03&quot;, 8-&gt;&quot;\u516b&quot;, 9-&gt;&quot;\u4e5d&quot;)
  def apply(num:long):String = {
    if(num == 0) return &quot;\u96f6&quot;
    val numStr = num.toString.reverse.mkString(&quot;&quot;)
    val lst = numStr.map(x=&gt;Integer.parseInt(x+&quot;&quot;))

    (0 to lst.length-1).foldLeft(List(&quot;&quot;)){(r, n) =&gt; 
      val i = (if(table.contains(n)){n}else{n%4})
      val sep = (if(i&gt;3){&quot; &quot;}else{&quot;&quot;})
      val v = lst(n)
      if(v==0 &amp;&amp; i&gt;3 &amp;&amp; !numStr.substring(n).startsWith(&quot;0000&quot;)) 
        table(i)::sep::r
      else if(v &gt; 1 || (i &gt; 3 &amp;&amp; v == 1))
        table2(v)+table(i)::sep::r
      else if(v &gt; 0)
        (if(table(i) == &quot;&quot;){table2(v)}else{table(i)})::sep::r
      else
        r
    }.mkString(&quot;&quot;).trim
  }
}

while(true) {
  print(&quot;&gt;&gt;&quot;)
  println(num2K(readLong))
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1796/addtag/" class="addtag" id="addtag_1796">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1796/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1796/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1796"
  >-</span><span
  class="button yellow"
  id="rating_z_1796"
  >0</span><span 
  class="button green"
  id="rating_p_1796"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1780/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1796/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1796/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1797">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/304/" target="_top">[1..100]&gt;&gt;=pen</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1797/">#1797</a>(<script language="JavaScript">print_time(new Date("2007/08/03 17:38 GMT"));</script><noscript>2007/08/03 17:38 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>(n - (length s `mod` n)) `mod` n は (- length s) `mod n でよい？
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre><span class="c1">-- 「なんとなくlength使いたくない Maybe大好き のオレが来ましたよ」的には</span>
<span class="c1">-- foo s = slices 4 $ padding 4 s</span>
<span class="c1">-- は</span>
<span class="nv">foo</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">map</span> <span class="p">(</span><span class="nv">fromMaybe</span> <span class="sc">&#39;0&#39;</span><span class="p">))</span> <span class="o">$</span> <span class="nv">takeWhile</span> <span class="p">(</span><span class="nv">isJust</span><span class="o">.</span><span class="nv">head</span><span class="p">)</span>
  <span class="o">$</span> <span class="nv">slices</span> <span class="mi">4</span> <span class="o">$</span> <span class="nv">map</span> <span class="n">Just</span> <span class="nv">s</span> <span class="o">++</span> <span class="nv">repeat</span> <span class="n">Nothing</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1797/addtag/" class="addtag" id="addtag_1797">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1797/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1797/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1797"
  >-</span><span
  class="button yellow"
  id="rating_z_1797"
  >0</span><span 
  class="button green"
  id="rating_p_1797"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1797/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1797/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1802">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1802/">#1802</a>(<script language="JavaScript">print_time(new Date("2007/08/03 19:30 GMT"));</script><noscript>2007/08/03 19:30 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  「恒河沙」以降が10^8ステップになる流儀があるので、もうちょっと面倒では?
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1802/addtag/" class="addtag" id="addtag_1802">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1802"
  >-</span><span
  class="button yellow"
  id="rating_z_1802"
  >0</span><span 
  class="button green"
  id="rating_p_1802"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1793/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1802/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1802/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1802/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1803">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1803/">#1803</a>(<script language="JavaScript">print_time(new Date("2007/08/03 19:53 GMT"));</script><noscript>2007/08/03 19:53 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  たぶん同じ時に書いたScheme版を発掘。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">text</span><span class="o">.</span><span class="nv">tree</span><span class="p">)</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="err">漢数字</span> <span class="err">整数</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define </span><span class="err">桁</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;&quot;</span> <span class="s">&quot;&quot;</span> <span class="s">&quot;弐&quot;</span> <span class="s">&quot;参&quot;</span> <span class="s">&quot;四&quot;</span> <span class="s">&quot;伍&quot;</span> <span class="s">&quot;六&quot;</span> <span class="s">&quot;七&quot;</span> <span class="s">&quot;八&quot;</span> <span class="s">&quot;九&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="k">define </span><span class="err">小位列</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;千&quot;</span> <span class="s">&quot;百&quot;</span> <span class="s">&quot;拾&quot;</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="k">define </span><span class="err">大位列</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;&quot;</span> <span class="s">&quot;万&quot;</span> <span class="s">&quot;億&quot;</span> <span class="s">&quot;兆&quot;</span> <span class="s">&quot;京&quot;</span> <span class="s">&quot;垓&quot;</span> <span class="s">&quot;(禾予)&quot;</span> <span class="s">&quot;穰&quot;</span> <span class="s">&quot;溝&quot;</span> <span class="s">&quot;澗&quot;</span> <span class="s">&quot;正&quot;</span>
                   <span class="s">&quot;載&quot;</span> <span class="s">&quot;極&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="k">define </span><span class="err">特位列</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;恒河砂&quot;</span> <span class="s">&quot;阿僧祇&quot;</span> <span class="s">&quot;那由多&quot;</span> <span class="s">&quot;不可思議&quot;</span> <span class="s">&quot;無量大数&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="k">define </span><span class="err">壱恒河砂</span> <span class="p">(</span><span class="nb">expt </span><span class="mi">10</span> <span class="mi">52</span><span class="p">))</span>
  <span class="p">(</span><span class="k">define </span><span class="err">限界</span> <span class="p">(</span><span class="nb">expt </span><span class="mi">10</span> <span class="mi">92</span><span class="p">))</span>

  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="err">小再帰</span> <span class="err">数</span> <span class="err">単位</span> <span class="err">位列</span><span class="p">)</span>
    <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">zero? </span><span class="err">数</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">())</span>
          <span class="p">((</span><span class="nb">= </span><span class="err">数</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;壱&quot;</span><span class="p">))</span>
          <span class="p">((</span><span class="nb">&gt;= </span><span class="err">数</span> <span class="err">単位</span><span class="p">)</span>
           <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="nb">list-ref </span><span class="err">桁</span> <span class="p">(</span><span class="nb">quotient </span><span class="err">数</span> <span class="err">単位</span><span class="p">))</span> <span class="o">,</span><span class="p">(</span><span class="nb">car </span><span class="err">位列</span><span class="p">)</span>
             <span class="o">,@</span><span class="p">(</span><span class="err">小再帰</span> <span class="p">(</span><span class="nb">modulo </span><span class="err">数</span> <span class="err">単位</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="err">単位</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="err">位列</span><span class="p">))))</span>
          <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="err">小再帰</span> <span class="err">数</span> <span class="p">(</span><span class="nb">/ </span><span class="err">単位</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="err">位列</span><span class="p">)))))</span>

  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="err">大再帰</span> <span class="err">数</span> <span class="err">位列</span><span class="p">)</span>
    <span class="o">`</span><span class="p">(</span><span class="o">,@</span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt;= </span><span class="err">数</span> <span class="mi">10000</span><span class="p">)</span>
            <span class="p">(</span><span class="err">大再帰</span> <span class="p">(</span><span class="nb">quotient </span><span class="err">数</span> <span class="mi">10000</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="err">位列</span><span class="p">))</span>
            <span class="o">&#39;</span><span class="p">())</span>
      <span class="o">,@</span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="p">(</span><span class="nb">modulo </span><span class="err">数</span> <span class="mi">10000</span><span class="p">))</span>
            <span class="o">&#39;</span><span class="p">()</span>
            <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="err">小再帰</span> <span class="p">(</span><span class="nb">modulo </span><span class="err">数</span> <span class="mi">10000</span><span class="p">)</span> <span class="mi">1000</span> <span class="err">小位列</span><span class="p">)</span> <span class="o">,</span><span class="p">(</span><span class="nb">car </span><span class="err">位列</span><span class="p">)))))</span>

  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="err">特大再帰</span> <span class="err">数</span> <span class="err">位列</span><span class="p">)</span>
    <span class="o">`</span><span class="p">(</span><span class="o">,@</span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt;= </span><span class="err">数</span> <span class="mi">100000000</span><span class="p">)</span>
            <span class="p">(</span><span class="err">特大再帰</span> <span class="p">(</span><span class="nb">quotient </span><span class="err">数</span> <span class="mi">100000000</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="err">位列</span><span class="p">))</span>
            <span class="o">&#39;</span><span class="p">())</span>
      <span class="o">,@</span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="p">(</span><span class="nb">modulo </span><span class="err">数</span> <span class="mi">100000000</span><span class="p">))</span>
            <span class="o">&#39;</span><span class="p">()</span>
            <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="err">大再帰</span> <span class="p">(</span><span class="nb">modulo </span><span class="err">数</span> <span class="mi">100000000</span><span class="p">)</span> <span class="err">大位列</span><span class="p">)</span> <span class="o">,</span><span class="p">(</span><span class="nb">car </span><span class="err">位列</span><span class="p">)))))</span>

  <span class="p">(</span><span class="nf">tree-&gt;string</span>
   <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">&gt;= </span><span class="err">整数</span> <span class="err">限界</span><span class="p">)</span> <span class="s">&quot;限界突破&quot;</span><span class="p">)</span>
         <span class="p">((</span><span class="nb">&gt;= </span><span class="err">整数</span> <span class="err">壱恒河砂</span><span class="p">)</span> 
          <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="err">特大再帰</span> <span class="p">(</span><span class="nb">quotient </span><span class="err">整数</span> <span class="err">壱恒河砂</span><span class="p">)</span> <span class="err">特位列</span><span class="p">)</span>
                <span class="p">(</span><span class="err">大再帰</span> <span class="p">(</span><span class="nb">modulo </span><span class="err">整数</span> <span class="err">壱恒河砂</span><span class="p">)</span> <span class="err">大位列</span><span class="p">)))</span>
         <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="err">大再帰</span> <span class="err">整数</span> <span class="err">大位列</span><span class="p">))))</span>
  <span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1803/addtag/" class="addtag" id="addtag_1803">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/gauche/">gauche</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1803/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1803/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1803"
  >-</span><span
  class="button yellow"
  id="rating_z_1803"
  >0</span><span 
  class="button green"
  id="rating_p_1803"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1792/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1803/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1803/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1804">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1804/">#1804</a>(<script language="JavaScript">print_time(new Date("2007/08/04 00:41 GMT"));</script><noscript>2007/08/04 00:41 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  Squeak Smalltalk で。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></td><td class="code"><div class="highlight"><pre>| 数 漢数字 |
数 := 1732050807568877.
漢数字 := &#39;&#39;.
#(&#39;&#39; 万 億 兆 京) do: [:大位 |
    | 大位の数 |
    大位の数 := &#39;&#39;.
    #(&#39;&#39; 十 百 千) do: [:小位 |
        | 小位の数 |
        小位の数 := #(&#39;&#39; 一 二 三 四 五 六 七 八 九) at: 数 \\ 10 + 1.
        数 := 数 // 10.
        小位の数 ifNotEmpty: [
            (小位 notEmpty and: [小位の数 = &#39;一&#39;]) ifTrue: [小位の数 := &#39;&#39;].
            大位の数 := 小位の数, 小位, 大位の数]].
    大位の数 ifNotEmpty: [漢数字 := 大位の数, 大位, 漢数字]].
^漢数字   &quot;=&gt; &#39;千七百三十二兆五百八億七百五十六万八千八百七十七&#39; &quot;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1804/addtag/" class="addtag" id="addtag_1804">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1804/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1804/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1804"
  >-</span><span
  class="button yellow"
  id="rating_z_1804"
  >0</span><span 
  class="button green"
  id="rating_p_1804"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1804/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1809">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/145/" target="_top">kacchi</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1809/">#1809</a>(<script language="JavaScript">print_time(new Date("2007/08/04 08:15 GMT"));</script><noscript>2007/08/04 08:15 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/emacslisp/">
	  Emacs Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>M-x number-to-kanji &lt;RET&gt; 1732050807568877 &lt;RET&gt;
=&gt;千七百三十二兆五百八億七百五十六万八千八百七十七
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></td><td class="code"><div class="highlight"><pre>(require &#39;cl)
(defun number-to-kanji (str)
  (interactive &quot;sNumber: &quot;)
  (and (&gt; (length str) 52) (error &quot;52桁まで&quot;))
  (labels ((nsplit (str)
             (labels ((rev (s) (concat (nreverse (mapcar #&#39;identity s)))))
               (setq str (rev str))
               (let ((start 0) r)
                 (while (string-match &quot;.\\{1,4\\}&quot; str start)
                   (push (match-string 0 str) r)
                   (setq start (match-end 0)))
                 (mapcar #&#39;rev r))))
           (kanji (str)
             (apply #&#39;concat
                    (nreverse
                     (mapcar*
                      #&#39;(lambda (i n)
                          (let ((s (nth (string-to-number n)
                                        &#39;(&quot;〇&quot; &quot;一&quot; &quot;二&quot; &quot;三&quot; &quot;四&quot; &quot;五&quot; &quot;六&quot; &quot;七&quot; &quot;八&quot; &quot;九&quot;))))
                            (and (&gt; i 0) (string= s &quot;一&quot;) (setq s &quot;&quot;))
                            (if (string= s &quot;〇&quot;) &quot;&quot;
                                (concat s (nth i &#39;(&quot;&quot; &quot;十&quot; &quot;百&quot; &quot;千&quot;))))))
                      &#39;(0 1 2 3) (nreverse (mapcar #&#39;string str)))))))
    (let ((l (nreverse (mapcar #&#39;kanji (nsplit str)))))
      (funcall
       (if current-prefix-arg #&#39;insert #&#39;message)
       (apply #&#39;concat
              (nreverse
               (mapcar* #&#39;(lambda (i s)
                            (concat s (if (string= s &quot;&quot;) &quot;&quot;
                                          (nth i &#39;(&quot;&quot; &quot;万&quot; &quot;億&quot; &quot;兆&quot; &quot;京&quot; &quot;垓&quot; &quot;(禾予)&quot; &quot;穣&quot; &quot;溝&quot; &quot;澗&quot; &quot;正&quot; &quot;載&quot; &quot;極&quot;)))))
                        (number-sequence 0 (- (length l) 1)) l)))))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1809/addtag/" class="addtag" id="addtag_1809">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Emacs22/">Emacs22</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/emacslisp/">
		Emacs Lisp
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1809/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1809/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1809"
  >-</span><span
  class="button yellow"
  id="rating_z_1809"
  >0</span><span 
  class="button green"
  id="rating_p_1809"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1809/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1811">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/241/" target="_top">？せんたくいた</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1811/">#1811</a>(<script language="JavaScript">print_time(new Date("2007/08/04 08:32 GMT"));</script><noscript>2007/08/04 08:32 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/sed/">
	  sed
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  4桁区切りでまとめる為に行末に"@"足して、最後に消して。

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre>#!/bin/sed -f
s/$/@/
s/\([0-9]\)\([0-9]\{12\}@\)/\1兆\2/
s/\([0-9]\)\([0-9]\{8\}@\)/\1億\2/
s/\([0-9]\)\([0-9]\{4\}@\)/\1万\2/
s/\([1-9]\)\([0-9][0-9][0-9][兆億万@]\)/\1千\2/g
s/\([1-9]\)\([0-9][0-9][兆億万@]\)/\1百\2/g
s/\([1-9]\)\([0-9][兆億万@]\)/\1十\2/g
s/1\([兆億万@]\)/一\1/g
s/[01]//g
y/23456789/二三四五六七八九/
s/@$//g
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1811/addtag/" class="addtag" id="addtag_1811">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/sed/">
		sed
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1811/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1811/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1811"
  >-</span><span
  class="button yellow"
  id="rating_z_1811"
  >0</span><span 
  class="button green"
  id="rating_p_1811"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1811/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1811/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1812">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/237/" target="_top">talo</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1812/">#1812</a>(<script language="JavaScript">print_time(new Date("2007/08/04 08:38 GMT"));</script><noscript>2007/08/04 08:38 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>クラスにしてみた。それに伴い機能追加。
・漢数字 -&gt; 数字への変換 (内部的に行う)
・マイナス値への対応

演算は BigInteger のものをそのまま流用しています。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">JapaneseNumber</span> <span class="k">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">JapaneseNumber</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="k">private</span> <span class="k">static</span> <span class="k">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">UNIT</span><span class="o">;</span>

    <span class="k">private</span> <span class="k">static</span> <span class="k">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NUM</span><span class="o">;</span>

    <span class="k">private</span> <span class="k">static</span> <span class="k">final</span> <span class="n">String</span> <span class="n">ZERO</span><span class="o">;</span>

    <span class="k">static</span> <span class="o">{</span>
        <span class="n">UNIT</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
        <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">);</span> <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;十&quot;</span><span class="o">);</span> <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="s">&quot;百&quot;</span><span class="o">);</span> <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="s">&quot;千&quot;</span><span class="o">);</span>
        <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="s">&quot;万&quot;</span><span class="o">);</span> <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="s">&quot;億&quot;</span><span class="o">);</span> <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">12</span><span class="o">,</span> <span class="s">&quot;兆&quot;</span><span class="o">);</span> <span class="n">UNIT</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span> <span class="s">&quot;京&quot;</span><span class="o">);</span>
        <span class="c">// and so on.....</span>
        <span class="n">ZERO</span> <span class="o">=</span> <span class="s">&quot;零&quot;</span><span class="o">;</span>
        <span class="n">NUM</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
        <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">);</span> <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;一&quot;</span><span class="o">);</span> <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="s">&quot;二&quot;</span><span class="o">);</span> <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="s">&quot;三&quot;</span><span class="o">);</span>
        <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="s">&quot;四&quot;</span><span class="o">);</span> <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="s">&quot;五&quot;</span><span class="o">);</span> <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="s">&quot;六&quot;</span><span class="o">);</span> <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="s">&quot;七&quot;</span><span class="o">);</span>
        <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="s">&quot;八&quot;</span><span class="o">);</span> <span class="n">NUM</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">9</span><span class="o">,</span> <span class="s">&quot;九&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="n">BigInteger</span> <span class="n">value</span><span class="o">;</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="n">BigInteger</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c">/** 負の数は頭に「負」とつける.&lt;br&gt;ex) -1 = 負一 */</span>
    <span class="k">public</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="n">String</span> <span class="n">jnum</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">decode</span><span class="o">(</span><span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="n">jnum</span><span class="o">).</span><span class="na">reverse</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value</span><span class="o">)));</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="kt">long</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value</span><span class="o">)));</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="n">BigInteger</span> <span class="nf">decode</span><span class="o">(</span><span class="n">String</span> <span class="n">jnum</span><span class="o">)</span> <span class="k">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">minus</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">jnum</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&quot;負&quot;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">minus</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1L</span><span class="o">;</span>
            <span class="n">jnum</span> <span class="o">=</span> <span class="n">jnum</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">jnum</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">BigInteger</span> <span class="n">result</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ZERO</span><span class="o">;</span>
        <span class="n">BigInteger</span> <span class="n">unit</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">;</span>
        <span class="n">BigInteger</span> <span class="n">smallUnit</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">jnum</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">jnum</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
            <span class="n">String</span> <span class="n">next</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">jnum</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">jnum</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">));</span>
            <span class="kt">int</span> <span class="n">key</span> <span class="o">=</span> <span class="n">getKey</span><span class="o">(</span><span class="n">UNIT</span><span class="o">,</span> <span class="n">s</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">unit</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">((</span><span class="kt">long</span><span class="o">)</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">((</span><span class="kt">double</span><span class="o">)</span> <span class="mi">10</span><span class="o">,</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">key</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">smallUnit</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">((</span><span class="kt">long</span><span class="o">)</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">((</span><span class="kt">double</span><span class="o">)</span> <span class="mi">10</span><span class="o">,</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">key</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">NUM</span><span class="o">.</span><span class="na">containsValue</span><span class="o">(</span><span class="n">s</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">((</span><span class="kt">long</span><span class="o">)</span> <span class="n">getKey</span><span class="o">(</span><span class="n">NUM</span><span class="o">,</span> <span class="n">s</span><span class="o">)).</span><span class="na">multiply</span><span class="o">(</span><span class="n">unit</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">smallUnit</span><span class="o">)));</span>
                <span class="n">smallUnit</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">((</span><span class="n">next</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">(!</span><span class="n">NUM</span><span class="o">.</span><span class="na">containsValue</span><span class="o">(</span><span class="n">next</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">getKey</span><span class="o">(</span><span class="n">UNIT</span><span class="o">,</span> <span class="n">next</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">)</span>
                              <span class="o">||</span> <span class="o">(!</span><span class="n">NUM</span><span class="o">.</span><span class="na">containsValue</span><span class="o">(</span><span class="n">next</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">getKey</span><span class="o">(</span><span class="n">UNIT</span><span class="o">,</span> <span class="n">next</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">key</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="o">))</span>
                    <span class="o">&amp;&amp;</span> <span class="n">key</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">unit</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">smallUnit</span><span class="o">));</span>
                <span class="n">smallUnit</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ONE</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">minus</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="k">private</span> <span class="kt">int</span> <span class="n">getKey</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">,</span> <span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">map</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">value</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span> <span class="n">add</span><span class="o">(</span><span class="n">JapaneseNumber</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">val</span><span class="o">.</span><span class="na">value</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span> <span class="n">sub</span><span class="o">(</span><span class="n">JapaneseNumber</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">subtract</span><span class="o">(</span><span class="n">val</span><span class="o">.</span><span class="na">value</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span> <span class="n">mul</span><span class="o">(</span><span class="n">JapaneseNumber</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">val</span><span class="o">.</span><span class="na">value</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span> <span class="n">div</span><span class="o">(</span><span class="n">JapaneseNumber</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">val</span><span class="o">.</span><span class="na">value</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="n">JapaneseNumber</span> <span class="n">rem</span><span class="o">(</span><span class="n">JapaneseNumber</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">remainder</span><span class="o">(</span><span class="n">val</span><span class="o">.</span><span class="na">value</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">compareTo</span><span class="o">(</span><span class="n">JapaneseNumber</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">o</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="k">public</span> <span class="kt">boolean</span> <span class="n">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">JapaneseNumber</span> <span class="o">&amp;&amp;</span>
                <span class="o">((</span><span class="n">JapaneseNumber</span><span class="o">)</span> <span class="n">o</span><span class="o">).</span><span class="na">value</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">hashCode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="k">public</span> <span class="n">String</span> <span class="n">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ZERO</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">ZERO</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">()).</span><span class="na">reverse</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
        <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">minus</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&quot;-&quot;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">minus</span> <span class="o">=</span> <span class="s">&quot;負&quot;</span><span class="o">;</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">)));</span>
            <span class="kt">int</span> <span class="n">key</span> <span class="o">=</span> <span class="n">UNIT</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">?</span> <span class="n">i</span> <span class="o">:</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">4</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">key</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">s</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">4</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;0000&quot;</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">UNIT</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">(</span><span class="n">key</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">UNIT</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">)).</span><span class="na">append</span><span class="o">(</span><span class="n">NUM</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(!</span><span class="n">UNIT</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">)</span> <span class="o">?</span>  <span class="n">UNIT</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">)</span> <span class="o">:</span> <span class="n">NUM</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">n</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">minus</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">reverse</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">JapaneseNumber</span> <span class="n">n1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;748718000431734&quot;</span><span class="o">));</span>
        <span class="n">JapaneseNumber</span> <span class="n">n2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="s">&quot;三&quot;</span><span class="o">);</span>
        <span class="n">JapaneseNumber</span> <span class="n">n3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;-748718000431734&quot;</span><span class="o">));</span>
        <span class="n">JapaneseNumber</span> <span class="n">n4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JapaneseNumber</span><span class="o">(</span><span class="s">&quot;負三&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">n1</span> <span class="o">+</span> <span class="s">&quot; たす &quot;</span> <span class="o">+</span> <span class="n">n4</span> <span class="o">+</span> <span class="s">&quot; は &quot;</span> <span class="o">+</span> <span class="n">n1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">n4</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">n3</span> <span class="o">+</span> <span class="s">&quot; ひく &quot;</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="s">&quot; は &quot;</span> <span class="o">+</span> <span class="n">n3</span><span class="o">.</span><span class="na">sub</span><span class="o">(</span><span class="n">n2</span><span class="o">));</span>

<span class="c">// 実行結果</span>
<span class="c">// 七百四十八兆七千百八十億四十三万千七百三十四 たす 負三 は 七百四十八兆七千百八十億四十三万千七百三十一</span>
<span class="c">// 負七百四十八兆七千百八十億四十三万千七百三十四 ひく 三 は 負七百四十八兆七千百八十億四十三万千七百三十七</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1812/addtag/" class="addtag" id="addtag_1812">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/%E3%83%8D%E3%82%BF/">ネタ</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1812/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1812/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1812"
  >-</span><span
  class="button yellow"
  id="rating_z_1812"
  >0</span><span 
  class="button green"
  id="rating_p_1812"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1812/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1814">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/241/" target="_top">？せんたくいた</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1814/">#1814</a>(<script language="JavaScript">print_time(new Date("2007/08/04 11:34 GMT"));</script><noscript>2007/08/04 11:34 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/sed/">
	  sed
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  一兆一あたりでNG。億と万を取り除かないと。

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre>#!/bin/sed -f
s/$/@/
s/\([0-9]\)\([0-9]\{12\}@\)/\1兆\2/
s/\([0-9]\)\([0-9]\{8\}@\)/\1億\2/
s/\([0-9]\)\([0-9]\{4\}@\)/\1万\2/
s/\([1-9]\)\([0-9][0-9][0-9][兆億万@]\)/\1千\2/g
s/\([1-9]\)\([0-9][0-9][兆億万@]\)/\1百\2/g
s/\([1-9]\)\([0-9][兆億万@]\)/\1十\2/g
s/1\([兆億万@]\)/一\1/g
s/[01]//g
y/23456789/二三四五六七八九/
s/億万/億/
s/兆億/兆/
s/@$//
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1814/addtag/" class="addtag" id="addtag_1814">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/sed/">
		sed
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1814/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1814/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1814"
  >-</span><span
  class="button yellow"
  id="rating_z_1814"
  >0</span><span 
  class="button green"
  id="rating_p_1814"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1811/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1814/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1814/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1815">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/49/" target="_top">iwk</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1815/">#1815</a>(<script language="JavaScript">print_time(new Date("2007/08/04 12:17 GMT"));</script><noscript>2007/08/04 12:17 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/ocaml/">
	  OCaml
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre><span class="k">#</span><span class="n">light</span>
<span class="kr">let</span> <span class="n">nums</span> <span class="k">=</span> <span class="k">[</span><span class="s2">&quot;&quot;</span><span class="k">;</span><span class="s2">&quot;一&quot;</span><span class="k">;</span><span class="s2">&quot;二&quot;</span><span class="k">;</span><span class="s2">&quot;三&quot;</span><span class="k">;</span><span class="s2">&quot;四&quot;</span><span class="k">;</span><span class="s2">&quot;五&quot;</span><span class="k">;</span><span class="s2">&quot;六&quot;</span><span class="k">;</span><span class="s2">&quot;七&quot;</span><span class="k">;</span><span class="s2">&quot;八&quot;</span><span class="k">;</span><span class="s2">&quot;九&quot;</span><span class="k">]</span>
<span class="kr">let</span> <span class="n">ords</span> <span class="k">=</span> <span class="k">[</span><span class="s2">&quot;&quot;</span><span class="k">;</span><span class="s2">&quot;十&quot;</span><span class="k">;</span><span class="s2">&quot;百&quot;</span><span class="k">;</span><span class="s2">&quot;千&quot;</span><span class="k">]</span>
<span class="kr">let</span> <span class="n">us</span> <span class="k">=</span> <span class="k">[</span><span class="s2">&quot;&quot;</span><span class="k">;</span><span class="s2">&quot;万&quot;</span><span class="k">;</span><span class="s2">&quot;億&quot;</span><span class="k">;</span><span class="s2">&quot;兆&quot;</span><span class="k">]</span>

<span class="kr">let</span> <span class="kr">rec</span> <span class="n">zipWith</span> <span class="n">z</span> <span class="n">xs</span> <span class="n">ys</span> <span class="k">=</span>
    <span class="kr">match</span> <span class="n">xs</span><span class="k">,</span><span class="n">ys</span> <span class="kr">with</span>
     <span class="k">|</span> <span class="k">_,[]</span> <span class="k">-&gt;</span> <span class="k">[]</span>
     <span class="k">|</span> <span class="k">[],_</span> <span class="k">-&gt;</span> <span class="k">[]</span>
     <span class="k">|</span> <span class="n">x</span><span class="k">::</span><span class="n">xs&#39;</span><span class="k">,</span><span class="n">y</span><span class="k">::</span><span class="n">ys&#39;</span> <span class="k">-&gt;</span> <span class="k">(</span><span class="n">z</span> <span class="n">x</span> <span class="n">y</span><span class="k">)::(</span><span class="n">zipWith</span> <span class="n">z</span> <span class="n">xs&#39;</span> <span class="n">ys&#39;</span><span class="k">)</span>

<span class="kr">let</span> <span class="n">kanjiName</span> <span class="n">nss</span> <span class="k">=</span>
    <span class="kr">let</span> <span class="n">knss</span> <span class="k">=</span> <span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="k">(</span><span class="n">List</span><span class="k">.</span><span class="n">nth</span> <span class="n">nums</span><span class="k">))</span> <span class="n">nss</span>
    <span class="kr">let</span> <span class="n">rnss</span> <span class="k">=</span> <span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="n">List</span><span class="k">.</span><span class="n">rev</span> <span class="n">knss</span>
    <span class="kr">let</span> <span class="n">named_rnss</span> <span class="k">=</span> <span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="k">(</span><span class="n">zipWith</span> <span class="k">(</span><span class="kr">fun</span> <span class="n">o</span> <span class="n">n</span> <span class="k">-&gt;</span> <span class="n">n</span> <span class="o">^</span> <span class="n">o</span><span class="k">)</span> <span class="n">ords</span><span class="k">)</span> <span class="n">rnss</span>
    <span class="kr">let</span> <span class="n">knss</span> <span class="k">=</span> <span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="n">List</span><span class="k">.</span><span class="n">rev</span> <span class="n">named_rnss</span>
    <span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="k">(</span><span class="n">String</span><span class="k">.</span><span class="n">concat</span> <span class="s2">&quot;&quot;</span><span class="k">)</span> <span class="n">knss</span>
     <span class="k">|&gt;</span> <span class="n">List</span><span class="k">.</span><span class="n">rev</span>
     <span class="k">|&gt;</span> <span class="k">(</span><span class="n">zipWith</span> <span class="k">(</span><span class="kr">fun</span> <span class="n">o</span> <span class="n">n</span> <span class="k">-&gt;</span> <span class="n">n</span> <span class="o">^</span> <span class="n">o</span><span class="k">)</span> <span class="n">us</span><span class="k">)</span>
     <span class="k">|&gt;</span> <span class="n">List</span><span class="k">.</span><span class="n">rev</span>
     <span class="k">|&gt;</span> <span class="n">String</span><span class="k">.</span><span class="n">concat</span> <span class="s2">&quot;&quot;</span>

<span class="kr">let</span> <span class="n">toKanji</span> <span class="n">n</span> <span class="k">=</span>
    <span class="kr">let</span> <span class="kr">rec</span> <span class="n">iterate</span> <span class="n">b</span> <span class="n">res</span> <span class="n">num</span> <span class="k">=</span>
        <span class="kr">if</span> <span class="n">num</span> <span class="k">=</span> <span class="mi">0</span> <span class="kr">then</span> <span class="n">res</span>
        <span class="kr">else</span> <span class="n">iterate</span> <span class="n">b</span> <span class="k">((</span><span class="n">num</span><span class="o">%</span><span class="n">b</span><span class="k">)::</span><span class="n">res</span><span class="k">)</span> <span class="k">(</span><span class="n">num</span><span class="o">/</span><span class="n">b</span><span class="k">)</span>
    <span class="n">List</span><span class="k">.</span><span class="n">map</span> <span class="k">(</span><span class="n">iterate</span> <span class="mi">10</span> <span class="k">[])</span> <span class="k">(</span><span class="n">iterate</span> <span class="mi">10000</span> <span class="k">[]</span> <span class="n">n</span><span class="k">)</span>
    <span class="k">|&gt;</span> <span class="n">kanjiName</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1815/addtag/" class="addtag" id="addtag_1815">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/F%23/">F#</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/ocaml/">
		OCaml
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1815/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1815/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1815"
  >-</span><span
  class="button yellow"
  id="rating_z_1815"
  >0</span><span 
  class="button green"
  id="rating_p_1815"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1815/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1816">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1816/">#1816</a>(<script language="JavaScript">print_time(new Date("2007/08/04 13:17 GMT"));</script><noscript>2007/08/04 13:17 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ありゃそうなんですか・・・日本の単位も奥深いですねえ。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1816/addtag/" class="addtag" id="addtag_1816">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1816"
  >-</span><span
  class="button yellow"
  id="rating_z_1816"
  >0</span><span 
  class="button green"
  id="rating_p_1816"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1802/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1816/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1816/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1836">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/117/" target="_top">katsu</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1836/">#1836</a>(<script language="JavaScript">print_time(new Date("2007/08/04 16:49 GMT"));</script><noscript>2007/08/04 16:49 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/prolog/">
	  Prolog
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>みなさんおひさしぶりです。
数値処理無しで動いています。
差分リストっぽいところは、DCG使ってます。
最後にガード'也'を外すところが格好悪いです。
しかし、prologらしいさって一体なんでしょうね。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><div class="highlight"><pre>:-encoding(&#39;utf8&#39;).

tr(I,R):-atom_chars(I,I1),tr(I1,_,_,R0),delete(R0,&#39;也&#39;,R1),atom_chars(R,R1).

tr([],B2,B1,[]):-trb1(B1),trb2(B2).
tr([I|Is],B2,B1,R):-
        tr(Is,B2s,[B1c|B1],Rs),
        succB2(B1c,B2s,B2),
        trnr(B1c,B2s,Rs,I,R,Rs).

succB2(&#39;千&#39;)--&gt;!,[_].
succB2(_)--&gt;[].

b2(B,Rs)--&gt;{member(B,Rs)},[].
b2(B,_)--&gt;[B].

trnr(_,_,_,&#39;0&#39;)--&gt;!,[].
trnr(&#39; &#39;,[B2|_],R,I)--&gt;trns(I),[],b2(B2,R).
trnr(B1,[B2|_],R,I)--&gt;trns(I),[B1],b2(B2,R).

trns(1)--&gt;!,[].
trns(I)--&gt;trn(I).

                        trn(&#39;1&#39;)--&gt;[].
trn(&#39;2&#39;)--&gt;[&#39;二&#39;].      trn(&#39;3&#39;)--&gt;[&#39;三&#39;].
trn(&#39;4&#39;)--&gt;[&#39;四&#39;].      trn(&#39;5&#39;)--&gt;[&#39;五&#39;].
trn(&#39;6&#39;)--&gt;[&#39;六&#39;].      trn(&#39;7&#39;)--&gt;[&#39;七&#39;].
trn(&#39;8&#39;)--&gt;[&#39;八&#39;].      trn(&#39;9&#39;)--&gt;[&#39;九&#39;].

trb1(L):-L=[&#39; &#39;,&#39;十&#39;,&#39;百&#39;,&#39;千&#39;|L].

trb2([&#39;也&#39;,&#39;万&#39;,&#39;億&#39;,&#39;兆&#39;]).

:-tr(&#39;1732050807568877&#39;,X),writeln(X).
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1836/addtag/" class="addtag" id="addtag_1836">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/SWI-Prolog/">SWI-Prolog</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/prolog/">
		Prolog
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1836/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1836/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1836"
  >-</span><span
  class="button yellow"
  id="rating_z_1836"
  >0</span><span 
  class="button green"
  id="rating_p_1836"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1836/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1848">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/25/" target="_top">hamano</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1848/">#1848</a>(<script language="JavaScript">print_time(new Date("2007/08/04 19:06 GMT"));</script><noscript>2007/08/04 19:06 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>「1732050807568877」 は正しく表示されますがその他のケースに自信が無いです^^;</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#include &lt;ctype.h&gt;</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">knum</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;&quot;</span> <span class="p">,</span> <span class="s">&quot;一&quot;</span><span class="p">,</span> <span class="s">&quot;二&quot;</span><span class="p">,</span> <span class="s">&quot;三&quot;</span><span class="p">,</span> <span class="s">&quot;四&quot;</span><span class="p">,</span> <span class="s">&quot;五&quot;</span><span class="p">,</span> <span class="s">&quot;六&quot;</span><span class="p">,</span> <span class="s">&quot;七&quot;</span><span class="p">,</span> <span class="s">&quot;八&quot;</span><span class="p">,</span> <span class="s">&quot;九&quot;</span><span class="p">};</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">ksuffix</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;十&quot;</span><span class="p">,</span> <span class="s">&quot;百&quot;</span><span class="p">,</span> <span class="s">&quot;千&quot;</span><span class="p">};</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">ksuffix2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;万&quot;</span><span class="p">,</span> <span class="s">&quot;億&quot;</span><span class="p">,</span> <span class="s">&quot;兆&quot;</span><span class="p">};</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">len</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">num</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">){</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;too few argument</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">num</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">isdigit</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="k">continue</span><span class="p">;</span>
        <span class="k">if</span><span class="p">((</span><span class="n">len</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;1&#39;</span><span class="p">)</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="n">knum</span><span class="p">[</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="n">ksuffix</span><span class="p">[(</span><span class="n">len</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="n">knum</span><span class="p">[</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">]);</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="n">ksuffix2</span><span class="p">[(</span><span class="n">len</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1848/addtag/" class="addtag" id="addtag_1848">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1848/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1848/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1848"
  >-</span><span
  class="button yellow"
  id="rating_z_1848"
  >0</span><span 
  class="button green"
  id="rating_p_1848"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1848/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1873">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/31/" target="_top">smeghead</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1873/">#1873</a>(<script language="JavaScript">print_time(new Date("2007/08/05 13:12 GMT"));</script><noscript>2007/08/05 13:12 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  再帰で書いてみましたが、かなり複雑になってしまいました。loop向きの問題でした。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></td><td class="code"><div class="highlight"><pre>(defvar *kanji-digits* #(&quot;&quot; &quot;一&quot; &quot;二&quot; &quot;三&quot; &quot;四&quot; &quot;五&quot; &quot;六&quot; &quot;七&quot; &quot;八&quot; &quot;九&quot;))
(defvar *kanji-10000-units* #(&quot;&quot; &quot;万 &quot; &quot;億 &quot; &quot;兆 &quot; &quot;京 &quot;))
(defvar *kanji-units* #(&quot;&quot; &quot;十&quot; &quot;百&quot; &quot;千&quot;))

(defun n-kanji (c unit)
  (concatenate 
    &#39;string
    (cond ((and (equal c &quot;1&quot;) (&gt; (mod unit 4) 0)) &quot;&quot;)
          (t (aref *kanji-digits* (parse-integer c))))
    (cond ((not (equal c &quot;0&quot;))
           (aref *kanji-units* (mod unit 4))))))
(defun nnnn-kanji (str unit kanji)
  (if (zerop (length str))
    kanji
    (nnnn-kanji
      (subseq str 1) 
      (1+ unit)
      (concatenate &#39;string (n-kanji (subseq str 0 1) unit) kanji))))
(defun number-kanji (str)
  (if (equal str &quot;0&quot;) &quot;零&quot;
    (labels ((rec (str unit kanji)
                  (let ((len (length str)))
                    (if (zerop len)
                      kanji
                      (let ((sub-str (if (&gt; len 4) (subseq str 0 4) (subseq str 0 len))))
                        (rec (if (&gt; len 4) (subseq str 4) &quot;&quot;)
                             (+ unit 4)
                             (concatenate
                               &#39;string 
                               (if (equal sub-str (make-string (length sub-str) :initial-element #\0))
                                 &quot;&quot;
                                 (concatenate 
                                   &#39;string
                                   (nnnn-kanji sub-str unit &quot;&quot;)
                                   (cond ((&gt; (mod unit 4) 0) &quot;&quot;)
                                         (t (aref *kanji-10000-units* (floor unit 4))))))
                               kanji)))))))
      (rec (reverse str) 0 &quot;&quot;))))

(defun main ()
  (loop as n = (progn
                 (format t &quot;input number:&quot;)
                 (read-line *standard-input* nil nil))
        do (handler-case 
             (progn 
               (if (equal (string-trim &#39;(#\Space #\Tab #\Newline) n) &quot;&quot;) (return))
               (format t &quot;~a~%&quot; (number-kanji n)))
             (error (c) (format t &quot;error! it isn&#39;t integer.~%&quot;)))))
(main)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1873/addtag/" class="addtag" id="addtag_1873">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/clisp/">clisp</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1873/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1873/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1873"
  >-</span><span
  class="button yellow"
  id="rating_z_1873"
  >0</span><span 
  class="button green"
  id="rating_p_1873"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1873/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1890">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/343/" target="_top">shimakuma</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1890/">#1890</a>(<script language="JavaScript">print_time(new Date("2007/08/05 21:42 GMT"));</script><noscript>2007/08/05 21:42 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  正規表現で強引に。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre><span class="nx">alert</span><span class="p">((</span><span class="k">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">n</span><span class="p">)))</span> <span class="k">return</span> <span class="s2">&quot;零&quot;</span><span class="o">;</span>
	<span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)).</span><span class="nx">reverse</span><span class="p">();</span>
	<span class="k">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="s2">&quot;零一二三四五六七八九&quot;</span><span class="o">;</span>
	<span class="k">var</span> <span class="nx">u</span> <span class="o">=</span> <span class="s2">&quot;`万億兆京垓\u79ED穣溝潤正載極恒阿那不無&#39;&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;十百千&quot;</span><span class="p">);</span>
	<span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">--;</span><span class="p">)</span> <span class="nx">r</span> <span class="o">+=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">+</span> <span class="nx">u</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
	<span class="k">return</span> <span class="nx">r</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(?:零[十百千]?){4}.|零[十百千]?|一(?=[十百千])|.*&#39;|`/g</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="p">})(</span><span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mi">1</span><span class="nx">e</span><span class="o">+</span><span class="mi">16</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()))));</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1890/addtag/" class="addtag" id="addtag_1890">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Firefox/">Firefox</a>
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/IE/">IE</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1890/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1890/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1890"
  >-</span><span
  class="button yellow"
  id="rating_z_1890"
  >0</span><span 
  class="button green"
  id="rating_p_1890"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1890/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1898">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/344/" target="_top">jz5</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1898/">#1898</a>(<script language="JavaScript">print_time(new Date("2007/08/06 02:47 GMT"));</script><noscript>2007/08/06 02:47 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/vbnet/">
	  VB.net
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>Longの範囲は対応できてると思う。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></td><td class="code"><div class="highlight"><pre><span class="k">Public</span> <span class="k">Function</span> <span class="n">ConvertToKanjiNumber</span><span class="p">(</span><span class="k">ByVal</span> <span class="n">number</span> <span class="ow">As</span> <span class="kt">Long</span><span class="p">)</span> <span class="ow">As</span> <span class="kt">String</span>

    <span class="k">If</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">Then</span>
        <span class="k">Return</span> <span class="s">&quot;零&quot;</span>
    <span class="k">End</span> <span class="k">If</span>

    <span class="k">Dim</span> <span class="n">unit1</span><span class="p">()</span> <span class="ow">As</span> <span class="kt">String</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;万&quot;</span><span class="p">,</span> <span class="s">&quot;億&quot;</span><span class="p">,</span> <span class="s">&quot;兆&quot;</span><span class="p">,</span> <span class="s">&quot;京&quot;</span><span class="p">}</span>
    <span class="k">Dim</span> <span class="n">unit2</span><span class="p">()</span> <span class="ow">As</span> <span class="kt">String</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;十&quot;</span><span class="p">,</span> <span class="s">&quot;百&quot;</span><span class="p">,</span> <span class="s">&quot;千&quot;</span><span class="p">}</span>
    <span class="k">Dim</span> <span class="n">kjnum</span> <span class="ow">As</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;一二三四五六七八九&quot;</span>

    <span class="k">Dim</span> <span class="n">numStr</span> <span class="ow">As</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">number</span><span class="p">.</span><span class="n">ToString</span>
    <span class="k">Dim</span> <span class="n">length</span> <span class="ow">As</span> <span class="kt">Integer</span>

    <span class="k">Dim</span> <span class="n">sb</span> <span class="ow">As</span> <span class="k">New</span> <span class="n">System</span><span class="p">.</span><span class="n">Text</span><span class="p">.</span><span class="n">StringBuilder</span>
    <span class="k">Dim</span> <span class="n">appended</span> <span class="ow">As</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="k">False</span>

    <span class="k">If</span> <span class="n">numStr</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">)</span> <span class="k">Then</span>
        <span class="n">sb</span><span class="p">.</span><span class="n">Append</span><span class="p">(</span><span class="s">&quot;マイナス&quot;</span><span class="p">)</span>
        <span class="n">numStr</span> <span class="o">=</span> <span class="n">numStr</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">End</span> <span class="k">If</span>

    <span class="n">length</span> <span class="o">=</span> <span class="n">numStr</span><span class="p">.</span><span class="n">Length</span>

    <span class="k">For</span> <span class="n">i</span> <span class="ow">As</span> <span class="kt">Integer</span> <span class="o">=</span> <span class="n">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">To</span> <span class="mi">0</span> <span class="k">Step</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">Dim</span> <span class="n">n</span> <span class="ow">As</span> <span class="kt">Integer</span> <span class="o">=</span> <span class="k">CInt</span><span class="p">(</span><span class="n">numStr</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

        <span class="k">If</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">OrElse</span> <span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="mi">1</span> <span class="ow">AndAlso</span> <span class="p">(</span><span class="n">i</span> <span class="ow">Mod</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">Then</span>
            <span class="n">sb</span><span class="p">.</span><span class="n">Append</span><span class="p">(</span><span class="n">kjnum</span><span class="p">.</span><span class="n">Chars</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">appended</span> <span class="o">=</span> <span class="k">True</span>
        <span class="k">End</span> <span class="k">If</span>

        <span class="k">If</span> <span class="n">n</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span> <span class="ow">AndAlso</span> <span class="p">(</span><span class="n">i</span> <span class="ow">Mod</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">Then</span>
            <span class="n">sb</span><span class="p">.</span><span class="n">Append</span><span class="p">(</span><span class="n">unit2</span><span class="p">(</span><span class="n">i</span> <span class="ow">Mod</span> <span class="mi">4</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">appended</span> <span class="o">=</span> <span class="k">True</span>
        <span class="k">End</span> <span class="k">If</span>

        <span class="k">If</span> <span class="n">appended</span> <span class="ow">AndAlso</span> <span class="n">i</span> <span class="o">\</span> <span class="mi">4</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">AndAlso</span> <span class="p">(</span><span class="n">i</span> <span class="ow">Mod</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">Then</span>
            <span class="n">sb</span><span class="p">.</span><span class="n">Append</span><span class="p">(</span><span class="n">unit1</span><span class="p">(</span><span class="n">i</span> <span class="o">\</span> <span class="mi">4</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">appended</span> <span class="o">=</span> <span class="k">False</span>
        <span class="k">End</span> <span class="k">If</span>

    <span class="k">Next</span>

    <span class="k">Return</span> <span class="n">sb</span><span class="p">.</span><span class="n">ToString</span>

<span class="k">End</span> <span class="k">Function</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1898/addtag/" class="addtag" id="addtag_1898">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/vbnet/">
		VB.net
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1898/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1898/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1898"
  >-</span><span
  class="button yellow"
  id="rating_z_1898"
  >0</span><span 
  class="button green"
  id="rating_p_1898"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1898/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1901">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/61/" target="_top">kaorun</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1901/">#1901</a>(<script language="JavaScript">print_time(new Date("2007/08/06 02:58 GMT"));</script><noscript>2007/08/06 02:58 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/other/">
	  Other
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>10桁までしか行けないけど、まーたまにはVBA(Word)があってもいいじゃまいか...。

(ちなみに、手作業で入れるときは、文書内でCtrl + F9を押下、{}が出たら、FILLIN  "Enter Number"  \* DBNUM2 を入力。F9押下)</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3</pre></td><td class="code"><div class="highlight"><pre>Sub InsertDBNum2()
    Selection.Fields.Add Range:=Selection.Range, Type:=wdFieldFillIn, Text:=&quot;&quot;&quot;数値を入力&quot;&quot;  \* DBNUM2&quot;, PreserveFormatting:=False
End Sub
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1901/addtag/" class="addtag" id="addtag_1901">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/FieldCode/">FieldCode</a>
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/VBA/">VBA</a>
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Word/">Word</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/other/">
		Other
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1901/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1901/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1901"
  >-</span><span
  class="button yellow"
  id="rating_z_1901"
  >0</span><span 
  class="button green"
  id="rating_p_1901"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1901/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1904">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/172/" target="_top">cats</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1904/">#1904</a>(<script language="JavaScript">print_time(new Date("2007/08/06 03:33 GMT"));</script><noscript>2007/08/06 03:33 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Program</span>
<span class="k">{</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
  <span class="k">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Number2Kanji</span><span class="p">(</span><span class="m">1732050807568877</span><span class="p">));</span>
  <span class="k">}</span>
  <span class="k">static</span> <span class="kt">string</span> <span class="nf">Number2Kanji</span><span class="p">(</span><span class="kt">long</span> <span class="n">n</span><span class="p">)</span>
  <span class="k">{</span>
    <span class="kt">string</span><span class="p">[]</span> <span class="n">ss</span> <span class="p">=</span> <span class="k">{</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;万&quot;</span><span class="p">,</span> <span class="s">&quot;億&quot;</span><span class="p">,</span> <span class="s">&quot;兆&quot;</span> <span class="k">}</span><span class="p">;</span>
    <span class="kt">string</span><span class="p">[]</span> <span class="n">tt</span> <span class="p">=</span> <span class="k">{</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;十&quot;</span><span class="p">,</span> <span class="s">&quot;百&quot;</span><span class="p">,</span> <span class="s">&quot;千&quot;</span> <span class="k">}</span><span class="p">;</span>
    <span class="kt">string</span><span class="p">[]</span> <span class="n">nn</span> <span class="p">=</span> <span class="k">{</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;二&quot;</span><span class="p">,</span> <span class="s">&quot;三&quot;</span><span class="p">,</span> <span class="s">&quot;四&quot;</span><span class="p">,</span> <span class="s">&quot;五&quot;</span><span class="p">,</span> <span class="s">&quot;六&quot;</span><span class="p">,</span> <span class="s">&quot;七&quot;</span><span class="p">,</span> <span class="s">&quot;八&quot;</span><span class="p">,</span> <span class="s">&quot;九&quot;</span> <span class="k">}</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">s</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">k</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">n</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
    <span class="k">{</span>
    <span class="kt">int</span> <span class="n">m</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">n</span> <span class="p">%</span> <span class="m">10000</span><span class="p">);</span>
    <span class="n">n</span> <span class="p">/=</span> <span class="m">10000</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">t</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">m</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
    <span class="k">{</span>
      <span class="kt">string</span> <span class="n">u</span> <span class="p">=</span> <span class="n">tt</span><span class="p">[</span><span class="n">l</span><span class="p">++];</span>
      <span class="kt">int</span> <span class="n">q</span> <span class="p">=</span> <span class="n">m</span> <span class="p">%</span> <span class="m">10</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">q</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="n">u</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">q</span> <span class="p">==</span> <span class="m">1</span> <span class="p">&amp;&amp;</span> <span class="n">l</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span> <span class="n">u</span> <span class="p">=</span> <span class="s">&quot;一&quot;</span><span class="p">;</span>
      <span class="n">t</span> <span class="p">=</span> <span class="n">nn</span><span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="p">+</span> <span class="n">u</span> <span class="p">+</span> <span class="n">t</span><span class="p">;</span>
      <span class="n">m</span> <span class="p">/=</span> <span class="m">10</span><span class="p">;</span>
    <span class="k">}</span>
      <span class="n">s</span> <span class="p">=</span> <span class="n">t</span> <span class="p">+</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">?</span> <span class="s">&quot;&quot;</span> <span class="p">:</span> <span class="n">ss</span><span class="p">[</span><span class="n">k</span><span class="p">++])</span> <span class="p">+</span> <span class="n">s</span><span class="p">;</span>
    <span class="k">}</span>
    <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">?</span> <span class="s">&quot;零&quot;</span> <span class="p">:</span> <span class="n">s</span><span class="p">;</span>
  <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1904/addtag/" class="addtag" id="addtag_1904">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1904/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1904/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1904"
  >-</span><span
  class="button yellow"
  id="rating_z_1904"
  >0</span><span 
  class="button green"
  id="rating_p_1904"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1904/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1904/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1912">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/344/" target="_top">jz5</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1912/">#1912</a>(<script language="JavaScript">print_time(new Date("2007/08/06 04:54 GMT"));</script><noscript>2007/08/06 04:54 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  10000とかだと うまくいかないようです。
n % 10000が0だと桁の単位が上がらないのかな？
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1912/addtag/" class="addtag" id="addtag_1912">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1912"
  >-</span><span
  class="button yellow"
  id="rating_z_1912"
  >0</span><span 
  class="button green"
  id="rating_p_1912"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1904/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1912/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1912/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1945">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/232/" target="_top">kkobayashi</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1945/">#1945</a>(<script language="JavaScript">print_time(new Date("2007/08/06 14:50 GMT"));</script><noscript>2007/08/06 14:50 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/r/">
	  R
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>いろいろな書き方があって面白いですね。
Rで書くならmatrixでしょうか。
(n x 4)のmatrixを作って、単位を穴埋めしています。

あまり大きな数を数値のまま入れると扱えないので（Rの仕様っぽい）
文字で入れる必要があります。

&gt; japanese.expression(1732050807568877)
[1] "千七百三十二兆五百八億七百五十六万八千八百七十七"
&gt; japanese.expression(1111111111111111)
[1] "千百十一兆千百十一億千百十一万千百十一"
&gt; japanese.expression(9999999999999999) # =&gt; 1e+16になる
[1] "一万NA千NA百十六"
Warning message:
 強制変換により NA が生成されました in:
as.integer.default(rev(unlist(strsplit(as.character(x), ""))))
&gt; japanese.expression("9999999999999999")
[1] "九千九百九十九兆九千九百九十九億九千九百九十九万九千九百九十九"</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre>japanese.expression &lt;- function(x){
   if(x == &quot;0&quot;) return(&quot;零&quot;)
   list1 &lt;- c(&quot;&quot;, &quot;一&quot;, &quot;二&quot;, &quot;三&quot;, &quot;四&quot;, &quot;五&quot;, &quot;六&quot;, &quot;七&quot;, &quot;八&quot;, &quot;九&quot;)
   list2 &lt;- c(&quot;&quot;, &quot;十&quot;, &quot;百&quot;, &quot;千&quot;)
   list3 &lt;- c(&quot;&quot;, &quot;万&quot;, &quot;億&quot;, &quot;兆&quot;)

   number   &lt;- as.integer(rev(unlist(strsplit(as.character(x), &quot;&quot;))))
   number   &lt;- matrix(c(number, numeric((4-length(number))%%4)), 4)
   list2mat &lt;- matrix(list2, nrow(number), ncol(number))
   list2mat[number==0] &lt;- &quot;&quot;
   number[2:4,][number[2:4,] == 1] &lt;- 0
   paste(rev(paste(rbind(list3[1:ncol(number)], apply(number, 2, function(n)(list1[n+1]))),
                   rbind(&quot;&quot;, list2mat), sep=&quot;&quot;)), collapse=&quot;&quot;)
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1945/addtag/" class="addtag" id="addtag_1945">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/r/">
		R
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1945/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1945/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1945"
  >-</span><span
  class="button yellow"
  id="rating_z_1945"
  >0</span><span 
  class="button green"
  id="rating_p_1945"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1945/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1963">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/153/" target="_top">Mistfeal</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1963/">#1963</a>(<script language="JavaScript">print_time(new Date("2007/08/07 04:29 GMT"));</script><noscript>2007/08/07 04:29 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/php/">
	  PHP
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  PHP4だと str_split が使えないので自作しました。PHP5の場合は素直に str_split を使ってください。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">Arab2Kan</span><span class="p">(</span><span class="nv">$num</span><span class="p">)</span> <span class="p">{</span>
	<span class="nv">$num_ary</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;一&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;二&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;三&quot;</span><span class="p">,</span><span class="s2">&quot;4&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;四&quot;</span><span class="p">,</span><span class="s2">&quot;5&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;五&quot;</span><span class="p">,</span><span class="s2">&quot;6&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;六&quot;</span><span class="p">,</span><span class="s2">&quot;7&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;七&quot;</span><span class="p">,</span><span class="s2">&quot;8&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;八&quot;</span><span class="p">,</span><span class="s2">&quot;9&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;九&quot;</span><span class="p">);</span>
	<span class="nv">$dig_ary</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;十&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;百&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;千&quot;</span><span class="p">);</span>
	<span class="nv">$unt_ary</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;万&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;億&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;兆&quot;</span><span class="p">);</span>
	<span class="nv">$splt_num</span> <span class="o">=</span> <span class="nx">str_split4</span><span class="p">(</span><span class="nf">strrev</span><span class="p">(</span><span class="nv">$num</span><span class="p">),</span><span class="m">4</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nv">$i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nv">$unit</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
		<span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">=</span> <span class="o">@</span><span class="nx">str_split4</span><span class="p">(</span><span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">]);</span>
		<span class="k">for</span> <span class="p">(</span> <span class="nv">$j</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">;</span> <span class="nv">$j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;0&quot;</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;1&quot;</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nv">$unit</span> <span class="o">=</span> <span class="nv">$num_ary</span><span class="p">[</span><span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]]</span><span class="o">.</span><span class="nv">$dig_ary</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">.</span><span class="nv">$unit</span><span class="p">;</span>
				<span class="p">}</span><span class="k">elseif</span> <span class="p">(</span> <span class="nv">$i</span> <span class="o">==</span> <span class="m">0</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nv">$unit</span> <span class="o">=</span> <span class="nv">$num_ary</span><span class="p">[</span><span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]]</span><span class="o">.</span><span class="nv">$dig_ary</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">.</span><span class="nv">$unit</span><span class="p">;</span>
				<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
					<span class="nv">$unit</span> <span class="o">=</span> <span class="nv">$dig_ary</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">.</span><span class="nv">$unit</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="nv">$unit</span> <span class="o">.=</span> <span class="nv">$unt_ary</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
		<span class="nv">$rtn</span> <span class="o">=</span> <span class="nv">$unit</span><span class="o">.</span><span class="nv">$rtn</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nv">$rtn</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">str_split4</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span><span class="nv">$div</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nv">$div</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nv">$up</span> <span class="o">=</span> <span class="nv">$div</span><span class="p">;</span>
	<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
		<span class="nv">$up</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nv">$i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nf">strlen</span><span class="p">(</span><span class="nv">$val</span><span class="p">);</span> <span class="nv">$i</span> <span class="o">+=</span> <span class="nv">$up</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nv">$rtn</span><span class="p">[]</span> <span class="o">=</span> <span class="nf">substr</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span><span class="nv">$i</span><span class="p">,</span><span class="nv">$up</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nv">$rtn</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nx">Arab2Kan</span><span class="p">(</span><span class="s2">&quot;1732050807568877&quot;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1963/addtag/" class="addtag" id="addtag_1963">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/php/">
		PHP
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1963/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1963/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1963"
  >-</span><span
  class="button yellow"
  id="rating_z_1963"
  >0</span><span 
  class="button green"
  id="rating_p_1963"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1963/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1963/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1965">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/153/" target="_top">Mistfeal</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1965/">#1965</a>(<script language="JavaScript">print_time(new Date("2007/08/07 04:45 GMT"));</script><noscript>2007/08/07 04:45 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  バグを発見したので修正します。
14行目を以下に置き換えてください。

}elseif ( $i == 0 &amp;&amp; $j == 0 ) {

テストはちゃんとやりましょうorz
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1965/addtag/" class="addtag" id="addtag_1965">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1965"
  >-</span><span
  class="button yellow"
  id="rating_z_1965"
  >0</span><span 
  class="button green"
  id="rating_p_1965"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1963/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1965/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/1965/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1965/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1966">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/153/" target="_top">Mistfeal</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1966/">#1966</a>(<script language="JavaScript">print_time(new Date("2007/08/07 04:50 GMT"));</script><noscript>2007/08/07 04:50 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/php/">
	  PHP
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  バグにバグを重ねてるし・・・orz
これが正解です。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">Arab2Kan</span><span class="p">(</span><span class="nv">$num</span><span class="p">)</span> <span class="p">{</span>
	<span class="nv">$num_ary</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;一&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;二&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;三&quot;</span><span class="p">,</span><span class="s2">&quot;4&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;四&quot;</span><span class="p">,</span><span class="s2">&quot;5&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;五&quot;</span><span class="p">,</span><span class="s2">&quot;6&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;六&quot;</span><span class="p">,</span><span class="s2">&quot;7&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;七&quot;</span><span class="p">,</span><span class="s2">&quot;8&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;八&quot;</span><span class="p">,</span><span class="s2">&quot;9&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;九&quot;</span><span class="p">);</span>
	<span class="nv">$dig_ary</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;十&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;百&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;千&quot;</span><span class="p">);</span>
	<span class="nv">$unt_ary</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;万&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;億&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;兆&quot;</span><span class="p">);</span>
	<span class="nv">$splt_num</span> <span class="o">=</span> <span class="nx">str_split4</span><span class="p">(</span><span class="nf">strrev</span><span class="p">(</span><span class="nv">$num</span><span class="p">),</span><span class="m">4</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nv">$i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nv">$unit</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
		<span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">=</span> <span class="o">@</span><span class="nx">str_split4</span><span class="p">(</span><span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">]);</span>
		<span class="k">for</span> <span class="p">(</span> <span class="nv">$j</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">;</span> <span class="nv">$j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;0&quot;</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;1&quot;</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nv">$unit</span> <span class="o">=</span> <span class="nv">$num_ary</span><span class="p">[</span><span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]]</span><span class="o">.</span><span class="nv">$dig_ary</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">.</span><span class="nv">$unit</span><span class="p">;</span>
				<span class="p">}</span><span class="k">elseif</span> <span class="p">(</span> <span class="nv">$j</span> <span class="o">==</span> <span class="m">0</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nv">$unit</span> <span class="o">=</span> <span class="nv">$num_ary</span><span class="p">[</span><span class="nv">$splt_num</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]]</span><span class="o">.</span><span class="nv">$dig_ary</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">.</span><span class="nv">$unit</span><span class="p">;</span>
				<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
					<span class="nv">$unit</span> <span class="o">=</span> <span class="nv">$dig_ary</span><span class="p">[</span><span class="nv">$j</span><span class="p">]</span><span class="o">.</span><span class="nv">$unit</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="nv">$unit</span> <span class="o">.=</span> <span class="nv">$unt_ary</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
		<span class="nv">$rtn</span> <span class="o">=</span> <span class="nv">$unit</span><span class="o">.</span><span class="nv">$rtn</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nv">$rtn</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">str_split4</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span><span class="nv">$div</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nv">$div</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nv">$up</span> <span class="o">=</span> <span class="nv">$div</span><span class="p">;</span>
	<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
		<span class="nv">$up</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nv">$i</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nf">strlen</span><span class="p">(</span><span class="nv">$val</span><span class="p">);</span> <span class="nv">$i</span> <span class="o">+=</span> <span class="nv">$up</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nv">$rtn</span><span class="p">[]</span> <span class="o">=</span> <span class="nf">substr</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span><span class="nv">$i</span><span class="p">,</span><span class="nv">$up</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nv">$rtn</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nx">Arab2Kan</span><span class="p">(</span><span class="s2">&quot;1732050807518817&quot;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1966/addtag/" class="addtag" id="addtag_1966">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/php/">
		PHP
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1966/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1966/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1966"
  >-</span><span
  class="button yellow"
  id="rating_z_1966"
  >0</span><span 
  class="button green"
  id="rating_p_1966"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1965/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/1966/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1966/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1967">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1967/">#1967</a>(<script language="JavaScript">print_time(new Date("2007/08/07 05:01 GMT"));</script><noscript>2007/08/07 05:01 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/awk/">
	  awk
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre></td><td class="code"><div class="highlight"><pre>BEGIN {
	split(&quot;一 二 三 四 五 六 七 八 九&quot;, digit, &quot; &quot;)  # digit[1] = &quot;一&quot;
}

/^$/ { exit } # 空行の入力で終了

/^[0-9]*$/ {
	if (length($1) &gt; 16) {
		print &quot;一京以上の数字には対応しておりません。&quot;
		next
	}

	tmp = &quot;0000000000000000&quot; $1
	padded = substr(tmp, length(tmp)-16+1, 16) # 先頭を 0 で埋めてある
	keta = length(padded)

	s = &quot;&quot;

	chou = substr(padded,1,4)
	if (0 + chou) s = s kan(chou) &quot;兆&quot;

	oku  = substr(padded,5,4)
	if (0 + oku) s = s kan(oku) &quot;億&quot;

	man  = substr(padded,9,4)
	if (0 + man) s = s kan(man) &quot;万&quot;

	ichi = substr(padded,13,4)
	if (0 + ichi) s = s kan(ichi)

	if (s ‾ /^$/) s = &quot;零&quot;

	print s
}

function kan(padded,    s,sen,hyaku,juu,ichi)
{
	s = &quot;&quot;

	sen = 0 + substr(padded,1,1)
	if (sen) {
		if (sen &gt; 1) s = s digit[sen]
		s = s &quot;千&quot;
	}

	hyaku = 0 + substr(padded,2,1)
	if (hyaku) {
		if (hyaku &gt; 1) s = s digit[hyaku]
		s = s &quot;百&quot;
	}

	juu = 0 + substr(padded,3,1)
	if (juu) {
		if (juu &gt; 1) s = s digit[juu]
		s = s &quot;十&quot;
	}

	ichi = 0 + substr(padded,4,1)
	if (ichi) s = s digit[ichi]

	return s
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/1967/addtag/" class="addtag" id="addtag_1967">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/awk/">
		awk
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1967/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/1967/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1967"
  >-</span><span
  class="button yellow"
  id="rating_z_1967"
  >0</span><span 
  class="button green"
  id="rating_p_1967"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/1967/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2037">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2037/">#2037</a>(<script language="JavaScript">print_time(new Date("2007/08/08 19:09 GMT"));</script><noscript>2007/08/08 19:09 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  小学校時代、図書室に数の本があって無量大数まで覚えたものだった。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><div class="highlight"><pre><span class="vg">$KCODE</span><span class="o">=</span><span class="s1">&#39;e&#39;</span>
<span class="k">def</span> <span class="nf">under10000</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="n">unit</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;千&quot;</span><span class="p">,</span> <span class="s2">&quot;百&quot;</span><span class="p">,</span> <span class="s2">&quot;十&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="o">]</span>
  <span class="n">nums</span> <span class="o">=</span> <span class="sx">%w[〇 一 二 三 四 五 六 七 八 九]</span>
  <span class="n">n</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="s2">&quot;%04d&quot;</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">to_i</span><span class="p">)</span>
  <span class="k">unless</span> <span class="n">n</span> <span class="o">==</span> <span class="s1">&#39;0000&#39;</span>
    <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">accm</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span>
      <span class="k">case</span> <span class="n">n</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
      <span class="k">when</span> <span class="sc">?0</span>
        <span class="n">accm</span>
      <span class="k">when</span> <span class="sc">?1</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">3</span>
          <span class="n">accm</span> <span class="o">&lt;&lt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">n</span><span class="o">[</span><span class="n">i</span><span class="o">]-</span><span class="sc">?0</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">unit</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
        <span class="k">else</span>
          <span class="n">accm</span> <span class="o">&lt;&lt;</span> <span class="n">unit</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
        <span class="k">end</span>
      <span class="k">else</span>
        <span class="n">accm</span> <span class="o">&lt;&lt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">n</span><span class="o">[</span><span class="n">i</span><span class="o">]-</span><span class="sc">?0</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">unit</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
      <span class="k">end</span>
    <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">japanese</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="k">return</span> <span class="s2">&quot;〇&quot;</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">to_s</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
  <span class="k">raise</span> <span class="s2">&quot;too large number!&quot;</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">52</span>
  <span class="n">unit</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;極&quot;</span><span class="p">,</span> <span class="s2">&quot;載&quot;</span><span class="p">,</span> <span class="s2">&quot;正&quot;</span><span class="p">,</span> <span class="s2">&quot;澗&quot;</span><span class="p">,</span> <span class="s2">&quot;溝&quot;</span><span class="p">,</span> <span class="s2">&quot;穣&quot;</span><span class="p">,</span> <span class="s2">&quot;(禾予)&quot;</span><span class="p">,</span> <span class="s2">&quot;垓&quot;</span><span class="p">,</span> <span class="s2">&quot;京&quot;</span><span class="p">,</span> <span class="s2">&quot;兆&quot;</span><span class="p">,</span> <span class="s2">&quot;億&quot;</span><span class="p">,</span> <span class="s2">&quot;万&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="o">]</span>
  <span class="n">splitted</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">reverse</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/.{1,4}/</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="n">s</span><span class="o">.</span><span class="n">reverse</span><span class="p">}</span><span class="o">.</span><span class="n">reverse</span>
  <span class="n">splitted</span><span class="o">.</span><span class="n">unshift</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="o">[</span><span class="kp">nil</span><span class="o">]*</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="n">splitted</span><span class="o">.</span><span class="n">length</span><span class="p">)))</span>
  <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">length</span><span class="p">)</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">accm</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span>
    <span class="nb">sub</span> <span class="o">=</span> <span class="n">under10000</span><span class="p">(</span><span class="n">splitted</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">sub</span>
      <span class="n">accm</span> <span class="o">&lt;&lt;</span> <span class="nb">sub</span> <span class="o">&lt;&lt;</span> <span class="n">unit</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
    <span class="k">else</span>
      <span class="n">accm</span>
    <span class="k">end</span>
  <span class="p">}</span>
<span class="k">end</span>

<span class="n">japanese</span> <span class="mi">0</span>                      <span class="c1"># =&gt; &quot;〇&quot;</span>
<span class="n">japanese</span> <span class="mi">1</span>                      <span class="c1"># =&gt; &quot;一&quot;</span>
<span class="n">japanese</span> <span class="mi">10</span>                     <span class="c1"># =&gt; &quot;十&quot;</span>
<span class="n">japanese</span> <span class="mi">1125</span>                   <span class="c1"># =&gt; &quot;千百二十五&quot;</span>
<span class="n">japanese</span> <span class="mi">1111</span>                   <span class="c1"># =&gt; &quot;千百十一&quot;</span>
<span class="n">japanese</span> <span class="mi">2204</span>                 <span class="c1"># =&gt; &quot;二千二百四&quot;</span>
<span class="n">japanese</span> <span class="mi">1234567890</span> <span class="c1"># =&gt; &quot;十二億三千四百五十六万七千八百九十&quot;</span>
<span class="n">japanese</span> <span class="mi">1732050807568877</span>       <span class="c1"># =&gt; &quot;千七百三十二兆五百八億七百五十六万八千八百七十七&quot;</span>
<span class="n">japanese</span> <span class="mi">1732050807568877193747198374282342374230983482393942</span> <span class="c1"># =&gt; &quot;千七百三十二極五百八載七百五十六正八千八百七十七澗千九百三十七溝四千七百十九穣八千三百七十四(禾予)二千八百二十三垓四千二百三十七京四千二百三十兆九千八百三十四億八千二百三十九万三千九百四十二&quot;</span>
<span class="n">japanese</span> <span class="mi">1000000000000000000000000000000000000000000000000000</span> <span class="c1"># =&gt; &quot;千極&quot;</span>
<span class="n">japanese</span> <span class="s2">&quot;1000000000000000000000000000000000000000000000000000&quot;</span> <span class="c1"># =&gt; &quot;千極&quot;</span>
<span class="n">japanese</span> <span class="mi">1000000000200000000000000300000000400000000050054001</span> <span class="c1"># =&gt; &quot;千極二十正三百(禾予)四十京五千五万四千一&quot;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2037/addtag/" class="addtag" id="addtag_2037">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2037/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2037/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2037"
  >-</span><span
  class="button yellow"
  id="rating_z_2037"
  >0</span><span 
  class="button green"
  id="rating_p_2037"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/2037/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2037/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2038">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2038/">#2038</a>(<script language="JavaScript">print_time(new Date("2007/08/08 20:07 GMT"));</script><noscript>2007/08/08 20:07 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><div class="highlight"><pre>(defpackage doukaku38 (:use common-lisp ) (:export :japanese)
(in-package :doukaku38)

(let ((unit #(&quot;千&quot; &quot;百&quot; &quot;十&quot; &quot;&quot;))
      (nums #(&quot;〇&quot; &quot;一&quot; &quot;二&quot; &quot;三&quot; &quot;四&quot; &quot;五&quot; &quot;六&quot; &quot;七&quot; &quot;八&quot; &quot;九&quot;)))
  (defun %under10000 (n)
    (setf n (format nil &quot;~04d&quot; n))
    (unless (string= n &quot;   0&quot;)
      (loop for i from 0 below 4
         for n-i = (aref n i)
         collecting
           (case n
             ((#\0 #\ )   &quot;&quot;)
             (#\1
              (if (= i 3)
                  (concatenate &#39;string (aref nums 1) (aref unit i))
                  (aref unit i)))
             (t
              (concatenate &#39;string (aref nums (- (char-code n-i) (char-code #\0)))
                           (aref unit i)))) into accum
         finally (return (apply #&#39;concatenate &#39;string accum))))))

(let ((unit #(&quot;極&quot; &quot;載&quot; &quot;正&quot; &quot;澗&quot;  &quot;溝&quot; &quot;穣&quot;  &quot;(禾予)&quot; &quot;垓&quot;  &quot;京&quot; &quot;兆&quot; &quot;億&quot; &quot;万&quot; &quot;&quot;)))
  (defun %split (n)
    (loop
       for i downfrom (* 4 (1- (length unit))) to 0 by 4
       for d = (expt 10 i)
       for (q r) = (multiple-value-list (floor n d))
       do (setf n r)
       collecting q))
  (defun japanese (n)
    (cond ((&gt; n 10000000000000000000000000000000000000000000000000000)
           (error &quot;too large number!&quot;))
          ((zerop n) &quot;〇&quot;)
          (t (loop for u across unit
                for u10000 in (%split n)
                for sub = (%under10000 u10000)
                collecting (if sub (concatenate &#39;string sub u) &quot;&quot;) into accum
                finally (return (apply #&#39;concatenate &#39;string accum)))))))

(japanese 0)                            ; =&gt; &quot;〇&quot;
(japanese 1)                            ; =&gt; &quot;一&quot;
(japanese 10)                           ; =&gt; &quot;十&quot;
(japanese 1125)                         ; =&gt; &quot;千百二十五&quot;
(japanese 1111)                         ; =&gt; &quot;千百十一&quot;
(japanese 2204)                         ; =&gt; &quot;二千二百四&quot;
(japanese 1234567890)                   ; =&gt; &quot;十二億三千四百五十六万七千八百九十&quot;
(japanese 1732050807568877)             ; =&gt; &quot;千七百三十二兆五百八億七百五十六万八千八百七十七&quot;
(japanese 1732050807568877193747198374282342374230983482393942) ; =&gt; &quot;千七百三十二極五百八載七百五十六正八千八百七十七澗千九百三十七溝四千七百十九穣八千三百七十四(禾予)二千八百二十三垓四千二百三十七京四千二百三十兆九千八百三十四億八千二百三十九万三千九百四十二&quot;
(japanese 1000000000000000000000000000000000000000000000000000) ; =&gt; &quot;千極&quot;
(japanese 1000000000200000000000000300000000400000000050054001) ; =&gt; &quot;千極二十正三百(禾予)四十京五千五万四千一&quot;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2038/addtag/" class="addtag" id="addtag_2038">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2038/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2038/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2038"
  >-</span><span
  class="button yellow"
  id="rating_z_2038"
  >0</span><span 
  class="button green"
  id="rating_p_2038"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/2038/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2038/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2039">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2039/">#2039</a>(<script language="JavaScript">print_time(new Date("2007/08/08 20:14 GMT"));</script><noscript>2007/08/08 20:14 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ↑から修正。んー、おかしいな、テスト時はうまくいってたのに…
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><div class="highlight"><pre>(defpackage doukaku38 (:use common-lisp ) (:export :japanese))
(in-package :doukaku38)

(let ((unit #(&quot;千&quot; &quot;百&quot; &quot;十&quot; &quot;&quot;))
      (nums #(&quot;〇&quot; &quot;一&quot; &quot;二&quot; &quot;三&quot; &quot;四&quot; &quot;五&quot; &quot;六&quot; &quot;七&quot; &quot;八&quot; &quot;九&quot;)))
  (defun %under10000 (n)
    (setf n (format nil &quot;~04d&quot; n))
    (unless (string= n &quot;   0&quot;)
      (loop for i from 0 below 4
         for n-i = (aref n i)
         collecting
           (case n-i
             ((#\0 #\ )   &quot;&quot;)
             (#\1
              (if (= i 3)
                  (concatenate &#39;string (aref nums 1) (aref unit i))
                  (aref unit i)))
             (t
              (concatenate &#39;string (aref nums (- (char-code n-i) (char-code #\0)))
                           (aref unit i)))) into accum
         finally (return (apply #&#39;concatenate &#39;string accum))))))

(let ((unit #(&quot;極&quot; &quot;載&quot; &quot;正&quot; &quot;澗&quot;  &quot;溝&quot; &quot;穣&quot;  &quot;(禾予)&quot; &quot;垓&quot;  &quot;京&quot; &quot;兆&quot; &quot;億&quot; &quot;万&quot; &quot;&quot;)))
  (defun %split (n)
    (loop
       for i downfrom (* 4 (1- (length unit))) to 0 by 4
       for d = (expt 10 i)
       for (q r) = (multiple-value-list (floor n d))
       do (setf n r)
       collecting q))
  (defun japanese (n)
    (cond ((&gt; n 10000000000000000000000000000000000000000000000000000)
           (error &quot;too large number!&quot;))
          ((zerop n) &quot;〇&quot;)
          (t (loop for u across unit
                for u10000 in (%split n)
                for sub = (%under10000 u10000)
                collecting (if sub (concatenate &#39;string sub u) &quot;&quot;) into accum
                finally (return (apply #&#39;concatenate &#39;string accum)))))))

(japanese 0)                            ; =&gt; &quot;〇&quot;
(japanese 1)                            ; =&gt; &quot;一&quot;
(japanese 10)                           ; =&gt; &quot;十&quot;
(japanese 1125)                         ; =&gt; &quot;千百二十五&quot;
(japanese 1111)                         ; =&gt; &quot;千百十一&quot;
(japanese 2204)                         ; =&gt; &quot;二千二百四&quot;
(japanese 1234567890)                   ; =&gt; &quot;十二億三千四百五十六万七千八百九十&quot;
(japanese 1732050807568877)             ; =&gt; &quot;千七百三十二兆五百八億七百五十六万八千八百七十七&quot;
(japanese 1732050807568877193747198374282342374230983482393942) ; =&gt; &quot;千七百三十二極五百八載七百五十六正八千八百七十七澗千九百三十七溝四千七百十九穣八千三百七十四(禾予)二千八百二十三垓四千二百三十七京四千二百三十兆九千八百三十四億八千二百三十九万三千九百四十二&quot;
(japanese 1000000000000000000000000000000000000000000000000000) ; =&gt; &quot;千極&quot;
(japanese 1000000000200000000000000300000000400000000050054001) ; =&gt; &quot;千極二十正三百(禾予)四十京五千五万四千一&quot;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2039/addtag/" class="addtag" id="addtag_2039">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2039/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2039/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2039"
  >-</span><span
  class="button yellow"
  id="rating_z_2039"
  >0</span><span 
  class="button green"
  id="rating_p_2039"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/2038/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/2039/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2039/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2050">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2050/">#2050</a>(<script language="JavaScript">print_time(new Date("2007/08/09 16:29 GMT"));</script><noscript>2007/08/09 16:29 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  マイナスの数には対応していません。とりあえず題意は満たしていると思います。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">Sample</span> <span class="o">{</span>
    <span class="k">static</span> <span class="k">final</span> <span class="kt">char</span><span class="o">[]</span> <span class="err">数字</span> <span class="o">=</span> <span class="o">{</span><span class="sc">&#39;〇&#39;</span><span class="o">,</span> <span class="sc">&#39;一&#39;</span><span class="o">,</span> <span class="sc">&#39;二&#39;</span><span class="o">,</span> <span class="sc">&#39;三&#39;</span><span class="o">,</span> <span class="sc">&#39;四&#39;</span><span class="o">,</span> <span class="sc">&#39;五&#39;</span><span class="o">,</span> <span class="sc">&#39;六&#39;</span><span class="o">,</span> <span class="sc">&#39;七&#39;</span><span class="o">,</span> <span class="sc">&#39;八&#39;</span><span class="o">,</span> <span class="sc">&#39;九&#39;</span><span class="o">};</span>
    <span class="k">static</span> <span class="k">final</span> <span class="n">String</span><span class="o">[]</span> <span class="err">桁</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;千&quot;</span><span class="o">,</span> <span class="s">&quot;百&quot;</span><span class="o">,</span> <span class="s">&quot;十&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">};</span>
    <span class="k">static</span> <span class="k">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="err">桁数</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1000</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">1</span><span class="o">};</span>
    <span class="k">static</span> <span class="k">final</span> <span class="n">String</span><span class="o">[]</span> <span class="err">万桁</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;京&quot;</span><span class="o">,</span> <span class="s">&quot;兆&quot;</span><span class="o">,</span> <span class="s">&quot;億&quot;</span><span class="o">,</span> <span class="s">&quot;万&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">};</span>
    <span class="k">static</span> <span class="k">final</span> <span class="kt">long</span><span class="o">[]</span> <span class="err">万桁数</span> <span class="o">=</span> <span class="o">{(</span><span class="kt">long</span><span class="o">)</span><span class="mi">1</span><span class="n">e16</span><span class="o">,</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="mi">1</span><span class="n">e12</span><span class="o">,</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="mi">1</span><span class="n">e8</span><span class="o">,</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="mi">1</span><span class="n">e4</span><span class="o">,</span> <span class="mi">1</span><span class="o">};</span>
    
    <span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="err">漢数字</span><span class="o">(</span><span class="kt">long</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">StringBuffer</span> <span class="err">結果</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="err">万桁</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">long</span> <span class="n">val2</span> <span class="o">=</span> <span class="n">val</span> <span class="o">/</span> <span class="err">万桁数</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">val2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="err">桁</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="kt">int</span> <span class="n">val3</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">val2</span> <span class="o">/</span> <span class="err">桁数</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">val3</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">val3</span> <span class="o">!=</span> <span class="mi">1</span> <span class="o">||</span> <span class="err">桁</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="o">)</span> <span class="o">{</span>
                            <span class="err">結果</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="err">数字</span><span class="o">[</span><span class="n">val3</span><span class="o">]);</span>
                        <span class="o">}</span>
                        <span class="err">結果</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="err">桁</span><span class="o">[</span><span class="n">j</span><span class="o">]);</span>
                    <span class="o">}</span>
                    <span class="n">val2</span> <span class="o">%=</span> <span class="err">桁数</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                <span class="o">}</span>
                <span class="err">結果</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="err">万桁</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="o">}</span>
            <span class="n">val</span> <span class="o">%=</span> <span class="err">万桁数</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="err">結果</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="err">漢数字</span><span class="o">(</span><span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">])));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2050/addtag/" class="addtag" id="addtag_2050">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2050/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2050/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2050"
  >-</span><span
  class="button yellow"
  id="rating_z_2050"
  >0</span><span 
  class="button green"
  id="rating_p_2050"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2050/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2055">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/375/" target="_top">nskj77</a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2055/">#2055</a>(<script language="JavaScript">print_time(new Date("2007/08/10 04:06 GMT"));</script><noscript>2007/08/10 04:06 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  System.IO.UTF8をつかって。
	</div>
	
	<p class="link">
	  参考: <a href="/web/20080225222953/http://hackage.haskell.org/cgi-bin/hackage-scripts/package/utf8-string-0.1">HackageDB: utf8-string-0.1</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">System</span><span class="o">.</span><span class="n">IO</span><span class="o">.</span><span class="n">UTF8</span> <span class="nv">as</span> <span class="n">U</span>

<span class="nv">nsplit</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span>
<span class="nv">nsplit</span> <span class="kr">_</span> <span class="p">[]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nv">nsplit</span> <span class="nv">n</span> <span class="nv">ss</span> <span class="o">|</span> <span class="nv">n</span> <span class="o">==</span> <span class="mi">0</span>    <span class="o">=</span> <span class="p">[</span><span class="nv">ss</span><span class="p">]</span>
            <span class="o">|</span> <span class="nv">otherwise</span> <span class="o">=</span> <span class="kr">let</span> <span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">xs</span><span class="p">)</span> <span class="o">=</span> <span class="nv">splitAt</span> <span class="nv">n</span> <span class="nv">ss</span> <span class="kr">in</span> <span class="nv">x</span><span class="o">:</span><span class="nv">nsplit</span> <span class="nv">n</span> <span class="nv">xs</span>

<span class="nv">rnsplit</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span>
<span class="nv">rnsplit</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">reverse</span> <span class="o">.</span> <span class="nv">map</span> <span class="nv">reverse</span> <span class="o">.</span> <span class="nv">nsplit</span> <span class="nv">n</span> <span class="o">.</span> <span class="nv">reverse</span>

<span class="nv">suppress</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">reverse</span> <span class="o">$</span> <span class="nv">take</span> <span class="nv">n</span> <span class="o">$</span> <span class="nv">reverse</span> <span class="nv">s</span> <span class="o">++</span> <span class="nv">repeat</span> <span class="nv">c</span>

<span class="nv">kansuuji</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;零&quot;</span><span class="p">,</span><span class="s">&quot;一&quot;</span><span class="p">,</span><span class="s">&quot;二&quot;</span><span class="p">,</span><span class="s">&quot;三&quot;</span><span class="p">,</span><span class="s">&quot;四&quot;</span><span class="p">,</span><span class="s">&quot;五&quot;</span><span class="p">,</span><span class="s">&quot;六&quot;</span><span class="p">,</span><span class="s">&quot;七&quot;</span><span class="p">,</span><span class="s">&quot;八&quot;</span><span class="p">,</span><span class="s">&quot;九&quot;</span><span class="p">]</span>
<span class="nv">keta1</span> <span class="o">=</span> <span class="nv">reverse</span> <span class="p">[</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="s">&quot;十&quot;</span><span class="p">,</span><span class="s">&quot;百&quot;</span><span class="p">,</span><span class="s">&quot;千&quot;</span><span class="p">]</span>
<span class="nv">keta2</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">reverse</span> <span class="o">$</span> <span class="nv">take</span> <span class="nv">n</span> <span class="p">[</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;萬&quot;</span><span class="p">,</span><span class="s">&quot;億&quot;</span><span class="p">,</span><span class="s">&quot;兆&quot;</span><span class="p">,</span><span class="s">&quot;京&quot;</span><span class="p">]</span>

<span class="nv">addK1</span> <span class="o">::</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="n">String</span>
<span class="nv">addK1</span> <span class="s">&quot;一&quot;</span> <span class="s">&quot;十&quot;</span>  <span class="o">=</span> <span class="s">&quot;十&quot;</span>
<span class="nv">addK1</span> <span class="s">&quot;一&quot;</span> <span class="s">&quot;百&quot;</span>  <span class="o">=</span> <span class="s">&quot;百&quot;</span>
<span class="nv">addK1</span> <span class="s">&quot;一&quot;</span> <span class="s">&quot;千&quot;</span>  <span class="o">=</span> <span class="s">&quot;千&quot;</span>
<span class="nv">addK1</span> <span class="s">&quot;零&quot;</span> <span class="kr">_</span>  <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="nv">addK1</span> <span class="nv">x</span> <span class="nv">y</span>     <span class="o">=</span> <span class="nv">x</span> <span class="o">++</span> <span class="nv">y</span>

<span class="nv">f</span> <span class="o">::</span> <span class="n">Integer</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="p">()</span>
<span class="nv">f</span> <span class="o">=</span> <span class="n">U</span><span class="o">.</span><span class="nv">putStrLn</span> <span class="o">.</span> <span class="nv">concatMap</span> <span class="p">(</span><span class="o">++</span><span class="s">&quot; &quot;</span><span class="p">)</span> <span class="o">.</span> <span class="nv">k2</span> <span class="o">.</span> <span class="nv">k1</span> <span class="o">.</span> <span class="nv">rnsplit</span> <span class="mi">4</span> <span class="o">.</span> <span class="nv">reads</span> <span class="o">.</span> <span class="nv">show</span>
  <span class="kr">where</span> <span class="nv">reads</span> <span class="o">=</span> <span class="nv">concatMap</span> <span class="p">((</span><span class="o">!!</span><span class="p">)</span> <span class="nv">kansuuji</span> <span class="o">.</span> <span class="nv">read</span><span class="p">)</span> <span class="o">.</span> <span class="nv">ss</span>
        <span class="nv">fmt</span>   <span class="o">=</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">suppress</span> <span class="mi">4</span> <span class="sc">&#39;零&#39;</span><span class="p">)</span>
        <span class="nv">k1</span>    <span class="o">=</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">concat</span> <span class="o">.</span> <span class="nv">zipWith</span> <span class="p">(</span><span class="nv">flip</span> <span class="nv">addK1</span><span class="p">)</span> <span class="nv">keta1</span> <span class="o">.</span> <span class="nv">ss</span><span class="p">)</span> <span class="o">.</span> <span class="nv">fmt</span>
        <span class="nv">k2</span> <span class="nv">xs</span> <span class="o">=</span> <span class="nv">zipWith</span> <span class="nv">addK1</span> <span class="nv">xs</span> <span class="p">(</span><span class="nv">keta2</span> <span class="p">(</span><span class="nv">length</span> <span class="nv">xs</span><span class="p">))</span>
        <span class="nv">ss</span>    <span class="o">=</span> <span class="nv">map</span> <span class="p">(</span><span class="nv">flip</span> <span class="p">(</span><span class="o">:</span><span class="p">)</span> <span class="p">[])</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2055/addtag/" class="addtag" id="addtag_2055">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Haskell/">Haskell</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2055/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2055/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2055"
  >-</span><span
  class="button yellow"
  id="rating_z_2055"
  >0</span><span 
  class="button green"
  id="rating_p_2055"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2055/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2065">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/86/" target="_top">makapin</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2065/">#2065</a>(<script language="JavaScript">print_time(new Date("2007/08/11 01:57 GMT"));</script><noscript>2007/08/11 01:57 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  うーん、全然スマートにならなかった・・・
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
<span class="k">use</span> <span class="n">bigint</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">Test::</span><span class="n">Simple</span> <span class="n">tests</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">%kanji_of</span> <span class="o">=</span>
  <span class="p">(</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="s">&#39;一&#39;</span><span class="p">,</span>  <span class="mi">2</span> <span class="o">=&gt;</span> <span class="s">&#39;二&#39;</span><span class="p">,</span>  <span class="mi">3</span> <span class="o">=&gt;</span> <span class="s">&#39;三&#39;</span><span class="p">,</span>  <span class="mi">4</span> <span class="o">=&gt;</span> <span class="s">&#39;四&#39;</span><span class="p">,</span>  <span class="mi">5</span> <span class="o">=&gt;</span> <span class="s">&#39;五&#39;</span><span class="p">,</span>
   <span class="mi">6</span> <span class="o">=&gt;</span> <span class="s">&#39;六&#39;</span><span class="p">,</span>  <span class="mi">7</span> <span class="o">=&gt;</span> <span class="s">&#39;七&#39;</span><span class="p">,</span>  <span class="mi">8</span> <span class="o">=&gt;</span> <span class="s">&#39;八&#39;</span><span class="p">,</span>  <span class="mi">9</span> <span class="o">=&gt;</span> <span class="s">&#39;九&#39;</span> <span class="p">);</span>

<span class="k">my</span> <span class="nv">@keta</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;千&#39;</span><span class="p">,</span><span class="s">&#39;百&#39;</span><span class="p">,</span><span class="s">&#39;十&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">@big_keta</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;万&#39;</span><span class="p">,</span><span class="s">&#39;億&#39;</span><span class="p">,</span><span class="s">&#39;兆&#39;</span><span class="p">);</span>


<span class="k">sub </span><span class="nf">to_kanji</span><span class="p">{</span>
  <span class="k">my</span> <span class="nv">$num</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
  <span class="nv">$num</span> <span class="o">=</span> <span class="s">&#39;0&#39;</span><span class="o">.</span><span class="nv">$num</span> <span class="k">until</span> <span class="p">(</span><span class="nb">length</span><span class="p">(</span><span class="nv">$num</span><span class="p">)</span> <span class="nv">%</span> <span class="nv">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
  <span class="k">my</span> <span class="nv">@list</span> <span class="o">=</span> <span class="nb">grep</span> <span class="p">{</span><span class="nb">defined</span> <span class="nv">$_</span><span class="p">}</span> <span class="p">(</span> <span class="nv">$num</span> <span class="o">=~</span> <span class="sr">m/(\d{4})?(\d{4})?(\d{4})?(\d{4})$/</span> <span class="p">);</span>
  <span class="k">my</span> <span class="nv">$ret</span> <span class="o">=</span>  <span class="n">append_man_oku_tyo</span><span class="p">(</span> <span class="nb">map</span> <span class="p">{</span><span class="n">to_kanji_sub</span><span class="p">(</span><span class="nv">$_</span><span class="p">)}</span> <span class="nv">@list</span> <span class="p">);</span>
  <span class="k">return</span> <span class="nv">$ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">append_man_oku_tyo</span><span class="p">{</span>
  <span class="k">my</span> <span class="nv">@list</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
  <span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">my</span> <span class="nv">$str</span> <span class="o">=</span> <span class="nb">join</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="nb">grep</span> <span class="p">{</span><span class="nv">$_</span><span class="p">}</span>
    <span class="nb">reverse</span> <span class="nb">map</span> <span class="p">{</span><span class="nv">$_</span> <span class="o">.</span> <span class="p">(</span><span class="nv">$_</span><span class="p">?</span> <span class="nv">$big_keta</span><span class="p">[</span><span class="nv">$i</span><span class="o">++</span><span class="p">]:(</span><span class="nv">$i</span><span class="o">++</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">))</span> <span class="p">}</span>
    <span class="nb">reverse</span> <span class="nv">@list</span><span class="p">;</span>
  <span class="k">return</span> <span class="nv">$str</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">#４桁の数字を漢字に変換</span>
<span class="k">sub </span><span class="nf">to_kanji_sub</span><span class="p">{</span>
  <span class="k">my</span> <span class="nv">@num</span> <span class="o">=</span> <span class="nb">split</span> <span class="sr">//</span><span class="p">,</span> <span class="nb">shift</span><span class="p">;</span>
  <span class="k">return</span> <span class="nb">join</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="nb">map</span> <span class="p">{</span>
    <span class="nv">$num</span><span class="p">[</span><span class="nv">$_</span><span class="p">]</span> <span class="p">?</span> <span class="p">(</span> <span class="nv">$_</span> <span class="o">!=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nv">$num</span><span class="p">[</span><span class="nv">$_</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">?</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="nv">$kanji_of</span><span class="p">{</span><span class="nv">$num</span><span class="p">[</span><span class="nv">$_</span><span class="p">]})</span><span class="o">.</span><span class="nv">$keta</span><span class="p">[</span><span class="nv">$_</span><span class="p">]</span> <span class="p">:</span><span class="s">&#39;&#39;</span>
  <span class="p">}</span> <span class="mi">0</span><span class="o">..</span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">#テストコード</span>
<span class="n">do_test</span><span class="p">();</span>
<span class="k">sub </span><span class="nf">do_test</span><span class="p">{</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;一&#39;</span><span class="p">,</span><span class="s">&quot;1 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;千二百三十四&#39;</span><span class="p">,</span><span class="s">&quot;1234 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">4321</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;四千三百二十一&#39;</span><span class="p">,</span> <span class="s">&quot;4321 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;百&#39;</span><span class="p">,</span> <span class="s">&quot;100 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;千&#39;</span><span class="p">,</span> <span class="s">&quot;1000 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1001</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;千一&#39;</span><span class="p">,</span> <span class="s">&quot;1001 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1021</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;千二十一&#39;</span><span class="p">,</span> <span class="s">&quot;1021 ok &quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;一万 二千三百四十五&#39;</span><span class="p">,</span> <span class="s">&quot;12345 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;一万&#39;</span> <span class="p">,</span><span class="s">&quot;10000 w&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1</span><span class="n">_0000_0000_0000</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;一兆&#39;</span><span class="p">,</span> <span class="s">&quot;1_0000_0000_0000 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1</span><span class="n">_2345_6789</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;一億 二千三百四十五万 六千七百八十九&#39;</span><span class="p">,</span> <span class="s">&quot;1234567879 ok&quot;</span><span class="p">);</span>
  <span class="n">ok</span><span class="p">(</span><span class="n">to_kanji</span><span class="p">(</span><span class="mi">1732050807568877</span><span class="p">)</span> <span class="ow">eq</span> <span class="s">&#39;千七百三十二兆 五百八億 七百五十六万 八千八百七十七&#39;</span><span class="p">,</span> <span class="s">&quot;1732050807568877 ok&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2065/addtag/" class="addtag" id="addtag_2065">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Perl/">Perl</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2065/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2065/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2065"
  >-</span><span
  class="button yellow"
  id="rating_z_2065"
  >0</span><span 
  class="button green"
  id="rating_p_2065"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2065/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2467">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2467/">#2467</a>(<script language="JavaScript">print_time(new Date("2007/08/24 02:23 GMT"));</script><noscript>2007/08/24 02:23 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>るびきちさんのより短くを目標に考えてみましたが、一行かないませんでした。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/local/bin/ruby</span>

<span class="k">def</span> <span class="nf">jsen</span><span class="p">(</span><span class="n">ary</span><span class="p">)</span>
  <span class="n">k1</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;一&quot;</span><span class="p">,</span> <span class="s2">&quot;二&quot;</span> <span class="p">,</span><span class="s2">&quot;三&quot;</span><span class="p">,</span> <span class="s2">&quot;四&quot;</span><span class="p">,</span> <span class="s2">&quot;五&quot;</span><span class="p">,</span> <span class="s2">&quot;六&quot;</span><span class="p">,</span> <span class="s2">&quot;七&quot;</span><span class="p">,</span> <span class="s2">&quot;八&quot;</span><span class="p">,</span> <span class="s2">&quot;九&quot;</span><span class="o">]</span>
  <span class="n">k10</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s2">&quot;十&quot;</span><span class="p">,</span><span class="s2">&quot;百&quot;</span><span class="p">,</span> <span class="s2">&quot;千&quot;</span><span class="o">]</span>
  <span class="n">str</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">ary</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span>
  <span class="n">ary</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">num</span><span class="o">|</span>
    <span class="n">keta</span> <span class="o">=</span> <span class="n">s</span>
    <span class="k">case</span> <span class="n">num</span>
    <span class="k">when</span> <span class="mi">0</span>
      <span class="n">keta</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="k">when</span> <span class="mi">1</span>
      <span class="n">num</span> <span class="o">=</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="n">keta</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">end</span>
    <span class="n">str</span> <span class="o">&lt;&lt;</span> <span class="n">k1</span><span class="o">[</span><span class="n">num</span><span class="o">].</span><span class="n">to_s</span> <span class="k">unless</span> <span class="n">num</span><span class="o">.</span><span class="n">nil?</span>
    <span class="n">str</span> <span class="o">&lt;&lt;</span> <span class="n">k10</span><span class="o">[</span><span class="n">keta</span><span class="o">].</span><span class="n">to_s</span> <span class="k">unless</span> <span class="n">keta</span><span class="o">.</span><span class="n">nil?</span>
    <span class="n">s</span> <span class="o">-=</span> <span class="mi">1</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">str</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">jnum</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="k">return</span> <span class="s2">&quot;零&quot;</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span>
  <span class="n">str</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">ary</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">,</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
  <span class="n">k</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;万&quot;</span><span class="p">,</span> <span class="s2">&quot;億&quot;</span><span class="p">,</span> <span class="s2">&quot;兆&quot;</span><span class="p">,</span> <span class="s2">&quot;京&quot;</span><span class="o">]</span>
  <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sr">//</span><span class="p">)</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sr">//</span><span class="p">)</span>
  <span class="k">return</span> <span class="kp">nil</span> <span class="k">if</span> <span class="n">key</span> <span class="o">&gt;</span> <span class="mi">19</span> <span class="c1"># max &quot;京&quot;</span>
  <span class="n">value</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="n">ary</span><span class="o">.</span><span class="n">push</span> <span class="n">i</span><span class="o">.</span><span class="n">to_i</span>
    <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">divmod</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="n">h</span><span class="o">[</span><span class="n">key</span><span class="o">.</span><span class="n">divmod</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span> <span class="o">=</span> <span class="n">ary</span>
      <span class="n">ary</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="k">end</span>
    <span class="n">key</span> <span class="o">-=</span> <span class="mi">1</span>
  <span class="p">}</span>
  <span class="n">h</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">reverse</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="p">,</span> <span class="n">ary</span><span class="o">|</span>
    <span class="n">str</span> <span class="o">&lt;&lt;</span> <span class="n">jsen</span><span class="p">(</span><span class="n">ary</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span> 
    <span class="n">str</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="o">[</span><span class="n">x</span><span class="o">].</span><span class="n">to_s</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="k">unless</span> <span class="n">ary</span> <span class="o">==</span> <span class="o">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="o">]</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">str</span>
<span class="k">end</span>
<span class="c1">#n = 1732050807568877</span>
<span class="c1"># 千七百三十二兆 五百八億 七百五十六万 八千八百七十七</span>
<span class="n">n</span> <span class="o">=</span>  <span class="mi">0</span>
<span class="c1"># =&gt; 零</span>
<span class="n">n</span> <span class="o">=</span>  <span class="mi">1</span>
<span class="c1"># =&gt; 一</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
<span class="c1"># =&gt; 十</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="c1"># =&gt; 百</span>
<span class="n">n</span><span class="o">=</span> <span class="mi">1000</span>
<span class="c1"># =&gt; 千</span>
<span class="n">n</span><span class="o">=</span> <span class="mi">10001000</span>
<span class="c1"># =&gt; 千万 千</span>

<span class="nb">print</span> <span class="n">jnum</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2467/addtag/" class="addtag" id="addtag_2467">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/ruby/">ruby</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2467/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2467/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2467"
  >-</span><span
  class="button yellow"
  id="rating_z_2467"
  >0</span><span 
  class="button green"
  id="rating_p_2467"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/2037/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/2467/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2467/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2473">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2473/">#2473</a>(<script language="JavaScript">print_time(new Date("2007/08/24 05:42 GMT"));</script><noscript>2007/08/24 05:42 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  bcc32とVisualC++6で確認しました。g++ではコンパイルできませんでした。どうやら、"十"の二バイト目が'\\'となっていることから、これがエスケープ文字とみなされて、「文字列が終わってない」というエラーになっているようです。g++のバグ？（mingwに付属の最新のg++）
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;stdexcept&gt;</span>
<span class="cp">#include &lt;string&gt;</span>
<span class="cp">#include &lt;map&gt;</span>

<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">create_table</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">table</span><span class="p">;</span>

    <span class="n">table</span><span class="p">[</span><span class="sc">&#39;1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;一&quot;</span><span class="p">;</span> <span class="n">table</span><span class="p">[</span><span class="sc">&#39;2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;二&quot;</span><span class="p">;</span> <span class="n">table</span><span class="p">[</span><span class="sc">&#39;3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;三&quot;</span><span class="p">;</span>
    <span class="n">table</span><span class="p">[</span><span class="sc">&#39;4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;四&quot;</span><span class="p">;</span> <span class="n">table</span><span class="p">[</span><span class="sc">&#39;5&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;五&quot;</span><span class="p">;</span> <span class="n">table</span><span class="p">[</span><span class="sc">&#39;6&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;六&quot;</span><span class="p">;</span>
    <span class="n">table</span><span class="p">[</span><span class="sc">&#39;7&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;七&quot;</span><span class="p">;</span> <span class="n">table</span><span class="p">[</span><span class="sc">&#39;8&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;八&quot;</span><span class="p">;</span> <span class="n">table</span><span class="p">[</span><span class="sc">&#39;9&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;九&quot;</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">table</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">convert2</span><span class="p">(</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">const_reverse_iterator</span><span class="o">&amp;</span> <span class="n">it</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">const_reverse_iterator</span> <span class="n">end</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>

    <span class="k">const</span> <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="o">*</span><span class="n">it</span><span class="o">++</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>

    <span class="k">static</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">create_table</span><span class="p">();</span>

    <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;::</span><span class="n">const_iterator</span> <span class="n">it_table</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">it_table</span> <span class="o">==</span> <span class="n">table</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&quot;invalid character&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">it_table</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">+</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">convert1</span><span class="p">(</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">const_reverse_iterator</span><span class="o">&amp;</span> <span class="n">it</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">const_reverse_iterator</span> <span class="n">end</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">ret</span><span class="p">;</span>

<span class="cp">#define DO(S) ret.insert(0, convert2(it, end, S))</span>

    <span class="n">DO</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span> <span class="n">DO</span><span class="p">(</span><span class="s">&quot;十&quot;</span><span class="p">);</span> <span class="n">DO</span><span class="p">(</span><span class="s">&quot;百&quot;</span><span class="p">);</span> <span class="n">DO</span><span class="p">(</span><span class="s">&quot;千&quot;</span><span class="p">);</span>

<span class="cp">#undef DO</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="o">?</span> <span class="n">ret</span> <span class="o">:</span> <span class="n">ret</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">convert</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">const_reverse_iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">rbegin</span><span class="p">();</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">ret</span><span class="p">;</span>

<span class="cp">#define DO(S) ret.insert(0, convert1(it, s.rend(), S))</span>

    <span class="n">DO</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span> <span class="n">DO</span><span class="p">(</span><span class="s">&quot;万&quot;</span><span class="p">);</span> <span class="n">DO</span><span class="p">(</span><span class="s">&quot;億&quot;</span><span class="p">);</span> <span class="n">DO</span><span class="p">(</span><span class="s">&quot;兆&quot;</span><span class="p">);</span>

<span class="cp">#undef DO</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">s</span><span class="p">.</span><span class="n">rend</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&quot;overflow&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&gt; &quot;</span><span class="p">;</span>

        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">s</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">convert</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">catch</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/2473/addtag/" class="addtag" id="addtag_2473">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2473/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/2473/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2473"
  >-</span><span
  class="button yellow"
  id="rating_z_2473"
  >0</span><span 
  class="button green"
  id="rating_p_2473"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/2473/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment3183">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/448/" target="_top">naranja</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3183/">#3183</a>(<script language="JavaScript">print_time(new Date("2007/09/27 11:10 GMT"));</script><noscript>2007/09/27 11:10 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/d/">
	  D
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>少ない行数で。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="n">std</span>.<span class="n">stdio</span>;

<span class="kt">void</span> <span class="n">main</span>(<span class="n">string</span>[] <span class="n">args</span>){
    <span class="n">string</span> <span class="n">number</span> = <span class="n">args</span>[<span class="mi">1</span>], <span class="n">answer</span>;
    <span class="k">for</span>(<span class="kt">int</span> <span class="n">i</span> = <span class="mi">0</span>; <span class="n">i</span> &lt; <span class="n">number</span>.<span class="n">length</span>; <span class="n">i</span>++){
        <span class="kt">int</span> <span class="n">digit</span> = <span class="n">number</span>[<span class="n">length</span> - <span class="n">i</span> - <span class="mi">1</span>] - <span class="sc">&#39;0&#39;</span>;
        <span class="n">answer</span> = (<span class="n">digit</span> ? ((<span class="n">i</span> % <span class="mi">4</span> &amp;&amp; <span class="n">digit</span> == <span class="mi">1</span> ? <span class="s">&quot;&quot;</span> : [<span class="s">&quot;&quot;</span>, <span class="s">&quot;一&quot;</span>, <span class="s">&quot;二&quot;</span>, <span class="s">&quot;三&quot;</span>, <span class="s">&quot;四&quot;</span>, <span class="s">&quot;五&quot;</span>, <span class="s">&quot;六&quot;</span>, <span class="s">&quot;七&quot;</span>, <span class="s">&quot;八&quot;</span>, <span class="s">&quot;九&quot;</span>][<span class="n">digit</span>]) ~ [<span class="s">&quot;&quot;</span>, <span class="s">&quot;十&quot;</span>, <span class="s">&quot;百&quot;</span>, <span class="s">&quot;千&quot;</span>][<span class="n">i</span> % <span class="mi">4</span>]) : <span class="s">&quot;&quot;</span>) ~ (<span class="n">i</span> % <span class="mi">4</span> ? <span class="s">&quot;&quot;</span> : [<span class="s">&quot;&quot;</span>, <span class="s">&quot;万&quot;</span>, <span class="s">&quot;億&quot;</span>, <span class="s">&quot;兆&quot;</span>][<span class="n">i</span> / <span class="mi">4</span>] ~ (<span class="n">i</span> ? <span class="s">&quot; &quot;</span> : <span class="s">&quot;&quot;</span>)) ~ <span class="n">answer</span>;
    }
    <span class="n">writefln</span>(<span class="n">answer</span>);
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3183/addtag/" class="addtag" id="addtag_3183">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/d/">
		D
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3183/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3183/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3183"
  >-</span><span
  class="button yellow"
  id="rating_z_3183"
  >0</span><span 
  class="button green"
  id="rating_p_3183"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/3183/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  <br/>

  
  




<div class="comment" id="comment3611">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3611/">#3611</a>(<script language="JavaScript">print_time(new Date("2007/10/31 02:12 GMT"));</script><noscript>2007/10/31 02:12 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/r/">
	  R
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>9999999999999998 までは扱えますよ
（倍精度実数が扱える整数値の限界）
というわけで，以下のように
地道にやる方法を書いてみました
&gt; foo(1234567890123456)
一千二百三十四兆五千六百七十八億九千十二万三千四百五十六
&gt; foo(9999999999999998)
九千九百九十九兆九千九百九十九億九千九百九十九万九千九百九十八
&gt; foo(1111111111111111)
一千百十一兆一千百十一億一千百十一万一千百十一
&gt; foo(12345)
一万二千三百四十五
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre>foo &lt;- function(x) {
    bar &lt;- function(y, t) {
        baz &lt;- function(x) {
            c(&quot;&quot;, &quot;二&quot;, &quot;三&quot;, &quot;四&quot;, &quot;五&quot;, &quot;六&quot;, &quot;七&quot;, &quot;八&quot;, &quot;九&quot;)[x]
        }
        baz2 &lt;- function(x) {
            c(&quot;一&quot;, &quot;二&quot;, &quot;三&quot;, &quot;四&quot;, &quot;五&quot;, &quot;六&quot;, &quot;七&quot;, &quot;八&quot;, &quot;九&quot;)[x]
        }
        s &lt;- as.integer(unlist(strsplit(paste(&quot;000&quot;, as.character(y), sep=&quot;&quot;), &quot;&quot;)))
        l &lt;- length(s)
        str &lt;- &quot;&quot;
        if (s[l-3]) str &lt;- paste(str, baz2(s[l-3]), &quot;千&quot;, sep=&quot;&quot;)
        if (s[l-2]) str &lt;- paste(str, baz(s[l-2]), &quot;百&quot;, sep=&quot;&quot;)
        if (s[l-1]) str &lt;- paste(str, baz(s[l-1]), &quot;十&quot;, sep=&quot;&quot;)
        if (y) str &lt;- paste(str, baz2(s[l]), t, sep=&quot;&quot;)
        cat(str)
    }
    bar(x%/%1000000000000, &quot;兆&quot;)
    bar((x%%1000000000000)%/%100000000, &quot;億&quot;)
    bar((x%%100000000)%/%10000, &quot;万&quot;)
    bar(x%%10000, &quot;&quot;)
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3611/addtag/" class="addtag" id="addtag_3611">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/r/">
		R
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3611/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3611/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3611"
  >-</span><span
  class="button yellow"
  id="rating_z_3611"
  >0</span><span 
  class="button green"
  id="rating_p_3611"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080225222953/http://ja.doukaku.org/comment/3611/">
    1
    reply
  </a>

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/3611/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment3612">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3612/">#3612</a>(<script language="JavaScript">print_time(new Date("2007/10/31 02:19 GMT"));</script><noscript>2007/10/31 02:19 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/r/">
	  R
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>少し修正</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><div class="highlight"><pre>foo &lt;- function(x) {
    bar &lt;- function(y, t) {
        baz &lt;- function(x, w) {
            r &lt;- c(&quot;一&quot;, &quot;二&quot;, &quot;三&quot;, &quot;四&quot;, &quot;五&quot;, &quot;六&quot;, &quot;七&quot;, &quot;八&quot;, &quot;九&quot;)[x]
            if (x == 1 &amp;&amp; w == 1) r &lt;- &quot;&quot;
            return(r)
        }
        s &lt;- as.integer(unlist(strsplit(paste(&quot;000&quot;, as.character(y), sep=&quot;&quot;), &quot;&quot;)))
        l &lt;- length(s)
        str &lt;- &quot;&quot;
        if (s[l-3]) str &lt;- paste(str, baz(s[l-3], 2), &quot;千&quot;, sep=&quot;&quot;)
        if (s[l-2]) str &lt;- paste(str, baz(s[l-2], 1), &quot;百&quot;, sep=&quot;&quot;)
        if (s[l-1]) str &lt;- paste(str, baz(s[l-1], 1), &quot;十&quot;, sep=&quot;&quot;)
        if (y) str &lt;- paste(str, baz(s[l], 2), t, sep=&quot;&quot;)
        cat(str)
    }
    bar(x%/%1000000000000, &quot;兆&quot;)
    bar((x%%1000000000000)%/%100000000, &quot;億&quot;)
    bar((x%%100000000)%/%10000, &quot;万&quot;)
    bar(x%%10000, &quot;&quot;)
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3612/addtag/" class="addtag" id="addtag_3612">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/r/">
		R
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3612/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3612/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3612"
  >-</span><span
  class="button yellow"
  id="rating_z_3612"
  >0</span><span 
  class="button green"
  id="rating_p_3612"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/3611/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080225222953/http://ja.doukaku.org/comment/3612/root/"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/3612/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment3717">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/26/" target="_top">dankogai</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3717/">#3717</a>(<script language="JavaScript">print_time(new Date("2007/11/05 16:46 GMT"));</script><noscript>2007/11/05 16:46 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>そのモジュールの作者ざんす。
</pre>
	</div>
	
	<p class="link">
	  参考: <a href="/web/20080225222953/http://blog.livedoor.jp/dankogai/archives/50017672.html"></a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2</pre></td><td class="code"><div class="highlight"><pre><span class="nv">%</span> <span class="nv">perl</span> <span class="o">-</span><span class="n">CIO</span> <span class="o">-</span><span class="nn">MLingua::JA::</span><span class="n">Numbers</span> <span class="o">-</span><span class="ow">le</span> <span class="s">&#39;print num2ja(1234567890)&#39;</span>
<span class="err">十二億三千四百五十六万七千八百九十</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3717/addtag/" class="addtag" id="addtag_3717">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3717/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3717/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3717"
  >-</span><span
  class="button yellow"
  id="rating_z_3717"
  >0</span><span 
  class="button green"
  id="rating_p_3717"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/3717/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment3937">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3937/">#3937</a>(<script language="JavaScript">print_time(new Date("2007/11/13 09:33 GMT"));</script><noscript>2007/11/13 09:33 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/nadesico/">
	  なでしこ
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>なでしこで素直に。単位を定義すればもっと上の桁まで扱えるはず</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre>「漢数字に変換したい整数を入力してください」で尋ねる
それを漢数字変換して言う
おわり

●漢数字変換(nを)
　　outとは文字列
　　tmpとは文字列
　　漢数字とは配列=区切る(&quot;一,二,三,四,五,六,七,八,九&quot;,&quot;,&quot;)
　　単位Aとは配列=区切る(&quot;,十,百,千&quot;,&quot;,&quot;)
　　単位Bとは配列=区切る(&quot;,万,億,兆&quot;,&quot;,&quot;)
　　
　　(nを4で数値分割して配列逆順)を反復
　　　　(対象を文字列分解して配列逆順)を反復
　　　　　　もし(対象=0)ならば、続ける
　　　　　　もし(対象=1&amp;&amp;回数&lt;&gt;1)ならば
　　　　　　　　tmp=単位A[回数-1]&amp;tmp
　　　　　　違えば
　　　　　　　　tmp=漢数字[対象-1]&amp;単位A[回数-1]&amp;tmp
　　　　out=tmp&amp;単位B[回数-1]&amp;out
　　　　tmp=&quot;&quot;
　　outで戻る

●数値分割(mをnで)
　　tとは配列
　　(バイト数(m)&lt;&gt;0)の間
　　　　tの0にRIGHT(m,4)を配列挿入
　　　　mから4バイト右端削除
　　tで戻る
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/3937/addtag/" class="addtag" id="addtag_3937">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/nadesico/">
		なでしこ
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3937/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/3937/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3937"
  >-</span><span
  class="button yellow"
  id="rating_z_3937"
  >0</span><span 
  class="button green"
  id="rating_p_3937"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/3937/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment4530">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/4530/">#4530</a>(<script language="JavaScript">print_time(new Date("2007/12/01 02:28 GMT"));</script><noscript>2007/12/01 02:28 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/nadesico/">
	  なでしこ
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>10000とかなるとおかしかったので修正orz
文字列で与えると大きな桁が扱えます</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></td><td class="code"><div class="highlight"><pre>&quot;1732050807568877&quot;を漢数字変換
表示

●漢数字変換(nを)
　　outとは文字列
　　tmpとは文字列
　　flagとは整数=0
　　漢数字とは配列=区切る(&quot;一,二,三,四,五,六,七,八,九&quot;,&quot;,&quot;)
　　単位Aとは配列=区切る(&quot;,十,百,千&quot;,&quot;,&quot;)
　　単位Bとは配列=区切る(&quot;,万,億,兆,京,垓,杼,穣,溝,澗,&quot;&amp;
　　&quot;正,載,極,恒河沙,阿僧祇,那由他,不可思議,無量大数&quot;,&quot;,&quot;)
　　
　　(nを4で数値分割して配列逆順)を反復
　　　　(対象を文字列分解して配列逆順)を反復
　　　　　　もし(対象=0)ならば、続ける
　　　　　　もし(対象=1&amp;&amp;回数&lt;&gt;1)ならば
　　　　　　    tmp=単位A[回数-1]&amp;tmp
　　　　　　違えば
　　　　　　    tmp=漢数字[対象-1]&amp;単位A[回数-1]&amp;tmp
　　　　　　flag=1
　　　　もし(flag=1)ならば
　　　　    out=tmp&amp;単位B[回数-1]&amp;out
　　　　    flag=0
　　　　tmp=&quot;&quot;
　　outで戻る

●数値分割(mをnで)
　　tとは配列
　　(バイト数(m)&lt;&gt;0)の間
　　　　tの0にRIGHT(m,4)を配列挿入
　　　　mから4バイト右端削除
　　tで戻る
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/4530/addtag/" class="addtag" id="addtag_4530">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/nadesico/">
		なでしこ
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/4530/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/4530/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_4530"
  >-</span><span
  class="button yellow"
  id="rating_z_4530"
  >0</span><span 
  class="button green"
  id="rating_p_4530"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/4530/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5325">
  <p class="banner"><a href="/web/20080225222953/http://ja.doukaku.org/user/648/" target="_top">carver</a><a href="/web/20080225222953/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/5325/">#5325</a>(<script language="JavaScript">print_time(new Date("2008/01/14 18:50 GMT"));</script><noscript>2008/01/14 18:50 GMT</noscript>)
	
	
	
	[<a href="/web/20080225222953/http://ja.doukaku.org/lang/other/">
	  Other
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Mac OS X (PowerPC 32bit) アセンブリで。お題の通り一京未満しか対応してません。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172</pre></td><td class="code"><div class="highlight"><pre>        .machine ppc
        .globl _main

;; Usage: ./kansuuji string
        
;; r3: 数字
;; r4: 桁数
;; r5: 処理中の数字
;; r6: 開始時のスタックの位置
;; r7: 漢数字（零〜九）
;; r8: 漢数字の桁1（十百千）
;; r9: 漢数字の桁2（万〜）
;; r11: 表示文字数
;; r12: フラグ
;;      1: 桁1をスタックに積んだかどうか
;;      2: 桁2をスタックに積んだかどうか
_main:
        lwz     r3, 4(r4)       ; argv[1]
        li      r4, 0
        mr      r6, r1          ; スタックポインタを保存
        
        lis     r7, hi16(digit)
        addi    r7, r7, lo16(digit)

        ;; 文字列の最後にセット
        lis     r8, hi16(subunit_end)
        addi    r8, r8, lo16(subunit_end)
        lis     r9, hi16(unit_end)
        addi    r9, r9, lo16(unit_end)

        ;; 改行をスタックに積んでおく
        li      r11, 1          ; 表示文字数（改行含む）
        li      r0, 10          ; &#39;\n&#39;
        stbu    r0, -1(r1)
        
goto_end:
        ;; 文字列の最後に移動
        addi    r4, r4, 1
        lbz     r5, 0(r3)
        addi    r3, r3, 1
        cmpli   cr7, r5, 0
        bne     cr7, goto_end
        subi    r3, r3, 2       ; 文字列の終端から戻す
        subi    r4, r4, 1
        mr      r13, r4

scan:
        li      r12, 0          ; フラグをクリア
        
        ;; 桁1
        lbz     r0, 0(r8)
        cmpli   cr7, r0, 0
        bne     cr7, push_subunit

        ;; 桁1のポインタを先頭に戻し、桁2へ
        lis     r8, hi16(subunit)
        addi    r8, r8, lo16(subunit)
        b       push_unit

;; 桁1
push_subunit:
        lbz     r0, 1(r8)
        stbu    r0, -1(r1)
        lbz     r0, 0(r8)
        stbu    r0, -1(r1)
        addi    r8, r8, 2
        addi    r11, r11, 2     ; 表示文字数+2
        li      r12, 1          ; フラグ
        b       push_digit

;; 桁2
push_unit:
        lbz     r0, 0(r9)
        cmpli   cr7, r0, 0
        beq     cr7, ignore_unit

        ;; 桁2をスタックに追加
        lbz     r0, 1(r9)
        stbu    r0, -1(r1)
        lbz     r0, 0(r9)
        stbu    r0, -1(r1)
        addi    r9, r9, 2
        addi    r11, r11, 2     ; 表示文字数+2
        li      r12, 2          ; フラグ
        b       push_digit
        
ignore_unit:
        lis     r9, hi16(unit)
        addi    r9, r9, lo16(unit)      
        
push_digit:
        ;; 整数に変換してスタックに追加
        lbz     r5, 0(r3)
        subi    r5, r5, 48      ; ASCIIコード

        ;; 数字が1で、かつ桁1がある場合は1を省略
        cmpli   cr7, r5, 1
        cmpli   cr6, r12, 1
        crand   2, 30, 26       ; cr0[eq] = cr7[eq] &amp; cr6[eq]
        beq     cr0, next_scan

        ;; 数字が0で、かつ一の位であれば省略
        cmpli   cr7, r5, 0
        cmpl    cr6, r13, r4
        crand   2, 30, 26       ; cr0[eq] = cr7[eq] &amp; cr6[eq]
        beq     cr0, next_scan

        ;; 数字が0で、かつ桁2がある場合は数字だけ省略
        cmpli   cr7, r5, 0
        cmpli   cr6, r12, 2
        crand   2, 30, 26       ; cr0[eq] = cr7[eq] &amp; cr6[eq]
        beq     cr0, next_scan

        ;; 数字が0で、かつ桁1がある場合は両方省略
        cmpli   cr7, r5, 0
        cmpli   cr6, r12, 1
        crand   2, 30, 26       ; cr0[eq] = cr7[eq] &amp; cr6[eq]
        bne     cr0, push_digit_exec
        addi    r1, r1, 2       ; 先に積んである桁を戻す
        subi    r11, r11, 2
        b       next_scan
        
push_digit_exec:
        ;; 数字
        add     r10, r7, r5
        add     r10, r10, r5    ; 2バイト分
        lbz     r0, 1(r10)
        stbu    r0, -1(r1)
        lbz     r0, 0(r10)
        stbu    r0, -1(r1)
        addi    r11, r11, 2

next_scan:
        subi    r3, r3, 1
        subi    r4, r4, 1
        cmpli   cr7, r4, 0
        bgt     cr7, scan

        ;; 表示
        stwu    r6, -4(r1)      ; スタックに退避
        li      r3, 1
        addi    r4, r1, 4
        mr      r5, r11
        li      r0, 4           ; sys_write()
        sc
        lwz     r6, 0(r1)       ; スタックから復帰
        addi    r1, r1, 4

exit:
        ;; 終了
        mr      r1, r6          ; スタックポインタを戻す
        li      r3, 0
        li      r0, 1
        sc


        .data
        .align  4

digit:
        .asciz  &quot;零一二三四五六七八九&quot;
        .align  4

subunit:
        .asciz  &quot;十百千&quot;
        subunit_end = . - 1
        .align  4

unit:
        .asciz  &quot;万億兆&quot;
        unit_end = . - 1
        .align  4
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080225222953/http://ja.doukaku.org/comment/5325/addtag/" class="addtag" id="addtag_5325">タグ</a>:
	
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/Assembly/">Assembly</a>
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/MacOSX/">MacOSX</a>
    
    <a href="/web/20080225222953/http://ja.doukaku.org/tag/PowerPC/">PowerPC</a>
    
	&nbsp;

	
      [<a href="/web/20080225222953/http://ja.doukaku.org/lang/other/">
		Other
      </a>]
	  
      [<a href="/web/20080225222953/http://ja.doukaku.org/comment/5325/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080225222953/http://ja.doukaku.org/comment/5325/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5325"
  >-</span><span
  class="button yellow"
  id="rating_z_5325"
  >0</span><span 
  class="button green"
  id="rating_p_5325"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080225222953/http://ja.doukaku.org/38/reply_to/5325/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>







</div>

<div id="side_menu" class="compact">

<iframe src="/web/20080225222953if_/http://ja.doukaku.org/login_info/" frameborder=0 width=100% id="login_info">
iframe required
</iframe>

<h4 class="semi_compact">一覧</h4>

<ul>
<!--<li><a href="/web/20080225222953/http://ja.doukaku.org/user/">ユーザ</a>-->
<li><a href="/web/20080225222953/http://ja.doukaku.org/lang/">言語</a>
<li><a href="/web/20080225222953/http://ja.doukaku.org/challenge/">お題</a>
<li><a href="/web/20080225222953/http://ja.doukaku.org/topic/">トピック</a>
<li><a href="/web/20080225222953/http://ja.doukaku.org/comment/">投稿</a>
<li><a href="/web/20080225222953/http://ja.doukaku.org/good_comments/">評価の高い投稿</a>
<li><a href="/web/20080225222953/http://ja.doukaku.org/tag/">タグ</a>
</ul>

<h4 class="compact">フィード</h4>
<ul>
<li><a href="/web/20080225222953/http://ja.doukaku.org/feeds/challenges/">最新のお題</a><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080225222953/http://ja.doukaku.org/feeds/topics/">最新のトピック</a><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080225222953/http://ja.doukaku.org/feeds/comments/">新着投稿</a><img src="/web/20080225222953im_/http://ja.doukaku.org/static/image/feed_icon.png">
</ul>







<h4 class="compact">その他</h4>
<ul>
<li><a href="/web/20080225222953/http://ja.doukaku.org/qa/">Q&A</a>
<li><a href="/web/20080225222953/http://ja.doukaku.org/feedback/">フィードバック</a>
<!--<li><a href="/web/20080225222953/http://ja.doukaku.org/terms">用語集</a>-->
</ul>


<h4 class="compact">リンク</h4>
<ul>
<li><a href="/web/20080225222953/http://www.lingr.com/room/doukaku_ja">チャットルーム(Lingr)</a>
<li><a href="/web/20080225222953/http://labs.cybozu.co.jp/">サイボウズ・ラボ</a>
<li><a href="/web/20080225222953/http://www.djangoproject.com/">Django</a>
</ul>

<h4 id="pathtraq" class="compact"><a href="/web/20080225222953/http://pathtraq.com/analytics?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&m=popular">Pathtraq</a></h4>
<div class="indent">
<span id="pathtraq_sentinel">loading...</span>
</div>


</div>
</div>


<div id="page_foot" class="bordered">

<a rel="license" href="/web/20080225222953/http://creativecommons.org/licenses/by/2.1/jp/">
<img alt="Creative Commons License" style="border-width:0" src="/web/20080225222953im_/http://i.creativecommons.org/l/by/2.1/jp/88x31.png" /></a>
このサイトの内容は、
<a rel="license" href="/web/20080225222953/http://creativecommons.org/licenses/by/2.1/jp/">クリエイティブ・コモンズ・ライセンス</a>の下でライセンスされています。
<a href="/web/20080225222953/http://ja.doukaku.org/qa/#licence">[詳細]</a>

</div>

</body>




<script type="text/javascript">
$(document).ready(function(){$("#doukaku_org").after("<script src='/web/20080225222953/http://api.pathtraq.com/pages?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&api=json&callback=addPathtraq'><" + "/script>")});
</script>

<script src="/web/20080225222953js_/http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2136157-1";
urchinTracker();
</script>




</html>





<!--
     FILE ARCHIVED ON 22:29:53 Feb 25, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:50:09 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
