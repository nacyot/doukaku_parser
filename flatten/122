
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
西暦 to 和暦
DouKaku? </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20081122164632cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20081122164632cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20081122164632cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
<meta name="robots" content="noindex,nofollow">

    <!--<script src="/web/20081122164632/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20081122164632/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20081122164632js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20081122164632js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20081122164632js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20081122164632js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app11.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/122\/flatten\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "22";
var displayMonth = "Nov";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/122/flatten/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20081122164632" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20080418012017/http://ja.doukaku.org/122/flatten/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="18 Apr 2008"><strong>APR</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 16:46:32 Nov 22, 2008">NOV</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Dec
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20080418012017/http://ja.doukaku.org/122/flatten/" title="1:20:17 Apr 18, 2008" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 16:46:32 Nov 22, 2008">22</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2007
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 16:46:32 Nov 22, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2009
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20081122164632*/http://ja.doukaku.org/122/flatten/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>3 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">13 Feb 08 - 22 Nov 08</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:10:010100000010_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20081122164632/http://ja.doukaku.org/">DouKaku?</a><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png' alt=challenge>
<a href="/web/20081122164632/http://ja.doukaku.org/122/">西暦 to 和暦</a>
</h2>

    





<div class="comment" id="comment5067">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5067/">#5067</a>(<script language="JavaScript">print_time(new Date("2007/12/31 07:09 GMT"));</script><noscript>2007/12/31 07:09 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffff7f;">0/8=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  西暦を和暦に変換するプログラムを書いてください。元号の切り替わる日など、複数の表記が可能な場合には両方表示し、西暦が無効な日付の場合には「範囲外」と表示するようにしてください。対応すべき日付は明治元年以降とします。<br/><br/>&gt;a.py&nbsp;1868/12/2<br/>明治1年12月2日<br/><br/>&gt;a.py&nbsp;1926/12/24<br/>大正15年12月24日<br/><br/>&gt;a.py&nbsp;2007/12/01<br/>平成19年12月1日<br/><br/>&gt;a.py&nbsp;1926/12/25<br/>大正15年12月25日&nbsp;昭和1年12月25日<br/><br/>&gt;a.py&nbsp;1868/1/2<br/>範囲外<br/><br/>&gt;a.py&nbsp;1868/100/2<br/>範囲外<br/>
	</div>
	
	<p class="link">
	  see: <a href="/web/20081122164632/http://www.kumamotokokufu-h.ed.jp/kumamoto/bungaku/wa_seireki.html">和暦西暦対応表</a>
	</p>  
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5067/addtag/" class="addtag" id="addtag_5067">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffff7f;"
  >0/8=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5067"
  >-</span><span
  class="button yellow"
  id="rating_z_5067"
  >0</span><span 
  class="button green"
  id="rating_p_5067"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5067/">
  reply
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20081122164632/http://ja.doukaku.org/122/post_comment/">
post comment
</a>
</div>


<h2>Posted feedbacks - Flatten</h2>
<a href="/web/20081122164632/http://ja.doukaku.org/122/nested/">Nested</a>
<a href="/web/20081122164632/http://ja.doukaku.org/122/">Hidden</a> 


  
  <br/>

  
  




<div class="comment" id="comment5228">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/428/" target="_top">Y</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5228/">#5228</a>(<script language="JavaScript">print_time(new Date("2008/01/08 13:45 GMT"));</script><noscript>2008/01/08 13:45 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>最初の例はどう解釈するのでしょう。
1868/12/2は明治1年12月2日ではないと思います。
問題を明治6年1月1日以降に限った方がいいのでは？

また、カレンダーが正しく実装されていればできるのですから、
「無効と表示しなければならない」
ではなく、
「無効と表示してもよい」
としたほうがいいのでは？
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5228/addtag/" class="addtag" id="addtag_5228">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5228"
  >-</span><span
  class="button yellow"
  id="rating_z_5228"
  >0</span><span 
  class="button green"
  id="rating_p_5228"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5228/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5228/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5229">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/643/" target="_top">squld</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5229/">#5229</a>(<script language="JavaScript">print_time(new Date("2008/01/08 14:16 GMT"));</script><noscript>2008/01/08 14:16 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>とりあえず、太陰暦への変換は諦めて書いてみました。
(私も問題を明治6年1月1日以降に限った方が良いと思います。)

結果
-----------
明治1年12月2日
大正15年12月24日
平成19年12月1日
大正15年12月25日 昭和1年12月25日
範囲外
範囲外
-----------</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Locale</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">JapaneseImperialCalendarTest</span> <span class="o">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="nf">convert</span><span class="o">(</span><span class="n">String</span> <span class="n">aYYYYMMDD</span><span class="o">)</span> <span class="k">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">aYYYYMMDD</span> <span class="o">=</span> <span class="n">aYYYYMMDD</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&quot;^0+|(?&lt;=/)0&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">);</span>
        <span class="n">Date</span> <span class="n">tDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;y/M/d&quot;</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="n">aYYYYMMDD</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy/M/d&quot;</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="n">tDate</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">aYYYYMMDD</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">&quot;範囲外&quot;</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">tDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">3197178000000L</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">&quot;範囲外&quot;</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">tDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1812186000000L</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">&quot;明治45年7月30日 大正1年7月30日&quot;</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">tDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1357635600000L</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">&quot;大正15年12月25日 昭和1年12月25日&quot;</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;GGGGy年MMMMd日&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Locale</span><span class="o">(</span><span class="s">&quot;ja&quot;</span><span class="o">,</span> <span class="s">&quot;JP&quot;</span><span class="o">,</span> <span class="s">&quot;JP&quot;</span><span class="o">)).</span><span class="na">format</span><span class="o">(</span><span class="n">tDate</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="k">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1868/12/2&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1926/12/24&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;2007/12/01&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1926/12/25&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1868/1/2&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1868/100/2&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5229/addtag/" class="addtag" id="addtag_5229">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5229/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5229/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5229"
  >-</span><span
  class="button yellow"
  id="rating_z_5229"
  >0</span><span 
  class="button green"
  id="rating_p_5229"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5229/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5229/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5230">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5230/">#5230</a>(<script language="JavaScript">print_time(new Date("2008/01/08 14:21 GMT"));</script><noscript>2008/01/08 14:21 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffefef;">-1/1=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>暫定で</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></td><td class="code"><div class="highlight"><pre>    <span class="k">class</span> <span class="nc">Program</span>
    <span class="k">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">{</span>
            <span class="k">try</span>
            <span class="k">{</span>
                <span class="n">CultureInfo</span> <span class="n">culture</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CultureInfo</span><span class="p">(</span><span class="s">&quot;ja-JP&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
                <span class="n">culture</span><span class="p">.</span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="n">Calendar</span> <span class="p">=</span> <span class="k">new</span> <span class="n">JapaneseCalendar</span><span class="p">();</span>
                <span class="n">DateTime</span> <span class="n">datetime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">ToString</span><span class="p">(</span><span class="s">&quot;ggyy年M月d日&quot;</span><span class="p">,</span> <span class="n">culture</span><span class="p">));</span>
            <span class="k">}</span>
            <span class="k">catch</span>
            <span class="k">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;範囲外です&quot;</span><span class="p">);</span>
            <span class="k">}</span>
        <span class="k">}</span>
    <span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5230/addtag/" class="addtag" id="addtag_5230">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5230/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5230/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffefef;"
  >-1/1=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5230"
  >-</span><span
  class="button yellow"
  id="rating_z_5230"
  >0</span><span 
  class="button green"
  id="rating_p_5230"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5230/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5231">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/641/" target="_top">seri</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5231/">#5231</a>(<script language="JavaScript">print_time(new Date("2008/01/08 14:41 GMT"));</script><noscript>2008/01/08 14:41 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>とりあえず、明治6年1月1日以前を範囲外としてあります。

&gt;trans.exe 1868/12/2
範囲外

&gt;trans.exe 1926/12/24
大正15年12月24日

&gt;trans.exe 2007/12/01
平成19年12月1日

&gt;trans.exe 1926/12/25
大正15年12月25日 昭和1年12月25日

&gt;trans.exe 1868/100/2
範囲外

&gt;trans.exe 1868/1/2
範囲外</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Globalization</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Program</span>
<span class="k">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">{</span>
        <span class="n">CultureInfo</span> <span class="n">culture</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CultureInfo</span><span class="p">(</span><span class="s">&quot;ja-JP&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
        <span class="n">DateTime</span> <span class="n">date</span><span class="p">;</span>
        <span class="kt">string</span><span class="p">[]</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">d</span><span class="p">;</span>

        <span class="n">culture</span><span class="p">.</span><span class="n">DateTimeFormat</span><span class="p">.</span><span class="n">Calendar</span> <span class="p">=</span> <span class="k">new</span> <span class="n">JapaneseCalendar</span><span class="p">();</span>

        <span class="k">try</span> <span class="k">{</span>
            <span class="n">tmp</span> <span class="p">=</span> <span class="n">args</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;/&#39;</span><span class="p">);</span>
            <span class="n">y</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">tmp</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
            <span class="n">m</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">tmp</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span>
            <span class="n">d</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">tmp</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span>
            <span class="n">date</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DateTime</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">d</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">DateTime</span><span class="p">.</span><span class="n">Compare</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="k">new</span> <span class="n">DateTime</span><span class="p">(</span><span class="m">1873</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="p">==</span> <span class="m">1912</span> <span class="p">&amp;&amp;</span> <span class="n">m</span> <span class="p">==</span> <span class="m">7</span> <span class="p">&amp;&amp;</span> <span class="n">d</span> <span class="p">==</span> <span class="m">30</span><span class="p">)</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;明治45年7月30日 &quot;</span><span class="p">);</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="p">==</span> <span class="m">1926</span> <span class="p">&amp;&amp;</span> <span class="n">m</span> <span class="p">==</span> <span class="m">12</span> <span class="p">&amp;&amp;</span> <span class="n">d</span> <span class="p">==</span> <span class="m">25</span><span class="p">)</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;大正15年12月25日 &quot;</span><span class="p">);</span>

            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">date</span><span class="p">.</span><span class="n">ToString</span><span class="p">(</span><span class="s">&quot;ggy年M月d日&quot;</span><span class="p">,</span> <span class="n">culture</span><span class="p">));</span>

        <span class="k">}</span>
        <span class="k">catch</span> <span class="k">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;範囲外&quot;</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="k">}</span>

    <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5231/addtag/" class="addtag" id="addtag_5231">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5231/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5231/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5231"
  >-</span><span
  class="button yellow"
  id="rating_z_5231"
  >0</span><span 
  class="button green"
  id="rating_p_5231"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5231/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5231/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5232">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/641/" target="_top">seri</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5232/">#5232</a>(<script language="JavaScript">print_time(new Date("2008/01/08 15:01 GMT"));</script><noscript>2008/01/08 15:01 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>追記
明治6年1月1日以降のみを対象とするという意見には私も賛成です（そうすると出題の意図から離れてしまうのかもしれませんが…）。
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5232/addtag/" class="addtag" id="addtag_5232">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5232"
  >-</span><span
  class="button yellow"
  id="rating_z_5232"
  >0</span><span 
  class="button green"
  id="rating_p_5232"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5231/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5232/root/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5232/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5234">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/405/" target="_top">mc</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5234/">#5234</a>(<script language="JavaScript">print_time(new Date("2008/01/08 16:30 GMT"));</script><noscript>2008/01/08 16:30 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  とりあえず、太陰暦には、対応してないです…。<br/>実行結果:<br/>(to-japanese-date&nbsp;"1926/12/25")&nbsp;〜<br/>〜<br/>;1868/12/2&nbsp;=&gt;&nbsp;明治1年12月2日<br/>;1926/12/24&nbsp;=&gt;&nbsp;大正15年12月24日<br/>;2007/12/01&nbsp;=&gt;&nbsp;平成19年12月1日<br/>;1926/12/25&nbsp;=&gt;&nbsp;大正15年12月25日&nbsp;昭和1年12月25日<br/>;1868/1/2&nbsp;=&gt;&nbsp;範囲外<br/>;1868/100/2&nbsp;=&gt;&nbsp;範囲外
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></td><td class="code"><div class="highlight"><pre>(defpackage #:doukaku-122 (:use #:cl))
(in-package #:doukaku-122)

(defconstant +meiji-end+     396802800)
(defconstant +taisho-start+  +meiji-end+)
(defconstant +taisho-end+    851353200)
(defconstant +showa-start+   +taisho-end+)
(defconstant +showa-end+     2809090800)
(defconstant +heisei-start+  2809177200)
(defconstant +meiji-offset+  1867)
(defconstant +taisho-offset+ 1911)
(defconstant +showa-offset+  1925)
(defconstant +heisei-offset+ 1988)

(defun to-japanese-date (date-string)
  (or (ppcre:register-groups-bind (y m d)
          (&quot;([0-9]{4})/([01]*[0-9])/([0-3]*[0-9])$&quot; date-string)
        (destructuring-bind (y m d) (mapcar #&#39;parse-integer `(,y ,m ,d))
          (when (and (&lt;= y 1868) (&lt;= m 1) (&lt; d 25))
            (return-from to-japanese-date (princ &quot;範囲外&quot;)))
          (let ((utime (if (&gt;= y 1900)
                           (encode-universal-time 0 0 0 d m y -9)
                           0))
                gengo toshi)
            (when (&lt;= +heisei-start+ utime)
              (push &quot;平成&quot; gengo)
              (push (- y +heisei-offset+) toshi))
            (when (&lt;= +showa-start+ utime +showa-end+)
              (push &quot;昭和&quot; gengo)
              (push (- y +showa-offset+) toshi))
            (when (&lt;= +taisho-start+ utime +taisho-end+)
              (push &quot;大正&quot; gengo)
              (push (- y +taisho-offset+) toshi))
            (when (&lt;= 0 utime +meiji-end+)
              (push &quot;明治&quot; gengo)
              (push (- y +meiji-offset+) toshi))
            (format nil #&#39;multiple-gengo-print gengo toshi m d))))
      (princ &quot;範囲外&quot;)))   ;日付のパターンにマッチしない場合は範囲外

(defun multiple-gengo-print (stream gengo y &amp;rest args)
  (do ((yy y (cdr yy)) (g gengo (cdr g)))
      ((endp g))
    (apply #&#39;format stream &quot;~A~D年~D月~D日&quot; (car g) (car yy) args)
    (and (cdr g) (princ &quot; &quot; stream))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5234/addtag/" class="addtag" id="addtag_5234">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5234/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5234/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5234"
  >-</span><span
  class="button yellow"
  id="rating_z_5234"
  >0</span><span 
  class="button green"
  id="rating_p_5234"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5234/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5234/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5235">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/405/" target="_top">mc</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5235/">#5235</a>(<script language="JavaScript">print_time(new Date("2008/01/08 16:58 GMT"));</script><noscript>2008/01/08 16:58 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/diff/">
	  diff
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>すいません、余計なプリント文が混じってましたので修正します。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre><span class="gd">--- 5234.txt    2008-01-09 01:43:00.000000000 +0900</span>
<span class="gi">+++ 5234.txt.diff       2008-01-09 01:42:50.000000000 +0900</span>
<span class="gu">@@ -20 +20 @@</span>
<span class="gd">-            (return-from to-japanese-date (princ &quot;範囲外&quot;)))</span>
<span class="gi">+            (return-from to-japanese-date &quot;範囲外&quot;))</span>
<span class="gu">@@ -38 +38 @@</span>
<span class="gd">-      (princ &quot;範囲外&quot;)))   ;日付のパターンにマッチしない場合は範囲外</span>
<span class="gi">+      &quot;範囲外&quot;))   ;日付のパターンにマッチしない場合は範囲外</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5235/addtag/" class="addtag" id="addtag_5235">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/diff/">
		diff
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5235/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5235/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5235"
  >-</span><span
  class="button yellow"
  id="rating_z_5235"
  >0</span><span 
  class="button green"
  id="rating_p_5235"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5234/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5235/root/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5235/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5236">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5236/">#5236</a>(<script language="JavaScript">print_time(new Date("2008/01/08 17:13 GMT"));</script><noscript>2008/01/08 17:13 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Squeak Smalltalk で。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre>| 入力 変換 境界 年号 日付 出力 |
入力 := &#39;1926/12/25&#39;.
変換 := [:文字列 |
    | 年月日 |
    年月日 := (文字列 subStrings: &#39;/&#39;) collect: [:各々 | 各々 asInteger].
    [DateAndTime year: 年月日 first month: 年月日 second day: 年月日 third]
        ifError: [^&#39;範囲外&#39;]].
境界 := #(&#39;1873/1/1&#39; &#39;1912/7/30&#39; &#39;1926/12/25&#39; &#39;1989/1/8&#39;) collect: [:各々 | 変換 value: 各々].
境界 := 境界 readStream.
年号 := #(明治 6 大正 1 昭和 1 平成 1).
(日付 := 変換 value: 入力) &lt; 境界 peek ifTrue: [^&#39;範囲外&#39;].
出力 := OrderedCollection new.
年号 pairsDo: [:号 :年 |
    | 開始 |
    開始 := 境界 next.
    (日付 between: 開始 and: (境界 peek ifNil: [開始 max: 日付])) ifTrue: [
        出力 add: (号, &#39;{1}年{2}月{3}日&#39;
            format: {日付 year - 開始 year + 年. 日付 month. 日付 dayOfMonth})]].
^出力 asArray   &quot;=&gt; #(&#39;大正15年12月25日&#39; &#39;昭和1年12月25日&#39;) &quot;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5236/addtag/" class="addtag" id="addtag_5236">Tags</a>:
	
    
    <a href="/web/20081122164632/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5236/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5236/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5236"
  >-</span><span
  class="button yellow"
  id="rating_z_5236"
  >0</span><span 
  class="button green"
  id="rating_p_5236"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5236/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5243">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5243/">#5243</a>(<script language="JavaScript">print_time(new Date("2008/01/09 01:32 GMT"));</script><noscript>2008/01/09 01:32 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>すみません、明治５年以前は太陰暦であったとは・・・知りませんでした。「明治６年以降」にお題を修正します。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5243/addtag/" class="addtag" id="addtag_5243">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5243"
  >-</span><span
  class="button yellow"
  id="rating_z_5243"
  >0</span><span 
  class="button green"
  id="rating_p_5243"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5228/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5243/root/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5243/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5243/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5244">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/658/" target="_top">Jlake</a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5244/">#5244</a>(<script language="JavaScript">print_time(new Date("2008/01/09 02:43 GMT"));</script><noscript>2008/01/09 02:43 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></td><td class="code"><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="err">西暦</span> <span class="nx">to</span> <span class="err">和暦</span><span class="o">&lt;/</span><span class="nx">title</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">&quot;Content-Type&quot;</span> <span class="nx">content</span><span class="o">=</span><span class="s2">&quot;text/html; charset=utf-8&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">//*******************************************************</span>
<span class="c">// 西暦 to 和暦</span>
<span class="c">//*******************************************************</span>
<span class="k">function</span> <span class="nx">toWareki</span><span class="p">(</span><span class="nx">numYear</span><span class="o">,</span> <span class="nx">numMonth</span><span class="o">,</span> <span class="nx">numDay</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nx">today</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="nx">numCurYear</span> <span class="o">=</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
    <span class="nx">numCurMon</span> <span class="o">=</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="nx">numCurDay</span> <span class="o">=</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
    
    <span class="nx">strDate</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">numYear</span> <span class="o">+</span> <span class="p">((</span><span class="nx">numMonth</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;0&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">numMonth</span> <span class="o">+</span> <span class="p">((</span><span class="nx">numDay</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;0&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">numDay</span><span class="o">;</span>
    <span class="nx">strCurDate</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">numCurYear</span> <span class="o">+</span> <span class="p">((</span><span class="nx">numCurMon</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;0&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">numCurMon</span> <span class="o">+</span> <span class="p">((</span><span class="nx">numCurDay</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;0&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">numCurDay</span><span class="o">;</span>

    <span class="k">var</span> <span class="nx">arrWareki</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span> <span class="s1">&#39;明治&#39;</span><span class="o">,</span> <span class="s1">&#39;start&#39;</span><span class="o">:</span> <span class="s1">&#39;18680908&#39;</span><span class="o">,</span> <span class="s1">&#39;end&#39;</span><span class="o">:</span> <span class="s1">&#39;19120730&#39;</span><span class="p">}</span><span class="o">,</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span> <span class="s1">&#39;大正&#39;</span><span class="o">,</span> <span class="s1">&#39;start&#39;</span><span class="o">:</span> <span class="s1">&#39;19120730&#39;</span><span class="o">,</span> <span class="s1">&#39;end&#39;</span><span class="o">:</span> <span class="s1">&#39;19261225&#39;</span><span class="p">}</span><span class="o">,</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span> <span class="s1">&#39;昭和&#39;</span><span class="o">,</span> <span class="s1">&#39;start&#39;</span><span class="o">:</span> <span class="s1">&#39;19261225&#39;</span><span class="o">,</span> <span class="s1">&#39;end&#39;</span><span class="o">:</span> <span class="s1">&#39;19890107&#39;</span><span class="p">}</span><span class="o">,</span>
        <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span> <span class="s1">&#39;平成&#39;</span><span class="o">,</span> <span class="s1">&#39;start&#39;</span><span class="o">:</span> <span class="s1">&#39;19890108&#39;</span><span class="o">,</span> <span class="s1">&#39;end&#39;</span><span class="o">:</span> <span class="nx">strCurDate</span><span class="p">}</span>
    <span class="p">];</span>
    
    <span class="k">var</span> <span class="nx">strName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">;</span>
    <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">arrWareki</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">arrWareki</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">strDate</span> <span class="o">&amp;&amp;</span> <span class="nx">strDate</span> <span class="o">&lt;=</span> <span class="nx">arrWareki</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">&#39;end&#39;</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">var</span> <span class="nx">strAnd</span> <span class="o">=</span> <span class="p">(</span><span class="nx">strName</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="s1">&#39;年&amp;nbsp;&#39;</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">numBaseYear</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">arrWareki</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">&#39;start&#39;</span><span class="p">].</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">4</span><span class="p">));</span>
            <span class="nx">strName</span> <span class="o">+=</span> <span class="nx">strAnd</span> <span class="o">+</span> <span class="nx">arrWareki</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nx">numYear</span> <span class="o">-</span> <span class="nx">numBaseYear</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">(</span><span class="nx">strName</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;範囲外&#39;</span> <span class="o">:</span> <span class="nx">strName</span> <span class="o">+</span> <span class="s1">&#39;年&#39;</span> <span class="o">+</span> <span class="nx">numMonth</span> <span class="o">+</span> <span class="s1">&#39;月&#39;</span> <span class="o">+</span> <span class="nx">numDay</span> <span class="o">+</span> <span class="s1">&#39;日&#39;</span><span class="o">;</span>
<span class="p">}</span>
<span class="c">//--&gt;</span>
<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="err">西暦：</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;year&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;2008&quot;</span> <span class="nx">size</span><span class="o">=</span><span class="s2">&quot;4&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;month&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;1&quot;</span> <span class="nx">size</span><span class="o">=</span><span class="s2">&quot;2&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;day&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;9&quot;</span> <span class="nx">size</span><span class="o">=</span><span class="s2">&quot;2&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;変換&quot;</span> <span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;document.getElementById(&#39;wareki&#39;).innerHTML=toWareki(document.getElementById(&#39;year&#39;).value, document.getElementById(&#39;month&#39;).value, document.getElementById(&#39;day&#39;).value);&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="nx">br</span><span class="o">/&gt;</span>
<span class="err">和暦：</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;wareki&quot;</span><span class="o">&gt;&amp;</span><span class="nx">nbsp</span><span class="o">;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5244/addtag/" class="addtag" id="addtag_5244">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5244/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5244/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5244"
  >-</span><span
  class="button yellow"
  id="rating_z_5244"
  >0</span><span 
  class="button green"
  id="rating_p_5244"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5244/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5246">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/550/" target="_top">todogzm</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5246/">#5246</a>(<script language="JavaScript">print_time(new Date("2008/01/09 04:05 GMT"));</script><noscript>2008/01/09 04:05 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>Java SE 6の和暦機能を使用しました。
結果は以下のとおりで、太陰暦云々の話でもエラーなしで
出力するところに注意が必要です。

 明治01年 12月 2日
 大正15年 12月 24日
 平成19年 12月 1日
 昭和01年 12月 25日
 明治01年 1月 2日
 明治09年 4月 2日

ちゃんと「範囲外」を出力しなければならないため、
お題を解いたとは言えないのですが、
和暦を使う際には気をつけてくださいねという
意味も込めて投稿の投稿です。</pre>
	</div>
	
	<p class="link">
	  see: <a href="/web/20081122164632/http://www.javainthebox.net/laboratory/JavaSE6/imperialcalendar/imperialcalendar.html">Java SE 6 じゃじゃ馬ならし 和暦</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">java.text.DateFormat</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">java.util.Locale</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Wareki</span> <span class="o">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="k">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1868/12/2&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1926/12/24&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;2007/12/01&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1926/12/25&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1868/1/2&quot;</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">convert</span><span class="o">(</span><span class="s">&quot;1868/100/2&quot;</span><span class="o">));</span>
    <span class="o">}</span>
    
    <span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="nf">convert</span><span class="o">(</span><span class="n">String</span> <span class="n">dateStr</span><span class="o">)</span> <span class="k">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">Locale</span> <span class="n">waLocale</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Locale</span><span class="o">(</span><span class="s">&quot;ja&quot;</span><span class="o">,</span> <span class="s">&quot;JP&quot;</span><span class="o">,</span> <span class="s">&quot;JP&quot;</span><span class="o">);</span>
        <span class="n">DateFormat</span> <span class="n">sei</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy/MM/dd&quot;</span><span class="o">);</span>
        <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="n">sei</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">dateStr</span><span class="o">);</span>
        
        <span class="n">DateFormat</span> <span class="n">wa</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;GGGGyy年 MMMM d日&quot;</span><span class="o">,</span> <span class="n">waLocale</span><span class="o">);</span>
            
        <span class="k">return</span> <span class="n">wa</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5246/addtag/" class="addtag" id="addtag_5246">Tags</a>:
	
    
    <a href="/web/20081122164632/http://ja.doukaku.org/tag/Java1.6/">Java1.6</a>
    
    <a href="/web/20081122164632/http://ja.doukaku.org/tag/JavaSE6/">JavaSE6</a>
    
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5246/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5246/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5246"
  >-</span><span
  class="button yellow"
  id="rating_z_5246"
  >0</span><span 
  class="button green"
  id="rating_p_5246"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5229/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5246/root/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5246/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5246/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5248">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/596/" target="_top">梅紫蘇</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5248/">#5248</a>(<script language="JavaScript">print_time(new Date("2008/01/09 06:51 GMT"));</script><noscript>2008/01/09 06:51 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>「なでしこ」とかそーいう機能のあってもよさそうな...と調べてる間に....(まさかJavaのほうとは)。そこがオイシイ言語やライブラリもあるんじゃないの？もったいない:-)</p>
<p>といいつつ、太陰暦付近はあいまいな出力をするプログラム。（対応する範囲が５年程しかないし、ゴリ押しでできそうな気もする）</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;iostream&gt;</span>

<span class="kt">bool</span> <span class="n">check_date</span><span class="p">(</span><span class="kt">int</span> <span class="n">yy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mm</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dd</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">mm</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">mm</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">DATE_MAX</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">31</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">};</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dd</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">dd</span> <span class="o">&gt;</span> <span class="n">DATE_MAX</span><span class="p">[</span><span class="n">mm</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">mm</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">dd</span> <span class="o">&lt;</span> <span class="mi">29</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">((</span><span class="n">yy</span> <span class="o">%</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">yy</span> <span class="o">%</span> <span class="mi">100</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">((</span><span class="n">yy</span> <span class="o">%</span> <span class="mi">400</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">wareki</span><span class="p">(</span><span class="kt">int</span> <span class="n">yy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mm</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dd</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">yy</span> <span class="o">&lt;</span> <span class="mi">1868</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">check_date</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span> <span class="n">mm</span><span class="p">,</span> <span class="n">dd</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">))</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;範囲外&quot;</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">ymd</span> <span class="o">=</span> <span class="n">yy</span> <span class="o">*</span> <span class="mi">10000</span> <span class="o">+</span> <span class="n">mm</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="n">dd</span><span class="p">;</span>
        <span class="k">if</span>      <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;</span>  <span class="mi">18680125</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;範囲外&quot;</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">==</span> <span class="mi">19120730</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;明治45年7月30日 大正1年7月30日&quot;</span><span class="p">;</span>    <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">==</span> <span class="mi">19261225</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;大正15年12月25日 昭和1年12月25日&quot;</span><span class="p">;</span>  <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;</span> <span class="mi">18730101</span><span class="p">)</span> <span class="p">{</span>    <span class="c">// 1873/1/1より前((明治5年以前)は太陰暦</span>
                <span class="k">if</span>      <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;</span> <span class="mi">18690101</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;明治1年9月8日～11月18日のどこか&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;</span> <span class="mi">18700101</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;明治1年11月19日～明治2年11月29日のどこか&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;</span> <span class="mi">18710101</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;明治2年11月30日～明治3年11月10日のどこか&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;</span> <span class="mi">18720101</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;明治3年11月11日～明治4年11月20日のどこか&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">else</span>                     <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;明治4年11月21日～明治5年12月2日のどこか&quot;</span><span class="p">;</span>  <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span>      <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;=</span> <span class="mi">19120730</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;明治&quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">yy</span> <span class="o">-</span> <span class="mi">1869</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;年&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;=</span> <span class="mi">19261225</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;大正&quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">yy</span> <span class="o">-</span> <span class="mi">1911</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;年&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ymd</span> <span class="o">&lt;=</span> <span class="mi">19890107</span><span class="p">)</span> <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;昭和&quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">yy</span> <span class="o">-</span> <span class="mi">1925</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;年&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="k">else</span>                      <span class="p">{</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;平成&quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">yy</span> <span class="o">-</span> <span class="mi">1988</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;年&quot;</span><span class="p">;</span> <span class="p">}</span>
                <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="n">mm</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;月&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">dd</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;日&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">wareki</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">yy</span><span class="p">,</span> <span class="n">mm</span><span class="p">,</span> <span class="n">dd</span><span class="p">;</span>
    <span class="n">sscanf</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="s">&quot;%d/%d/%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">yy</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dd</span><span class="p">);</span>
    <span class="n">wareki</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span> <span class="n">mm</span><span class="p">,</span> <span class="n">dd</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="n">wareki</span><span class="p">(</span><span class="s">&quot;1868/12/2&quot;</span><span class="p">);</span>    <span class="c">// ... orz</span>
    <span class="n">wareki</span><span class="p">(</span><span class="s">&quot;1926/12/24&quot;</span><span class="p">);</span>   <span class="c">// 大正15年12月24日</span>
    <span class="n">wareki</span><span class="p">(</span><span class="s">&quot;2007/12/01&quot;</span><span class="p">);</span>   <span class="c">// 平成19年12月1日</span>
    <span class="n">wareki</span><span class="p">(</span><span class="s">&quot;1912/7/30&quot;</span><span class="p">);</span>    <span class="c">// 明治45年7月30日 大正1年7月30日</span>
    <span class="n">wareki</span><span class="p">(</span><span class="s">&quot;1926/12/25&quot;</span><span class="p">);</span>   <span class="c">// 大正15年12月25日 昭和1年12月25日 </span>
    <span class="n">wareki</span><span class="p">(</span><span class="s">&quot;1868/1/2&quot;</span><span class="p">);</span>     <span class="c">// 範囲外 </span>
    <span class="n">wareki</span><span class="p">(</span><span class="s">&quot;1868/100/2&quot;</span><span class="p">);</span>   <span class="c">// 範囲外 </span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5248/addtag/" class="addtag" id="addtag_5248">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5248/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5248/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5248"
  >-</span><span
  class="button yellow"
  id="rating_z_5248"
  >0</span><span 
  class="button green"
  id="rating_p_5248"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5243/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5248/root/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5248/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5249">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/448/" target="_top">naranja</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5249/">#5249</a>(<script language="JavaScript">print_time(new Date("2008/01/09 08:23 GMT"));</script><noscript>2008/01/09 08:23 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/d/">
	  D
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  明治 6 年より前は範囲外で。あまり美しくないですが。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="n">std</span>.<span class="n">stdio</span>;
<span class="k">import</span> <span class="n">std</span>.<span class="n">date</span>;
<span class="k">import</span> <span class="n">std</span>.<span class="n">string</span>;

<span class="kt">void</span> <span class="n">printWareki</span>(<span class="n">string</span> <span class="n">date</span>){
    <span class="k">auto</span> <span class="n">d</span> = <span class="n">parse</span>(<span class="n">date</span>);
    <span class="k">if</span>(<span class="n">d</span> == <span class="n">d_time_nan</span>){
        <span class="n">writefln</span>(<span class="s">&quot;範囲外&quot;</span>);
        <span class="k">return</span>;
    }

    <span class="k">auto</span> <span class="n">meiji6</span> = <span class="n">parse</span>(<span class="s">&quot;1873/1/1&quot;</span>);
    <span class="k">auto</span> <span class="n">taisho</span> = <span class="n">parse</span>(<span class="s">&quot;1912/7/30&quot;</span>);
    <span class="k">auto</span> <span class="n">showa</span> = <span class="n">parse</span>(<span class="s">&quot;1926/12/25&quot;</span>);
    <span class="k">auto</span> <span class="n">heisei</span> = <span class="n">parse</span>(<span class="s">&quot;1989/1/8&quot;</span>);

    <span class="k">auto</span> <span class="n">dateParts</span> = <span class="n">date</span>.<span class="n">split</span>(<span class="s">&quot;/&quot;</span>);
    <span class="k">auto</span> <span class="n">year</span> = <span class="n">atoi</span>(<span class="n">dateParts</span>[<span class="mi">0</span>]);
    <span class="k">auto</span> <span class="n">month</span> = <span class="n">atoi</span>(<span class="n">dateParts</span>[<span class="mi">1</span>]);
    <span class="k">auto</span> <span class="n">day</span> = <span class="n">atoi</span>(<span class="n">dateParts</span>[<span class="mi">2</span>]);

    <span class="kt">void</span> <span class="n">output</span>(<span class="kt">char</span> <span class="n">eraNameCap</span>){
        <span class="k">auto</span> <span class="n">diff</span> = ([<span class="sc">&#39;M&#39;</span> : <span class="mi">1867</span>, <span class="sc">&#39;T&#39;</span> : <span class="mi">1911</span>, <span class="sc">&#39;S&#39;</span> : <span class="mi">1925</span>, <span class="sc">&#39;H&#39;</span> : <span class="mi">1988</span>]);
        <span class="k">auto</span> <span class="n">eraName</span> = ([<span class="sc">&#39;M&#39;</span> : <span class="s">&quot;明治&quot;</span>, <span class="sc">&#39;T&#39;</span> : <span class="s">&quot;大正&quot;</span>, <span class="sc">&#39;S&#39;</span> : <span class="s">&quot;昭和&quot;</span>, <span class="sc">&#39;H&#39;</span> : <span class="s">&quot;平成&quot;</span>]);
        <span class="n">writef</span>(<span class="s">&quot;%s%d年%d月%d日&quot;</span>, <span class="n">eraName</span>[<span class="n">eraNameCap</span>],
                    <span class="n">year</span> - <span class="n">diff</span>[<span class="n">eraNameCap</span>], <span class="n">month</span>, <span class="n">day</span>);
    }

    <span class="k">if</span>(<span class="n">meiji6</span> &lt;= <span class="n">d</span> &amp;&amp; <span class="n">d</span> &lt; <span class="n">taisho</span>){
        <span class="n">output</span>(<span class="sc">&#39;M&#39;</span>);
    }
    <span class="k">else</span> <span class="k">if</span>(<span class="n">d</span> == <span class="n">taisho</span>){
        <span class="n">output</span>(<span class="sc">&#39;M&#39;</span>); <span class="n">writef</span>(<span class="s">&quot; &quot;</span>); <span class="n">output</span>(<span class="sc">&#39;T&#39;</span>);
    }
    <span class="k">else</span> <span class="k">if</span>(<span class="n">taisho</span> &lt; <span class="n">d</span> &amp;&amp; <span class="n">d</span> &lt; <span class="n">showa</span>){
        <span class="n">output</span>(<span class="sc">&#39;T&#39;</span>);
    }
    <span class="k">else</span> <span class="k">if</span>(<span class="n">d</span> == <span class="n">showa</span>){
        <span class="n">output</span>(<span class="sc">&#39;T&#39;</span>); <span class="n">writef</span>(<span class="s">&quot; &quot;</span>); <span class="n">output</span>(<span class="sc">&#39;S&#39;</span>);
    }
    <span class="k">else</span> <span class="k">if</span>(<span class="n">showa</span> &lt; <span class="n">d</span> &amp;&amp; <span class="n">d</span> &lt; <span class="n">heisei</span>){
        <span class="n">output</span>(<span class="sc">&#39;S&#39;</span>);
    }
    <span class="k">else</span> <span class="k">if</span>(<span class="n">heisei</span> &lt;= <span class="n">d</span>){
        <span class="n">output</span>(<span class="sc">&#39;H&#39;</span>);
    }
    <span class="k">else</span>{
        <span class="n">writef</span>(<span class="s">&quot;範囲外&quot;</span>);
    }
    <span class="n">writefln</span>();
}

<span class="kt">void</span> <span class="n">main</span>(){
    <span class="n">printWareki</span>(<span class="s">&quot;1868/12/2&quot;</span>);   <span class="c">// 範囲外</span>
    <span class="n">printWareki</span>(<span class="s">&quot;1926/12/24&quot;</span>);  <span class="c">// 大正15年12月24日</span>
    <span class="n">printWareki</span>(<span class="s">&quot;2007/12/01&quot;</span>);  <span class="c">// 平成19年12月1日</span>
    <span class="n">printWareki</span>(<span class="s">&quot;1926/12/25&quot;</span>);  <span class="c">// 大正15年12月25日 昭和1年12月25日</span>
    <span class="n">printWareki</span>(<span class="s">&quot;1868/1/2&quot;</span>);    <span class="c">// 範囲外</span>
    <span class="n">printWareki</span>(<span class="s">&quot;1868/100/2&quot;</span>);  <span class="c">// 範囲外</span>
    <span class="n">printWareki</span>(<span class="s">&quot;1904/02/06&quot;</span>);  <span class="c">// 明治37年2月6日</span>
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5249/addtag/" class="addtag" id="addtag_5249">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/d/">
		D
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5249/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5249/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5249"
  >-</span><span
  class="button yellow"
  id="rating_z_5249"
  >0</span><span 
  class="button green"
  id="rating_p_5249"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5249/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5250">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/591/" target="_top">99yen</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5250/">#5250</a>(<script language="JavaScript">print_time(new Date("2008/01/09 09:15 GMT"));</script><noscript>2008/01/09 09:15 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/nadesico/">
	  なでしこ
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>お察しの通りなでしこには「和暦変換」という関数が標準でありますが、すべてグレゴリオ暦で処理するようです。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7</pre></td><td class="code"><div class="highlight"><pre>「1868/12/2」を和暦変換して表示
「1926/12/25」を和暦変換して表示
/*
 * 結果
 明治元年12月2日
 昭和元年12月25日
*/
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5250/addtag/" class="addtag" id="addtag_5250">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/nadesico/">
		なでしこ
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5250/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5250/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5250"
  >-</span><span
  class="button yellow"
  id="rating_z_5250"
  >0</span><span 
  class="button green"
  id="rating_p_5250"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5250/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5250/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5251">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5251/">#5251</a>(<script language="JavaScript">print_time(new Date("2008/01/09 09:18 GMT"));</script><noscript>2008/01/09 09:18 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  たしかに、Java6で導入された和暦に関する機能は明治⇔大正⇔昭和の境界になっている日の扱いが新しい方の年号になっているので、厳密ではありませんね。

とはいえ、Javaに限らずほとんどの言語の組み込みAPIは異なる暦(たとえば西暦と和暦)の日付が1対1対応すると仮定したインタフェースになっているため、きれいな解決方法はなさそうです。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5251/addtag/" class="addtag" id="addtag_5251">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5251"
  >-</span><span
  class="button yellow"
  id="rating_z_5251"
  >0</span><span 
  class="button green"
  id="rating_p_5251"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5246/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5251/root/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5251/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5252">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5252/">#5252</a>(<script language="JavaScript">print_time(new Date("2008/01/09 10:04 GMT"));</script><noscript>2008/01/09 10:04 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre>import java.text.{SimpleDateFormat, ParseException}
import java.util.{Date, Locale, Calendar}

object west2japanese {
  val inf    = new SimpleDateFormat(&quot;y/MM/dd&quot;)
  val parse = {inf.setLenient(false);inf}.parse _:String =&gt; Date
  val format = new SimpleDateFormat(&quot;GGGGy年MMMMd日&quot;, 
                    new Locale(&quot;ja&quot;, &quot;JP&quot;, &quot;JP&quot;)).format _:Date =&gt; String
  def apply(d:String) = try { 
    (format compose parse)(d) match {
      case &quot;大正1年7月30日&quot; =&gt; &quot;明治45年7月30日 大正1年7月30日&quot;
      case &quot;昭和1年12月25日&quot; =&gt; &quot;大正15年12月25日 昭和1年12月25日&quot;
      case s if s.matches(&quot;^(西暦|明治[1-5]{1}年).*&quot;) =&gt; &quot;範囲外&quot;
      case s =&gt; s
    }
  }catch{
    case e:ParseException =&gt; &quot;範囲外&quot;
  }
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5252/addtag/" class="addtag" id="addtag_5252">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5252/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5252/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5252"
  >-</span><span
  class="button yellow"
  id="rating_z_5252"
  >0</span><span 
  class="button green"
  id="rating_p_5252"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5252/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5253">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/591/" target="_top">99yen</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5253/">#5253</a>(<script language="JavaScript">print_time(new Date("2008/01/09 10:20 GMT"));</script><noscript>2008/01/09 10:20 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/nadesico/">
	  なでしこ
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>明治6年以降対応版を自前で。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><div class="highlight"><pre>●Date2Wareki(date)
    tmpとは文字列
    dとは整数=Date2Int(date)
    もし(d&lt;18730101)ならば
        &quot;範囲外&quot;で戻る
    もし(d&lt;=19120730)ならば
        もし(d=19120730)ならば
            &quot;明治45年7月30日 大正元年7月30日&quot;で戻る
        Date2JADate(&quot;明治&quot;,1867,date)
    もし(d&gt;=19120731&amp;&amp;d&lt;=19261225)ならば
        もし(d=19261225)ならば
            &quot;大正15年12月25日 昭和元年12月25日&quot;で戻る
        Date2JADate(&quot;大正&quot;,1911,date)
    もし(d&gt;=19261226&amp;&amp;d&lt;=19890107)ならば
        Date2JADate(&quot;昭和&quot;,1925,date)
    もし(d&gt;=19890108)ならば
        Date2JADate(&quot;平成&quot;,1988,date)
●Date2JADate(nengou,sa,date)
    date=dateを&quot;/&quot;で区切る
    &quot;{nengou}{date[0]-sa}年{TOINT(date[1])}月{TOINT(date[2])}日&quot;で戻る
●Date2Int(date)
    date=dateを&quot;/&quot;で区切る
    TOSTR(date[0]を4でゼロ埋め)&amp;TOSTR(date[1]を2でゼロ埋め)&amp;TOSTR(date[2]を2でゼロ埋め)で戻る

Date2Wareki(&quot;1926/12/25&quot;)を表示
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5253/addtag/" class="addtag" id="addtag_5253">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/nadesico/">
		なでしこ
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5253/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5253/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5253"
  >-</span><span
  class="button yellow"
  id="rating_z_5253"
  >0</span><span 
  class="button green"
  id="rating_p_5253"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5250/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20081122164632/http://ja.doukaku.org/comment/5253/root/"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5253/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5254">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5254/">#5254</a>(<script language="JavaScript">print_time(new Date("2008/01/09 10:59 GMT"));</script><noscript>2008/01/09 10:59 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Pythonのがないみたいなので投稿。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><div class="highlight"><pre><span class="c"># coding: shift_jis</span>

<span class="k">import</span> <span class="nn">datetime</span>
<span class="k">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)]</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1873</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">date</span> <span class="o">&lt;=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1912</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span>
            <span class="k">yield</span> <span class="s">u&quot;明治&quot;</span><span class="p">,</span> <span class="mi">1867</span>
        <span class="k">if</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1912</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">date</span> <span class="o">&lt;=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1926</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">):</span>
            <span class="k">yield</span> <span class="s">u&quot;大正&quot;</span><span class="p">,</span> <span class="mi">1911</span>
        <span class="k">if</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1926</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">date</span> <span class="o">&lt;=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1989</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
            <span class="k">yield</span> <span class="s">u&quot;昭和&quot;</span><span class="p">,</span> <span class="mi">1925</span>
        <span class="k">if</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1989</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">date</span><span class="p">:</span>
            <span class="k">yield</span> <span class="s">u&quot;平成&quot;</span><span class="p">,</span> <span class="mi">1988</span>
    <span class="k">print</span> <span class="s">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">u&quot;</span><span class="si">%s%d</span><span class="s">年</span><span class="si">%d</span><span class="s">月</span><span class="si">%d</span><span class="s">日&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gengo</span><span class="p">,</span> <span class="n">year</span> <span class="o">-</span> <span class="n">offset</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span> \
        <span class="k">for</span> <span class="n">gengo</span><span class="p">,</span> <span class="n">offset</span> <span class="ow">in</span> <span class="n">f</span><span class="p">())</span> <span class="ow">or</span> <span class="s">u&quot;範囲外&quot;</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5254/addtag/" class="addtag" id="addtag_5254">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5254/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5254/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5254"
  >-</span><span
  class="button yellow"
  id="rating_z_5254"
  >0</span><span 
  class="button green"
  id="rating_p_5254"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5254/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5255">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/642/" target="_top">saws</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5255/">#5255</a>(<script language="JavaScript">print_time(new Date("2008/01/09 11:05 GMT"));</script><noscript>2008/01/09 11:05 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>お題のサンプル出力では元年は前年号の最終年と併記していますが, 1年を元年としたことが同義だと考えてその記述は省略しました.</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;date&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;kconv&#39;</span>
<span class="no">WAREKI</span> <span class="o">=</span> <span class="o">[[</span><span class="s1">&#39;明治&#39;</span><span class="p">,</span> <span class="s1">&#39;1868/9/8&#39;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;大正&#39;</span><span class="p">,</span> <span class="s1">&#39;1912/7/30&#39;</span><span class="o">]</span><span class="p">,</span> 
  <span class="o">[</span><span class="s1">&#39;昭和&#39;</span><span class="p">,</span> <span class="s1">&#39;1926/12/25&#39;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;平成&#39;</span><span class="p">,</span> <span class="s1">&#39;1989/1/8&#39;</span><span class="o">]]</span>
<span class="no">DATES</span> <span class="o">=</span> <span class="sx">%w(&#39;1868/12/2&#39; &#39;1926/12/24&#39; &#39;2007/12/01&#39; &#39;1926/12/25&#39;</span>
<span class="sx">           &#39;1868/1/2&#39; &#39;1868/100/2&#39;)</span>
<span class="n">wareki</span> <span class="o">=</span> <span class="no">WAREKI</span><span class="o">.</span><span class="n">sort</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> 
  <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">year</span> <span class="o">&lt;=&gt;</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">b</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
<span class="p">}</span> <span class="c1"># =&gt; 新しい年代からマッチさせるためにソート </span>
<span class="no">DATES</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">date_str</span><span class="o">|</span>
  <span class="k">begin</span>
    <span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date_str</span><span class="p">)</span>
    <span class="n">y0</span><span class="p">,</span> <span class="n">m0</span><span class="p">,</span> <span class="n">d0</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">day</span>
    <span class="n">era</span> <span class="o">=</span> <span class="n">wareki</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">nengo</span><span class="p">,</span> <span class="n">date_str</span><span class="o">|</span>
      <span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date_str</span><span class="p">)</span>
      <span class="n">y1</span><span class="p">,</span> <span class="n">m1</span><span class="p">,</span> <span class="n">d1</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">day</span>
      <span class="n">evaluation</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">&gt;=</span> <span class="n">y1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">m0</span> <span class="o">&gt;</span> <span class="n">m1</span> <span class="ow">or</span> <span class="n">m0</span> <span class="o">==</span> <span class="n">m1</span> <span class="o">&amp;&amp;</span> <span class="n">d0</span> <span class="o">&gt;=</span> <span class="n">d1</span><span class="p">)</span>
      <span class="k">break</span> <span class="o">[</span><span class="n">nengo</span><span class="p">,</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">y1</span><span class="o">]</span> <span class="k">if</span> <span class="n">evaluation</span>
    <span class="p">}</span>
    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">era</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="si">}#{</span><span class="n">era</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="s1">&#39;元&#39;</span> <span class="p">:</span> <span class="n">era</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">年</span><span class="si">#{</span><span class="n">m0</span><span class="si">}</span><span class="s2">月</span><span class="si">#{</span><span class="n">d0</span><span class="si">}</span><span class="s2">日&quot;</span><span class="o">.</span><span class="n">tosjis</span>
  <span class="k">rescue</span>
    <span class="nb">puts</span> <span class="s1">&#39;範囲外&#39;</span><span class="o">.</span><span class="n">tosjis</span>
    <span class="k">next</span>
  <span class="k">end</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5255/addtag/" class="addtag" id="addtag_5255">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5255/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5255/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5255"
  >-</span><span
  class="button yellow"
  id="rating_z_5255"
  >0</span><span 
  class="button green"
  id="rating_p_5255"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5255/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5257">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/233/" target="_top">hirataka</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5257/">#5257</a>(<script language="JavaScript">print_time(new Date("2008/01/09 14:20 GMT"));</script><noscript>2008/01/09 14:20 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>seireki2wareki("1868/9/8")
&gt;&gt;範囲外

seireki2wareki("1873/1/1")
&gt;&gt;明治6年1月1日

seireki2wareki("1926/12/24")
&gt;&gt;大正15年12月24日

seireki2wareki("2007/12/01")
&gt;&gt;大正15年12月24日

seireki2wareki("1926/12/25")
&gt;&gt;大正15年12月24日

seireki2wareki("1868/1/2")
&gt;&gt;範囲外

seireki2wareki("1873/100/2")
&gt;&gt;範囲外</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td><td class="code"><div class="highlight"><pre><span class="k">function</span><span class="err">　</span><span class="nx">seireki2wareki</span><span class="p">(</span><span class="nx">y</span><span class="p">){</span>
    <span class="k">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
    
    <span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span><span class="o">&lt;</span><span class="mi">1873</span><span class="p">)</span> <span class="k">return</span> <span class="s2">&quot;範囲外&quot;</span><span class="o">;</span>
    
    <span class="k">var</span> <span class="nx">wareki</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;明治&#39;</span> <span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;1868/9/8&quot;</span><span class="p">)</span><span class="o">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;1912/7/30&quot;</span><span class="p">)]</span><span class="o">,</span>
        <span class="s1">&#39;大正&#39;</span> <span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;1912/7/30&quot;</span><span class="p">)</span><span class="o">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;1926/12/25&quot;</span><span class="p">)]</span><span class="o">,</span>
        <span class="s1">&#39;昭和&#39;</span> <span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;1926/12/25&quot;</span><span class="p">)</span><span class="o">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;1989/1/7&quot;</span><span class="p">)]</span><span class="o">,</span>
        <span class="s1">&#39;平成&#39;</span> <span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;1989/1/8&quot;</span><span class="p">)</span><span class="o">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()]</span>
    <span class="p">}</span>
    <span class="k">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span><span class="p">(</span><span class="nx">w</span> <span class="k">in</span> <span class="nx">wareki</span><span class="p">){</span>
        <span class="k">var</span> <span class="nx">from</span> <span class="o">=</span> <span class="nx">wareki</span><span class="p">[</span><span class="nx">w</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">var</span> <span class="nx">to</span> <span class="o">=</span> <span class="nx">wareki</span><span class="p">[</span><span class="nx">w</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
        
        <span class="k">if</span><span class="p">((</span><span class="nx">c</span><span class="o">&gt;=</span><span class="nx">from</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span><span class="o">&lt;=</span><span class="nx">to</span><span class="p">)){</span>
            <span class="k">var</span> <span class="nx">n1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">to</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span><span class="o">-</span> <span class="nx">from</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">())</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">n2</span> <span class="o">=</span> <span class="nx">to</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span><span class="o">-</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
            
            <span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">w</span><span class="o">+</span> <span class="p">(</span><span class="nx">n1</span><span class="o">-</span><span class="nx">n2</span><span class="p">)</span><span class="o">+</span> <span class="s2">&quot;年&quot;</span><span class="o">+</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span> <span class="s2">&quot;月&quot;</span><span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span><span class="o">+</span> <span class="s2">&quot;日&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;範囲外&quot;</span><span class="o">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5257/addtag/" class="addtag" id="addtag_5257">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20081122164632/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5257/download/">
		download code
      </a>]
	  [<a href="/web/20081122164632/http://ja.doukaku.org/comment/5257/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_5257"
  >-</span><span
  class="button yellow"
  id="rating_z_5257"
  >0</span><span 
  class="button green"
  id="rating_p_5257"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20081122164632/http://ja.doukaku.org/comment/5257/">
    1
    reply
  </a>

  [<a href="/web/20081122164632/http://ja.doukaku.org/122/reply_to/5257/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment5259">
  <p class="banner"><a href="/web/20081122164632/http://ja.doukaku.org/user/154/" target="_top">xsd</a><a href="/web/20081122164632/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20081122164632im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20081122164632/http://ja.doukaku.org/comment/5259/">#5259</a>(<script language="JavaScript">print_time(new Date("2008/01/09 15:54 GMT"));</script><noscript>2008/01/09 15:54 GMT</noscript>)
	
	
	
	[<a href="/web/20081122164632/http://ja.doukaku.org/lang/ocaml/">
	  OCaml
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>明治元年～明治５年の範囲で太陰暦にも対応しました。
(黄道の計算などはしておらず、5年分のテーブルを持っているだけです。)
漢字での出力に対応していますが、utf-8専用です。

% ./dk122 1868/12/2
明治元年10月19日
% ./dk122 1926/12/24
大正15年12月24日
% ./dk122 2007/12/01
平成19年12月1日
% ./dk122 1926/12/25
大正15年12月25日  昭和元年12月25日
% ./dk122 1868/1/2
範囲外
% ./dk122 1868/100/2
範囲外

【追加テスト】
% ./dk122 1873/1/1
明治6年1月1日
% ./dk122 1872/12/31
明治5年12月2日
% ./dk122 1868/10/23
明治元年9月8日
% ./dk122 1870/10/25
明治3年10月1日
% ./dk122 1870/11/23
明治3年閏10月1日</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre></td><td class="code"><div class="highlight"><pre><span class="kr">open</span> <span class="n">String</span>
<span class="kr">open</span> <span class="n">Printf</span>

<span class="kr">let</span> <span class="n">meiji</span>   <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE6\x98\x8E\xE6\xB2\xBB</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">taishou</span> <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE5\xA4\xA7\xE6\xAD\xA3</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">showa</span>   <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE6\x98\xAD\xE5\x92\x8C</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">heisei</span>  <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE5\xB9\xB3\xE6\x88\x90</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">gan</span>     <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE5\x85\x83</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">nen</span>     <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE5\xB9\xB4</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">gatsu</span>   <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE6\x9C\x88</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">nichi</span>   <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE6\x97\xA5</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">uruu</span>    <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE9\x96\x8F</span><span class="s2">&quot;</span>

        <span class="c">(* M1   Meiji 2      Meiji 3       Meiji 4      Meiji 5    *)</span>
<span class="kr">let</span> <span class="n">tab</span> <span class="k">=</span> <span class="s2">&quot;9009 000990990900 900909090jj09 009009090990 909009009092&quot;</span>

<span class="kr">let</span> <span class="n">errmsg</span> <span class="k">=</span> <span class="s2">&quot;</span><span class="se">\xE7\xAF\x84\xE5\x9B\xB2\xE5\xA4\x96</span><span class="s2">&quot;</span>
<span class="kr">let</span> <span class="n">mtab</span> <span class="k">=</span> <span class="k">[|</span> <span class="mi">0</span><span class="k">;</span> <span class="mi">31</span><span class="k">;</span> <span class="mi">29</span><span class="k">;</span> <span class="mi">31</span><span class="k">;</span> <span class="mi">30</span><span class="k">;</span> <span class="mi">31</span><span class="k">;</span> <span class="mi">30</span><span class="k">;</span> <span class="mi">31</span><span class="k">;</span> <span class="mi">31</span><span class="k">;</span> <span class="mi">30</span><span class="k">;</span> <span class="mi">31</span><span class="k">;</span> <span class="mi">30</span><span class="k">;</span> <span class="mi">31</span> <span class="k">|]</span>

<span class="kr">let</span> <span class="n">prt1</span> <span class="n">era</span> <span class="n">y</span> <span class="n">m</span> <span class="n">d</span> <span class="k">=</span>
    <span class="kr">let</span> <span class="n">ystr</span> <span class="k">=</span> <span class="kr">if</span> <span class="n">y</span> <span class="k">=</span> <span class="mi">1</span> <span class="kr">then</span> <span class="n">gan</span> <span class="kr">else</span> <span class="n">string_of_int</span> <span class="n">y</span> <span class="kr">in</span>
    <span class="kr">let</span> <span class="n">leap</span> <span class="k">=</span> <span class="kr">if</span> <span class="n">m</span> <span class="kr">mod</span> <span class="mi">2</span> <span class="k">=</span> <span class="mi">1</span> <span class="kr">then</span> <span class="n">uruu</span> <span class="kr">else</span> <span class="s2">&quot;&quot;</span> <span class="kr">in</span>
    <span class="n">sprintf</span> <span class="s2">&quot;%s%s%s%s%d%s%d%s&quot;</span> <span class="n">era</span> <span class="n">ystr</span> <span class="n">nen</span> <span class="n">leap</span> <span class="k">(</span><span class="n">m</span><span class="o">/</span><span class="mi">2</span><span class="k">)</span> <span class="n">gatsu</span> <span class="n">d</span> <span class="n">nichi</span>

<span class="kr">let</span> <span class="n">prt2</span> <span class="n">era1</span> <span class="n">y1</span> <span class="n">era2</span> <span class="n">y2</span> <span class="n">m</span> <span class="n">d</span> <span class="k">=</span> <span class="n">sprintf</span> <span class="s2">&quot;%s  %s&quot;</span> <span class="k">(</span><span class="n">prt1</span> <span class="n">era1</span> <span class="n">y1</span> <span class="n">m</span> <span class="n">d</span><span class="k">)</span> <span class="k">(</span><span class="n">prt1</span> <span class="n">era2</span> <span class="n">y2</span> <span class="n">m</span> <span class="n">d</span><span class="k">)</span>

<span class="kr">let</span> <span class="n">dec</span> <span class="n">i</span> <span class="k">(</span><span class="n">year</span><span class="k">,</span> <span class="n">month</span><span class="k">)</span> <span class="k">=</span> <span class="kr">if</span> <span class="n">month</span> <span class="k">-</span> <span class="mi">2</span> <span class="k">&gt;=</span> <span class="n">i</span> <span class="kr">then</span> <span class="n">year</span>    <span class="k">,</span> <span class="n">month</span> <span class="k">-</span> <span class="n">i</span>
                                            <span class="kr">else</span> <span class="n">year</span> <span class="k">-</span> <span class="mi">1</span><span class="k">,</span> <span class="n">month</span> <span class="k">-</span> <span class="n">i</span> <span class="k">+</span> <span class="mi">24</span>

<span class="kr">let</span> <span class="kr">rec</span> <span class="n">search</span> <span class="n">target</span> <span class="n">i</span> <span class="n">r</span> <span class="k">(</span><span class="n">year</span><span class="k">,</span> <span class="n">month</span> <span class="kr">as</span> <span class="n">date</span><span class="k">)</span> <span class="k">=</span>
    <span class="kr">if</span> <span class="n">r</span> <span class="k">&lt;</span> <span class="n">target</span> <span class="kr">then</span> <span class="n">year</span><span class="k">,</span> <span class="n">month</span><span class="k">,</span> <span class="n">target</span> <span class="k">-</span> <span class="n">r</span>
        <span class="kr">else</span> <span class="kr">let</span> <span class="n">r&#39;</span><span class="k">,</span> <span class="n">d&#39;</span> <span class="k">=</span> <span class="kr">match</span> <span class="n">tab</span><span class="k">.[</span><span class="n">i</span><span class="k">]</span> <span class="kr">with</span>
            <span class="k">|</span> <span class="sc">&#39;0&#39;</span> <span class="k">-&gt;</span> <span class="mi">30</span><span class="k">,</span> <span class="mi">2</span> <span class="k">|</span> <span class="sc">&#39;9&#39;</span> <span class="k">-&gt;</span> <span class="mi">29</span><span class="k">,</span> <span class="mi">2</span> <span class="k">|</span> <span class="sc">&#39;2&#39;</span> <span class="k">-&gt;</span> <span class="mi">2</span><span class="k">,</span> <span class="mi">2</span> <span class="k">|</span> <span class="sc">&#39;j&#39;</span> <span class="k">-&gt;</span> <span class="mi">29</span><span class="k">,</span> <span class="mi">1</span> <span class="k">|</span> <span class="k">_</span> <span class="k">-&gt;</span> <span class="mi">0</span><span class="k">,</span> <span class="mi">0</span> <span class="kr">in</span>
            <span class="n">search</span> <span class="n">target</span> <span class="k">(</span><span class="n">i</span> <span class="k">-</span> <span class="mi">1</span><span class="k">)</span> <span class="k">(</span><span class="n">r</span> <span class="k">-</span> <span class="n">r&#39;</span><span class="k">)</span> <span class="k">(</span><span class="n">dec</span> <span class="n">d&#39;</span> <span class="n">date</span><span class="k">)</span>

<span class="kr">let</span> <span class="n">taiin</span> <span class="n">year</span> <span class="n">month</span> <span class="n">day</span> <span class="k">=</span>
    <span class="kr">let</span> <span class="n">y</span><span class="k">,</span> <span class="n">m</span> <span class="k">=</span> <span class="kr">if</span> <span class="n">month</span> <span class="k">&lt;</span> <span class="mi">3</span> <span class="kr">then</span> <span class="n">year</span> <span class="k">-</span> <span class="mi">1</span><span class="k">,</span> <span class="n">month</span> <span class="k">+</span> <span class="mi">12</span> <span class="kr">else</span> <span class="n">year</span><span class="k">,</span> <span class="n">month</span> <span class="kr">in</span>
    <span class="kr">let</span> <span class="n">w</span> <span class="k">=</span> <span class="n">y</span> <span class="k">*</span> <span class="mi">365</span> <span class="k">+</span> <span class="n">y</span> <span class="o">/</span> <span class="mi">4</span> <span class="k">-</span> <span class="n">y</span> <span class="o">/</span> <span class="mi">100</span> <span class="k">+</span> <span class="n">y</span> <span class="o">/</span> <span class="mi">400</span> <span cl>




<!--
     FILE ARCHIVED ON 16:46:32 Nov 22, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:21:27 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
