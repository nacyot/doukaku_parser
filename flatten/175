
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
再帰を用いた迷路探索問題
DouKaku? </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20080820014856cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20080820014856cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20080820014856cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
<meta name="robots" content="noindex,nofollow">

    <!--<script src="/web/20080820014856/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20080820014856/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20080820014856js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20080820014856js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20080820014856js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20080820014856js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app16.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/175\/flatten\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "20";
var displayMonth = "Aug";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/175/flatten/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20080820014856" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20080511084940/http://ja.doukaku.org/175/flatten/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="11 May 2008"><strong>MAY</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 1:48:56 Aug 20, 2008">AUG</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Sep
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20080511084940/http://ja.doukaku.org/175/flatten/" title="8:49:40 May 11, 2008" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 1:48:56 Aug 20, 2008">20</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2007
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 1:48:56 Aug 20, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2009
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20080820014856*/http://ja.doukaku.org/175/flatten/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>2 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">11 May 08 - 20 Aug 08</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:7:000010010000_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20080820014856/http://ja.doukaku.org/">DouKaku?</a><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
[topic]
<a href="/web/20080820014856/http://ja.doukaku.org/175/">再帰を用いた迷路探索問題</a>
</h2>

    





<div class="comment" id="comment6255">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/800/" target="_top">buttmeister</a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6255/">#6255</a>(<script language="JavaScript">print_time(new Date("2008/05/04 06:42 GMT"));</script><noscript>2008/05/04 06:42 GMT</noscript>)
	
	
	
	[<a href="/web/20080820014856/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ff4f2f;">-11/13=-0.85</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  再帰の問題例としての迷路問題。
迷路問題は、迷路に対してスタートとゴールを定義し、スタートからゴールまでの道順を探索することである。探索が成功した場合はその経路を表示し、ゴールにたどり着けない場合はその旨を表示することとする。

このような問題では、まず迷路空間をどのように表現するか考慮する必要がある。たとえば格子状を座標と考えて左上（０，０）と考えて右下を（５，５）と表現した場合はスタート（１，１）からゴール（１，４）まで、
（１，１）－（２，１）－（３，１）－（４，１）－４，２）－（４，３）－（３，３）－（２，３）－（２，４）－（１，４）
という経路を通ることによってたどり着くと表現できる。

問題の制約
上記のように座標で考えるをわかりやすいが少し趣向を凝らしてリストを用いて迷路空間を表現し探索することを考えてみる。
リストの構成要素は迷路を構成するそれぞれのマス目となる。よって、マス目1つは、以下のような構造体boxで表現できる。構造対boxは自分自身の上下左右のマスを表すポインタと自分自身の状態を保持するためのflagの意味は以下のコメントの通りである。

**(1)**

上記の迷路問題スタートからゴールに辿り着く最短の経路は、次のように表現できる。
((((((((start-&gt;right)-&gt;right)-&gt;right)-&gt;down)-&gt;down)-&gt;left)-&gt;left)-&gt;down)-&gt;left = goal
のように表現できる。

上記の例では、人間の場合は瞬時に最短経路がわかるが、コンピュータは人間のような空間把握能力はないため、逐次滝に経路をたどることによってコールを探すことになる。つまり、ひたすらある方向に進み進めなくなったら違う方向に進むという事を繰り返してゴールを探索する。そのため、必ずしも最短経路を辿ってゴールできるとは限らない。

**(2)**

上記のプログラムを作成してください。
ヒント
まずファイルからデータ（迷路空間）を読み込み、迷路空間を構成する。
そのあとに再帰を用いて、スタートからゴールまで探索する。



	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></td><td class="code"><div class="highlight"><pre><span class="err">図１</span><span class="o">-</span>
<span class="err">＊＊＊＊＊＊</span>
<span class="err">＊８０００＊</span>
<span class="err">＊＊＊＊０＊</span>
<span class="err">＊＊０００＊</span>
<span class="err">＊９０＊０＊</span>
<span class="err">＊＊＊＊＊＊</span>


<span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span>

<span class="k">struct</span> <span class="p">{</span>
<span class="kt">int</span> <span class="n">flag</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">up</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">down</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">right</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">left</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">null</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="p">)</span><span class="nb">NULL</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">start</span><span class="p">;</span> <span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">goal</span><span class="p">;</span>


<span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span>

<span class="kt">void</span> <span class="n">visit</span><span class="p">(</span><span class="k">struct</span> <span class="n">box</span> <span class="o">*</span><span class="n">b</span><span class="p">,...)</span> <span class="p">{</span>
<span class="err">①ゴールに到達できない場合は次の処理を行う。</span>
<span class="err">②現在の通路を通過したことを示すフラグを立てる</span>
<span class="err">③上が空いてれば上に移動</span>
<span class="err">④下が空いてれば下に移動</span>
<span class="err">⑤右が空いてれば右に移動</span>
<span class="err">⑥左が空いてれば左に移動</span>
<span class="err">｝</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6255/addtag/" class="addtag" id="addtag_6255">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20080820014856/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6255/download/">
		download code
      </a>]
	  [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6255/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ff4f2f;"
  >-11/13=-0.85</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6255"
  >-</span><span
  class="button yellow"
  id="rating_z_6255"
  >0</span><span 
  class="button green"
  id="rating_p_6255"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6255/">
  reply
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20080820014856/http://ja.doukaku.org/175/post_comment/">
post comment
</a>
</div>


<h2>Posted feedbacks - Flatten</h2>
<a href="/web/20080820014856/http://ja.doukaku.org/175/nested/">Nested</a>
<a href="/web/20080820014856/http://ja.doukaku.org/175/">Hidden</a> 


  
  <br/>

  
  




<div class="comment" id="comment6260">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/428/" target="_top">Y</a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6260/">#6260</a>(<script language="JavaScript">print_time(new Date("2008/05/04 15:08 GMT"));</script><noscript>2008/05/04 15:08 GMT</noscript>)
	
	
	
	[<a href="/web/20080820014856/http://ja.doukaku.org/lang/mathematica/">
	  Mathematica
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffcf;">1/3=0.33</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>再帰のない言語やあっても深さの制限が厳しい言語があるので、
手法は限定しないほうがいいのではないでしょうか
（構造体とかリストとかも）。
要は迷路が解ければいいわけで。

例えばグラフアルゴリズムを標準サポートしている処理系なら、
最短経路も特に難しいということはないかと
（愚直なエージェントを実装したいということがあるかもしれませんが）

num：座標を数字に変換する補助関数
pos：数字を座標に変換する補助関数

実行結果（Mathematicaなのでインデックスがずれます）：
{{2,2},{2,3},{2,4},{2,5},{3,5},{4,5},{4,4},{4,3},{5,3},{5,2}}</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><div class="highlight"><pre>&lt;&lt;DiscreteMath`GraphPlot`;
&lt;&lt;DiscreteMath`Combinatorica`;

tmp={
      &quot;******&quot;,
      &quot;*8000*&quot;,
      &quot;****0*&quot;,
      &quot;**000*&quot;,
      &quot;*90*0*&quot;,
      &quot;******&quot;};
maze=Characters/@tmp;
n=Length@First@maze;
num[i_,j_]:=n (i-1)+j
pos[x_]:={Quotient[x,n,1]+1,Mod[x,n,1]}

start=num@@First@Position[maze,&quot;8&quot;];
goal=num@@First@Position[maze,&quot;9&quot;];
arcs={};
Do[
    If[maze[[i,j]]!=&quot;*&quot;,
      If[maze[[i,j+1]]!=&quot;*&quot;,
        AppendTo[arcs,{num[i,j],num[i,j+1]}]];
      If[maze[[i+1,j]]!=&quot;*&quot;,
        AppendTo[arcs,{num[i,j],num[i+1,j]}]]],
    {i,1,Length@maze-1},{j,1,n-1}];

sol=ShortestPath[FromUnorderedPairs@arcs,start,goal];
If[Head@sol===ShortestPath || Length@sol==1,False,
  pos/@sol]
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6260/addtag/" class="addtag" id="addtag_6260">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20080820014856/http://ja.doukaku.org/lang/mathematica/">
		Mathematica
      </a>]
	  
      [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6260/download/">
		download code
      </a>]
	  [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6260/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffcf;"
  >1/3=0.33</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6260"
  >-</span><span
  class="button yellow"
  id="rating_z_6260"
  >0</span><span 
  class="button green"
  id="rating_p_6260"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6260/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment6263">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/800/" target="_top">buttmeister</a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6263/">#6263</a>(<script language="JavaScript">print_time(new Date("2008/05/05 15:14 GMT"));</script><noscript>2008/05/05 15:14 GMT</noscript>)
	
	
	
	[<a href="/web/20080820014856/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffbf9f;">-4/6=-0.67</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>C言語初心者なんでうまく実行できません。座標を読み込むテキストファイルの読み込み方がよくわかりません。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>

<span class="cp">#define START 8</span>
<span class="cp">#define GOAL 1</span>
<span class="cp">#define ROUTE 100</span>
<span class="cp">#define END -1</span>
<span class="kt">int</span> <span class="n">maze</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">6</span><span class="p">];</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">y_goal</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x_goal</span> <span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">route</span><span class="p">[</span><span class="n">ROUTE</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">rp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">solvemaze</span><span class="p">(</span><span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">static</span> <span class="kt">int</span> <span class="n">success</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">y</span><span class="o">==</span><span class="n">y_goal</span> <span class="o">&amp;&amp;</span> <span class="n">x</span><span class="o">==</span><span class="n">x_goal</span><span class="p">)</span><span class="n">success</span> <span class="o">==</span> <span class="n">GOAL</span><span class="p">;</span>
    <span class="n">maze</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;T&#39;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">success</span> <span class="o">&amp;&amp;</span> <span class="n">maze</span><span class="p">[</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">){</span><span class="n">solvemaze</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">);}</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">success</span> <span class="o">&amp;&amp;</span> <span class="n">maze</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">){</span><span class="n">solvemaze</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">success</span> <span class="o">&amp;&amp;</span> <span class="n">maze</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">){</span><span class="n">solvemaze</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">success</span> <span class="o">&amp;&amp;</span> <span class="n">maze</span><span class="p">[</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">){</span><span class="n">solvemaze</span><span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">route</span><span class="p">[</span><span class="n">rp</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
        <span class="n">route</span><span class="p">[</span><span class="n">rp</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
        <span class="n">rp</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">success</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">maze_print</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="n">maze</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">maze_print</span><span class="p">();</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">solvemaze</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">maze_print</span><span class="p">();</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">rp</span><span class="p">;</span> <span class="n">i</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d.&quot;</span><span class="p">,</span> <span class="n">route</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="n">route</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6263/addtag/" class="addtag" id="addtag_6263">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20080820014856/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6263/download/">
		download code
      </a>]
	  [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6263/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #ffbf9f;"
  >-4/6=-0.67</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6263"
  >-</span><span
  class="button yellow"
  id="rating_z_6263"
  >0</span><span 
  class="button green"
  id="rating_p_6263"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6263/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment6264">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/428/" target="_top">Y</a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6264/">#6264</a>(<script language="JavaScript">print_time(new Date("2008/05/05 16:25 GMT"));</script><noscript>2008/05/05 16:25 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>&gt;&gt;194
学校の宿題だったんですね。
すいませんでした、Mathematicaなんかでやってしまって。
でも、ここは多言語クックブックなので、言語と実装方法を指定しても無駄だと思いますよ。
ところで、締め切り思いっきり過ぎちゃってますけど、大丈夫でしょうか、いろんな意味で。</pre>
	</div>
	
	<p class="link">
	  see: <a href="/web/20080820014856/http://chomework.sakura.ne.jp/log1/1135125328_02.html">C/C++の宿題を片付けます 56代目</a>
	</p>  
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6264/addtag/" class="addtag" id="addtag_6264">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6264"
  >-</span><span
  class="button yellow"
  id="rating_z_6264"
  >0</span><span 
  class="button green"
  id="rating_p_6264"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6264/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment6265">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6265/">#6265</a>(<script language="JavaScript">print_time(new Date("2008/05/06 13:18 GMT"));</script><noscript>2008/05/06 13:18 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>CやC++でスタックオーバフローの検出の仕方を教えてください。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6265/addtag/" class="addtag" id="addtag_6265">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6265"
  >-</span><span
  class="button yellow"
  id="rating_z_6265"
  >0</span><span 
  class="button green"
  id="rating_p_6265"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080820014856/http://ja.doukaku.org/comment/6265/">
    1
    reply
  </a>

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6265/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment6266">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6266/">#6266</a>(<script language="JavaScript">print_time(new Date("2008/05/06 13:25 GMT"));</script><noscript>2008/05/06 13:25 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>書き忘れました。スレヌシ限定で！</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6266/addtag/" class="addtag" id="addtag_6266">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6266"
  >-</span><span
  class="button yellow"
  id="rating_z_6266"
  >0</span><span 
  class="button green"
  id="rating_p_6266"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080820014856/http://ja.doukaku.org/comment/6265/"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080820014856/http://ja.doukaku.org/comment/6266/root/"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080820014856/http://ja.doukaku.org/comment/6266/">
    1
    reply
  </a>

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6266/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment6268">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/504/" target="_top">あにす</a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6268/">#6268</a>(<script language="JavaScript">print_time(new Date("2008/05/06 23:42 GMT"));</script><noscript>2008/05/06 23:42 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>&quot;上記のプログラム&quot;とはどのようなプログラムでしょうか？
任意のデータ形式のファイルを読み込み、その迷路を解き、経路を任意の形式で出力するプログラムを作成すれば良いのでしょうか？
再帰を使うことは必須でしょうか?ループで書いてもいいと思うのですが…。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6268/addtag/" class="addtag" id="addtag_6268">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6268"
  >-</span><span
  class="button yellow"
  id="rating_z_6268"
  >0</span><span 
  class="button green"
  id="rating_p_6268"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6268/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment6279">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080820014856/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6279/">#6279</a>(<script language="JavaScript">print_time(new Date("2008/05/10 01:17 GMT"));</script><noscript>2008/05/10 01:17 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>スレヌシではないけど、参考ページをペタっとな</p>

	</div>
	
	<p class="link">
	  see: <a href="/web/20080820014856/http://www.nminoru.jp/~nminoru/programming/stackoverflow_handling.html">スタックオーバーフローのハンドリング</a>
	</p>  
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6279/addtag/" class="addtag" id="addtag_6279">Tags</a>:
	
	No tags
	&nbsp;

	

  
  <span class="rating">
  Rating<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6279"
  >-</span><span
  class="button yellow"
  id="rating_z_6279"
  >0</span><span 
  class="button green"
  id="rating_p_6279"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080820014856/http://ja.doukaku.org/comment/6266/"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080820014856/http://ja.doukaku.org/comment/6279/root/"><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6279/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment6393">
  <p class="banner"><a href="/web/20080820014856/http://ja.doukaku.org/user/815/" target="_top">morohashitsutomu2</a>

	
	&nbsp;
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6393/">#6393</a>(<script language="JavaScript">print_time(new Date("2008/05/31 05:45 GMT"));</script><noscript>2008/05/31 05:45 GMT</noscript>)
	
	
	
	[<a href="/web/20080820014856/http://ja.doukaku.org/lang/other/">
	  Other
	</a>]
	
	
	
	&nbsp;

<span class="rating">Rating<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre></td><td class="code"><div class="highlight"><pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;conio.h&gt;

#define STR_LEN 512 

int deque(struct box *b);
void print_pass();
void pop(struct box **pass_tail);
void push(struct box *b, struct box **pass_tail);
void link_up_down(struct box **head1, struct box **head2, struct box **tail2);
void link_right_left(int type, struct box **head, struct box **tail);
void read_maze(FILE *fp);
int visit(struct box *b, struct box **pass_head, struct box **pass_tail);
int main(void);

struct box{
    int flag;            //-1=壁, 0=通路, 1=通過, 8=スタート, 9=ゴール 
    struct box *up;        //上のマスへのポインタ
    struct box *down;    //下のマスへのポインタ
    struct box *right;    //右のマスへのポインタ
    struct box *left;    //左のマスへのポインタ
    struct box *pass_next;   //探索経路上、次のマスへのポインタ
    struct box *pass_prev;   //探索経路上、前のマスへのポインタ
};

struct box *null = (struct box *)NULL;    //リストの終端として利用
struct box *start, *goal;                //スタート及びゴール

//リストの先頭から方向を示す整数を返す[経路出力用]
int deque(struct box *b){
    if(b-&gt;pass_next == b-&gt;up) return 0;
    if(b-&gt;pass_next == b-&gt;down) return 1;
    if(b-&gt;pass_next == b-&gt;right) return 2;
    if(b-&gt;pass_next == b-&gt;left) return 3;
    return -1;
}

//戻りなし経路の表示
void print_pass()
{
    static const char *dirstr[] = {&quot;up&quot;, &quot;down&quot;, &quot;right&quot;, &quot;left&quot;};
    struct box *b;
    for(b = start; b != goal; b = b-&gt;pass_next) {//スタートからゴールまで
        printf(&quot;%s &quot;, dirstr[deque(b)]);//探索した経路を表示していく
    }
}

//リストの最後の要素を削除する[経路出力用]
void pop(struct box **pass_tail) 
{
    struct box *b = *pass_tail;
    *pass_tail = b-&gt;pass_prev;//前のマスに戻る
    b-&gt;pass_prev-&gt;pass_next = null;//リンクの削除
    b-&gt;pass_prev = null;
}

//リストの最後に要素を追加する[経路出力用]
void push(struct box *b, struct box **pass_tail){

    b-&gt;pass_prev = *pass_tail;//次のマスから前のマスへのリンク
    b-&gt;pass_prev-&gt;pass_next = b;//前のマスから次のマスへのリンク
    *pass_tail = b;//次のマスに進む
}

//up及びdownのリンクを作成する
void link_up_down(struct box **head1, struct box **head2, struct box **tail2){

    if(*head2 == null) {//リストが空ならば
        *head2 = *head1;//read_mazeで読み込んだ行の左端を迷路の左上端とする
    } else {
        struct box *p1, *p2;//p1は現在の行の分、p2は前の行の分
        for(p1 = *head1, p2 = *tail2; p1 != null &amp;&amp; p2 != null; p1 = p1-&gt;right, p2 = p2-&gt;right) {//1行読み込む
            p1-&gt;up = p2;//現在のマスから上へのリンク
            p1-&gt;up-&gt;down = p1;//上から現在のマスへのリンク
        }
    }
    *tail2 = *head1;//tail2の更新
}

//right及びleftのリンクを作成する。
void link_right_left(int type, struct box **head, struct box **tail) {
    /* この関数内でのリストは，引数で**head,**tailとして与えられているので，*head,*tailで扱う．*/
    // typeで指定されたboxを作成する．
    struct box *p = (struct box*)malloc(sizeof(struct box));

    /* boxであるp の flag , right , leftを決定 */

    p-&gt;flag = type;//それぞれ初期化。左右リンク作成前なので、type以外をnullとしておく
    p-&gt;up = p-&gt;down = p-&gt;left = p-&gt;right = p-&gt;pass_next = p-&gt;pass_prev = null;
    if(*head == null) { // もしリストがカラだったら，リストの要素がないのだから p が先頭
        *head = p;//リストの先頭に追加する
    } else {
        p-&gt;left = *tail;//前のマスへのリンク
        p-&gt;left-&gt;right = p;//左から現在のマスへのリンク
    }
    *tail = p;//リストの末尾をpとする
}

//迷路データを読み込む
void read_maze(FILE *fp)
{
    struct box *head1,*tail1,*head2,*tail2;//それぞれ左右のリンクの左端と右端、迷路全体の左上と左下
    unsigned int i;
    char buffer[STR_LEN];//読み込んだ行の保管用

    //１本ずつ左右のリストを生成し、２本のリストから上下のリンクを生成する。
    head2 = tail2 = null;//端二か所を空のリストとする
    while(!feof(fp)){//ファイルの終わりまで

        head1 = tail1 = null;//左右リンクの端を空のリストとする

        if(fgets(buffer, STR_LEN - 1, fp) == NULL) //ファイルから読み込み
            break;
        for(i = 0; i &lt; strlen(buffer) - 1; i++){//読み込んだ行の文字数だけ

            // ファイル中の文字(char型)を整数(int型)で表す
            int type;
            switch(buffer[i]) {
            case &#39;*&#39;:
                type = -1;
                break;
            case &#39;0&#39;:
            case &#39;8&#39;:
            case &#39;9&#39;:
                type = buffer[i] - &#39;0&#39;;
                break;
            default:
                printf(&quot;迷路データに規定外の文字&#39;%c&#39;があります。\n&quot;, buffer[i]);
                return ;
            }

            // 左右リンクを作成
            link_right_left(type, &amp;head1, &amp;tail1);

            // startとgoalの決定
            if(type == 8) {
                start = tail1;
            } else if(type == 9) {
                goal = tail1;
            }
        }

        /*  (上下のリンクを生成) */
        link_up_down(&amp;head1,&amp;head2, &amp;tail2);
        
    }
}

int visit(struct box *b, struct box **pass_head, struct box **pass_tail){
    //ゴールならば・・・
    if(b-&gt;flag == 9){
        printf(&quot;goal!\n&quot;);
        return(0);
    }
    
    //現在のマス目を通過済みとする
    if(b-&gt;flag == 0) b-&gt;flag = 1;
    
    //上方向が空いているなら上にいく
    if(b-&gt;up != null &amp;&amp; (b-&gt;up-&gt;flag == 0 || b-&gt;up-&gt;flag == 9)) {
        printf(&quot;up &quot;);
        push(b-&gt;up, pass_tail);//経路出力用に、リストの最後に追加しておく
        if(visit(b-&gt;up, pass_head, pass_tail) == 0)return(0);//再帰を利用して迷路を探索していく
        pop(pass_tail);//リストの最後を削除する
    }
    
    //下方向が空いているなら下にいく
    if(b-&gt;down != null &amp;&amp; (b-&gt;down-&gt;flag == 0 || b-&gt;down-&gt;flag == 9)) {
        printf(&quot;down &quot;);
        push(b-&gt;down, pass_tail);
        if(visit(b-&gt;down, pass_head, pass_tail) == 0)return(0);
        pop(pass_tail);
    }
    
    //右方向が空いているなら右にいく
    if(b-&gt;right != null &amp;&amp; (b-&gt;right-&gt;flag == 0 || b-&gt;right-&gt;flag == 9)) {
        printf(&quot;right &quot;);
        push(b-&gt;right, pass_tail);
        if(visit(b-&gt;right, pass_head, pass_tail) == 0)return(0);
        pop(pass_tail);
    }

    //左方向が空いているなら左にいく
    if(b-&gt;left != null &amp;&amp; (b-&gt;left-&gt;flag == 0 || b-&gt;left-&gt;flag == 9)) {
        printf(&quot;left &quot;);
        push(b-&gt;left, pass_tail);
        if(visit(b-&gt;left, pass_head, pass_tail) == 0)return(0);
        pop(pass_tail);
    }

    //4方向行き詰まりなので前のマスへ戻る
    printf(&quot;return! &quot;); 

    //現在のマス目を未通過に戻す
    b-&gt;flag = 0;

    return(1);
}

int main(void){
    FILE *fp;
    int menu=-1;/* メニュー用*/
    char fileName[STR_LEN];    //迷路データファイル名
    struct box *pass_head=null,*pass_tail=null;

    //迷路データファイル名の決定
    while(menu &lt; 0 || menu &gt; 3)
    {
        printf(&quot;0.終了\n&quot;);
        printf(&quot;1. meirodata.txt を読み込む\n&quot;);
        printf(&quot;2. data.txt を読み込む\n&quot;);
        printf(&quot;3. 読み込むファイルを指定する\n&quot;);
        printf(&quot;メニューから選択して下さい。 : &quot;);
        scanf(&quot;%d&quot;,&amp;menu);
    }

    if(menu==0)return(0);
    if(menu==1)strcpy(fileName,&quot;meirodata.txt&quot;);
    if(menu==2)strcpy(fileName,&quot;data.txt&quot;);
    if(menu==3)
        scanf(&quot;%s&quot;,fileName);

    //ファイルを開く
    if((fp = fopen(fileName, &quot;r&quot;)) == NULL){
        fprintf(stderr, &quot;file read error!\n&quot;);
        exit(1);
    }
    //迷路を読み込む
    read_maze(fp);
    fclose(fp);
    //経路を探索する
    printf(&quot;探索経路----------\n&quot;);
    pass_head = pass_tail = start;
    visit(start,&amp;pass_head,&amp;pass_tail);
    printf(&quot;戻りなし経路----------\n&quot;);

    print_pass();

    printf(&quot;goal!\n------------------\n&quot;);

    return(0);
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080820014856/http://ja.doukaku.org/comment/6393/addtag/" class="addtag" id="addtag_6393">Tags</a>:
	
	No tags
	&nbsp;

	
      [<a href="/web/20080820014856/http://ja.doukaku.org/lang/other/">
		Other
      </a>]
	  
      [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6393/download/">
		download code
      </a>]
	  [<a href="/web/20080820014856/http://ja.doukaku.org/comment/6393/download_html/">
		get code as html
      </a>]<p>
	

  
  <span class="rating">
  Rating<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_6393"
  >-</span><span
  class="button yellow"
  id="rating_z_6393"
  >0</span><span 
  class="button green"
  id="rating_p_6393"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080820014856/http://ja.doukaku.org/175/reply_to/6393/">
  reply
  </a>]
  </div>
</div>
</div>

  
  <br/>







</div>

<div id="side_menu" class="compact">

<iframe src="/web/20080820014856if_/http://ja.doukaku.org/login_info/" frameborder=0 width=100% id="login_info">
iframe required
</iframe>

<h4 class="semi_compact">Index</h4>

<ul>
<!--<li><a href="/web/20080820014856/http://ja.doukaku.org/user/">Users</a>-->
<li><a href="/web/20080820014856/http://ja.doukaku.org/lang/">Languages</a>
<li><a href="/web/20080820014856/http://ja.doukaku.org/challenge/">Challenges</a>
<li><a href="/web/20080820014856/http://ja.doukaku.org/topic/">Topics</a>
<li><a href="/web/20080820014856/http://ja.doukaku.org/comment/">Comments</a>
<li><a href="/web/20080820014856/http://ja.doukaku.org/good_comments/">Good comments</a>
<li><a href="/web/20080820014856/http://ja.doukaku.org/tag/">Tags</a>
</ul>

<h4 class="compact">Feed</h4>
<ul>
<li><a href="/web/20080820014856/http://ja.doukaku.org/feeds/challenges/">Latest challenges</a><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080820014856/http://ja.doukaku.org/feeds/topics/">Latest topics</a><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080820014856/http://ja.doukaku.org/feeds/comments/">Latest comments</a><img src="/web/20080820014856im_/http://ja.doukaku.org/static/image/feed_icon.png">
</ul>







<h4 class="compact">Other</h4>
<ul>
<li><a href="/web/20080820014856/http://ja.doukaku.org/qa/">Q&A</a>
<li><a href="/web/20080820014856/http://ja.doukaku.org/feedback/">Feedback</a>
<!--<li><a href="/web/20080820014856/http://ja.doukaku.org/terms">Terms</a>-->
</ul>


<h4 class="compact">Link</h4>
<ul>
<li><a href="/web/20080820014856/http://www.lingr.com/room/doukaku_ja">Chatroom in Lingr</a>
<li><a href="/web/20080820014856/http://labs.cybozu.co.jp/">Cybozu Labs.</a>
<li><a href="/web/20080820014856/http://www.djangoproject.com/">Django</a>
</ul>

<h4 id="pathtraq" class="compact"><a href="/web/20080820014856/http://pathtraq.com/analytics?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&m=popular">Pathtraq</a></h4>
<div class="indent">
<span id="pathtraq_sentinel">loading...</span>
</div>


</div>
</div>


<div id="page_foot" class="bordered">

<a rel="license" href="/web/20080820014856/http://creativecommons.org/licenses/by/2.1/jp/">
<img alt="Creative Commons License" style="border-width:0" src="/web/20080820014856im_/http://i.creativecommons.org/l/by/2.1/jp/88x31.png" /></a>
このサイトの内容は、
<a rel="license" href="/web/20080820014856/http://creativecommons.org/licenses/by/2.1/jp/">クリエイティブ・コモンズ・ライセンス</a>の下でライセンスされています。
<a href="/web/20080820014856/http://ja.doukaku.org/qa/#licence">[詳細]</a>

</div>

</body>




<script type="text/javascript">
$(document).ready(function(){$("#doukaku_org").after("<script src='/web/20080820014856/http://api.pathtraq.com/pages?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&api=json&callback=addPathtraq'><" + "/script>")});
</script>

<script src="/web/20080820014856js_/http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2136157-1";
urchinTracker();
</script>




</html>





<!--
     FILE ARCHIVED ON 1:48:56 Aug 20, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:07:33 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
