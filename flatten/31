
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
Tiny MML
どう書く？org </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20080329155921cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20080329155921cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20080329155921cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
<meta name="robots" content="noindex,nofollow">

    <!--<script src="/web/20080329155921/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20080329155921/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20080329155921js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20080329155921js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20080329155921js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20080329155921js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app3.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/31\/flatten\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "29";
var displayMonth = "Mar";
var displayYear = "2008";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/31/flatten/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20080329155921" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20071224052622/http://ja.doukaku.org/31/flatten/" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="24 Dec 2007"><strong>DEC</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 15:59:21 Mar 29, 2008">MAR</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Apr
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20071224052622/http://ja.doukaku.org/31/flatten/" title="5:26:22 Dec 24, 2007" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 15:59:21 Mar 29, 2008">29</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2007
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 15:59:21 Mar 29, 2008">2008</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2009
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20080329155921*/http://ja.doukaku.org/31/flatten/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>3 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">13 May 07 - 29 Mar 08</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000010000001_2008:2:001000000000_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20080329155921/http://ja.doukaku.org/">どう書く？org</a><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png' alt=お題(出題済み)>
<a href="/web/20080329155921/http://ja.doukaku.org/31/">Tiny MML</a>
</h2>

    





<div class="comment" id="comment3387">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/3387/">#3387</a>(<script language="JavaScript">print_time(new Date("2007/07/24 14:17 GMT"));</script><noscript>2007/07/24 14:17 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  文字列の入力をとり、音を鳴らすプログラムを作ってください。
<p>
入力はcがド、dがレ、eがミ、fがファ、gがソ、aがラ、bがシ、rが休符とします。この8文字以外の文字は入力に含まれていないと仮定して構いません。おのおのの音符・休符は八分音符・八分休符とします。
<p>
オクターブや音の長さの変更、同時発音などの機能は不要です。
<p>
サンプル入力(カエルの歌)
<pre>
cdefedcrefgagfercrcrcrcrcdefedcr
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/3387/addtag/" class="addtag" id="addtag_3387">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3387"
  >-</span><span
  class="button yellow"
  id="rating_z_3387"
  >0</span><span 
  class="button green"
  id="rating_p_3387"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/3387/">
  返信
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20080329155921/http://ja.doukaku.org/31/post_comment/">
投稿する
</a>
</div>


<h2>投稿されたコメント - フラット表示</h2>
<a href="/web/20080329155921/http://ja.doukaku.org/31/nested/">ネスト表示</a>
<a href="/web/20080329155921/http://ja.doukaku.org/31/">非表示</a> 


  
  




<div class="comment" id="comment1420">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/172/" target="_top">cats</a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1420/">#1420</a>(<script language="JavaScript">print_time(new Date("2007/07/24 14:41 GMT"));</script><noscript>2007/07/24 14:41 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfff9f;">2/6=0.33</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.InteropServices</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Program</span>
<span class="k">{</span>
<span class="na">  [DllImport(&quot;kernel32.dll&quot;)]</span>
  <span class="k">extern</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">Beep</span><span class="p">(</span><span class="kt">uint</span> <span class="n">f</span><span class="p">,</span> <span class="kt">uint</span> <span class="n">d</span><span class="p">);</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
  <span class="k">{</span>
    <span class="n">Play</span><span class="p">(</span><span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">);</span>
  <span class="k">}</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Play</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
  <span class="k">{</span>
    <span class="kt">uint</span><span class="p">[]</span> <span class="n">dt</span> <span class="p">=</span> <span class="k">{</span><span class="m">440</span><span class="p">,</span> <span class="m">494</span><span class="p">,</span> <span class="m">262</span><span class="p">,</span> <span class="m">294</span><span class="p">,</span> <span class="m">330</span><span class="p">,</span> <span class="m">349</span><span class="p">,</span> <span class="m">392</span><span class="k">}</span><span class="p">;</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="k">in</span> <span class="n">s</span><span class="p">)</span>
    <span class="k">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="p">==</span> <span class="sc">&#39;r&#39;</span><span class="p">)</span> <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">500</span><span class="p">);</span>
      <span class="k">else</span> <span class="n">Beep</span><span class="p">(</span><span class="n">dt</span><span class="p">[</span><span class="n">c</span> <span class="p">-</span> <span class="sc">&#39;a&#39;</span><span class="p">],</span> <span class="m">500</span><span class="p">);</span>
    <span class="k">}</span>
  <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1420/addtag/" class="addtag" id="addtag_1420">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1420/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1420/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfff9f;"
  >2/6=0.33</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1420"
  >-</span><span
  class="button yellow"
  id="rating_z_1420"
  >0</span><span 
  class="button green"
  id="rating_p_1420"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1420/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1421">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1421/">#1421</a>(<script language="JavaScript">print_time(new Date("2007/07/24 14:50 GMT"));</script><noscript>2007/07/24 14:50 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffdfdf;">-2/2=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ぎゃ、先越された＞＜
beepコマンドを使うのってアリ？？
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;enumerator&#39;</span>
<span class="no">FREQ_TABLE</span><span class="o">=</span><span class="p">{</span> <span class="sc">?c</span><span class="o">=&gt;</span><span class="s1">&#39;262&#39;</span><span class="p">,</span> <span class="sc">?d</span><span class="o">=&gt;</span><span class="s1">&#39;294&#39;</span><span class="p">,</span> <span class="sc">?e</span><span class="o">=&gt;</span><span class="s1">&#39;330&#39;</span><span class="p">,</span> <span class="sc">?f</span><span class="o">=&gt;</span><span class="s1">&#39;349&#39;</span><span class="p">,</span> <span class="sc">?g</span><span class="o">=&gt;</span><span class="s1">&#39;392&#39;</span><span class="p">,</span> <span class="sc">?a</span><span class="o">=&gt;</span><span class="s1">&#39;440&#39;</span><span class="p">,</span> <span class="sc">?b</span><span class="o">=&gt;</span><span class="s1">&#39;494&#39;</span><span class="p">,</span> <span class="sc">?r</span><span class="o">=&gt;</span><span class="s1">&#39;1&#39;</span><span class="p">}</span>
<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">mmf</span><span class="p">)</span>
  <span class="nb">system</span> <span class="s2">&quot;beep&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">mmf</span><span class="o">.</span><span class="n">enum_for</span><span class="p">(</span><span class="ss">:each_byte</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="o">[</span> <span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="no">FREQ_TABLE</span><span class="o">[</span><span class="n">b</span><span class="o">]</span> <span class="o">]</span><span class="p">}</span><span class="o">.</span><span class="n">flatten</span>
<span class="k">end</span>
<span class="n">play</span> <span class="s2">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1421/addtag/" class="addtag" id="addtag_1421">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/beep/">beep</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1421/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1421/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffdfdf;"
  >-2/2=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1421"
  >-</span><span
  class="button yellow"
  id="rating_z_1421"
  >0</span><span 
  class="button green"
  id="rating_p_1421"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1421/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1423">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1423/">#1423</a>(<script language="JavaScript">print_time(new Date("2007/07/24 14:59 GMT"));</script><noscript>2007/07/24 14:59 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/bash/">
	  Bash
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffdfdf;">-2/2=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><div class="highlight"><pre><span class="k">function </span>play<span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span>1;;i++<span class="o">))</span>; <span class="k">do</span>
<span class="k">        </span><span class="nv">snd</span><span class="o">=</span><span class="s">`expr substr $1 $i 1`</span>
        <span class="k">case</span> <span class="nv">$snd</span> in
            c<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>262;;
            d<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>294;;
            e<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>330;;
            f<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>349;;
            g<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>392;;
            a<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>440;;
            b<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>494;;
            r<span class="o">)</span> <span class="nv">F</span><span class="o">=</span>1;;
            *<span class="o">)</span> <span class="k">return</span>
<span class="k">        </span>esac
        beep -f <span class="nv">$F</span>
    <span class="k">done</span>
<span class="o">}</span>
play cdefedcrefgagfercrcrcrcrcdefedcr
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1423/addtag/" class="addtag" id="addtag_1423">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/bash/">
		Bash
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1423/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1423/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffdfdf;"
  >-2/2=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1423"
  >-</span><span
  class="button yellow"
  id="rating_z_1423"
  >0</span><span 
  class="button green"
  id="rating_p_1423"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1423/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1424">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1424/">#1424</a>(<script language="JavaScript">print_time(new Date("2007/07/24 15:07 GMT"));</script><noscript>2007/07/24 15:07 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffdfdf;">-2/2=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7</pre></td><td class="code"><div class="highlight"><pre>(require :kmrcl)
(defparameter *freq-table*
  &#39;(#\c &quot;262&quot; #\d &quot;294&quot; #\e &quot;330&quot; #\f &quot;349&quot; #\g &quot;392&quot; #\a &quot;440&quot; #\b &quot;494&quot; #\r &quot;1&quot;))
(defun play (mml)
  (loop for c across mml do
       (kmrcl:run-shell-command &quot;beep -f ~a&quot; (getf *freq-table* c))))
(play &quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1424/addtag/" class="addtag" id="addtag_1424">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/kmrcl/">kmrcl</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1424/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1424/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffdfdf;"
  >-2/2=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1424"
  >-</span><span
  class="button yellow"
  id="rating_z_1424"
  >0</span><span 
  class="button green"
  id="rating_p_1424"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1424/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1425">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1425/">#1425</a>(<script language="JavaScript">print_time(new Date("2007/07/24 15:14 GMT"));</script><noscript>2007/07/24 15:14 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffcf;">1/3=0.33</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>とりあえずbeepで。win専用。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">winsound</span>
<span class="k">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">mmf</span><span class="p">):</span>
  <span class="n">toi</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
  <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">mmf</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="s">&#39;r&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="k">else</span> <span class="p">:</span> <span class="n">winsound</span><span class="o">.</span><span class="n">Beep</span><span class="p">(</span><span class="n">play</span><span class="o">.</span><span class="n">fq</span><span class="p">[</span><span class="n">toi</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">-</span><span class="n">toi</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)],</span> <span class="mi">500</span><span class="p">)</span>
<span class="n">play</span><span class="o">.</span><span class="n">fq</span> <span class="o">=</span> <span class="p">[</span><span class="mi">440</span><span class="p">,</span> <span class="mi">494</span><span class="p">,</span> <span class="mi">262</span><span class="p">,</span> <span class="mi">294</span><span class="p">,</span> <span class="mi">330</span><span class="p">,</span> <span class="mi">349</span><span class="p">,</span> <span class="mi">392</span><span class="p">]</span>

<span class="n">play</span><span class="p">(</span><span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1425/addtag/" class="addtag" id="addtag_1425">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/winsound/">winsound</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1425/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1425/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffcf;"
  >1/3=0.33</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1425"
  >-</span><span
  class="button yellow"
  id="rating_z_1425"
  >0</span><span 
  class="button green"
  id="rating_p_1425"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080329155921/http://ja.doukaku.org/comment/1425/">
    1
    reply
  </a>

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1425/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1426">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1426/">#1426</a>(<script language="JavaScript">print_time(new Date("2007/07/24 15:16 GMT"));</script><noscript>2007/07/24 15:16 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/emacslisp/">
	  Emacs Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffdfdf;">-2/2=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8</pre></td><td class="code"><div class="highlight"><pre>(require &#39;cl)
(defvar *freq-table*
  &#39;(?c &quot;262&quot; ?d &quot;294&quot; ?e &quot;330&quot; ?f &quot;349&quot; ?g &quot;392&quot; ?a &quot;440&quot; ?b &quot;494&quot; ?r &quot;1&quot;))
(defun tinymml-play (mml)
  (loop for c across mml do
        (call-process &quot;beep&quot; nil nil nil 
                      &quot;-f&quot; (plist-get *freq-table* c))))
(tinymml-play &quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1426/addtag/" class="addtag" id="addtag_1426">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/emacslisp/">
		Emacs Lisp
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1426/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1426/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffdfdf;"
  >-2/2=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1426"
  >-</span><span
  class="button yellow"
  id="rating_z_1426"
  >0</span><span 
  class="button green"
  id="rating_p_1426"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1426/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1429">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1429/">#1429</a>(<script language="JavaScript">print_time(new Date("2007/07/24 15:23 GMT"));</script><noscript>2007/07/24 15:23 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffcfcf;">-3/3=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="nv">%FREQ_TABLE</span><span class="o">=</span><span class="p">(</span> <span class="s">&#39;c&#39;</span><span class="o">=&gt;</span><span class="s">&#39;262&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="o">=&gt;</span><span class="s">&#39;294&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="o">=&gt;</span><span class="s">&#39;330&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="o">=&gt;</span><span class="s">&#39;349&#39;</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="o">=&gt;</span><span class="s">&#39;392&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="o">=&gt;</span><span class="s">&#39;440&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="o">=&gt;</span><span class="s">&#39;494&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="o">=&gt;</span><span class="s">&#39;1&#39;</span><span class="p">);</span>
<span class="k">sub </span><span class="nf">play</span> <span class="p">{</span>
    <span class="k">my</span><span class="p">(</span><span class="nv">$mml</span><span class="p">)</span><span class="o">=</span><span class="nv">@_</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$len</span><span class="o">=</span><span class="nb">length</span><span class="p">(</span><span class="nv">$mml</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="k">my</span> <span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&lt;</span><span class="nv">$len</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">system</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s">&quot;beep -f %s&quot;</span><span class="p">,</span> <span class="nv">$FREQ_TABLE</span><span class="p">{</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$mml</span><span class="p">,</span><span class="nv">$i</span><span class="p">,</span><span class="mi">1</span><span class="p">)}));</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">play</span><span class="p">(</span><span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">);</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1429/addtag/" class="addtag" id="addtag_1429">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1429/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1429/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffcfcf;"
  >-3/3=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1429"
  >-</span><span
  class="button yellow"
  id="rating_z_1429"
  >0</span><span 
  class="button green"
  id="rating_p_1429"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1429/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1431">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/105/" target="_top">rubikitch</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1431/">#1431</a>(<script language="JavaScript">print_time(new Date("2007/07/24 15:36 GMT"));</script><noscript>2007/07/24 15:36 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffdfdf;">-2/2=-1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-13</span><span class="p">)</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">gauche</span><span class="o">.</span><span class="nv">process</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">*freq-table*</span>
  <span class="o">&#39;</span><span class="p">((</span><span class="sc">#\c</span> <span class="o">.</span> <span class="s">&quot;262&quot;</span><span class="p">)</span> <span class="p">(</span><span class="sc">#\d</span> <span class="o">.</span> <span class="s">&quot;294&quot;</span><span class="p">)</span> <span class="p">(</span><span class="sc">#\e</span> <span class="o">.</span> <span class="s">&quot;330&quot;</span><span class="p">)</span> <span class="p">(</span><span class="sc">#\f</span> <span class="o">.</span> <span class="s">&quot;349&quot;</span><span class="p">)</span> <span class="p">(</span><span class="sc">#\g</span> <span class="o">.</span> <span class="s">&quot;392&quot;</span><span class="p">)</span> <span class="p">(</span><span class="sc">#\a</span> <span class="o">.</span> <span class="s">&quot;440&quot;</span><span class="p">)</span> <span class="p">(</span><span class="sc">#\b</span> <span class="o">.</span> <span class="s">&quot;494&quot;</span><span class="p">)</span> <span class="p">(</span><span class="sc">#\r</span> <span class="o">.</span> <span class="s">&quot;1&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">play</span> <span class="nv">mml</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">string-map</span>
   <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">c</span><span class="p">)</span> <span class="p">(</span><span class="nf">process-wait</span> <span class="p">(</span><span class="nf">run-process</span> <span class="s">&quot;beep&quot;</span> <span class="s">&quot;-f&quot;</span> <span class="p">(</span><span class="nb">cdr </span><span class="p">(</span><span class="nb">assq </span><span class="nv">c</span> <span class="nv">*freq-table*</span><span class="p">))))</span> <span class="nv">c</span><span class="p">)</span>
   <span class="nv">mml</span><span class="p">))</span>
<span class="p">(</span><span class="nf">play</span> <span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1431/addtag/" class="addtag" id="addtag_1431">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1431/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1431/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffdfdf;"
  >-2/2=-1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1431"
  >-</span><span
  class="button yellow"
  id="rating_z_1431"
  >0</span><span 
  class="button green"
  id="rating_p_1431"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1431/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1432">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1432/">#1432</a>(<script language="JavaScript">print_time(new Date("2007/07/24 15:47 GMT"));</script><noscript>2007/07/24 15:47 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  MIDIマッパーを使って再生。Windows専用。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;windows.h&gt;</span>
<span class="cp">#include &lt;mmsystem.h&gt;</span>

<span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;stdexcept&gt;</span>
<span class="cp">#include &lt;string&gt;</span>

<span class="cp">#define MIDIMSG(status, channel, data1, data2) ((DWORD)((status&lt;&lt;4) | channel | (data1&lt;&lt;8) | (data2&lt;&lt;16)))</span>

<span class="kt">void</span> <span class="n">check</span><span class="p">(</span><span class="n">MMRESULT</span> <span class="n">result</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">!=</span> <span class="n">MMSYSERR_NOERROR</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&quot;mmsystem error&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">midi</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">midi</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">check</span><span class="p">(</span><span class="o">::</span><span class="n">midiOutOpen</span><span class="p">(</span><span class="o">&amp;</span><span class="n">_h</span><span class="p">,</span> <span class="n">MIDI_MAPPER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CALLBACK_NULL</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="o">~</span><span class="n">midi</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">check</span><span class="p">(</span><span class="o">::</span><span class="n">midiOutClose</span><span class="p">(</span><span class="n">_h</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">play</span><span class="p">(</span><span class="n">DWORD</span> <span class="n">note</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">check</span><span class="p">(</span><span class="o">::</span><span class="n">midiOutShortMsg</span><span class="p">(</span><span class="n">_h</span><span class="p">,</span> <span class="n">MIDIMSG</span><span class="p">(</span><span class="mh">0x9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="mi">100</span><span class="p">)));</span>
        <span class="n">wait</span><span class="p">();</span>
        <span class="n">check</span><span class="p">(</span><span class="o">::</span><span class="n">midiOutReset</span><span class="p">(</span><span class="n">_h</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">wait</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="o">::</span><span class="n">Sleep</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">HMIDIOUT</span> <span class="n">_h</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">play</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">midi</span> <span class="n">m</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(;</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span> <span class="o">++</span><span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">case</span> <span class="sc">&#39;c&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="sc">&#39;d&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">62</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="sc">&#39;e&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">64</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="sc">&#39;f&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">65</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="sc">&#39;g&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">67</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">69</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="sc">&#39;b&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">play</span><span class="p">(</span><span class="mi">71</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="sc">&#39;r&#39;</span><span class="o">:</span> <span class="n">m</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&quot;invalid note&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">play</span><span class="p">(</span><span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">play</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1432/addtag/" class="addtag" id="addtag_1432">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/Windows/">Windows</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1432/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1432/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1432"
  >-</span><span
  class="button yellow"
  id="rating_z_1432"
  >0</span><span 
  class="button green"
  id="rating_p_1432"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080329155921/http://ja.doukaku.org/comment/1432/">
    1
    reply
  </a>

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1432/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1433">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/232/" target="_top">kkobayashi</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1433/">#1433</a>(<script language="JavaScript">print_time(new Date("2007/07/24 16:10 GMT"));</script><noscript>2007/07/24 16:10 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/r/">
	  R
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>テンポの基準を120:八分音符は0.25秒と仮定しています。

&gt; MML("cdefedcrefgagfercrcrcrcrcdefedcr")</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre>require(&quot;sound&quot;)
MML &lt;- function(score){
    freq  &lt;- c(c=262, d=294, e=330, f=349, g=392, a=440, b=494, r=0)
    play(appendSample(as.Sample(unlist(sapply(unlist(strsplit(score, &quot;&quot;)), 
         function(s){return(Sine(freq[s], 0.25))})))))
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1433/addtag/" class="addtag" id="addtag_1433">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/r/">
		R
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1433/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1433/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1433"
  >-</span><span
  class="button yellow"
  id="rating_z_1433"
  >0</span><span 
  class="button green"
  id="rating_p_1433"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1433/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1434">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/177/" target="_top">ocean</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1434/">#1434</a>(<script language="JavaScript">print_time(new Date("2007/07/24 16:29 GMT"));</script><noscript>2007/07/24 16:29 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  上のと同じコードをPython+ctypesを使って記述。音の長さは他の人のコードを参考にして0.25秒に変更しました。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">ctypes</span>
<span class="k">import</span> <span class="nn">time</span>
<span class="k">import</span> <span class="nn">sys</span>

<span class="n">MIDI_MAPPER</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">MMSYSERR_NOERROR</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">CALLBACK_NULL</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">class</span> <span class="nc">Midi</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dll</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">windll</span><span class="o">.</span><span class="n">winmm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="s">&quot;midiOutOpen&quot;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h</span><span class="p">),</span> <span class="n">MIDI_MAPPER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CALLBACK_NULL</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="s">&quot;midiOutClose&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">note</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="s">&quot;midiOutShortMsg&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_msg</span><span class="p">(</span><span class="mh">0x9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="s">&quot;midiOutReset&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dll</span><span class="p">,</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="n">MMSYSERR_NOERROR</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">&quot;mmsystem error (</span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="nb">hex</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">status</span><span class="o">&lt;&lt;</span><span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">channel</span> <span class="o">|</span> <span class="p">(</span><span class="n">data1</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">data2</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">Midi</span><span class="p">()</span>
    <span class="n">notes</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="mi">62</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="mi">65</span><span class="p">,</span>
             <span class="s">&#39;g&#39;</span><span class="p">:</span> <span class="mi">67</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">71</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;r&#39;</span><span class="p">:</span>
            <span class="n">m</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">m</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">notes</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">play</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">play</span><span class="p">(</span><span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1434/addtag/" class="addtag" id="addtag_1434">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/Python2.5/">Python2.5</a>
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/Windows/">Windows</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1434/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1434/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1434"
  >-</span><span
  class="button yellow"
  id="rating_z_1434"
  >0</span><span 
  class="button green"
  id="rating_p_1434"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1432/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1434/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1434/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1435">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/14/" target="_top">kawauchi</a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1435/">#1435</a>(<script language="JavaScript">print_time(new Date("2007/07/24 16:34 GMT"));</script><noscript>2007/07/24 16:34 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/perl/">
	  Perl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  Audio::Beep は CPAN で。
MML は引数にして下さい。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="nn">Audio::</span><span class="n">Beep</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$music</span> <span class="o">=</span> <span class="nv">$ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nv">$music</span> <span class="o">=~</span> <span class="sr">s/(.)/\1 /g</span><span class="p">;</span>
<span class="nn">Audio::</span><span class="n">Beep</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">play</span><span class="p">(</span><span class="nv">$music</span><span class="p">);</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1435/addtag/" class="addtag" id="addtag_1435">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/perl/">
		Perl
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1435/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1435/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1435"
  >-</span><span
  class="button yellow"
  id="rating_z_1435"
  >0</span><span 
  class="button green"
  id="rating_p_1435"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1435/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1436">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1436/">#1436</a>(<script language="JavaScript">print_time(new Date("2007/07/24 16:34 GMT"));</script><noscript>2007/07/24 16:34 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/scala/">
	  Scala
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>適当に。なぜかオルゴール音色。
そういえばMIDI検定という謎な検定持ってます。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></td><td class="code"><div class="highlight"><pre>import javax.sound.midi.spi._
import javax.sound.midi._

def play_mmf(mmf:String):unit = {
  val noteMap = Map(&#39;c&#39; -&gt; 60, &#39;d&#39; -&gt; 62, &#39;e&#39; -&gt; 64, &#39;f&#39; -&gt; 65,
                    &#39;g&#39; -&gt; 67, &#39;a&#39; -&gt; 69, &#39;b&#39; -&gt; 71)
  val crotchet = 24
  val channel = 0
  val inst    = 11
  val velocity= 127
  var current = 0
  val sequence = new Sequence(Sequence.PPQ, crotchet)
  val track = sequence.createTrack

  var m = new ShortMessage
  m.setMessage(ShortMessage.PROGRAM_CHANGE,channel, inst, 0)
  track.add(new MidiEvent(m,0))

  def addEvent(t:int, pitch:int, pos:int):unit = {
    var m = new ShortMessage
    m.setMessage(t, channel, pitch, velocity)
    track.add(new MidiEvent(m, pos))
  }
  def interval = current = current + crotchet/2
  def addNote(pitch:int):unit = {
    addEvent(ShortMessage.NOTE_ON, pitch, current)
    interval
    addEvent(ShortMessage.NOTE_OFF, pitch, current)
  }

  mmf.foreach(n =&gt; n match{
    case &#39;r&#39; =&gt; interval
    case x   =&gt; addNote(noteMap(x))
  })

  val sequencer = MidiSystem.getSequencer
  sequencer.addMetaEventListener(new MetaEventListener(){
     def meta(meta:MetaMessage):unit = meta.getType match {
          case 47 =&gt; sequencer.close()
                     System.exit(0);
          case _  =&gt; ()
      }
  });
  sequencer.open
  sequencer.setSequence(sequence)
  sequencer.start
}
play_mmf(&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1436/addtag/" class="addtag" id="addtag_1436">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/scala/">
		Scala
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1436/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1436/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1436"
  >-</span><span
  class="button yellow"
  id="rating_z_1436"
  >0</span><span 
  class="button green"
  id="rating_p_1436"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1436/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1440">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1440/">#1440</a>(<script language="JavaScript">print_time(new Date("2007/07/24 18:12 GMT"));</script><noscript>2007/07/24 18:12 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #bfffbf;">4/4=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  Squeak Smalltalk で。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></td><td class="code"><div class="highlight"><pre>| score pitches duration loudness sequence sound |
score := &#39;cdefedcrefgagfercrcrcrcrcdefedcr&#39;.
duration := 1/8 * 2.
loudness := 500.
pitches := FMSound chromaticPitchesFrom: #c4.
sequence := score asArray collect: [:pName |
   pName = $r
      ifTrue: [{#rest. duration}]
      ifFalse: [{pitches at: (&#39;c d ef g a b&#39; indexOf: pName). duration. loudness}]].
sound := AbstractSound noteSequenceOn: FMSound default from: sequence.
sound play
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1440/addtag/" class="addtag" id="addtag_1440">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1440/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1440/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #bfffbf;"
  >4/4=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1440"
  >-</span><span
  class="button yellow"
  id="rating_z_1440"
  >0</span><span 
  class="button green"
  id="rating_p_1440"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1440/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1444">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/147/" target="_top">es</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1444/">#1444</a>(<script language="JavaScript">print_time(new Date("2007/07/25 00:57 GMT"));</script><noscript>2007/07/25 00:57 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>one linerで。

FreeBSDで動きます(*BSDかも)。
ちなみにFreeBSDにはデフォルトでbeepコマンドがない(はず)です。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1</pre></td><td class="code"><div class="highlight"><pre><span class="n">ruby</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;open(&quot;/dev/speaker&quot;, &quot;w&quot;){|d| d.print &quot;l8&quot;+ARGV.shift.gsub(&quot;r&quot;,&quot;n&quot;)}&#39;</span> <span class="n">cdefedcrefgagfercrcrcrcrcdefedcr</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1444/addtag/" class="addtag" id="addtag_1444">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1444/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1444/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1444"
  >-</span><span
  class="button yellow"
  id="rating_z_1444"
  >0</span><span 
  class="button green"
  id="rating_p_1444"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1444/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1445">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/1/" target="_top">にしお</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1445/">#1445</a>(<script language="JavaScript">print_time(new Date("2007/07/25 02:26 GMT"));</script><noscript>2007/07/25 02:26 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffcf;">1/3=0.33</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ordの返り値は元からintなのでtoiを定義する必要はないですね。

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">winsound</span>
<span class="k">import</span> <span class="nn">time</span>

<span class="n">PLAY_FQ</span> <span class="o">=</span> <span class="p">[</span><span class="mi">440</span><span class="p">,</span> <span class="mi">494</span><span class="p">,</span> <span class="mi">262</span><span class="p">,</span> <span class="mi">294</span><span class="p">,</span> <span class="mi">330</span><span class="p">,</span> <span class="mi">349</span><span class="p">,</span> <span class="mi">392</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">mmf</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">mmf</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="s">&#39;r&#39;</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">winsound</span><span class="o">.</span><span class="n">Beep</span><span class="p">(</span>
                <span class="n">PLAY_FQ</span><span class="p">[</span><span class="nb">ord</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)],</span> <span class="mi">500</span><span class="p">)</span>

<span class="n">play</span><span class="p">(</span><span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1445/addtag/" class="addtag" id="addtag_1445">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/winsound/">winsound</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1445/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1445/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffcf;"
  >1/3=0.33</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1445"
  >-</span><span
  class="button yellow"
  id="rating_z_1445"
  >0</span><span 
  class="button green"
  id="rating_p_1445"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1425/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1445/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080329155921/http://ja.doukaku.org/comment/1445/">
    1
    reply
  </a>

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1445/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1448">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/82/" target="_top">yuin</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1448/">#1448</a>(<script language="JavaScript">print_time(new Date("2007/07/25 05:12 GMT"));</script><noscript>2007/07/25 05:12 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  ありゃ、そのとおり。夜に適当に書いたので頭がボーっとしていたのかもしれません(^^;

ご指摘ありがとうございます。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1448/addtag/" class="addtag" id="addtag_1448">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1448"
  >-</span><span
  class="button yellow"
  id="rating_z_1448"
  >0</span><span 
  class="button green"
  id="rating_p_1448"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1445/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1448/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1448/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1453">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/233/" target="_top">hirataka</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1453/">#1453</a>(<script language="JavaScript">print_time(new Date("2007/07/25 14:39 GMT"));</script><noscript>2007/07/25 14:39 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/nadesico/">
	  なでしこ
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #9fff9f;">6/6=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>標準の命令を使わずにWindowsAPIを呼んでます。
コード自体はいたって普通です。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><div class="highlight"><pre>●ビープ(x, y) = DLL(&quot;kernel32&quot;, &quot;BOOL Beep(DWORD, DWORD)&quot;)

音階@「c」は262
音階@「d」は294
音階@「e」は330
音階@「f」は349
音階@「g」は392
音階@「a」は440
音階@「b」は494

「cdefedcrefgagfercrcrcrcrcdefedcr」を鳴らす

＊鳴らす(楽譜を)
　楽譜を文字列分解して反復
　　もしそれが「r」ならば
　　　0.5秒待つ
　　違えば
　　　ビープ(音階@それ, 500)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1453/addtag/" class="addtag" id="addtag_1453">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/nadesico/">
		なでしこ
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1453/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1453/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #9fff9f;"
  >6/6=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1453"
  >-</span><span
  class="button yellow"
  id="rating_z_1453"
  >0</span><span 
  class="button green"
  id="rating_p_1453"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1453/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1457">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1457/">#1457</a>(<script language="JavaScript">print_time(new Date("2007/07/26 04:13 GMT"));</script><noscript>2007/07/26 04:13 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #9fff9f;">6/6=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>#1433をヒントにして、自前で正弦波を生成しました。
式は適当ですが、一応それっぽい音はします。

利用パッケージの都合で、Linuxと*BSD(?)のみ対応です。

8分音符は0.5秒にしました。
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">math</span>
<span class="k">import</span> <span class="nn">struct</span>
<span class="k">import</span> <span class="nn">ossaudiodev</span>

<span class="k">def</span> <span class="nf">sw</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">((</span><span class="n">t</span><span class="o">/</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">/</span><span class="n">f</span><span class="p">))</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="mh">0x7fff</span><span class="p">))</span>

<span class="n">wav</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sw</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="mi">262</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4000</span><span class="p">)]),</span>
  <span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sw</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="mi">294</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4000</span><span class="p">)]),</span>
  <span class="s">&#39;e&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sw</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="mi">330</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4000</span><span class="p">)]),</span>
  <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sw</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="mi">349</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4000</span><span class="p">)]),</span>
  <span class="s">&#39;g&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sw</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="mi">392</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4000</span><span class="p">)]),</span>
  <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sw</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="mi">440</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4000</span><span class="p">)]),</span>
  <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">sw</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span> <span class="mi">494</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4000</span><span class="p">)]),</span>
  <span class="s">&#39;r&#39;</span><span class="p">:</span> <span class="s">&#39;</span><span class="se">\x00\x00</span><span class="s">&#39;</span> <span class="o">*</span> <span class="mi">4000</span>
<span class="p">}</span>

<span class="n">dsp</span> <span class="o">=</span> <span class="n">ossaudiodev</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">dsp</span><span class="o">.</span><span class="n">setparameters</span><span class="p">(</span><span class="n">ossaudiodev</span><span class="o">.</span><span class="n">AFMT_S16_LE</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
<span class="n">dsp</span><span class="o">.</span><span class="n">writeall</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">wav</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="s">&#39;cdefedcrefgagfercrcrcrcrcdefedcr&#39;</span><span class="p">]))</span>
<span class="n">dsp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
<span class="n">dsp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1457/addtag/" class="addtag" id="addtag_1457">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1457/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1457/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #9fff9f;"
  >6/6=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1457"
  >-</span><span
  class="button yellow"
  id="rating_z_1457"
  >0</span><span 
  class="button green"
  id="rating_p_1457"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1457/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1469">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/101/" target="_top">沢渡 みかげ</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1469/">#1469</a>(<script language="JavaScript">print_time(new Date("2007/07/26 12:06 GMT"));</script><noscript>2007/07/26 12:06 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/mathematica/">
	  Mathematica
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>Mathematicaも数式処理ソフトですが，サウンド用の機能があります．
Mathematica6で強化されて，いろいろな音色で音階を奏でることが可能になっています．

Mathematicaでは，音を出さない場合 None を指定するので，MMLのrをNoneにマップしています．

http://reference.wolfram.com/mathematica/ref/SoundNote.ja.html

音階がグラフっぽく出るので見た目がきれいです．</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre>len = 0.25; (* sec *)
tone = &quot;Organ&quot;;
mml = &quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;;
mathmml = StringSplit[mml, &quot;&quot;] /. {&quot;r&quot; -&gt; None};
Sound[{tone, SoundNote[#, len] &amp; /@ mathmml}]
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1469/addtag/" class="addtag" id="addtag_1469">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/Mathematica6/">Mathematica6</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/mathematica/">
		Mathematica
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1469/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1469/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1469"
  >-</span><span
  class="button yellow"
  id="rating_z_1469"
  >0</span><span 
  class="button green"
  id="rating_p_1469"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1469/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1473">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1473/">#1473</a>(<script language="JavaScript">print_time(new Date("2007/07/26 12:58 GMT"));</script><noscript>2007/07/26 12:58 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  javax.soud.midiパッケージを使用しています。初めてなので改善点などご指摘いただけましたら幸いです（音がちゃんと消えていないような）……
タイミングの制御をちゃんとやっていないのでたどたどしい演奏になります（苦笑）
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">javax.sound.midi.MidiSystem</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">javax.sound.midi.Receiver</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">javax.sound.midi.ShortMessage</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">javax.sound.midi.InvalidMidiDataException</span><span class="o">;</span>
<span class="k">import</span> <span class="nn">javax.sound.midi.MidiUnavailableException</span><span class="o">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TinyMML</span> <span class="o">{</span>
    <span class="k">private</span> <span class="k">final</span> <span class="k">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">code</span> <span class="o">=</span> <span class="o">{</span><span class="mi">69</span><span class="o">,</span> <span class="mi">71</span><span class="o">,</span> <span class="mi">60</span><span class="o">,</span> <span class="mi">62</span><span class="o">,</span> <span class="mi">64</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="mi">67</span><span class="o">};</span>
    <span class="k">private</span> <span class="k">final</span> <span class="k">static</span> <span class="kt">int</span> <span class="n">TONE</span> <span class="o">=</span> <span class="mi">120</span><span class="o">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">play</span><span class="o">(</span><span class="n">String</span> <span class="n">mml</span><span class="o">)</span> <span class="k">throws</span> <span class="n">InvalidMidiDataException</span><span class="o">,</span>
                                               <span class="n">MidiUnavailableException</span><span class="o">,</span> 
                                               <span class="n">InterruptedException</span> <span class="o">{</span>
        <span class="n">ShortMessage</span> <span class="n">mes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShortMessage</span><span class="o">();</span>
        <span class="n">Receiver</span> <span class="n">rcvr</span> <span class="o">=</span> <span class="n">MidiSystem</span><span class="o">.</span><span class="na">getReceiver</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">mml</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">mml</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">c</span> <span class="o">&gt;=</span> <span class="sc">&#39;a&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">&#39;g&#39;</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">co</span> <span class="o">=</span> <span class="n">code</span><span class="o">[</span><span class="n">c</span> <span class="o">-</span> <span class="sc">&#39;a&#39;</span><span class="o">];</span>
                <span class="n">mes</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">ShortMessage</span><span class="o">.</span><span class="na">NOTE_ON</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">co</span><span class="o">,</span> <span class="n">TONE</span><span class="o">);</span>
                <span class="n">rcvr</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">mes</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
                <span class="n">mes</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">ShortMessage</span><span class="o">.</span><span class="na">NOTE_OFF</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">co</span><span class="o">);</span>
                <span class="n">rcvr</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">mes</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">rcvr</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="k">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">play</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1473/addtag/" class="addtag" id="addtag_1473">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1473/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1473/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1473"
  >-</span><span
  class="button yellow"
  id="rating_z_1473"
  >0</span><span 
  class="button green"
  id="rating_p_1473"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080329155921/http://ja.doukaku.org/comment/1473/">
    2
    replies
  </a>

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1473/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1480">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/25/" target="_top">hamano</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1480/">#1480</a>(<script language="JavaScript">print_time(new Date("2007/07/26 17:00 GMT"));</script><noscript>2007/07/26 17:00 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #9fff9f;">6/6=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>サンプリングレート: 8000
PCMフォーマット: 8bit
% gcc sound.c -lm
でコンパイル出来ます、linux で鳴るはずです。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></td><td class="code"><div class="highlight"><pre><span class="n">include</span> <span class="o">&lt;</span><span class="n">stdio</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
<span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#include &lt;math.h&gt;</span>
<span class="cp">#include &lt;unistd.h&gt;</span>
<span class="cp">#include &lt;sys/ioctl.h&gt;</span>
<span class="cp">#include &lt;fcntl.h&gt;</span>
<span class="cp">#include &lt;linux/soundcard.h&gt;</span>

<span class="cp">#define RATE 8000</span>

<span class="kt">double</span> <span class="n">sol_fa</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mf">880.0</span><span class="p">,</span> <span class="mf">987.0</span><span class="p">,</span> <span class="mf">523.0</span><span class="p">,</span> <span class="mf">587.0</span><span class="p">,</span> <span class="mf">659.0</span><span class="p">,</span> <span class="mf">698.0</span><span class="p">,</span> <span class="mf">784.0</span><span class="p">};</span>

<span class="kt">void</span> <span class="n">play</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="n">RATE</span><span class="p">];</span>
    <span class="kt">double</span> <span class="n">freq</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="sc">&#39;a&#39;</span> <span class="o">&lt;=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="sc">&#39;g&#39;</span><span class="p">)</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="n">sol_fa</span><span class="p">[</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;a&#39;</span><span class="p">];</span>
        <span class="k">else</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">RATE</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">buf</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">*</span> <span class="n">j</span> <span class="o">/</span> <span class="n">RATE</span><span class="p">);</span>
        <span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="n">RATE</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span> <span class="kt">void</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">fd</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fmt</span> <span class="o">=</span> <span class="n">AFMT_U8</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">channels</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">RATE</span><span class="p">;</span>

    <span class="n">fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="s">&quot;/dev/dsp&quot;</span><span class="p">,</span> <span class="n">O_WRONLY</span><span class="p">);</span>
    <span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">SOUND_PCM_SETFMT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fmt</span><span class="p">);</span>
    <span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">SOUND_PCM_WRITE_CHANNELS</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">channels</span><span class="p">);</span>
    <span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">SOUND_PCM_WRITE_RATE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rate</span><span class="p">);</span>
    <span class="n">play</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">);</span>
    <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1480/addtag/" class="addtag" id="addtag_1480">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1480/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1480/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #9fff9f;"
  >6/6=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1480"
  >-</span><span
  class="button yellow"
  id="rating_z_1480"
  >0</span><span 
  class="button green"
  id="rating_p_1480"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080329155921/http://ja.doukaku.org/comment/1480/">
    1
    reply
  </a>

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1480/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1504">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1504/">#1504</a>(<script language="JavaScript">print_time(new Date("2007/07/27 11:52 GMT"));</script><noscript>2007/07/27 11:52 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>音がちゃんと消えていない理由がわかりました。
23行目に間違いがあります。正しくは
mes.setMessage(ShortMessage.NOTE_OFF, 0, co, 0);
でした。</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1504/addtag/" class="addtag" id="addtag_1504">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1504"
  >-</span><span
  class="button yellow"
  id="rating_z_1504"
  >0</span><span 
  class="button green"
  id="rating_p_1504"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1473/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1504/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1504/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1596">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/69/" target="_top">PHO</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1596/">#1596</a>(<script language="JavaScript">print_time(new Date("2007/07/30 14:45 GMT"));</script><noscript>2007/07/30 14:45 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>OpenAL使用。カエルの歌はあんまり好きじゃないので、曲は自分で作った。

拡張仕様:
* 0-9 でオクターブ変更、デフォルト5。
* C, D, F, G, A でそれぞれ元の音から半音上げる。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Control</span><span class="o">.</span><span class="n">Concurrent</span>
<span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">Char</span>
<span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">Map</span> <span class="p">(</span><span class="n">Map</span><span class="p">)</span>
<span class="kr">import</span> <span class="nv">qualified</span> <span class="n">Data</span><span class="o">.</span><span class="n">Map</span> <span class="nv">as</span> <span class="n">M</span>
<span class="kr">import</span> <span class="n">Foreign</span><span class="o">.</span><span class="n">Marshal</span><span class="o">.</span><span class="n">Alloc</span>
<span class="kr">import</span> <span class="n">Foreign</span><span class="o">.</span><span class="n">Marshal</span><span class="o">.</span><span class="n">Array</span>
<span class="kr">import</span> <span class="n">Foreign</span><span class="o">.</span><span class="n">Ptr</span>
<span class="kr">import</span> <span class="n">Foreign</span><span class="o">.</span><span class="n">Storable</span>
<span class="kr">import</span> <span class="n">Sound</span><span class="o">.</span><span class="n">OpenAL</span>

<span class="nv">freqForNote</span> <span class="o">::</span> <span class="n">Char</span> <span class="o">-&gt;</span> <span class="n">Double</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;c&#39;</span> <span class="o">=</span> <span class="mf">261.626</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;C&#39;</span> <span class="o">=</span> <span class="mf">277.183</span> <span class="c1">-- C# (拡張仕様、互換性有)</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;d&#39;</span> <span class="o">=</span> <span class="mf">293.628</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;D&#39;</span> <span class="o">=</span> <span class="mf">311.127</span> <span class="c1">-- D# (以下同様)</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;e&#39;</span> <span class="o">=</span> <span class="mf">329.628</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;f&#39;</span> <span class="o">=</span> <span class="mf">349.228</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;F&#39;</span> <span class="o">=</span> <span class="mf">369.994</span> <span class="c1">-- F#</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;g&#39;</span> <span class="o">=</span> <span class="mf">391.995</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;G&#39;</span> <span class="o">=</span> <span class="mf">415.305</span> <span class="c1">-- G#</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;a&#39;</span> <span class="o">=</span> <span class="mi">440</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;A&#39;</span> <span class="o">=</span> <span class="mf">466.164</span> <span class="c1">-- A#</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;b&#39;</span> <span class="o">=</span> <span class="mf">493.883</span>
<span class="nv">freqForNote</span> <span class="sc">&#39;r&#39;</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nv">scoreToFreqs</span> <span class="o">::</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Double</span><span class="p">]</span>
<span class="nv">scoreToFreqs</span> <span class="o">=</span> <span class="nv">scoreToFreqs&#39;</span> <span class="mi">5</span> <span class="c1">-- 5 が中心</span>
    <span class="kr">where</span>
      <span class="nv">scoreToFreqs&#39;</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Double</span><span class="p">]</span>
      <span class="nv">scoreToFreqs&#39;</span> <span class="kr">_</span>      <span class="p">[]</span>     <span class="o">=</span> <span class="p">[]</span>
      <span class="nv">scoreToFreqs&#39;</span> <span class="nv">octave</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>
          <span class="o">|</span> <span class="nv">isDigit</span> <span class="nv">x</span>
              <span class="c1">-- オクターブ変更 (拡張仕様、互換性有)</span>
              <span class="o">=</span> <span class="nv">scoreToFreqs&#39;</span> <span class="p">(</span><span class="nv">fromEnum</span> <span class="nv">x</span> <span class="o">-</span> <span class="nv">fromEnum</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="nv">xs</span>
          <span class="o">|</span> <span class="nv">otherwise</span>
              <span class="o">=</span> <span class="p">(</span><span class="nv">freqForNote</span> <span class="nv">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">^^</span> <span class="p">(</span><span class="nv">octave</span> <span class="o">-</span> <span class="mi">5</span><span class="p">))</span>
                <span class="o">:</span> <span class="nv">scoreToFreqs&#39;</span> <span class="nv">octave</span> <span class="nv">xs</span>

<span class="nv">mkNote</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">Double</span> <span class="o">-&gt;</span> <span class="n">Double</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="n">Buffer</span>
<span class="nv">mkNote</span> <span class="nv">samplFreq</span> <span class="nv">sec</span> <span class="nv">noteFreq</span>
    <span class="o">=</span> <span class="kr">let</span> <span class="nv">nSamples</span> <span class="o">=</span> <span class="nv">round</span> <span class="o">$</span> <span class="p">(</span><span class="nv">realToFrac</span> <span class="nv">samplFreq</span><span class="p">)</span> <span class="o">*</span> <span class="nv">sec</span>
          <span class="nv">bufSize</span>  <span class="o">=</span> <span class="nv">nSamples</span>
      <span class="kr">in</span> 
        <span class="nv">allocaBytes</span> <span class="nv">bufSize</span> <span class="o">$</span> <span class="o">\</span> <span class="nv">mem</span> <span class="o">-&gt;</span>
        <span class="kr">do</span> <span class="nv">renderToMemBuf</span> <span class="nv">mem</span> <span class="nv">bufSize</span>
           <span class="kr">let</span> <span class="nv">memRegion</span> <span class="o">=</span> <span class="n">MemoryRegion</span> <span class="nv">mem</span> <span class="p">(</span><span class="nv">fromIntegral</span> <span class="nv">bufSize</span><span class="p">)</span>
               <span class="nv">bufData</span>   <span class="o">=</span> <span class="n">BufferData</span> <span class="nv">memRegion</span> <span class="n">Mono8</span> <span class="p">(</span><span class="nv">realToFrac</span> <span class="nv">samplFreq</span><span class="p">)</span>
           <span class="p">[</span><span class="nv">buf</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="nv">genObjectNames</span> <span class="mi">1</span>
           <span class="nv">bufferData</span> <span class="nv">buf</span> <span class="o">$=</span> <span class="nv">bufData</span>
           <span class="nv">return</span> <span class="nv">buf</span>
    <span class="kr">where</span>
      <span class="nv">renderToArray</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">ALubyte</span><span class="p">]</span>
      <span class="nv">renderToArray</span> <span class="nv">len</span> <span class="o">=</span> <span class="nv">map</span> <span class="nv">calcFrame</span> <span class="p">[</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

      <span class="nv">calcFrame</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">ALubyte</span>
      <span class="nv">calcFrame</span> <span class="nv">n</span> <span class="o">=</span> <span class="kr">let</span> <span class="nv">frame</span> <span class="o">=</span> <span class="nv">sin</span> <span class="o">$</span>
                                <span class="mi">2</span>
                                <span class="o">*</span> <span class="nv">pi</span>
                                <span class="o">*</span> <span class="nv">noteFreq</span>
                                <span class="o">*</span> <span class="p">(</span><span class="nv">realToFrac</span> <span class="nv">n</span> <span class="o">/</span> <span class="nv">realToFrac</span> <span class="nv">samplFreq</span><span class="p">)</span>
                    <span class="kr">in</span>
                      <span class="c1">-- -1.0 &lt;= frame &lt;= 1.0</span>
                      <span class="nv">floor</span> <span class="o">$</span> <span class="mi">127</span> <span class="o">*</span> <span class="nv">frame</span> <span class="o">+</span> <span class="mi">128</span>

      <span class="nv">renderToMemBuf</span> <span class="o">::</span> <span class="n">Ptr</span> <span class="n">ALubyte</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="p">()</span>
      <span class="nv">renderToMemBuf</span> <span class="nv">mem</span> <span class="nv">len</span> <span class="o">=</span> <span class="nv">pokeArray</span> <span class="nv">mem</span> <span class="p">(</span><span class="nv">renderToArray</span> <span class="nv">len</span><span class="p">)</span>

<span class="nv">mkEachBuffers</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">Double</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Double</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="p">(</span><span class="n">Map</span> <span class="n">Double</span> <span class="n">Buffer</span><span class="p">)</span>
<span class="nv">mkEachBuffers</span> <span class="nv">sampleFreq</span> <span class="nv">sec</span> <span class="o">=</span> <span class="nv">updateMap</span> <span class="n">M</span><span class="o">.</span><span class="nv">empty</span>
    <span class="kr">where</span>
      <span class="nv">updateMap</span> <span class="nv">m</span> <span class="p">[]</span>     <span class="o">=</span> <span class="nv">return</span> <span class="nv">m</span>
      <span class="nv">updateMap</span> <span class="nv">m</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>
          <span class="o">|</span> <span class="n">M</span><span class="o">.</span><span class="nv">member</span> <span class="nv">x</span> <span class="nv">m</span>
              <span class="o">=</span> <span class="nv">updateMap</span> <span class="nv">m</span> <span class="nv">xs</span>
          <span class="o">|</span> <span class="nv">otherwise</span>
              <span class="o">=</span> <span class="kr">do</span> <span class="nv">buf</span> <span class="o">&lt;-</span> <span class="nv">mkNote</span> <span class="nv">sampleFreq</span> <span class="nv">sec</span> <span class="nv">x</span>
                   <span class="nv">updateMap</span> <span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="nv">insert</span> <span class="nv">x</span> <span class="nv">buf</span> <span class="nv">m</span><span class="p">)</span> <span class="nv">xs</span>

<span class="nv">main</span> <span class="o">=</span> <span class="kr">do</span> <span class="nv">deviceM</span> <span class="o">&lt;-</span> <span class="nv">openDevice</span> <span class="n">Nothing</span>
          <span class="kr">case</span> <span class="nv">deviceM</span> <span class="kr">of</span>
            <span class="n">Nothing</span>
                <span class="o">-&gt;</span> <span class="nv">fail</span> <span class="s">&quot;failed to open audio device&quot;</span>
            <span class="n">Just</span> <span class="nv">dev</span>
                <span class="o">-&gt;</span> <span class="kr">do</span> <span class="nv">ctxM</span> <span class="o">&lt;-</span> <span class="nv">createContext</span> <span class="nv">dev</span> <span class="p">[]</span>
                      <span class="kr">case</span> <span class="nv">ctxM</span> <span class="kr">of</span>
                        <span class="n">Nothing</span>
                            <span class="o">-&gt;</span> <span class="nv">fail</span> <span class="s">&quot;failed to create context&quot;</span>
                        <span class="n">Just</span> <span class="nv">ctx</span>
                            <span class="o">-&gt;</span> <span class="kr">do</span> <span class="nv">currentContext</span> <span class="o">$=</span> <span class="n">Just</span> <span class="nv">ctx</span>
                                  <span class="nv">putStrLn</span> <span class="s">&quot;creating buffers...&quot;</span>

                                  <span class="kr">let</span> <span class="nv">freqs</span> <span class="o">=</span> <span class="nv">scoreToFreqs</span> <span class="nv">score</span>
                                  <span class="nv">buffers</span> <span class="o">&lt;-</span> <span class="nv">mkEachBuffers</span> <span class="mi">8000</span> <span class="mf">0.2</span> <span class="nv">freqs</span>
                                  <span class="nv">notes</span>   <span class="o">&lt;-</span> <span class="nv">mapM</span> <span class="p">(</span><span class="nv">flip</span> <span class="n">M</span><span class="o">.</span><span class="nv">lookup</span> <span class="nv">buffers</span><span class="p">)</span> <span class="nv">freqs</span>

                                  <span class="nv">putStrLn</span> <span class="s">&quot;ok. playing...&quot;</span>

                                  <span class="p">[</span><span class="nv">src</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="nv">genObjectNames</span> <span class="mi">1</span>
                                  <span class="c1">-- 手抜き。全部の音符を一気にキューに</span>
                                  <span class="c1">-- 入れるのは本当は良くない。</span>
                                  <span class="nv">queueBuffers</span> <span class="nv">src</span> <span class="nv">notes</span>
                                  <span class="nv">play</span> <span class="p">[</span><span class="nv">src</span><span class="p">]</span>
                        
                                  <span class="nv">waitTillDone</span> <span class="nv">src</span>
                                  <span class="nv">putStrLn</span> <span class="s">&quot;done.&quot;</span>
    <span class="kr">where</span>
      <span class="nv">waitTillDone</span> <span class="o">::</span> <span class="n">Source</span> <span class="o">-&gt;</span> <span class="n">IO</span> <span class="p">()</span>
      <span class="nv">waitTillDone</span> <span class="nv">src</span>
          <span class="o">=</span> <span class="kr">do</span> <span class="nv">state</span> <span class="o">&lt;-</span> <span class="nv">get</span> <span class="p">(</span><span class="nv">sourceState</span> <span class="nv">src</span><span class="p">)</span>
               <span class="kr">case</span> <span class="nv">state</span> <span class="kr">of</span>
                 <span class="n">Playing</span> <span class="o">-&gt;</span> <span class="nv">threadDelay</span> <span class="p">(</span><span class="mi">50</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="nv">waitTillDone</span> <span class="nv">src</span>
                 <span class="kr">_</span>       <span class="o">-&gt;</span> <span class="nv">return</span> <span class="p">()</span>

<span class="nv">score</span> <span class="o">::</span> <span class="n">String</span>
<span class="c1">-- score = &quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span>
<span class="nv">score</span> <span class="o">=</span> <span class="s">&quot;5daagabaFed4ba&quot;</span> <span class="o">++</span> <span class="s">&quot;5daagabaFeFer&quot;</span>   <span class="o">++</span>
        <span class="s">&quot;5daagabaFedeF&quot;</span>  <span class="o">++</span> <span class="s">&quot;5gabFede4b5eFer&quot;</span> <span class="o">++</span>
        <span class="s">&quot;5daagabaFed4ba&quot;</span> <span class="o">++</span> <span class="s">&quot;5daagabaFeFer&quot;</span>   <span class="o">++</span>
        <span class="s">&quot;5daagabaFedeF&quot;</span>  <span class="o">++</span> <span class="s">&quot;5gabFede4b5eFer&quot;</span> <span class="o">++</span>

        <span class="s">&quot;5babaFabaFeFr&quot;</span>  <span class="o">++</span> <span class="s">&quot;5eFaFed4bab5CdF&quot;</span> <span class="o">++</span>
        <span class="s">&quot;5babaFabaFeFr&quot;</span>  <span class="o">++</span> <span class="s">&quot;5eFedFabbbr6dC&quot;</span>  <span class="o">++</span>
        <span class="s">&quot;5babaFabaFeFr&quot;</span>  <span class="o">++</span> <span class="s">&quot;5eFaFed4bab5CdF&quot;</span> <span class="o">++</span>
        <span class="s">&quot;5babaFabaFeFr&quot;</span>  <span class="o">++</span> <span class="s">&quot;5eFedFabbbrFF&quot;</span>   <span class="o">++</span>

        <span class="s">&quot;5ebeFgFeged4b5d&quot;</span> <span class="o">++</span> <span class="s">&quot;5ebeFgebagbar&quot;</span>  <span class="o">++</span>
        <span class="s">&quot;5ebeFgFeded4br&quot;</span>  <span class="o">++</span> <span class="s">&quot;5cdebagFFered&quot;</span>  <span class="o">++</span>
        <span class="s">&quot;5ebeFgFeged4b5d&quot;</span> <span class="o">++</span> <span class="s">&quot;5ebeFgebagbar&quot;</span>  <span class="o">++</span>
        <span class="s">&quot;5ebeFgFeded4br&quot;</span>  <span class="o">++</span> <span class="s">&quot;5cdebagFFerer&quot;</span>  <span class="o">++</span>

        <span class="s">&quot;5daagabaFed4ba&quot;</span> <span class="o">++</span> <span class="s">&quot;5daagabaFeFer&quot;</span>   <span class="o">++</span>
        <span class="s">&quot;5daagabaFedeF&quot;</span>  <span class="o">++</span> <span class="s">&quot;5gabFede4b5eFer&quot;</span> <span class="o">++</span>
        <span class="s">&quot;5daagabaFed4ba&quot;</span> <span class="o">++</span> <span class="s">&quot;5daagabaFeFer&quot;</span>   <span class="o">++</span>
        <span class="s">&quot;5daagabaFedeF&quot;</span>  <span class="o">++</span> <span class="s">&quot;5gabFedeFed4b5d&quot;</span> <span class="o">++</span>
        <span class="s">&quot;5eee&quot;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1596/addtag/" class="addtag" id="addtag_1596">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1596/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1596/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1596"
  >-</span><span
  class="button yellow"
  id="rating_z_1596"
  >0</span><span 
  class="button green"
  id="rating_p_1596"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1596/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1723">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/323/" target="_top">tomatsu</a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1723/">#1723</a>(<script language="JavaScript">print_time(new Date("2007/08/02 12:47 GMT"));</script><noscript>2007/08/02 12:47 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/pnuts/">
	  Pnuts
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #dfffdf;">2/2=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre>import javax.sound.midi.*
import static javax.sound.midi.ShortMessage.*
code = [69, 71, 60, 62, 64, 65, 67]
TONE = 120
function play(mml){
  mes = new ShortMessage()
  rcvr = MidiSystem.getReceiver()
  for (c: mml) {
      if (c &gt;= &#39;a&#39; &amp;&amp; c &lt;= &#39;g&#39;) {
          co = code[c - &#39;a&#39;]
          mes.setMessage(NOTE_ON, 0, co, TONE)
          rcvr.send(mes, -1)
          sleep(500)
          mes.setMessage(NOTE_OFF, 0, co)
          rcvr.send(mes, -1)
      } else {
          sleep(500)
      }
  }
  rcvr.close()
}
play(&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;)
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1723/addtag/" class="addtag" id="addtag_1723">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/pnuts/">
		Pnuts
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1723/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1723/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #dfffdf;"
  >2/2=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1723"
  >-</span><span
  class="button yellow"
  id="rating_z_1723"
  >0</span><span 
  class="button green"
  id="rating_p_1723"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1723/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1818">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/96/" target="_top">ether</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1818/">#1818</a>(<script language="JavaScript">print_time(new Date("2007/08/04 14:10 GMT"));</script><noscript>2007/08/04 14:10 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/tcl/">
	  Tcl
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  Snack という Tcl/Python 向けの音声ライブラリを使用しました。Snack は ActiveTcl のディストリビューションにも含まれています。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><div class="highlight"><pre>package require snack

set C     262
set dur   4000
set beat  5000
set amp   30000
set score cdefedcrefgagfercrcrcrcrcdefedcr

set freq $C
foreach note {c _ d _ e f _ g _ a _ b} {
  set freq [expr {$freq * pow(2, 1. / 12.)}]
  set osc  [snack::filter generator $freq $amp 0.0 sine $dur]
  snack::sound $note
  $note filter $osc
  $note length $beat
}
snack::sound r; r length $beat

snack::sound snd
foreach note [split $score {}] {
  snd concatenate $note
}
snd play -blocking yes
# snd write kaeru.wav -fileformat WAV 
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1818/addtag/" class="addtag" id="addtag_1818">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/Snack/">Snack</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/tcl/">
		Tcl
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1818/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1818/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1818"
  >-</span><span
  class="button yellow"
  id="rating_z_1818"
  >0</span><span 
  class="button green"
  id="rating_p_1818"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1818/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1927">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/49/" target="_top">iwk</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1927/">#1927</a>(<script language="JavaScript">print_time(new Date("2007/08/06 10:40 GMT"));</script><noscript>2007/08/06 10:40 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/ocaml/">
	  OCaml
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><div class="highlight"><pre><span class="k">#</span><span class="n">light</span>
<span class="kr">open</span> <span class="n">System</span>
<span class="kr">open</span> <span class="n">System</span><span class="k">.</span><span class="n">Runtime</span><span class="k">.</span><span class="n">InteropServices</span>
<span class="kr">open</span> <span class="n">System</span><span class="k">.</span><span class="n">Threading</span>

<span class="k">[&lt;</span><span class="n">DllImport</span><span class="k">(</span><span class="s2">&quot;kernel32.dll&quot;</span><span class="k">)&gt;]</span>

<span class="kr">let</span> <span class="n">Beep</span> <span class="k">(</span><span class="n">dwFreq</span><span class="k">:</span><span class="n">int</span><span class="k">)</span> <span class="k">(</span><span class="n">dwDuration</span><span class="k">:</span><span class="n">int</span><span class="k">)</span> <span class="k">:</span><span class="n">bool</span> <span class="k">=</span> <span class="n">failwith</span> <span class="s2">&quot;&quot;</span>
<span class="kr">let</span> <span class="n">toNum</span> <span class="k">=</span> <span class="kr">function</span>
    <span class="k">|</span> <span class="sc">&#39;c&#39;</span> <span class="k">-&gt;</span> <span class="mi">262</span>
    <span class="k">|</span> <span class="sc">&#39;d&#39;</span> <span class="k">-&gt;</span> <span class="mi">294</span>
    <span class="k">|</span> <span class="sc">&#39;e&#39;</span> <span class="k">-&gt;</span> <span class="mi">330</span>
    <span class="k">|</span> <span class="sc">&#39;f&#39;</span> <span class="k">-&gt;</span> <span class="mi">349</span>
    <span class="k">|</span> <span class="sc">&#39;g&#39;</span> <span class="k">-&gt;</span> <span class="mi">392</span>
    <span class="k">|</span> <span class="sc">&#39;a&#39;</span> <span class="k">-&gt;</span> <span class="mi">440</span>
    <span class="k">|</span> <span class="sc">&#39;b&#39;</span> <span class="k">-&gt;</span> <span class="mi">494</span>
    <span class="k">|</span> <span class="k">_</span> <span class="k">-&gt;</span> <span class="mi">0</span>

<span class="kr">let</span> <span class="n">play</span> <span class="k">(</span><span class="n">s</span><span class="k">:</span><span class="n">string</span><span class="k">)</span> <span class="k">=</span>
    <span class="kr">for</span> <span class="n">c</span> <span class="kr">in</span> <span class="n">s</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="k">(</span><span class="n">toNum</span> <span class="n">c</span><span class="k">)</span> <span class="k">=</span> <span class="mi">0</span> <span class="kr">then</span> <span class="n">Thread</span><span class="k">.</span><span class="n">Sleep</span><span class="k">(</span> <span class="mi">500</span> <span class="k">)</span>
        <span class="kr">else</span> <span class="n">Beep</span> <span class="k">(</span><span class="n">toNum</span> <span class="n">c</span><span class="k">)</span> <span class="mi">500</span> <span class="k">|&gt;</span> <span class="k">(</span><span class="kr">fun</span> <span class="n">b</span> <span class="k">-&gt;</span> <span class="k">())</span>
    <span class="kr">done</span>

<span class="kr">do</span> <span class="n">play</span> <span class="s2">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1927/addtag/" class="addtag" id="addtag_1927">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/F%23/">F#</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/ocaml/">
		OCaml
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1927/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1927/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1927"
  >-</span><span
  class="button yellow"
  id="rating_z_1927"
  >0</span><span 
  class="button green"
  id="rating_p_1927"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1927/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1950">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1950/">#1950</a>(<script language="JavaScript">print_time(new Date("2007/08/06 18:00 GMT"));</script><noscript>2007/08/06 18:00 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>MML からAIFFファイルを生成し（※単純な正弦波です）iTunes等のプレイヤーに渡します。
とりあえず OS X での動作しか考えていませんが... 

A音の周波数設定 / テンポ / サンプリング周波数 / 純正律・平均律 / サンプルサイズ(8bit・16bit) / ステレオ・モノラル設定とか・・・無駄にこだわってみました。

Gauche 0.8.10 以降でないと動きません。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-1</span><span class="p">)</span> <span class="c1">;first,second,...,seventh</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-4</span><span class="p">)</span> <span class="c1">;uvector</span>
<span class="p">(</span><span class="nf">use</span> <span class="nv">binary</span><span class="o">.</span><span class="nv">io</span><span class="p">)</span> <span class="c1">;default-endianの設定とか</span>
<span class="p">(</span><span class="nf">default-endian</span> <span class="ss">&#39;big-endian</span><span class="p">)</span>

<span class="c1">;;</span>
<span class="c1">;; コンフィギュレーション</span>
<span class="c1">;;</span>
<span class="p">(</span><span class="k">define </span><span class="nv">tempo</span> <span class="mi">120</span><span class="p">)</span>
<span class="c1">;(define frequency-A 440.0)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">frequency-A</span> <span class="mf">442.0</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">use-just-intonation</span> <span class="no">#f</span><span class="p">)</span> <span class="c1">;純正律を用いる。#fなら平均律</span>
<span class="p">(</span><span class="k">define </span><span class="nv">sample-rate</span> <span class="p">(</span><span class="nb">* </span><span class="nv">frequency-A</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">; 1.768KHzでサンプリング</span>
<span class="c1">;(define sample-rate 44100) ; 44.1KHzでサンプリングとか</span>
<span class="c1">;(define sample-size 8) ; sampling size (bit)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">sample-size</span> <span class="mi">16</span><span class="p">)</span>
<span class="c1">;(define stereo-mode #f)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">stereo-mode</span> <span class="no">#t</span><span class="p">)</span>

<span class="c1">;</span>
<span class="c1">; 内部で使用する値</span>
<span class="c1">;</span>
<span class="p">(</span><span class="k">define </span><span class="nv">volume-maximum</span> <span class="p">(</span><span class="nf">floor-&gt;exact</span> <span class="p">(</span><span class="nb">* </span><span class="mf">0.707</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">sample-size</span> <span class="mi">16</span><span class="p">)</span> <span class="mi">32767</span> <span class="mi">127</span><span class="p">))))</span> <span class="c1">; 0.707は適当な音量</span>
<span class="p">(</span><span class="k">define </span><span class="nv">note-duration</span> <span class="p">(</span><span class="nb">/ </span><span class="mi">60</span> <span class="nv">tempo</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">note-sample-count</span> <span class="p">(</span><span class="nf">floor-&gt;exact</span> <span class="p">(</span><span class="nb">* </span><span class="nv">sample-rate</span> <span class="nv">note-duration</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">sample-bytes</span> <span class="p">(</span><span class="nf">ash</span> <span class="nv">sample-size</span> <span class="mi">-3</span><span class="p">))</span>

<span class="c1">;;</span>
<span class="c1">;; 自前の出力系関数</span>
<span class="c1">;;</span>
<span class="c1">; 80 bit IEEE Standard 754 floating point number</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">write-f80</span> <span class="nv">value</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">vec</span> <span class="p">(</span><span class="nf">make-u8vector</span> <span class="mi">10</span> <span class="mi">0</span><span class="p">))</span>
		<span class="p">(</span><span class="nf">sign-mask</span> <span class="mi">0</span><span class="p">)</span>
		<span class="p">(</span><span class="nb">exp </span><span class="mi">16383</span><span class="p">))</span>
	<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">value</span> <span class="mi">0</span><span class="p">)</span> 
		  <span class="p">(</span><span class="k">set! </span><span class="nv">sign-mask</span> <span class="mi">0</span><span class="nv">x8000</span><span class="p">)</span>
		  <span class="p">(</span><span class="k">set! </span><span class="nv">value</span> <span class="p">(</span><span class="nb">- </span><span class="nv">value</span><span class="p">)))</span>
	<span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nb">log </span><span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">log </span><span class="nv">value</span><span class="p">)</span> <span class="p">(</span><span class="nb">log </span><span class="mi">2</span><span class="p">)))</span>
		   <span class="p">(</span><span class="nb">exp </span><span class="p">(</span><span class="nf">floor-&gt;exact</span> <span class="nv">log</span><span class="p">))</span>
		   <span class="p">(</span><span class="nf">body</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">value</span> <span class="p">(</span><span class="nb">expt </span><span class="mi">2</span> <span class="nv">exp</span><span class="p">)))</span>
		   <span class="p">(</span><span class="nf">first16</span> <span class="p">(</span><span class="nf">logior</span> <span class="nv">sign-mask</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">16383</span> <span class="nv">exp</span><span class="p">)))</span> <span class="p">)</span>
	  <span class="p">(</span><span class="nf">u8vector-set!</span> <span class="nv">vec</span> <span class="mi">0</span> <span class="p">(</span><span class="nf">ash</span> <span class="nv">first16</span> <span class="mi">-8</span><span class="p">))</span>
	  <span class="p">(</span><span class="nf">u8vector-set!</span> <span class="nv">vec</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">logand</span> <span class="nv">first16</span> <span class="mi">255</span><span class="p">))</span>
	  <span class="p">(</span><span class="k">let </span><span class="nv">loop</span> <span class="p">((</span><span class="nf">body</span> <span class="p">(</span><span class="nb">* </span><span class="nv">body</span> <span class="mi">128</span><span class="p">))</span>
				 <span class="p">(</span><span class="nf">i</span> <span class="mi">2</span><span class="p">))</span>
		<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span> <span class="mi">10</span><span class="p">)</span>
			  <span class="p">(</span><span class="nf">let1</span> <span class="nv">b</span> <span class="p">(</span><span class="nb">floor </span><span class="nv">body</span><span class="p">)</span>
					<span class="p">(</span><span class="nf">u8vector-set!</span> <span class="nv">vec</span> <span class="nv">i</span> <span class="nv">b</span><span class="p">)</span>
					<span class="p">(</span><span class="nf">loop</span> <span class="p">(</span><span class="nb">* </span><span class="p">(</span><span class="nb">- </span><span class="nv">body</span> <span class="nv">b</span><span class="p">)</span> <span class="mi">256</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)))</span> <span class="p">))</span>
	  <span class="p">(</span><span class="nf">write-block</span> <span class="nv">vec</span><span class="p">)</span> <span class="c1">; u8vector</span>
	  <span class="p">)))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">write-u32-idstr</span> <span class="nv">idstr</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="nv">write-id</span> <span class="p">((</span><span class="nf">chars</span> <span class="p">(</span><span class="nb">string-&gt;list </span><span class="nv">idstr</span><span class="p">))</span>
				 <span class="p">(</span><span class="nf">n</span> <span class="mi">4</span><span class="p">))</span>
	<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt; </span><span class="mi">0</span> <span class="nv">n</span><span class="p">)</span>
		  <span class="p">(</span><span class="nb">write-char </span><span class="p">(</span><span class="nb">car </span><span class="nv">chars</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">write-id</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">chars</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)))))</span>
  
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">write-chunk-head</span> <span class="nv">chunk-idstr</span> <span class="nv">chunk-size</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">write-u32-idstr</span> <span class="nv">chunk-idstr</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">write-u32</span> <span class="nv">chunk-size</span><span class="p">))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">write-block-s16-bigendian</span> <span class="nv">vec</span><span class="p">)</span>
  <span class="p">(</span><span class="k">do </span><span class="p">((</span><span class="nf">i</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)))</span>
	  <span class="p">((</span><span class="nb">= </span><span class="nv">i</span> <span class="p">(</span><span class="nf">s16vector-length</span> <span class="nv">vec</span><span class="p">))</span> <span class="nv">vec</span><span class="p">)</span>
	<span class="p">(</span><span class="nf">write-s16</span> <span class="p">(</span><span class="nf">s16vector-ref</span> <span class="nv">vec</span> <span class="nv">i</span><span class="p">))</span>
	<span class="p">(</span><span class="nf">when</span> <span class="nv">stereo-mode</span>
		  <span class="p">(</span><span class="nf">write-s16</span> <span class="p">(</span><span class="nf">s16vector-ref</span> <span class="nv">vec</span> <span class="nv">i</span><span class="p">)))</span> <span class="p">))</span>
<span class="c1">;  (lambda (vec) (write-block vec (current-output-port) 0 -1 &#39;big-endian)))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">write-block-s8</span> <span class="nv">vec</span><span class="p">)</span>
  <span class="p">(</span><span class="k">do </span><span class="p">((</span><span class="nf">i</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)))</span>
	  <span class="p">((</span><span class="nb">= </span><span class="nv">i</span> <span class="p">(</span><span class="nf">s8vector-length</span> <span class="nv">vec</span><span class="p">))</span> <span class="nv">vec</span><span class="p">)</span>
	<span class="p">(</span><span class="nf">write-s8</span> <span class="p">(</span><span class="nf">s8vector-ref</span> <span class="nv">vec</span> <span class="nv">i</span><span class="p">))</span>
	<span class="p">(</span><span class="nf">when</span> <span class="nv">stereo-mode</span>
		  <span class="p">(</span><span class="nf">write-s8</span> <span class="p">(</span><span class="nf">s8vector-ref</span> <span class="nv">vec</span> <span class="nv">i</span><span class="p">)))</span> <span class="p">))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">save-as-aiff-file</span> <span class="nv">file-name</span> <span class="nv">sound-vecs</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">num-sample-frames</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">+</span> <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">sample-size</span> <span class="mi">16</span><span class="p">)</span> <span class="nv">s16vector-length</span> <span class="nv">s8vector-length</span><span class="p">)</span> <span class="nv">sound-vecs</span><span class="p">)))</span>
		 <span class="p">(</span><span class="nf">sound-chunk-size</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">8</span> <span class="p">(</span><span class="nb">* </span><span class="nv">sample-bytes</span> <span class="nv">num-sample-frames</span> <span class="p">(</span><span class="k">if </span><span class="nv">stereo-mode</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">)))))</span>
	<span class="p">(</span><span class="nb">with-output-to-file </span><span class="nv">file-name</span>
	  <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
		<span class="p">(</span><span class="nf">write-chunk-head</span> <span class="s">&quot;FORM&quot;</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">4</span> <span class="mi">26</span> <span class="mi">8</span> <span class="nv">sound-chunk-size</span><span class="p">))</span>
		<span class="p">(</span><span class="nf">write-u32-idstr</span> <span class="s">&quot;AIFF&quot;</span><span class="p">)</span>

		<span class="p">(</span><span class="nf">write-chunk-head</span> <span class="s">&quot;COMM&quot;</span> <span class="mi">18</span><span class="p">)</span>
		<span class="p">(</span><span class="nf">write-u16</span> <span class="p">(</span><span class="k">if </span><span class="nv">stereo-mode</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">))</span> <span class="c1">; numChannels</span>
		<span class="p">(</span><span class="nf">write-u32</span> <span class="nv">num-sample-frames</span><span class="p">)</span> <span class="c1">; numSampleFrames</span>
		<span class="p">(</span><span class="nf">write-u16</span> <span class="nv">sample-size</span><span class="p">)</span>
		<span class="p">(</span><span class="nf">write-f80</span> <span class="nv">sample-rate</span><span class="p">)</span>

		<span class="p">(</span><span class="nf">write-chunk-head</span> <span class="s">&quot;SSND&quot;</span> <span class="nv">sound-chunk-size</span><span class="p">)</span>
		<span class="p">(</span><span class="nf">write-u32</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">; offset</span>
		<span class="p">(</span><span class="nf">write-u32</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">; blocksize</span>
		<span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">sample-size</span> <span class="mi">16</span><span class="p">)</span>
			<span class="p">(</span><span class="nb">for-each </span><span class="nv">write-block-s16-bigendian</span> <span class="nv">sound-vecs</span><span class="p">)</span> <span class="c1">; write-block だとうまく行かなかった</span>
			<span class="p">(</span><span class="nb">for-each </span><span class="nv">write-block-s8</span> <span class="nv">sound-vecs</span><span class="p">))</span>
		<span class="p">))))</span>

<span class="c1">;;</span>
<span class="c1">;; 簡易（というか正弦波）サウンドジェネレータ</span>
<span class="c1">;;</span>
<span class="c1">; ８分休符のサウンドデータを生成</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">make-pause</span> <span class="nv">sample-count</span><span class="p">)</span>
  <span class="p">((</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">sample-size</span> <span class="mi">16</span><span class="p">)</span> <span class="nv">make-s16vector</span> <span class="nv">make-s8vector</span><span class="p">)</span> <span class="nv">sample-count</span> <span class="mi">0</span><span class="p">))</span>

<span class="c1">; 指定した周波数で８分音符のサウンドデータを生成</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">make-note</span> <span class="nv">freq</span> <span class="nv">sample-count</span><span class="p">)</span>
  <span class="p">(</span><span class="k">do </span><span class="p">((</span><span class="nf">vec</span> <span class="p">(</span><span class="nf">make-pause</span> <span class="nv">sample-count</span><span class="p">))</span> <span class="c1">;(make-s8vector sample-count))</span>
	   <span class="p">(</span><span class="nf">i</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)))</span>
	  <span class="p">((</span><span class="nb">= </span><span class="nv">i</span> <span class="nv">sample-count</span><span class="p">)</span> <span class="nv">vec</span><span class="p">)</span>
	<span class="p">((</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">sample-size</span> <span class="mi">16</span><span class="p">)</span> <span class="nv">s16vector-set!</span> <span class="nv">s8vector-set!</span><span class="p">)</span> <span class="nv">vec</span> <span class="nv">i</span>
	 <span class="p">(</span><span class="nb">* </span><span class="nv">volume-maximum</span> <span class="p">(</span><span class="nb">sin </span><span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">* </span><span class="nv">freq</span> <span class="mf">3.14159265358979323846</span> <span class="mi">2</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">sample-rate</span><span class="p">)))</span> <span class="p">)))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">make-sound-table</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">note-frequencies</span> <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">mag</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">frequency-A</span> <span class="nv">mag</span><span class="p">))</span>
								<span class="p">(</span><span class="k">if </span><span class="nv">use-just-intonation</span>
									<span class="p">(</span><span class="nb">list </span><span class="mi">3</span><span class="nv">/5</span> <span class="mi">27</span><span class="nv">/40</span> <span class="mi">3</span><span class="nv">/4</span> <span class="mi">4</span><span class="nv">/5</span> <span class="mi">9</span><span class="nv">/10</span> <span class="mi">1</span> <span class="mi">9</span><span class="nv">/8</span><span class="p">)</span>
									<span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">expt </span><span class="mf">2.0</span> <span class="nv">x</span><span class="p">))</span> <span class="p">(</span><span class="nb">list </span><span class="mi">-3</span><span class="nv">/4</span> <span class="mi">-7</span><span class="nv">/12</span> <span class="mi">-5</span><span class="nv">/12</span> <span class="mi">-1</span><span class="nv">/3</span> <span class="mi">-1</span><span class="nv">/6</span> <span class="mi">0</span> <span class="mi">1</span><span class="nv">/6</span><span class="p">)))))</span>
		 <span class="p">(</span><span class="nf">notes</span> <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">freq</span><span class="p">)</span> <span class="p">(</span><span class="nf">make-note</span> <span class="nv">freq</span> <span class="nv">note-sample-count</span><span class="p">))</span> <span class="nv">note-frequencies</span><span class="p">))</span>
		 <span class="p">(</span><span class="nf">pause</span> <span class="p">(</span><span class="nf">make-pause</span> <span class="nv">note-sample-count</span><span class="p">)))</span>
	<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">c</span> <span class="p">(</span><span class="nf">first</span> <span class="nv">notes</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">d</span> <span class="p">(</span><span class="nf">second</span> <span class="nv">notes</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">e</span> <span class="p">(</span><span class="nf">third</span> <span class="nv">notes</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">f</span> <span class="p">(</span><span class="nf">fourth</span> <span class="nv">notes</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">g</span> <span class="p">(</span><span class="nf">fifth</span> <span class="nv">notes</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">sixth</span> <span class="nv">notes</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">b</span> <span class="p">(</span><span class="nf">seventh</span> <span class="nv">notes</span><span class="p">))</span>
		  <span class="p">(</span><span class="nf">r</span> <span class="nv">pause</span><span class="p">))</span>
	  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">sound-data-for-note</span> <span class="nv">note-char</span><span class="p">)</span>
		<span class="p">(</span><span class="k">case </span><span class="nv">note-char</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">r</span> <span class="o">#</span><span class="err">¥</span><span class="nv">R</span><span class="p">)</span> <span class="nv">r</span><span class="p">)</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">c</span> <span class="o">#</span><span class="err">¥</span><span class="nv">C</span><span class="p">)</span> <span class="nv">c</span><span class="p">)</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">d</span> <span class="o">#</span><span class="err">¥</span><span class="nv">D</span><span class="p">)</span> <span class="nv">d</span><span class="p">)</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">e</span> <span class="o">#</span><span class="err">¥</span><span class="nv">E</span><span class="p">)</span> <span class="nv">e</span><span class="p">)</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">f</span> <span class="o">#</span><span class="err">¥</span><span class="nv">F</span><span class="p">)</span> <span class="nv">f</span><span class="p">)</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">g</span> <span class="o">#</span><span class="err">¥</span><span class="nv">G</span><span class="p">)</span> <span class="nv">g</span><span class="p">)</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">a</span> <span class="o">#</span><span class="err">¥</span><span class="nv">A</span><span class="p">)</span> <span class="nv">a</span><span class="p">)</span>
		  <span class="p">((</span><span class="o">#</span><span class="err">¥</span><span class="nv">b</span> <span class="o">#</span><span class="err">¥</span><span class="nv">B</span><span class="p">)</span> <span class="nv">b</span><span class="p">)</span>
		  <span class="p">(</span><span class="k">else </span><span class="nv">r</span><span class="p">)))</span>
	  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">dispatch</span> <span class="nv">m</span><span class="p">)</span>
		<span class="p">(</span><span class="k">case </span><span class="nv">m</span>
		  <span class="p">((</span><span class="nf">sound-for-note</span><span class="p">)</span> <span class="nv">sound-data-for-note</span><span class="p">)</span>
		  <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">print</span> <span class="s">&quot;not defined.&quot;</span><span class="p">))))</span>
	  <span class="nv">dispatch</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define </span><span class="nv">sound-table</span> <span class="p">(</span><span class="nf">make-sound-table</span><span class="p">))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">play-mml</span> <span class="nv">mml-string</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">aiff-file-name</span> <span class="p">(</span><span class="nb">string-append </span><span class="nv">mml-string</span> <span class="s">&quot;.aiff&quot;</span><span class="p">))</span>
		<span class="p">(</span><span class="nf">notes</span> <span class="p">(</span><span class="nb">string-&gt;list </span><span class="nv">mml-string</span><span class="p">)))</span>
	<span class="p">(</span><span class="nf">save-as-aiff-file</span> <span class="nv">aiff-file-name</span> <span class="p">(</span><span class="nb">map </span><span class="err">[</span><span class="nv">sound-table</span><span class="ss">&#39;sound-for-note</span><span class="err">]</span> <span class="nv">notes</span><span class="p">))</span>
	<span class="p">(</span><span class="nf">sys-exec</span> <span class="s">&quot;open&quot;</span> <span class="p">(</span><span class="nb">list </span><span class="s">&quot;open&quot;</span> <span class="nv">aiff-file-name</span><span class="p">))</span> <span class="p">))</span>

<span class="c1">; REPL</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">input-loop</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">line</span> <span class="p">(</span><span class="nf">read-line</span><span class="p">)))</span>
	<span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">eof-object? </span><span class="nv">line</span><span class="p">)</span> <span class="ss">&#39;eof</span><span class="p">)</span>
		  <span class="p">((</span><span class="nb">string=? </span><span class="s">&quot;&quot;</span> <span class="nv">line</span><span class="p">)</span> <span class="ss">&#39;quit</span><span class="p">)</span>
		  <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">play-mml</span> <span class="nv">line</span><span class="p">)</span>
				<span class="p">(</span><span class="nf">input-loop</span><span class="p">)</span> <span class="p">))))</span>

<span class="p">(</span><span class="nf">input-loop</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1950/addtag/" class="addtag" id="addtag_1950">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/gauche/">gauche</a>
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/joke/">joke</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1950/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1950/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1950"
  >-</span><span
  class="button yellow"
  id="rating_z_1950"
  >0</span><span 
  class="button green"
  id="rating_p_1950"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20080329155921/http://ja.doukaku.org/comment/1950/">
    2
    replies
  </a>

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1950/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1951">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1951/">#1951</a>(<script language="JavaScript">print_time(new Date("2007/08/06 18:21 GMT"));</script><noscript>2007/08/06 18:21 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>言語間違えてる
　誤：awk
　正：scheme
どうやって直したらいいの？</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1951/addtag/" class="addtag" id="addtag_1951">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1951"
  >-</span><span
  class="button yellow"
  id="rating_z_1951"
  >0</span><span 
  class="button green"
  id="rating_p_1951"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1950/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1951/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1951/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1953">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/41/" target="_top">shiro</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1953/">#1953</a>(<script language="JavaScript">print_time(new Date("2007/08/06 19:04 GMT"));</script><noscript>2007/08/06 19:04 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>こういう、高レベル言語でバイナリをいじくるコード好きです。

write-f80は組込みで持ってても良いように思い始めました。

write-u32-idstrはdisplayじゃだめなのかな。

write-block-s16-bigendianとwrite-block-s8は
(use gauche.sequence)してuvectorに直接for-eachを適用すると
シンプルになるかもしれません。 

make-noteでs16vector-set!とs8vector-set!を切り替えてるところですが、
(set! (ref vec i) ...) のようにすればジェネリックに書けます。速度は遅くなりますが。
さらに、(map-to &lt;s8vector&gt; (lambda (i) (* volume-maximum ...)) (iota sample-count))
のようにするとdoループも不要です。

make-sound-tableの(let ((c (first notes)) (d (second notes)) ...) のところは
util.matchを使って (let-match1 (c d e f g a b) notes ...) のようにも書けます。

</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1953/addtag/" class="addtag" id="addtag_1953">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1953"
  >-</span><span
  class="button yellow"
  id="rating_z_1953"
  >0</span><span 
  class="button green"
  id="rating_p_1953"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1950/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1953/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20080329155921/http://ja.doukaku.org/comment/1953/">
    1
    reply
  </a>

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1953/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1954">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1954/">#1954</a>(<script language="JavaScript">print_time(new Date("2007/08/06 19:56 GMT"));</script><noscript>2007/08/06 19:56 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #cfffcf;">3/3=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>周波数は計算で出したかったのですけど複雑なので諦めました☆
その代わりきらきら星をつけました☆</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include&lt;windows.h&gt;</span>
<span class="kt">void</span> <span class="n">play</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">){</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">f</span><span class="p">[]</span><span class="o">=</span><span class="p">{</span><span class="mi">494</span><span class="p">,</span><span class="mi">261</span><span class="p">,</span><span class="mi">294</span><span class="p">,</span><span class="mi">329</span><span class="p">,</span><span class="mi">349</span><span class="p">,</span><span class="mi">392</span><span class="p">,</span><span class="mi">440</span><span class="p">};</span><span class="o">*</span><span class="n">p</span><span class="p">;</span><span class="n">p</span><span class="o">++</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="o">==</span><span class="sc">&#39;r&#39;</span><span class="p">)</span>
      <span class="n">Sleep</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
    <span class="k">else</span>
      <span class="n">Beep</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="o">*</span><span class="n">p</span><span class="o">%</span><span class="mi">7</span><span class="p">],</span><span class="mi">400</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
  <span class="n">play</span><span class="p">(</span><span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">);</span>
  <span class="n">play</span><span class="p">(</span><span class="s">&quot;ccggaagrffeeddcrggffeedrggffeedrccggaagrffeeddcr&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1954/addtag/" class="addtag" id="addtag_1954">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1954/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1954/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #cfffcf;"
  >3/3=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1954"
  >-</span><span
  class="button yellow"
  id="rating_z_1954"
  >0</span><span 
  class="button green"
  id="rating_p_1954"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1954/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1970">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/348/" target="_top">naoya_t</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1970/">#1970</a>(<script language="JavaScript">print_time(new Date("2007/08/07 05:57 GMT"));</script><noscript>2007/08/07 05:57 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  shiroさん直々にご指導ありがとうございます。

write-f80 は今回は１回（ヘッダ部分にサンプリング周波数を書き込む為だけに）しか呼び出していませんが、組み込みで用意されていたら嬉しい場面ももしかしたらあるかもしれません。

ライブラリモジュールをもっと活用できるよう、今後使い込んで行きたいと思います。
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1970/addtag/" class="addtag" id="addtag_1970">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1970"
  >-</span><span
  class="button yellow"
  id="rating_z_1970"
  >0</span><span 
  class="button green"
  id="rating_p_1970"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1953/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1970/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1970/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment1983">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/343/" target="_top">shimakuma</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1983/">#1983</a>(<script language="JavaScript">print_time(new Date("2007/08/07 10:24 GMT"));</script><noscript>2007/08/07 10:24 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  これはなかなか素晴らしいツール。
	</div>
	
	<p class="link">
	  参考: <a href="/web/20080329155921/http://hp.vector.co.jp/authors/VA016157/">SFC mini</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="k">function</span> <span class="nx">playbeep</span><span class="p">(</span><span class="nx">scr</span><span class="o">,</span> <span class="nx">quaver</span><span class="o">,</span> <span class="nx">beep</span><span class="p">){</span>
	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">beep</span><span class="p">)</span> <span class="p">(</span><span class="nx">beep</span> <span class="o">=</span> <span class="nx">WSH</span><span class="p">.</span><span class="nx">CreateObject</span><span class="p">(</span><span class="s2">&quot;SfcMini.DynaCall&quot;</span><span class="p">)).</span><span class="nx">Declare</span><span class="p">(</span><span class="s2">&quot;kernel32&quot;</span><span class="o">,</span> <span class="s2">&quot;Beep&quot;</span><span class="p">);</span>
	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">quaver</span><span class="p">)</span> <span class="nx">quaver</span> <span class="o">=</span> <span class="mi">250</span><span class="o">;</span>
	<span class="k">var</span> <span class="nx">S</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">c</span><span class="o">:</span><span class="mi">262</span><span class="o">,</span> <span class="nx">d</span><span class="o">:</span><span class="mi">294</span><span class="o">,</span> <span class="nx">e</span><span class="o">:</span><span class="mi">330</span><span class="o">,</span> <span class="nx">f</span><span class="o">:</span><span class="mi">349</span><span class="o">,</span> <span class="nx">g</span><span class="o">:</span><span class="mi">392</span><span class="o">,</span> <span class="nx">a</span><span class="o">:</span><span class="mi">440</span><span class="o">,</span> <span class="nx">b</span><span class="o">:</span><span class="mi">494</span><span class="o">,</span> <span class="nx">r</span><span class="o">:</span><span class="mi">0</span> <span class="p">};</span>
	<span class="k">with</span><span class="p">(</span><span class="nb">Math</span><span class="p">)</span> <span class="nx">scr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([a-grA-G])(\d?)(\+*)(-*)(\.?)/g</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">$</span><span class="o">,</span> <span class="nx">s</span><span class="o">,</span> <span class="nx">t</span><span class="o">,</span> <span class="nx">p</span><span class="o">,</span> <span class="nx">m</span><span class="o">,</span> <span class="nx">d</span><span class="p">){</span>
		<span class="k">var</span> <span class="nx">hz</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">96</span> <span class="o">?</span> <span class="nx">S</span><span class="p">[</span><span class="nx">s</span><span class="p">]</span> <span class="o">:</span> <span class="nx">round</span><span class="p">(</span><span class="nx">S</span><span class="p">[</span><span class="nx">s</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()]</span> <span class="o">*</span> <span class="mf">1.06</span><span class="p">);</span>
		<span class="k">var</span> <span class="nx">dr</span> <span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nx">quaver</span> <span class="o">*</span> <span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="o">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">*</span> <span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="nx">m</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">d</span> <span class="o">?</span> <span class="mf">1.5</span> <span class="o">:</span> <span class="mi">1</span><span class="p">));</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">hz</span><span class="p">)</span> <span class="nx">beep</span><span class="p">(</span><span class="nx">t</span> <span class="o">?</span> <span class="nx">hz</span> <span class="o">*</span> <span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="o">,</span> <span class="nx">t</span> <span class="o">-</span> <span class="mi">3</span><span class="p">)</span> <span class="o">:</span> <span class="nx">hz</span><span class="o">,</span> <span class="nx">dr</span><span class="p">);</span>
		<span class="k">else</span> <span class="nx">WSH</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="nx">dr</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">})(</span><span class="s2">&quot;e+g+c4++g+a+g++r.c-e.g-c4+b.a-g++.r++&quot;</span><span class="p">);</span>
<span class="c">// 大文字は半音上，0~9で高さ指定(省略で3)，+-.で長さ調整(伸び|縮み|付点)。</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/1983/addtag/" class="addtag" id="addtag_1983">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/JScript/">JScript</a>
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/SFCmini/">SFCmini</a>
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/WSH/">WSH</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1983/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/1983/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_1983"
  >-</span><span
  class="button yellow"
  id="rating_z_1983"
  >0</span><span 
  class="button green"
  id="rating_p_1983"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/1983/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2002">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/2002/">#2002</a>(<script language="JavaScript">print_time(new Date("2007/08/08 02:26 GMT"));</script><noscript>2007/08/08 02:26 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>こんにちわ。
上のかたの、音消しは
mes.setMessage(ShortMessage.NOTE_OFF, 0, co);
ではなく
mes.setMessage(ShortMessage.NOTE_OFF, 0, co, 0);
または
mes.setMessage(ShortMessage.NOTE_OFF | 0, co, 0);
ではないでしょうか？
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/2002/addtag/" class="addtag" id="addtag_2002">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2002"
  >-</span><span
  class="button yellow"
  id="rating_z_2002"
  >0</span><span 
  class="button green"
  id="rating_p_2002"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1473/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/2002/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/2002/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2374">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/411/" target="_top">管理者</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/2374/">#2374</a>(<script language="JavaScript">print_time(new Date("2007/08/22 06:19 GMT"));</script><noscript>2007/08/22 06:19 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>解説ブログ記事があったのでリンクしときます。</pre>
	</div>
	
	<p class="link">
	  参考: <a href="/web/20080329155921/http://www.cuspy.org/blog/2007/08/11/">cuspy memo 2007 August 11</a>
	</p>  
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/2374/addtag/" class="addtag" id="addtag_2374">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2374"
  >-</span><span
  class="button yellow"
  id="rating_z_2374"
  >0</span><span 
  class="button green"
  id="rating_p_2374"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/1480/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20080329155921/http://ja.doukaku.org/comment/2374/root/"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/2374/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment2510">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/406/" target="_top">nakawaka</a><a href="/web/20080329155921/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/2510/">#2510</a>(<script language="JavaScript">print_time(new Date("2007/08/25 18:11 GMT"));</script><noscript>2007/08/25 18:11 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/groovy/">
	  Groovy
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>quicktimeのapi使ってますが、ただしく使えているか自信ないです...
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><div class="highlight"><pre>import quicktime.QTSession
import quicktime.std.music.ToneDescription
import quicktime.std.music.NoteChannel
import quicktime.std.music.NoteRequest

// kaeru_song_player
// cがド、dがレ、eがミ、fがファ、gがソ、aがラ、bがシ、rが休符
def tbl = [&#39;c&#39;:60, &#39;d&#39;:62, &#39;e&#39;:64, &#39;f&#39;:65, &#39;g&#39;:67, &#39;a&#39;:69, &#39;b&#39;:71, r:-1]
def song = &quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;

QTSession.open()
NoteChannel noteChannel = new NoteChannel(new NoteRequest(new ToneDescription(1)))

for(c in song){
    noteChannel.playNoteRaw(tbl[c] as int, 60)
    sleep(300)
}

QTSession.close()
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/2510/addtag/" class="addtag" id="addtag_2510">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/groovy/">
		Groovy
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/2510/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/2510/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_2510"
  >-</span><span
  class="button yellow"
  id="rating_z_2510"
  >0</span><span 
  class="button green"
  id="rating_p_2510"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/2510/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment3226">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/446/" target="_top">tilde</a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/3226/">#3226</a>(<script language="JavaScript">print_time(new Date("2007/10/02 01:36 GMT"));</script><noscript>2007/10/02 01:36 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/objectivec/">
	  Objective-C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>Mac OSX 10.4.10(Intel)で動作確認しています。Objective-CというよりAudio Unitの使い方ですね。
永野さんのページを参考にさせていただきました。</pre>
	</div>
	
	<p class="link">
	  参考: <a href="/web/20080329155921/http://nagano.monalisa-au.org/?cat=3&paged=2">My Codex Leicester (Monalisa-au.org)</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre></td><td class="code"><div class="highlight"><pre><span class="c">//コンパイルオプション：-std=gnu99 -fobjc-exceptions</span>

<span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>
<span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>
<span class="cp">#import &lt;Audiounit/AudioUnit.h&gt;</span>

<span class="n">OSStatus</span> <span class="nf">callbackProc</span><span class="p">(</span> <span class="kt">void</span><span class="o">*</span> <span class="n">inRefCon</span><span class="p">,</span> <span class="n">AudioUnitRenderActionFlags</span><span class="o">*</span> <span class="n">ioActionFlags</span><span class="p">,</span>
		<span class="k">const</span> <span class="n">AudioTimeStamp</span><span class="o">*</span> <span class="n">inTimeStamp</span><span class="p">,</span> <span class="n">UInt32</span> <span class="n">inBusNumber</span><span class="p">,</span>
		<span class="n">UInt32</span> <span class="n">inNumberFrames</span><span class="p">,</span> <span class="n">AudioBufferList</span><span class="o">*</span> <span class="n">ioData</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">notes</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span><span class="p">;</span>	<span class="c">//かえるの歌</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="k">sizeof</span> <span class="n">notes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>	<span class="c">//音符の数</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">float</span> <span class="n">scale</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">440</span><span class="p">,</span> <span class="mi">495</span><span class="p">,</span> <span class="mi">264</span><span class="p">,</span> <span class="mi">297</span><span class="p">,</span> <span class="mi">330</span><span class="p">,</span> <span class="mi">352</span><span class="p">,</span> <span class="mi">396</span> <span class="p">};</span>	<span class="c">//純正律音階</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">float</span> <span class="n">samplingRate</span> <span class="o">=</span> <span class="mi">44100</span><span class="p">;</span>
	
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tempo</span> <span class="o">=</span> <span class="mi">160</span><span class="p">;</span>	<span class="c">//テンポ:八分音符／分</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">consumedFrames</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>	<span class="c">//現在の音符の発音済みフレーム数。１分間だとsamplingRate*60</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>	<span class="c">//音符のインデックス</span>
	<span class="k">static</span> <span class="kt">float</span> <span class="n">phase</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	
	<span class="kt">char</span> <span class="n">note</span> <span class="o">=</span> <span class="n">notes</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
    <span class="kt">float</span> <span class="n">frequency</span> <span class="o">=</span> <span class="p">(</span> <span class="n">note</span> <span class="o">&gt;=</span> <span class="sc">&#39;a&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">note</span> <span class="o">&lt;=</span> <span class="sc">&#39;g&#39;</span> <span class="p">)</span> <span class="o">?</span> <span class="n">scale</span><span class="p">[</span><span class="n">note</span> <span class="o">-</span> <span class="sc">&#39;a&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">frequency</span> <span class="o">*=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">M_PI</span> <span class="o">/</span> <span class="n">samplingRate</span><span class="p">;</span>

    <span class="kt">float</span><span class="o">*</span> <span class="n">outL</span> <span class="o">=</span> <span class="n">ioData</span><span class="o">-&gt;</span><span class="n">mBuffers</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">mData</span><span class="p">;</span>
    <span class="kt">float</span><span class="o">*</span> <span class="n">outR</span> <span class="o">=</span> <span class="n">ioData</span><span class="o">-&gt;</span><span class="n">mBuffers</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">mData</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">inNumberFrames</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kt">float</span> <span class="n">wave</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span> <span class="n">phase</span> <span class="p">);</span>
        <span class="o">*</span><span class="n">outL</span><span class="o">++</span> <span class="o">=</span> <span class="n">wave</span><span class="p">;</span>
        <span class="o">*</span><span class="n">outR</span><span class="o">++</span> <span class="o">=</span> <span class="n">wave</span><span class="p">;</span>
        <span class="n">phase</span> <span class="o">+=</span> <span class="n">frequency</span><span class="p">;</span>
    <span class="p">}</span>
	
	<span class="n">consumedFrames</span> <span class="o">+=</span> <span class="n">inNumberFrames</span><span class="p">;</span>
	<span class="c">//規定の時間が過ぎたら次の音符へ</span>
	<span class="k">if</span> <span class="p">(</span> <span class="n">consumedFrames</span> <span class="o">&gt;=</span> <span class="n">samplingRate</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">/</span> <span class="n">tempo</span> <span class="p">)</span> <span class="p">{</span>
		<span class="n">consumedFrames</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="c">//曲を最後まで演奏したら終了</span>
		<span class="k">if</span> <span class="p">(</span> <span class="o">++</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">length</span> <span class="p">)</span>
			<span class="p">[</span><span class="n">NSApp</span> <span class="nl">terminate:</span><span class="nb">nil</span><span class="p">];</span>
	<span class="p">}</span>
	
    <span class="k">return</span> <span class="n">noErr</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">BOOL</span> <span class="nf">initAudioUnit</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">@try</span> <span class="p">{</span>
		<span class="n">ComponentDescription</span> <span class="n">description</span> <span class="o">=</span> <span class="p">{</span>
			<span class="n">kAudioUnitType_Output</span><span class="p">,</span> <span class="n">kAudioUnitSubType_DefaultOutput</span><span class="p">,</span> 
			<span class="n">kAudioUnitManufacturer_Apple</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
		<span class="p">};</span>
		
		<span class="n">Component</span> <span class="n">component</span> <span class="o">=</span> <span class="n">FindNextComponent</span><span class="p">(</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">description</span> <span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span> <span class="n">component</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>
			<span class="k">@throw</span> <span class="s">@&quot;Faild to find component.&quot;</span><span class="p">;</span>
		
		<span class="n">AudioUnit</span> <span class="n">audioUnit</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span> <span class="n">OpenAComponent</span><span class="p">(</span> <span class="n">component</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">audioUnit</span> <span class="p">)</span> <span class="o">!=</span> <span class="n">noErr</span> <span class="p">)</span>
			<span class="k">@throw</span> <span class="s">@&quot;Faild to open component.&quot;</span><span class="p">;</span>
		
		<span class="n">AURenderCallbackStruct</span> <span class="n">callbackStruct</span> <span class="o">=</span> <span class="p">{</span> <span class="n">callbackProc</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">};</span>
		<span class="k">if</span> <span class="p">(</span> <span class="n">AudioUnitSetProperty</span><span class="p">(</span> <span class="n">audioUnit</span><span class="p">,</span> <span class="n">kAudioUnitProperty_SetRenderCallback</span><span class="p">,</span>
				<span class="n">kAudioUnitScope_Input</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">callbackStruct</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">callbackStruct</span> <span class="p">)</span> <span class="o">!=</span> <span class="n">noErr</span> <span class="p">)</span>
			<span class="k">@throw</span> <span class="s">@&quot;Faild to set property values for audio unit.&quot;</span><span class="p">;</span>
		
		<span class="k">if</span> <span class="p">(</span> <span class="n">AudioUnitInitialize</span><span class="p">(</span> <span class="n">audioUnit</span> <span class="p">)</span> <span class="o">!=</span> <span class="n">noErr</span> <span class="p">)</span>
			<span class="k">@throw</span> <span class="s">@&quot;Faild to initialize audio unit.&quot;</span><span class="p">;</span>
		
		<span class="k">if</span> <span class="p">(</span> <span class="n">AudioOutputUnitStart</span><span class="p">(</span> <span class="n">audioUnit</span> <span class="p">)</span> <span class="o">!=</span> <span class="n">noErr</span> <span class="p">)</span>
			<span class="k">@throw</span> <span class="s">@&quot;Faild to start audio unit.&quot;</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">@catch</span> <span class="p">(</span> <span class="kt">id</span> <span class="n">error</span> <span class="p">)</span> <span class="p">{</span>
		<span class="n">NSLog</span><span class="p">(</span> <span class="n">error</span> <span class="p">);</span>
		<span class="k">return</span> <span class="n">NO</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">NSAutoreleasePool</span> <span class="o">*</span> <span class="n">pool</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSAutoreleasePool</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
	
	<span class="p">[</span><span class="n">NSApplication</span> <span class="n">sharedApplication</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span> <span class="n">initAudioUnit</span><span class="p">()</span> <span class="p">)</span>
		<span class="p">[</span><span class="n">NSApp</span> <span class="n">run</span><span class="p">];</span>
	
    <span class="p">[</span><span class="n">pool</span> <span class="n">release</span><span class="p">];</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/3226/addtag/" class="addtag" id="addtag_3226">タグ</a>:
	
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/Mac/">Mac</a>
    
    <a href="/web/20080329155921/http://ja.doukaku.org/tag/OSX/">OSX</a>
    
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/objectivec/">
		Objective-C
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/3226/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/3226/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3226"
  >-</span><span
  class="button yellow"
  id="rating_z_3226"
  >0</span><span 
  class="button green"
  id="rating_p_3226"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/3226/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  <br/>

  
  




<div class="comment" id="comment3729">
  <p class="banner"><a href="/web/20080329155921/http://ja.doukaku.org/user/519/" target="_top">h_sakurai</a>

	
	&nbsp;
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/3729/">#3729</a>(<script language="JavaScript">print_time(new Date("2007/11/06 06:44 GMT"));</script><noscript>2007/11/06 06:44 GMT</noscript>)
	
	
	
	[<a href="/web/20080329155921/http://ja.doukaku.org/lang/d/">
	  D
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>C#の移植。Windowsのみ</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre><span class="k">extern</span>(<span class="n">Windows</span>) <span class="kt">uint</span> <span class="n">Beep</span>(<span class="kt">uint</span>, <span class="kt">uint</span>);
<span class="k">extern</span>(<span class="n">Windows</span>) <span class="kt">void</span> <span class="n">Sleep</span>(<span class="kt">uint</span>);
<span class="kt">void</span> <span class="n">main</span>() {
    <span class="n">play</span>(<span class="s">&quot;cdefedcrefgagfercrcrcrcrcdefedcr&quot;</span>);
}
<span class="kt">void</span> <span class="n">play</span>(<span class="n">string</span> <span class="n">s</span>) {
    <span class="kt">uint</span>[] <span class="n">dt</span> = [<span class="mi">440</span>, <span class="mi">494</span>, <span class="mi">262</span>, <span class="mi">294</span>, <span class="mi">330</span>, <span class="mi">349</span>, <span class="mi">392</span>];
    <span class="k">foreach</span> (<span class="kt">char</span> <span class="n">c</span> ; <span class="n">s</span>) {
        <span class="k">if</span> (<span class="n">c</span> == <span class="sc">&#39;r&#39;</span>) <span class="n">Sleep</span>(<span class="mi">500</span>);
        <span class="k">else</span> <span class="n">Beep</span>(<span class="n">dt</span>[<span class="n">c</span> - <span class="sc">&#39;a&#39;</span>], <span class="mi">500</span>);
    }
}
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20080329155921/http://ja.doukaku.org/comment/3729/addtag/" class="addtag" id="addtag_3729">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20080329155921/http://ja.doukaku.org/lang/d/">
		D
      </a>]
	  
      [<a href="/web/20080329155921/http://ja.doukaku.org/comment/3729/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20080329155921/http://ja.doukaku.org/comment/3729/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_3729"
  >-</span><span
  class="button yellow"
  id="rating_z_3729"
  >0</span><span 
  class="button green"
  id="rating_p_3729"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20080329155921/http://ja.doukaku.org/31/reply_to/3729/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>







</div>

<div id="side_menu" class="compact">

<iframe src="/web/20080329155921if_/http://ja.doukaku.org/login_info/" frameborder=0 width=100% id="login_info">
iframe required
</iframe>

<h4 class="semi_compact">一覧</h4>

<ul>
<!--<li><a href="/web/20080329155921/http://ja.doukaku.org/user/">ユーザ</a>-->
<li><a href="/web/20080329155921/http://ja.doukaku.org/lang/">言語</a>
<li><a href="/web/20080329155921/http://ja.doukaku.org/challenge/">お題</a>
<li><a href="/web/20080329155921/http://ja.doukaku.org/topic/">トピック</a>
<li><a href="/web/20080329155921/http://ja.doukaku.org/comment/">投稿</a>
<li><a href="/web/20080329155921/http://ja.doukaku.org/good_comments/">評価の高い投稿</a>
<li><a href="/web/20080329155921/http://ja.doukaku.org/tag/">タグ</a>
</ul>

<h4 class="compact">フィード</h4>
<ul>
<li><a href="/web/20080329155921/http://ja.doukaku.org/feeds/challenges/">最新のお題</a><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080329155921/http://ja.doukaku.org/feeds/topics/">最新のトピック</a><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20080329155921/http://ja.doukaku.org/feeds/comments/">新着投稿</a><img src="/web/20080329155921im_/http://ja.doukaku.org/static/image/feed_icon.png">
</ul>







<h4 class="compact">その他</h4>
<ul>
<li><a href="/web/20080329155921/http://ja.doukaku.org/qa/">Q&A</a>
<li><a href="/web/20080329155921/http://ja.doukaku.org/feedback/">フィードバック</a>
<!--<li><a href="/web/20080329155921/http://ja.doukaku.org/terms">用語集</a>-->
</ul>


<h4 class="compact">リンク</h4>
<ul>
<li><a href="/web/20080329155921/http://www.lingr.com/room/doukaku_ja">チャットルーム(Lingr)</a>
<li><a href="/web/20080329155921/http://labs.cybozu.co.jp/">サイボウズ・ラボ</a>
<li><a href="/web/20080329155921/http://www.djangoproject.com/">Django</a>
</ul>

<h4 id="pathtraq" class="compact"><a href="/web/20080329155921/http://pathtraq.com/analytics?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&m=popular">Pathtraq</a></h4>
<div class="indent">
<span id="pathtraq_sentinel">loading...</span>
</div>


</div>
</div>


<div id="page_foot" class="bordered">

<a rel="license" href="/web/20080329155921/http://creativecommons.org/licenses/by/2.1/jp/">
<img alt="Creative Commons License" style="border-width:0" src="/web/20080329155921im_/http://i.creativecommons.org/l/by/2.1/jp/88x31.png" /></a>
このサイトの内容は、
<a rel="license" href="/web/20080329155921/http://creativecommons.org/licenses/by/2.1/jp/">クリエイティブ・コモンズ・ライセンス</a>の下でライセンスされています。
<a href="/web/20080329155921/http://ja.doukaku.org/qa/#licence">[詳細]</a>

</div>

</body>




<script type="text/javascript">
$(document).ready(function(){$("#doukaku_org").after("<script src='/web/20080329155921/http://api.pathtraq.com/pages?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&api=json&callback=addPathtraq'><" + "/script>")});
</script>

<script src="/web/20080329155921js_/http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2136157-1";
urchinTracker();
</script>




</html>





<!--
     FILE ARCHIVED ON 15:59:21 Mar 29, 2008 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:53:35 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
