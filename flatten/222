
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"> 
  <head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>
テキスト行の正規化
どう書く？org </title>

    <link rel="stylesheet" type="text/css"
	href="/web/20090103091741cs_/http://ja.doukaku.org/static/style/reset-fonts-grids.css" />
    <link rel="stylesheet" type="text/css"
	href="/web/20090103091741cs_/http://ja.doukaku.org/static/style/style.css?20071211?20071207" />
	
    <link rel="stylesheet" type="text/css"
	href="/web/20090103091741cs_/http://ja.doukaku.org/static/style/pygments.css" />


	
<meta name="robots" content="noindex,nofollow">

    <!--<script src="/web/20090103091741/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->


<!--<script src="/web/20090103091741/http://ja.doukaku.org/static/js/ieerbug/ieerbug.js" type="text/javascript"></script>-->
<script src="/web/20090103091741js_/http://ja.doukaku.org/static/js/jquery-1.1.3.1.js" type="text/javascript"></script>
<script src="/web/20090103091741js_/http://ja.doukaku.org/static/js/rating.js" type="text/javascript"></script>
<script src="/web/20090103091741js_/http://ja.doukaku.org/static/js/addtag.js?20071129" type="text/javascript"></script>

<script type="text/javascript">
is_key_navigation_enable = true;
</script>
<script src="/web/20090103091741js_/http://ja.doukaku.org/static/js/utils.js?~~~" type="text/javascript"></script>

</head>


<body id="doukaku_org">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app17.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/ja.doukaku.org\/222\/flatten\/";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "3";
var displayMonth = "Jan";
var displayYear = "2009";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://ja.doukaku.org/222/flatten/" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20090103091741" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Dec
                       
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 9:17:41 Jan 3, 2009">JAN</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Feb
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_prv_off.png" alt="Previous capture" width="14" height="16" border="0" />
                       
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 9:17:41 Jan 3, 2009">3</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2008
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 9:17:41 Jan 3, 2009">2009</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2010
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20090103091741*/http://ja.doukaku.org/222/flatten/" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>1 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">3 Jan 09 - 3 Jan 09</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:-1:000000000000_2009:0:100000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->


<div id="page_head" class="compact">
  <h1 class="compact">
    <a href="/web/20090103091741/http://ja.doukaku.org/">どう書く？org</a><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/beta.png" alt="beta">
  </h1>
</div>

<div id="page_body" class="compact">
<div id="content" class="compact">




<h2 class="compact">
<img src='/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png' alt=お題(出題済み)>
<a href="/web/20090103091741/http://ja.doukaku.org/222/">テキスト行の正規化</a>
</h2>

    





<div class="comment" id="comment8204">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8204/">#8204</a>(<script language="JavaScript">print_time(new Date("2008/12/18 19:49 GMT"));</script><noscript>2008/12/18 19:49 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffcf;">1/3=0.33</span></span>
  </p>
  <div class="comment_content" >
	<div class="comment_body">
	  <pre class='compact'>改行文字を複数個含むテキストデータを格納する文字列を
最大長の行を除く各行末に指定したパディング文字を適切な数だけ追加して、
すべての行が最大長の行と同じ長さに揃う文字列に変換する
手続あるいは関数を書いてください。

元の文字列の最後は改行です。
行の長さはその行に含まれる（行末の改行を除く）文字の数です。

変換前の文字列例
"○○○○\n○○○○○○○\n\n○○○○○\n"

上の文字列例をパディング文字'☆'を指定して変換した文字列
"○○○○☆☆☆\n○○○○○○○\n☆☆☆☆☆☆☆\n○○○○○☆☆\n"

必須ではありませんが、
テキストデータをトラバースする回数を減らす工夫をすると面白いかもしれません。
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8204/addtag/" class="addtag" id="addtag_8204">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #efffcf;"
  >1/3=0.33</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8204"
  >-</span><span
  class="button yellow"
  id="rating_z_8204"
  >0</span><span 
  class="button green"
  id="rating_p_8204"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8204/">
  返信
  </a>]
  </div>
</div>
</div>




  



<div class="indent">
<a href="/web/20090103091741/http://ja.doukaku.org/222/post_comment/">
投稿する
</a>
</div>


<h2>投稿されたコメント - フラット表示</h2>
<a href="/web/20090103091741/http://ja.doukaku.org/222/nested/">ネスト表示</a>
<a href="/web/20090103091741/http://ja.doukaku.org/222/">非表示</a> 


  
  <br/>

  
  




<div class="comment" id="comment8210">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/980/" target="_top">manzo</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8210/">#8210</a>(<script language="JavaScript">print_time(new Date("2008/12/19 22:30 GMT"));</script><noscript>2008/12/19 22:30 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/ruby/">
	  Ruby
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>例題の文字ではうまくいきました。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="c1">#変換前の文字列例</span>
<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;○○○○</span><span class="se">\n</span><span class="s2">○○○○○○○</span><span class="se">\n\n</span><span class="s2">○○○○○</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="c1">#上の文字列例をパディング文字&#39;☆&#39;を指定して変換した文字列</span>
<span class="n">ans</span> <span class="o">=</span> <span class="s2">&quot;○○○○☆☆☆</span><span class="se">\n</span><span class="s2">○○○○○○○</span><span class="se">\n</span><span class="s2">☆☆☆☆☆☆☆</span><span class="se">\n</span><span class="s2">○○○○○☆☆</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="c1">#最大長の行の長さを測る。</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">max_by</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">}</span><span class="o">.</span><span class="n">size</span>

<span class="c1">#各行にパディング文字を入れて表示。</span>
<span class="nb">p</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span><span class="n">i</span><span class="o">.</span><span class="n">chomp</span><span class="p">}</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">j</span><span class="o">|[</span><span class="n">j</span><span class="p">,(</span><span class="s2">&quot;☆&quot;</span> <span class="o">*</span> <span class="p">((</span><span class="n">size</span> <span class="o">-</span> <span class="n">j</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">].</span><span class="n">join</span><span class="p">}</span><span class="o">.</span><span class="n">join</span>

<span class="c1">#結果のチェック</span>
<span class="nb">p</span> <span class="n">ans</span> <span class="o">==</span> <span class="n">b</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8210/addtag/" class="addtag" id="addtag_8210">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/Ruby1.8.7/">Ruby1.8.7</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/ruby/">
		Ruby
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8210/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8210/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8210"
  >-</span><span
  class="button yellow"
  id="rating_z_8210"
  >0</span><span 
  class="button green"
  id="rating_p_8210"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8210/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8211">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/405/" target="_top">mc</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8211/">#8211</a>(<script language="JavaScript">print_time(new Date("2008/12/19 23:20 GMT"));</script><noscript>2008/12/19 23:20 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/commonlisp/">
	  Common Lisp
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  なんのひねりも無いのですが、とりあえず…<br/>(pad&nbsp;"○○○○<br/>○○○○○○○<br/><br/>○○○○○<br/>"&nbsp;#\☆)<br/>;=&gt;&nbsp;"○○○○☆☆☆<br/>○○○○○○○<br/>☆☆☆☆☆☆☆<br/>○○○○○☆☆<br/>"
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre>(defun pad (string &amp;optional (padchar #\Space))
  (with-output-to-string (out)
    (with-input-from-string (in string)
      (loop :for line := (read-line in nil) :while line
            :maximize (length line) :into maxlen
            :collect line :into lines
            :finally (dolist (line lines)
                       (let ((base (make-string maxlen 
                                                :initial-element padchar)))
                         (format out &quot;~A~%&quot; (replace base line))))))))
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8211/addtag/" class="addtag" id="addtag_8211">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/commonlisp/">
		Common Lisp
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8211/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8211/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8211"
  >-</span><span
  class="button yellow"
  id="rating_z_8211"
  >0</span><span 
  class="button green"
  id="rating_p_8211"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8211/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8212">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/166/" target="_top">ところてん</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8212/">#8212</a>(<script language="JavaScript">print_time(new Date("2008/12/19 23:42 GMT"));</script><noscript>2008/12/19 23:42 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/python/">
	  Python
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>max関数って、keyを指定できたんだ。
これは便利。

出力結果
12345****
123******
123456789
12345****
12*******
</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></td><td class="code"><div class="highlight"><pre><span class="c">#coding: utf-8</span>

<span class="k">def</span> <span class="nf">padding</span><span class="p">(</span><span class="n">inputStr</span><span class="p">,</span> <span class="n">paddingChar</span> <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">):</span>
    <span class="n">maxNum</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">inputStr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="p">(</span><span class="k">lambda</span><span class="p">(</span><span class="n">x</span><span class="p">):</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))))</span>
    <span class="n">outputStr</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">linedata</span> <span class="ow">in</span> <span class="n">inputStr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">):</span>
        <span class="n">outputStr</span> <span class="o">+=</span> <span class="n">linedata</span> <span class="o">+</span> <span class="n">paddingChar</span> <span class="o">*</span> <span class="p">(</span><span class="n">maxNum</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">linedata</span><span class="p">))</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">return</span> <span class="n">outputStr</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;12345</span>
<span class="s">123</span>
<span class="s">123456789</span>
<span class="s">12345</span>
<span class="s">12&#39;&#39;&#39;</span>

    <span class="k">print</span> <span class="n">padding</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8212/addtag/" class="addtag" id="addtag_8212">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/python/">
		Python
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8212/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8212/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8212"
  >-</span><span
  class="button yellow"
  id="rating_z_8212"
  >0</span><span 
  class="button green"
  id="rating_p_8212"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8212/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8212/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8213">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8213/">#8213</a>(<script language="JavaScript">print_time(new Date("2008/12/20 00:29 GMT"));</script><noscript>2008/12/20 00:29 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class="doctest-block">
&gt;&gt;&gt; &gt;&gt;&gt; print padding(u&quot;○○○○\n○○○○○○○\n\n○○○○○\n&quot;, u'☆')
○○○○☆☆☆
○○○○○○○
☆☆☆☆☆☆☆
○○○○○☆☆
☆☆☆☆☆☆☆
</pre>
<p>出題通りの答えになっていないようですよ。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8213/addtag/" class="addtag" id="addtag_8213">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8213"
  >-</span><span
  class="button yellow"
  id="rating_z_8213"
  >0</span><span 
  class="button green"
  id="rating_p_8213"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8212/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8213/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8213/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8213/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8214">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/166/" target="_top">ところてん</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8214/">#8214</a>(<script language="JavaScript">print_time(new Date("2008/12/20 08:28 GMT"));</script><noscript>2008/12/20 08:28 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/diff/">
	  diff
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>&gt;元の文字列の最後は改行です。
これを忘れてた。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre>#coding: utf-8

def padding(inputStr, paddingChar = &quot; &quot;):
    maxNum = len(max(inputStr.split(&quot;\n&quot;), key=(lambda(x):len(x))))
    outputStr = &quot;&quot;
<span class="gd">-   for linedata in inputStr.split(&quot;\n&quot;):</span>
<span class="gi">+   for linedata in inputStr.split(&quot;\n&quot;)[:-1]:</span>
        outputStr += linedata + paddingChar * (maxNum - len(linedata)) + &quot;\n&quot;
    return outputStr
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8214/addtag/" class="addtag" id="addtag_8214">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/diff/">
		diff
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8214/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8214/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8214"
  >-</span><span
  class="button yellow"
  id="rating_z_8214"
  >0</span><span 
  class="button green"
  id="rating_p_8214"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8213/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8214/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8214/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8215">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8215/">#8215</a>(<script language="JavaScript">print_time(new Date("2008/12/20 09:47 GMT"));</script><noscript>2008/12/20 09:47 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>schemeの勉強で書いてみました</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">padlines</span> <span class="nv">s</span> <span class="nv">ch</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="nv">iter</span> <span class="p">((</span><span class="nf">ls</span> <span class="p">(</span><span class="nf">string-split</span> <span class="nv">s</span> <span class="s">&quot;\n&quot;</span><span class="p">))</span>
             <span class="p">(</span><span class="nf">maxlen</span> <span class="mi">0</span><span class="p">)</span>
             <span class="p">(</span><span class="nf">acc</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="nv">ls</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">string-join</span> <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">maxlen</span><span class="p">))</span>
                          <span class="p">(</span><span class="nb">reverse </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">acc</span><span class="p">)))</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">len</span> <span class="p">(</span><span class="nb">string-length </span><span class="p">(</span><span class="nb">car </span><span class="nv">ls</span><span class="p">))))</span>
          <span class="p">(</span><span class="nf">iter</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">ls</span><span class="p">)</span>
                <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="nv">len</span> <span class="nv">maxlen</span><span class="p">)</span> <span class="nv">len</span> <span class="nv">maxlen</span><span class="p">)</span>
                <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">n</span><span class="p">)</span>
                        <span class="p">(</span><span class="nf">format</span> <span class="s">&quot;~A~A\n&quot;</span>
                                <span class="p">(</span><span class="nb">car </span><span class="nv">ls</span><span class="p">)</span>
                                <span class="p">(</span><span class="nb">make-string </span><span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="nv">len</span><span class="p">)</span> <span class="nv">ch</span><span class="p">)))</span>
                      <span class="nv">acc</span><span class="p">))))))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8215/addtag/" class="addtag" id="addtag_8215">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/gauche/">gauche</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8215/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8215/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8215"
  >-</span><span
  class="button yellow"
  id="rating_z_8215"
  >0</span><span 
  class="button green"
  id="rating_p_8215"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8215/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8215/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8216">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8216/">#8216</a>(<script language="JavaScript">print_time(new Date("2008/12/20 03:53 GMT"));</script><noscript>2008/12/20 03:53 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/diff/">
	  diff
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  すみません。
↓のようなつもりでした。

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5</pre></td><td class="code"><div class="highlight"><pre>(define (pad lines ch)
  (let iter ((ls (string-split lines &quot;\n&quot;))
             (maxlen 0)
<span class="gd">-            (acc 0))</span>
<span class="gi">+            (acc &#39;()))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8216/addtag/" class="addtag" id="addtag_8216">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/diff/">
		diff
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8216/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8216/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8216"
  >-</span><span
  class="button yellow"
  id="rating_z_8216"
  >0</span><span 
  class="button green"
  id="rating_p_8216"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8215/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8216/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8216/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8217">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/833/" target="_top">mattsan</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8217/">#8217</a>(<script language="JavaScript">print_time(new Date("2008/12/20 04:08 GMT"));</script><noscript>2008/12/20 04:08 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/cpp/">
	  C++
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>大げさなわりに、スマートじゃない気がしてます。</p>
<p>記号は'o'と'*'を使わせてもらいました。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;string&gt;</span>
<span class="cp">#include &lt;vector&gt;</span>
<span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;sstream&gt;</span>
<span class="cp">#include &lt;algorithm&gt;</span>
<span class="cp">#include &lt;iterator&gt;</span>
<span class="cp">#include &lt;functional&gt;</span>

<span class="k">struct</span> <span class="n">Padding</span> <span class="o">:</span> <span class="k">public</span> <span class="n">std</span><span class="o">::</span><span class="n">unary_function</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">int</span>  <span class="n">length</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>

    <span class="n">Padding</span><span class="p">(</span><span class="kt">int</span> <span class="n">length</span><span class="p">,</span> <span class="kt">int</span> <span class="n">c</span><span class="p">)</span> <span class="o">:</span> <span class="n">length</span><span class="p">(</span><span class="n">length</span><span class="p">),</span> <span class="n">c</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="k">operator</span> <span class="p">()</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">s</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">c</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c">// 改行を含む文字列を受けて、パディングされた文字列をベクタに格納する関数</span>
<span class="kt">void</span> <span class="n">padAllLines</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">src</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">strings</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">strings</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>

    <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">ss</span><span class="p">(</span><span class="n">src</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span>       <span class="n">s</span><span class="p">;</span>
    <span class="kt">int</span>               <span class="n">maxLength</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">while</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">getline</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="n">s</span><span class="p">).</span><span class="n">good</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">maxLength</span> <span class="o">=</span> <span class="n">maxLength</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">?</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">:</span> <span class="n">maxLength</span><span class="p">;</span>
        <span class="n">strings</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">strings</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">strings</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">strings</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">Padding</span><span class="p">(</span><span class="n">maxLength</span><span class="p">,</span> <span class="sc">&#39;*&#39;</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="p">[])</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span>              <span class="n">src</span><span class="p">(</span><span class="s">&quot;oooo¥nooooooo¥n¥nooooo¥n&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">strings</span><span class="p">;</span>

    <span class="n">padAllLines</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">strings</span><span class="p">);</span>

    <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">strings</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">strings</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream_iterator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">,</span> <span class="s">&quot;¥n&quot;</span><span class="p">));</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8217/addtag/" class="addtag" id="addtag_8217">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/cpp/">
		C++
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8217/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8217/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8217"
  >-</span><span
  class="button yellow"
  id="rating_z_8217"
  >0</span><span 
  class="button green"
  id="rating_p_8217"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8217/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8218">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/164/" target="_top">kozima</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8218/">#8218</a>(<script language="JavaScript">print_time(new Date("2008/12/20 10:22 GMT"));</script><noscript>2008/12/20 10:22 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>こういうトラバーサルを減らす方法、見覚えがある。ということで見よう見まねで single traversal に。</p>

	</div>
	
	<p class="link">
	  参考: <a href="/web/20090103091741/http://wiki.di.uminho.pt/twiki/pub/Personal/Joao/--TwikiJoaoPublications/FernandesSaraivaPEPM07.pdf"> Tools and libraries to model and manipulate circular programs</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7</pre></td><td class="code"><div class="highlight"><pre><span class="nv">pad</span> <span class="nv">ss</span> <span class="o">=</span> <span class="nv">ss&#39;</span> <span class="kr">where</span> <span class="p">(</span><span class="nv">ss&#39;</span><span class="p">,</span> <span class="nv">m</span><span class="p">)</span> <span class="o">=</span> <span class="nv">pad&#39;</span> <span class="nv">ss</span> <span class="nv">m</span>

<span class="nv">pad&#39;</span> <span class="p">[]</span> <span class="nv">n</span> <span class="o">=</span> <span class="p">([],</span> <span class="mi">0</span><span class="p">)</span>
<span class="nv">pad&#39;</span> <span class="p">(</span><span class="nv">s</span><span class="o">:</span><span class="nv">ss</span><span class="p">)</span> <span class="nv">n</span> <span class="o">=</span> <span class="p">((</span><span class="nv">take</span> <span class="nv">n</span> <span class="o">$</span> <span class="nv">s</span> <span class="o">++</span> <span class="nv">repeat</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span><span class="o">:</span><span class="nv">ss&#39;</span><span class="p">,</span> <span class="nv">max</span> <span class="nv">m</span> <span class="o">$</span> <span class="nv">length</span> <span class="nv">s</span><span class="p">)</span>
 <span class="kr">where</span> <span class="p">(</span><span class="nv">ss&#39;</span><span class="p">,</span> <span class="nv">m</span><span class="p">)</span> <span class="o">=</span> <span class="nv">pad&#39;</span> <span class="nv">ss</span> <span class="nv">n</span>

<span class="nv">main</span> <span class="o">=</span> <span class="nv">mapM</span> <span class="nv">putStrLn</span> <span class="o">.</span> <span class="nv">pad</span> <span class="o">.</span> <span class="nv">lines</span> <span class="o">=&lt;&lt;</span> <span class="nv">getContents</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8218/addtag/" class="addtag" id="addtag_8218">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8218/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8218/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8218"
  >-</span><span
  class="button yellow"
  id="rating_z_8218"
  >0</span><span 
  class="button green"
  id="rating_p_8218"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8218/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8218/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8219">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8219/">#8219</a>(<script language="JavaScript">print_time(new Date("2008/12/20 10:26 GMT"));</script><noscript>2008/12/20 10:26 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Cで。とくに面白いことはやってない。
全角・半角混じりでも動くように、という条件がついたら死地。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include&lt;stdio.h&gt;</span>

<span class="kt">char</span> <span class="o">*</span><span class="nf">padStr</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">,</span> <span class="kt">char</span> <span class="n">padChar</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">len</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">ret</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">line</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">maxlen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">str</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">*</span><span class="n">p</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">p</span> <span class="o">!=</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> <span class="n">p</span><span class="o">++</span><span class="p">,</span> <span class="n">len</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">maxlen</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">)</span> <span class="n">maxlen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span><span class="p">)</span> <span class="n">p</span><span class="o">++</span><span class="p">;</span>
        <span class="n">line</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">line</span> <span class="o">*</span> <span class="p">(</span><span class="n">maxlen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">p</span> <span class="o">=</span> <span class="n">str</span><span class="p">;</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">ret</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="p">){</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">*</span><span class="n">p</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">p</span> <span class="o">!=</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span> <span class="n">len</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="o">*</span><span class="n">q</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">p</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">for</span> <span class="p">(;</span> <span class="n">len</span> <span class="o">&lt;</span> <span class="n">maxlen</span><span class="p">;</span> <span class="n">len</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="o">*</span><span class="n">q</span><span class="o">++</span> <span class="o">=</span> <span class="n">padChar</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="o">*</span><span class="n">q</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">p</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">q</span><span class="o">-</span><span class="n">ret</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">line</span> <span class="o">*</span> <span class="p">(</span><span class="n">maxlen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="n">puts</span><span class="p">(</span><span class="s">&quot;******overflow******&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="s">&quot;oooo</span><span class="se">\n</span><span class="s">oooooooo</span><span class="se">\n\n</span><span class="s">ooooo</span><span class="se">\n</span><span class="s">o</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">pad</span> <span class="o">=</span> <span class="n">padStr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="sc">&#39;x&#39;</span><span class="p">);</span>
    
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;[%s]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">pad</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">pad</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8219/addtag/" class="addtag" id="addtag_8219">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8219/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8219/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8219"
  >-</span><span
  class="button yellow"
  id="rating_z_8219"
  >0</span><span 
  class="button green"
  id="rating_p_8219"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8219/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8219/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8220">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/833/" target="_top">mattsan</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8220/">#8220</a>(<script language="JavaScript">print_time(new Date("2008/12/20 04:39 GMT"));</script><noscript>2008/12/20 04:39 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>なんか手続き型っぽい。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4</pre></td><td class="code"><div class="highlight"><pre><span class="nv">padding</span> <span class="nv">c</span> <span class="nv">ss</span> <span class="o">=</span> <span class="p">[</span><span class="nv">x</span> <span class="o">++</span> <span class="p">(</span><span class="nv">replicate</span> <span class="p">(</span><span class="nv">maxLength</span> <span class="o">-</span> <span class="p">(</span><span class="nv">length</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">c</span><span class="p">)</span> <span class="o">|</span> <span class="nv">x</span> <span class="o">&lt;-</span> <span class="nv">ss</span><span class="p">]</span>
  <span class="kr">where</span> <span class="nv">maxLength</span> <span class="o">=</span> <span class="nv">maximum</span> <span class="p">[</span><span class="nv">length</span> <span class="nv">x</span> <span class="o">|</span> <span class="nv">x</span> <span class="o">&lt;-</span> <span class="nv">ss</span><span class="p">]</span>

<span class="nv">main</span> <span class="o">=</span> <span class="nv">getContents</span> <span class="o">&gt;&gt;=</span> <span class="nv">return</span><span class="o">.</span><span class="nv">unlines</span><span class="o">.</span><span class="nv">padding</span> <span class="sc">&#39;*&#39;</span><span class="o">.</span><span class="nv">lines</span> <span class="o">&gt;&gt;=</span> <span class="nv">putStrLn</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8220/addtag/" class="addtag" id="addtag_8220">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8220/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8220/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8220"
  >-</span><span
  class="button yellow"
  id="rating_z_8220"
  >0</span><span 
  class="button green"
  id="rating_p_8220"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8220/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8221">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/504/" target="_top">あにす</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8221/">#8221</a>(<script language="JavaScript">print_time(new Date("2008/12/20 05:18 GMT"));</script><noscript>2008/12/20 05:18 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  Split()メソッドが最後に空の文字列を返しちゃうので最後に削除しています。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Program</span> <span class="k">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="k">{</span>
        <span class="kt">string</span> <span class="n">r</span> <span class="p">=</span> <span class="n">paddingAllLine</span><span class="p">(</span><span class="s">&quot;○○○○\r\n○○○○○○○\r\n\r\n○○○○○\r\n&quot;</span><span class="p">,</span> <span class="sc">&#39;☆&#39;</span><span class="p">);</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
    <span class="k">}</span>

    <span class="k">static</span> <span class="kt">string</span> <span class="nf">paddingAllLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">char</span> <span class="n">chr</span><span class="p">)</span> <span class="k">{</span>
        <span class="kt">string</span> <span class="n">r</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">maxLenghs</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

        <span class="k">foreach</span><span class="p">(</span><span class="kt">string</span> <span class="n">line</span> <span class="k">in</span> <span class="n">str</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="k">{</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span> <span class="k">}</span><span class="p">,</span> <span class="n">StringSplitOptions</span><span class="p">.</span><span class="n">RemoveEmptyEntries</span><span class="p">))</span> <span class="k">{</span>
            <span class="n">maxLenghs</span> <span class="p">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">Max</span><span class="p">(</span><span class="n">maxLenghs</span><span class="p">,</span> <span class="n">line</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
        <span class="k">}</span>

        <span class="k">foreach</span><span class="p">(</span><span class="kt">string</span> <span class="n">line</span> <span class="k">in</span> <span class="n">str</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="k">{</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span> <span class="k">}</span><span class="p">,</span> <span class="n">StringSplitOptions</span><span class="p">.</span><span class="n">None</span><span class="p">))</span> <span class="k">{</span>
            <span class="n">r</span> <span class="p">+=</span> <span class="n">line</span><span class="p">.</span><span class="n">PadRight</span><span class="p">(</span><span class="n">maxLenghs</span><span class="p">,</span> <span class="n">chr</span><span class="p">)</span> <span class="p">+</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">;</span>
        <span class="k">}</span>

        <span class="n">r</span> <span class="p">=</span> <span class="n">r</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">LastIndexOf</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">,</span> <span class="n">r</span><span class="p">.</span><span class="n">LastIndexOf</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">)));</span>

        <span class="k">return</span> <span class="n">r</span> <span class="p">+</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">;</span>
    <span class="k">}</span>
<span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8221/addtag/" class="addtag" id="addtag_8221">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8221/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8221/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8221"
  >-</span><span
  class="button yellow"
  id="rating_z_8221"
  >0</span><span 
  class="button green"
  id="rating_p_8221"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8221/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8222">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8222/">#8222</a>(<script language="JavaScript">print_time(new Date("2008/12/20 06:12 GMT"));</script><noscript>2008/12/20 06:12 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><div class="highlight"><pre><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">x</span><span class="p">){</span>
    <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
        <span class="k">var</span> <span class="nx">result</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">;</span>
        <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="o">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
            <span class="nx">result</span> <span class="o">+=</span> <span class="k">this</span><span class="o">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">result</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">var</span> <span class="nx">str</span><span class="o">=</span><span class="s2">&quot;○○○○\n○○○○○○○\n\n○○○○○\n&quot;</span><span class="o">;</span>

<span class="k">var</span> <span class="nx">wk</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/(.*)\n/g</span><span class="o">;</span>
<span class="k">var</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="k">var</span> <span class="nx">matchs</span><span class="o">;</span>
<span class="k">var</span> <span class="nx">len</span><span class="o">;</span>
<span class="k">var</span> <span class="nx">wk_l</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
<span class="k">while</span><span class="p">((</span><span class="nx">matchs</span><span class="o">=</span><span class="nx">re</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">str</span><span class="p">))</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span>
<span class="c">//    len=matchs[1].length;</span>
    <span class="nx">len</span><span class="o">=</span><span class="nx">re</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">-</span> <span class="nx">matchs</span><span class="p">.</span><span class="nx">index</span><span class="o">;</span>
    <span class="nx">wk</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">string</span><span class="o">:</span><span class="nx">matchs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">,</span> <span class="nx">length</span><span class="o">:</span><span class="nx">len</span><span class="p">});</span>
    <span class="o">++</span><span class="nx">wk_l</span><span class="o">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">max</span><span class="o">&lt;</span><span class="nx">len</span><span class="p">)</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">len</span><span class="o">;</span>
<span class="p">}</span>
<span class="k">var</span> <span class="nx">result</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">;</span>
<span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">wk_l</span><span class="o">;++</span><span class="nx">i</span><span class="p">){</span>
    <span class="nx">result</span> <span class="o">+=</span> <span class="nx">wk</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">string</span> <span class="o">+</span> <span class="s2">&quot;☆&quot;</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="nx">max</span> <span class="o">-</span> <span class="nx">wk</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;\n&quot;</span><span class="o">;</span>
<span class="p">}</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="c">//WScript.Echo(result);</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8222/addtag/" class="addtag" id="addtag_8222">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/Rhino/">Rhino</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8222/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8222/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8222"
  >-</span><span
  class="button yellow"
  id="rating_z_8222"
  >0</span><span 
  class="button green"
  id="rating_p_8222"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8222/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8223">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/4/" target="_top">匿名</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8223/">#8223</a>(<script language="JavaScript">print_time(new Date("2008/12/20 06:43 GMT"));</script><noscript>2008/12/20 06:43 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>pad.c: In function ‘padStr’:
pad.c:19: warning: implicit declaration of function ‘calloc’
pad.c:19: warning: incompatible implicit declaration of built-in function ‘calloc’
pad.c:19: error: too few arguments to function ‘calloc’
pad.c: In function ‘main’:
pad.c:40: warning: implicit declaration of function ‘free’
</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8223/addtag/" class="addtag" id="addtag_8223">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8223"
  >-</span><span
  class="button yellow"
  id="rating_z_8223"
  >0</span><span 
  class="button green"
  id="rating_p_8223"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8219/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8223/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8223/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8223/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8224">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/973/" target="_top">taninsw</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8224/">#8224</a>(<script language="JavaScript">print_time(new Date("2008/12/20 12:48 GMT"));</script><noscript>2008/12/20 12:48 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>とりあえずベタに。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Data</span><span class="o">.</span><span class="n">List</span>

<span class="nv">padding</span> <span class="nv">text</span> <span class="nv">ch</span> <span class="o">=</span> <span class="kr">let</span> <span class="nv">allLines</span> <span class="o">=</span> <span class="nv">lines</span> <span class="nv">text</span>
                  <span class="kr">in</span>  <span class="nv">unlines</span> <span class="o">$</span> <span class="nv">map</span> <span class="p">(</span><span class="o">\</span><span class="nv">str</span><span class="o">-&gt;</span><span class="nv">take</span> <span class="p">(</span><span class="nv">maximum</span><span class="o">$</span><span class="nv">map</span> <span class="nv">length</span> <span class="nv">allLines</span><span class="p">)</span> <span class="p">(</span><span class="nv">str</span><span class="o">++</span><span class="nv">repeat</span> <span class="nv">ch</span><span class="p">))</span> <span class="nv">allLines</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8224/addtag/" class="addtag" id="addtag_8224">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8224/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8224/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8224"
  >-</span><span
  class="button yellow"
  id="rating_z_8224"
  >0</span><span 
  class="button green"
  id="rating_p_8224"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8224/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8224/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8225">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/560/" target="_top">ihag</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8225/">#8225</a>(<script language="JavaScript">print_time(new Date("2008/12/20 12:52 GMT"));</script><noscript>2008/12/20 12:52 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Cはもう出ちゃったけど，せっかくなので投稿．</p>
<p>マイナーな売りとしては，最後の行がnで終わっていなくても期待通りに動きます．</p>
<p>マルチバイト文字は，やっぱり未対応．</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#include &lt;assert.h&gt;</span>

<span class="cp">#define ARRAY_UNIT_SIZE 16</span>
<span class="cp">#define handle_error(str) do { \</span>
<span class="cp">    perror(str); exit(EXIT_FAILURE); } while (0)</span>

<span class="k">struct</span> <span class="n">array_t</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">**</span><span class="n">value</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">size</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">size_max</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">array_t</span> <span class="o">*</span>
<span class="nf">array_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="n">array_t</span> <span class="o">*</span><span class="n">ret</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">ret</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">ret</span><span class="p">)))</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="s">&quot;calloc&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">array_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">array_t</span> <span class="o">*</span><span class="n">ptr</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="nf">array_push</span><span class="p">(</span><span class="k">struct</span> <span class="n">array_t</span> <span class="o">*</span><span class="n">self</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">size</span> <span class="o">&gt;=</span> <span class="n">self</span><span class="o">-&gt;</span><span class="n">size_max</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">self</span><span class="o">-&gt;</span><span class="n">size_max</span> <span class="o">+=</span> <span class="n">ARRAY_UNIT_SIZE</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">=</span> <span class="n">realloc</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span>
                                   <span class="n">self</span><span class="o">-&gt;</span><span class="n">size_max</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">)))</span>
            <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">handle_error</span><span class="p">(</span><span class="s">&quot;realloc&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">self</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">[</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">size</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">_do_push</span><span class="p">(</span><span class="k">struct</span> <span class="n">array_t</span> <span class="o">*</span><span class="n">array</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pos</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">static</span> <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">max</span><span class="p">)</span> <span class="n">max</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
    <span class="n">array_push</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">max</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">char</span> <span class="o">*</span>
<span class="nf">strpad</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">orig</span><span class="p">,</span> <span class="kt">char</span> <span class="n">pad</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">cur</span><span class="p">,</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="o">*</span><span class="n">ret</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">array_t</span> <span class="o">*</span><span class="n">array</span> <span class="o">=</span> <span class="n">array_init</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">len_max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">cur</span> <span class="o">=</span> <span class="n">head</span> <span class="o">=</span> <span class="n">orig</span><span class="p">;</span> <span class="o">*</span><span class="n">cur</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span> <span class="n">cur</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">cur</span> <span class="o">!=</span> <span class="sc">&#39;\n&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
        <span class="n">len_max</span> <span class="o">=</span> <span class="n">_do_push</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">cur</span><span class="p">,</span> <span class="n">cur</span> <span class="o">-</span> <span class="n">head</span><span class="p">);</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">cur</span> <span class="o">&gt;</span> <span class="n">head</span><span class="p">)</span>  <span class="c">/* last line was not trailed by CR */</span>
        <span class="n">len_max</span> <span class="o">=</span> <span class="n">_do_push</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">cur</span><span class="p">,</span> <span class="n">cur</span> <span class="o">-</span> <span class="n">head</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">((</span><span class="n">cur</span> <span class="o">=</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">array</span><span class="o">-&gt;</span><span class="n">size</span> <span class="o">*</span> <span class="p">(</span><span class="n">len_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="s">&quot;calloc&quot;</span><span class="p">);</span>
    <span class="n">head</span> <span class="o">=</span> <span class="n">orig</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">size_t</span> <span class="n">str_size</span> <span class="o">=</span> <span class="n">array</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">size_t</span> <span class="n">remain_size</span> <span class="o">=</span> <span class="n">len_max</span> <span class="o">-</span> <span class="n">str_size</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">trailer</span> <span class="o">=</span> <span class="o">*</span><span class="n">array</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

        <span class="n">memcpy</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">str_size</span><span class="p">);</span> <span class="n">cur</span> <span class="o">+=</span> <span class="n">str_size</span><span class="p">;</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="n">remain_size</span><span class="p">);</span> <span class="n">cur</span> <span class="o">+=</span> <span class="n">remain_size</span><span class="p">;</span>
        <span class="o">*</span><span class="n">cur</span><span class="o">++</span> <span class="o">=</span> <span class="n">trailer</span><span class="p">;</span>

        <span class="n">head</span> <span class="o">=</span> <span class="n">array</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">array_free</span><span class="p">(</span><span class="n">array</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">str</span> <span class="o">=</span> <span class="s">&quot;foo</span><span class="se">\n</span><span class="s">bar baz</span><span class="se">\n\n</span><span class="s">hoge</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">result</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">strpad</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="sc">&#39;*&#39;</span><span class="p">);</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> 
                  <span class="s">&quot;foo****</span><span class="se">\n</span><span class="s">&quot;</span>
                  <span class="s">&quot;bar baz</span><span class="se">\n</span><span class="s">&quot;</span>
                  <span class="s">&quot;*******</span><span class="se">\n</span><span class="s">&quot;</span>
                  <span class="s">&quot;hoge***</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Result #1: [%s]</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>

    <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">hoge</span><span class="se">\n</span><span class="s">foo bar baz&quot;</span><span class="p">;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">strpad</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="sc">&#39;^&#39;</span><span class="p">);</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> 
                  <span class="s">&quot;^^^^^^^^^^^</span><span class="se">\n</span><span class="s">&quot;</span>
                  <span class="s">&quot;hoge^^^^^^^</span><span class="se">\n</span><span class="s">&quot;</span>
                  <span class="s">&quot;foo bar baz&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Result #2: [%s]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>

    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_SUCCESS</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8225/addtag/" class="addtag" id="addtag_8225">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8225/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8225/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8225"
  >-</span><span
  class="button yellow"
  id="rating_z_8225"
  >0</span><span 
  class="button green"
  id="rating_p_8225"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8225/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8225/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8226">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8226/">#8226</a>(<script language="JavaScript">print_time(new Date("2008/12/20 13:36 GMT"));</script><noscript>2008/12/20 13:36 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <ul class="simple">
<li>lines で1回</li>
<li>length で1回</li>
<li>take で1回</li>
</ul>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">&lt;string&gt;</tt>, line 4)</p>
Bullet list ends without a blank line; unexpected unindent.</div>
<p>の3回はトラバースしているように見えます</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8226/addtag/" class="addtag" id="addtag_8226">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8226"
  >-</span><span
  class="button yellow"
  id="rating_z_8226"
  >0</span><span 
  class="button green"
  id="rating_p_8226"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8218/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8226/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8226/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8226/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8227">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/570/" target="_top">horiuchi</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8227/">#8227</a>(<script language="JavaScript">print_time(new Date("2008/12/20 09:05 GMT"));</script><noscript>2008/12/20 09:05 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/java/">
	  Java
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>とりあえず、普通に。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">Sample222</span> <span class="o">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">String</span> <span class="n">paddingRight</span><span class="o">(</span><span class="n">String</span> <span class="n">input</span><span class="o">,</span> <span class="kt">char</span> <span class="n">padding</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">splited</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;\n&quot;</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="nl">s:</span> <span class="n">splited</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">maxLen</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">maxLen</span><span class="o">,</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="n">StringBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="nl">s:</span> <span class="n">splited</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">builder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span> <span class="o">=</span> <span class="n">maxLen</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">len</span><span class="o">;</span> <span class="n">index</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">builder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">padding</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">builder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;\n&quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">builder</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">paddingRight</span><span class="o">(</span><span class="s">&quot;○○○○\n○○○○○○○\n\n○○○○○\n&quot;</span><span class="o">,</span> <span class="sc">&#39;☆&#39;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8227/addtag/" class="addtag" id="addtag_8227">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/java/">
		Java
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8227/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8227/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8227"
  >-</span><span
  class="button yellow"
  id="rating_z_8227"
  >0</span><span 
  class="button green"
  id="rating_p_8227"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8227/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8228">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/164/" target="_top">kozima</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8228/">#8228</a>(<script language="JavaScript">print_time(new Date("2008/12/20 09:36 GMT"));</script><noscript>2008/12/20 09:36 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>確かに、そう言われれば。</p>
<p>lines と length を展開すれば本当に一回に見えるのかな。考えてみます。</p>

	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8228/addtag/" class="addtag" id="addtag_8228">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8228"
  >-</span><span
  class="button yellow"
  id="rating_z_8228"
  >0</span><span 
  class="button green"
  id="rating_p_8228"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8226/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8228/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8228/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8229">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/852/" target="_top">emasaka</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8229/">#8229</a>(<script language="JavaScript">print_time(new Date("2008/12/20 09:46 GMT"));</script><noscript>2008/12/20 09:46 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/bash/">
	  Bash
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>GNU coreutilsのwc前提です。</p>
<p>マルチバイト文字の場合はUTF-8ロケール前提です。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></td><td class="code"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="k">function </span>q222<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">padchar</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">local </span><span class="nv">text</span><span class="o">=</span><span class="nv">$2</span>

    <span class="nb">local </span><span class="nv">maxlen</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> -n <span class="s2">&quot;$text&quot;</span> | wc -L<span class="k">)</span>
    <span class="nb">local </span><span class="nv">padstr</span><span class="o">=</span><span class="k">$(</span>yes <span class="s2">&quot;$padchar&quot;</span> | head -n <span class="nv">$maxlen</span> | tr -d <span class="s1">&#39;\n&#39;</span><span class="k">)</span>

    <span class="nb">echo</span> -n <span class="s2">&quot;$text&quot;</span> | sed -e <span class="s2">&quot;s/\$/$padstr/;s/^\(.\{$maxlen\}\).*/\1/&quot;</span>
<span class="o">}</span>

q222 <span class="s1">&#39;☆&#39;</span> <span class="nv">$&#39;</span>○○○○\n○○○○○○○\n\n○○○○○\n<span class="err">&#39;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8229/addtag/" class="addtag" id="addtag_8229">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/head/">head</a>
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/sed/">sed</a>
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/tr/">tr</a>
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/wc/">wc</a>
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/yes/">yes</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/bash/">
		Bash
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8229/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8229/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8229"
  >-</span><span
  class="button yellow"
  id="rating_z_8229"
  >0</span><span 
  class="button green"
  id="rating_p_8229"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8229/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8229/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8232">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/973/" target="_top">taninsw</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8232/">#8232</a>(<script language="JavaScript">print_time(new Date("2008/12/20 16:46 GMT"));</script><noscript>2008/12/20 16:46 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>トラバースを2回にしてみました。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre><span class="nv">test</span> <span class="o">=</span> <span class="s">&quot;hoge\nPOPOPOPOPO\n\nPINGPONG\n&quot;</span>

<span class="nv">lineLens</span> <span class="p">[]</span>         <span class="nv">n</span><span class="o">=</span><span class="p">[]</span>
<span class="nv">lineLens</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>  <span class="nv">n</span><span class="o">=</span> <span class="nv">n</span><span class="o">:</span><span class="nv">lineLens</span> <span class="nv">xs</span> <span class="mi">0</span>
<span class="nv">lineLens</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>     <span class="nv">n</span><span class="o">=</span> <span class="nv">lineLens</span> <span class="nv">xs</span> <span class="p">(</span><span class="nv">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="nv">padding&#39;</span> <span class="p">[]</span>        <span class="nv">n</span> <span class="nv">ch</span> <span class="nv">mlen</span><span class="o">=</span> <span class="p">[]</span>
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="nv">n</span> <span class="nv">ch</span> <span class="nv">mlen</span><span class="o">=</span> <span class="nv">replicate</span> <span class="p">(</span><span class="nv">mlen</span><span class="o">-</span><span class="nv">n</span><span class="p">)</span> <span class="nv">ch</span> <span class="o">++</span> <span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="mi">0</span> <span class="nv">ch</span> <span class="nv">mlen</span>
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>    <span class="nv">n</span> <span class="nv">ch</span> <span class="nv">mlen</span><span class="o">=</span> <span class="nv">x</span><span class="o">:</span><span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="p">(</span><span class="nv">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="nv">ch</span> <span class="nv">mlen</span>

<span class="nv">padding</span> <span class="nv">text</span> <span class="nv">ch</span> <span class="o">=</span> <span class="kr">let</span> <span class="nv">maxLen</span> <span class="o">=</span> <span class="nv">maximum</span> <span class="o">$</span> <span class="nv">lineLens</span> <span class="nv">text</span> <span class="mi">0</span>
                  <span class="kr">in</span>  <span class="nv">padding&#39;</span> <span class="nv">test</span> <span class="mi">0</span> <span class="sc">&#39;*&#39;</span> <span class="nv">maxLen</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8232/addtag/" class="addtag" id="addtag_8232">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8232/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8232/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8232"
  >-</span><span
  class="button yellow"
  id="rating_z_8232"
  >0</span><span 
  class="button green"
  id="rating_p_8232"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8224/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8232/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8232/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8232/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8233">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/973/" target="_top">taninsw</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8233/">#8233</a>(<script language="JavaScript">print_time(new Date("2008/12/20 17:36 GMT"));</script><noscript>2008/12/20 17:36 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Readerモナドを使ってみかけの変数を減らしてみました。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Control</span><span class="o">.</span><span class="n">Monad</span><span class="o">.</span><span class="n">Reader</span>
<span class="nv">test</span> <span class="o">=</span> <span class="s">&quot;hoge\nPOPOPOPOPO\n\nPINGPONG\n&quot;</span>
<span class="kr">data</span> <span class="n">Readable</span> <span class="o">=</span> <span class="n">Readable</span> <span class="p">{</span><span class="nv">pChar</span><span class="o">::</span><span class="n">Char</span><span class="p">,</span><span class="nv">mLength</span><span class="o">::</span><span class="n">Int</span><span class="p">}</span>

<span class="nv">maxLineLen</span> <span class="p">[]</span>         <span class="nv">n</span><span class="o">=</span> <span class="nv">n</span>
<span class="nv">maxLineLen</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>  <span class="nv">n</span><span class="o">=</span> <span class="nv">max</span> <span class="nv">n</span> <span class="p">(</span><span class="nv">maxLineLen</span> <span class="nv">xs</span> <span class="mi">0</span><span class="p">)</span>
<span class="nv">maxLineLen</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>     <span class="nv">n</span><span class="o">=</span> <span class="nv">maxLineLen</span> <span class="nv">xs</span> <span class="p">(</span><span class="nv">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="nv">padding&#39;</span> <span class="o">::</span> <span class="p">[</span><span class="n">Char</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">Reader</span> <span class="n">Readable</span> <span class="n">String</span>
<span class="nv">padding&#39;</span> <span class="p">[]</span>        <span class="nv">n</span> <span class="o">=</span> <span class="nv">return</span> <span class="p">[]</span>
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="nv">n</span> <span class="o">=</span> <span class="nv">paddingStr</span> <span class="nv">n</span> <span class="o">&gt;&gt;=</span> <span class="o">\</span><span class="nv">padStr</span><span class="o">-&gt;</span><span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="mi">0</span> <span class="o">&gt;&gt;=</span><span class="nv">return</span><span class="o">.</span><span class="p">(</span><span class="nv">padStr</span> <span class="o">++</span><span class="p">)</span> 
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>    <span class="nv">n</span> <span class="o">=</span> <span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="p">(</span><span class="nv">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;=</span> <span class="nv">return</span><span class="o">.</span><span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="p">)</span> 

<span class="nv">paddingStr</span> <span class="o">::</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">Reader</span> <span class="n">Readable</span> <span class="n">String</span>
<span class="nv">paddingStr</span> <span class="nv">n</span> <span class="o">=</span> <span class="kr">do</span> <span class="nv">mlen</span> <span class="o">&lt;-</span> <span class="nv">asks</span> <span class="nv">mLength</span> 
                  <span class="nv">ch</span>   <span class="o">&lt;-</span> <span class="nv">asks</span> <span class="nv">pChar</span>
                  <span class="nv">return</span> <span class="p">(</span><span class="nv">replicate</span> <span class="p">(</span><span class="nv">mlen</span><span class="o">-</span><span class="nv">n</span><span class="p">)</span> <span class="nv">ch</span> <span class="o">++</span> <span class="s">&quot;\n&quot;</span><span class="p">)</span> 

<span class="nv">padding</span> <span class="nv">text</span> <span class="nv">ch</span> <span class="o">=</span> <span class="kr">let</span> <span class="nv">maxLen</span> <span class="o">=</span> <span class="nv">maxLineLen</span> <span class="nv">text</span> <span class="mi">0</span>
                  <span class="kr">in</span>  <span class="nv">runReader</span> <span class="p">(</span><span class="nv">padding&#39;</span> <span class="nv">test</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="n">Readable</span> <span class="nv">ch</span> <span class="nv">maxLen</span><span class="p">)</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8233/addtag/" class="addtag" id="addtag_8233">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8233/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8233/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8233"
  >-</span><span
  class="button yellow"
  id="rating_z_8233"
  >0</span><span 
  class="button green"
  id="rating_p_8233"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8232/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8233/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8233/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8234">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/973/" target="_top">taninsw</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8234/">#8234</a>(<script language="JavaScript">print_time(new Date("2008/12/20 12:08 GMT"));</script><noscript>2008/12/20 12:08 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>これでトラバースは1回になってるんじゃないでしょうか。
書いてて混乱してきたので、検証していただけると幸いです。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></td><td class="code"><div class="highlight"><pre><span class="nv">test</span> <span class="o">=</span> <span class="s">&quot;hoge\nPOPOPOPOPO\n\nPINGPONG\n&quot;</span>

<span class="nv">padding&#39;</span> <span class="p">[]</span>         <span class="nv">i</span>  <span class="nv">m</span> <span class="nv">ch</span><span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,[])</span>
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>  <span class="nv">i</span>  <span class="nv">m</span> <span class="nv">ch</span><span class="o">=</span> <span class="kr">let</span> <span class="p">(</span><span class="nv">cMax</span><span class="p">,</span><span class="nv">cStr</span><span class="p">)</span> <span class="o">=</span> <span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">max</span> <span class="nv">i</span> <span class="nv">m</span><span class="p">)</span> <span class="nv">ch</span>
                             <span class="kr">in</span>  <span class="p">(</span><span class="nv">max</span> <span class="nv">m</span> <span class="nv">cMax</span><span class="p">,</span><span class="nv">replicate</span> <span class="p">((</span><span class="nv">max</span> <span class="nv">cMax</span> <span class="nv">m</span><span class="p">)</span><span class="o">-</span><span class="nv">i</span><span class="p">)</span> <span class="nv">ch</span><span class="o">++</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">cStr</span><span class="p">)</span>
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>     <span class="nv">i</span>  <span class="nv">m</span> <span class="nv">ch</span><span class="o">=</span> <span class="kr">let</span> <span class="p">(</span><span class="nv">cMax</span><span class="p">,</span><span class="nv">cStr</span><span class="p">)</span> <span class="o">=</span> <span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="p">(</span><span class="nv">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nv">max</span> <span class="nv">i</span> <span class="nv">m</span><span class="p">)</span> <span class="nv">ch</span>
                             <span class="kr">in</span>  <span class="p">(</span><span class="nv">max</span> <span class="nv">m</span> <span class="nv">cMax</span><span class="p">,</span><span class="nv">x</span><span class="o">:</span><span class="nv">cStr</span><span class="p">)</span>

<span class="nv">padding</span> <span class="nv">text</span> <span class="nv">ch</span> <span class="o">=</span> <span class="nv">snd</span> <span class="o">$</span> <span class="nv">padding&#39;</span> <span class="nv">text</span> <span class="mi">0</span> <span class="mi">0</span> <span class="nv">ch</span>

<span class="cm">{-</span>
<span class="cm">*Main&gt; padding test &#39;-&#39;</span>
<span class="cm">&quot;hoge------\nPOPOPOPOPO\n----------\nPINGPONG--\n&quot;</span>
<span class="cm">-}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8234/addtag/" class="addtag" id="addtag_8234">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8234/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8234/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8234"
  >-</span><span
  class="button yellow"
  id="rating_z_8234"
  >0</span><span 
  class="button green"
  id="rating_p_8234"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8234/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8234/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8235">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/343/" target="_top">matyr</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8235/">#8235</a>(<script language="JavaScript">print_time(new Date("2008/12/20 15:41 GMT"));</script><noscript>2008/12/20 15:41 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/groovy/">
	  Groovy
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'></pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre>def padRightAll(String s, String p, n = &#39;\n&#39;){
  s.split(n).with{ it*.padRight(it*.size().max(), p[0]).join(n) + n }
}

print r = padRightAll(&#39;○○○○\n○○○○○○○\n\n○○○○○\n&#39;, &#39;☆&#39;)
assert r == &#39;○○○○☆☆☆\n○○○○○○○\n☆☆☆☆☆☆☆\n○○○○○☆☆\n&#39;
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8235/addtag/" class="addtag" id="addtag_8235">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/groovy/">
		Groovy
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8235/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8235/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8235"
  >-</span><span
  class="button yellow"
  id="rating_z_8235"
  >0</span><span 
  class="button green"
  id="rating_p_8235"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8235/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8237">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/766/" target="_top">syat</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8237/">#8237</a>(<script language="JavaScript">print_time(new Date("2008/12/20 20:30 GMT"));</script><noscript>2008/12/20 20:30 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  失礼。callocの引数の数ちがってんじゃん。<br/>VCEE2008でノーエラーで通ったから油断してた。<br/>ヘッダファイルは大事ですね。
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre><span class="mi">1</span><span class="n">a2</span>
<span class="o">&gt;</span> <span class="err">#</span><span class="n">include</span><span class="o">&lt;</span><span class="n">stdlib</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
<span class="mi">19</span><span class="n">c20</span>
<span class="o">&lt;</span>       <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">line</span> <span class="o">*</span> <span class="p">(</span><span class="n">maxlen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="o">---</span>
<span class="o">&gt;</span>       <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">line</span> <span class="o">*</span> <span class="p">(</span><span class="n">maxlen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8237/addtag/" class="addtag" id="addtag_8237">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/diff/">diff</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8237/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8237/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8237"
  >-</span><span
  class="button yellow"
  id="rating_z_8237"
  >0</span><span 
  class="button green"
  id="rating_p_8237"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8223/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8237/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8237/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8238">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/852/" target="_top">emasaka</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8238/">#8238</a>(<script language="JavaScript">print_time(new Date("2008/12/20 21:09 GMT"));</script><noscript>2008/12/20 21:09 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/bash/">
	  Bash
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>マルチバイト処理に間違い。wc -Lは文字数ではなくカラム数を返すのに対し、&quot;○&quot;がEast Asian WidthでAmbiguousなだけでした。</p>
<p>以下、修正版です。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="k">function </span>linemax<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span>line max len
    <span class="k">while </span><span class="nb">read</span> -r line; <span class="k">do</span>
<span class="k">        </span><span class="nv">len</span><span class="o">=</span><span class="k">${#</span><span class="nv">line</span><span class="k">}</span>
        <span class="o">((</span><span class="nv">max</span> <span class="o">=</span> max &lt; len ? len : max<span class="o">))</span>
    <span class="k">done</span>
<span class="k">    </span><span class="nb">echo</span> <span class="nv">$max</span>
<span class="o">}</span>

<span class="k">function </span>q222<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">padchar</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">local </span><span class="nv">text</span><span class="o">=</span><span class="nv">$2</span>

    <span class="nb">local </span><span class="nv">maxlen</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> -n <span class="s2">&quot;$text&quot;</span> | linemax<span class="k">)</span>
    <span class="nb">local </span><span class="nv">padstr</span><span class="o">=</span><span class="k">$(</span>yes <span class="s2">&quot;$padchar&quot;</span> | head -n <span class="nv">$maxlen</span> | tr -d <span class="s1">&#39;\n&#39;</span><span class="k">)</span>

    <span class="nb">echo</span> -n <span class="s2">&quot;$text&quot;</span> | sed -e <span class="s2">&quot;s/\$/$padstr/;s/^\(.\{$maxlen\}\).*/\1/&quot;</span>
<span class="o">}</span>

q222 <span class="s1">&#39;☆&#39;</span> <span class="nv">$&#39;</span>○○○○\n○○○○○○○\n\n○○○○○\n<span class="err">&#39;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8238/addtag/" class="addtag" id="addtag_8238">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/bash/">
		Bash
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8238/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8238/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8238"
  >-</span><span
  class="button yellow"
  id="rating_z_8238"
  >0</span><span 
  class="button green"
  id="rating_p_8238"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8229/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8238/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8238/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8240">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8240/">#8240</a>(<script language="JavaScript">print_time(new Date("2008/12/21 01:57 GMT"));</script><noscript>2008/12/21 01:57 GMT</noscript>)
	
	
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>トラバースは１回になっていますね。
パディング文字列を replicate で作ってしまってから
連結するのは、ちょっともったいないかもしれませんね。

</pre>
	</div>
	
	
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8240/addtag/" class="addtag" id="addtag_8240">タグ</a>:
	
	タグなし
	&nbsp;

	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8240"
  >-</span><span
  class="button yellow"
  id="rating_z_8240"
  >0</span><span 
  class="button green"
  id="rating_p_8240"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8234/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8240/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8240/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8240/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8241">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/973/" target="_top">taninsw</a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8241/">#8241</a>(<script language="JavaScript">print_time(new Date("2008/12/21 04:10 GMT"));</script><noscript>2008/12/21 04:10 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>確認ありがとうございます。
とりあえず、replicateを使わないように書き直してみました。</p>
<p>勉強がてらArrowやらApplicativeやらMonadやら使ってます。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></td><td class="code"><div class="highlight"><pre><span class="kr">import</span> <span class="n">Control</span><span class="o">.</span><span class="n">Arrow</span>
<span class="kr">import</span> <span class="n">Control</span><span class="o">.</span><span class="n">Monad</span><span class="o">.</span><span class="n">Reader</span>
<span class="kr">import</span> <span class="n">Control</span><span class="o">.</span><span class="n">Applicative</span>
<span class="nv">test</span> <span class="o">=</span> <span class="s">&quot;hoge\nPOPOPOPOPO\n\nPINGPONG\n&quot;</span>

<span class="nv">padding&#39;</span> <span class="o">::</span> <span class="n">String</span><span class="o">-&gt;</span><span class="n">Int</span><span class="o">-&gt;</span><span class="n">Int</span><span class="o">-&gt;</span><span class="n">Reader</span> <span class="n">Char</span> <span class="p">(</span><span class="n">Int</span><span class="p">,</span><span class="n">String</span><span class="p">)</span>
<span class="nv">padding&#39;</span> <span class="p">[]</span>         <span class="nv">i</span>  <span class="nv">m</span> <span class="o">=</span> <span class="nv">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,[])</span>
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>  <span class="nv">i</span>  <span class="nv">m</span> <span class="o">=</span> <span class="kr">do</span> <span class="p">(</span><span class="nv">cMax</span><span class="p">,</span><span class="nv">cStr</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">max</span> <span class="nv">i</span> <span class="nv">m</span><span class="p">)</span> 
                              <span class="nv">newStr</span>      <span class="o">&lt;-</span> <span class="nv">padding&#39;&#39;</span> <span class="p">((</span><span class="nv">max</span> <span class="nv">cMax</span> <span class="nv">m</span><span class="p">)</span> <span class="o">-</span><span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">cStr</span><span class="p">)</span>  
                              <span class="nv">return</span> <span class="p">(</span><span class="nv">max</span> <span class="nv">m</span> <span class="nv">cMax</span><span class="p">,</span><span class="nv">newStr</span><span class="p">)</span>
<span class="nv">padding&#39;</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span>     <span class="nv">i</span>  <span class="nv">m</span> <span class="o">=</span> <span class="p">(</span><span class="nv">arr</span><span class="p">(</span><span class="nv">max</span> <span class="nv">m</span><span class="p">)</span><span class="o">***</span> <span class="nv">arr</span><span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="p">))</span>  <span class="o">&lt;$&gt;</span> <span class="nv">padding&#39;</span> <span class="nv">xs</span> <span class="p">(</span><span class="nv">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nv">max</span> <span class="nv">i</span> <span class="nv">m</span><span class="p">)</span> 

<span class="nv">padding&#39;&#39;</span> <span class="o">::</span> <span class="n">Int</span><span class="o">-&gt;</span><span class="n">String</span><span class="o">-&gt;</span><span class="n">Reader</span> <span class="n">Char</span> <span class="n">String</span>
<span class="nv">padding&#39;&#39;</span> <span class="mi">0</span> <span class="nv">str</span> <span class="o">=</span> <span class="nv">return</span> <span class="nv">str</span>
<span class="nv">padding&#39;&#39;</span> <span class="nv">n</span> <span class="nv">str</span> <span class="o">=</span> <span class="nv">ask</span><span class="o">&gt;&gt;=</span> <span class="nv">padding&#39;&#39;</span> <span class="p">(</span><span class="nv">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="o">:</span><span class="nv">str</span><span class="p">)</span> 

<span class="nv">padding</span> <span class="nv">text</span> <span class="nv">ch</span> <span class="o">=</span> <span class="nv">snd</span> <span class="o">$</span> <span class="nv">runReader</span> <span class="p">(</span><span class="nv">padding&#39;</span> <span class="nv">text</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">ch</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8241/addtag/" class="addtag" id="addtag_8241">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8241/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8241/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8241"
  >-</span><span
  class="button yellow"
  id="rating_z_8241"
  >0</span><span 
  class="button green"
  id="rating_p_8241"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8240/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8241/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8241/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8242">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/88/" target="_top">sumim</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8242/">#8242</a>(<script language="JavaScript">print_time(new Date("2008/12/21 10:07 GMT"));</script><noscript>2008/12/21 10:07 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/smalltalk/">
	  Smalltalk
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Squeak Smalltalk で。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre>| in out width |
in := &#39;○○○○
○○○○○○○

○○○○○
&#39;.

out := String new writeStream.
width := 0.
in linesDo: [:line | width := width max: line size].
in linesDo: [:line | out nextPutAll: (line forceTo: width paddingWith: $☆); cr].
out contents
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8242/addtag/" class="addtag" id="addtag_8242">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/Squeak_Smalltalk/">Squeak_Smalltalk</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/smalltalk/">
		Smalltalk
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8242/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8242/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8242"
  >-</span><span
  class="button yellow"
  id="rating_z_8242"
  >0</span><span 
  class="button green"
  id="rating_p_8242"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8242/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8243">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8243/">#8243</a>(<script language="JavaScript">print_time(new Date("2008/12/21 20:20 GMT"));</script><noscript>2008/12/21 20:20 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>Haskellのナイーブなコード</p>
<ol class="arabic simple">
<li>lines で行に分解する</li>
<li>maximum . map length で各行の長さをカウントして最大長を求める</li>
<li>map (++repeat c) で各行末にパディング文字の無限列を連結</li>
<li>3.で作った各行の先頭から2.で求めた最大長分だけとる</li>
<li>unlines で１行にもどす</li>
</ol>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="nv">normLines0</span> <span class="o">::</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="n">String</span>
<span class="nv">normLines0</span> <span class="o">=</span> <span class="nv">unlines</span> <span class="o">.</span> <span class="nv">norm0</span> <span class="o">.</span> <span class="nv">lines</span>

<span class="nv">norm0</span> <span class="o">::</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span>
<span class="nv">norm0</span> <span class="o">=</span> <span class="nv">map</span> <span class="o">.</span> <span class="nv">take</span> <span class="o">.</span> <span class="nv">maximum</span> <span class="o">.</span> <span class="nv">map</span> <span class="nv">length</span> <span class="o">&lt;*&gt;</span> <span class="nv">map</span> <span class="p">(</span><span class="o">++</span><span class="nv">repeat</span> <span class="nv">c</span><span class="p">)</span>

<span class="p">(</span><span class="o">&lt;*&gt;</span><span class="p">)</span> <span class="o">::</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span> <span class="o">-&gt;</span> <span class="nv">c</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">c</span><span class="p">)</span> <span class="c1">-- S コンビネータ</span>
<span class="p">(</span><span class="nv">f</span> <span class="o">&lt;*&gt;</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">x</span> <span class="o">=</span> <span class="p">(</span><span class="nv">f</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nv">g</span> <span class="nv">x</span><span class="p">)</span>
<span class="kr">infixl</span> <span class="mi">4</span> <span class="o">&lt;*&gt;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8243/addtag/" class="addtag" id="addtag_8243">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8243/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8243/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8243"
  >-</span><span
  class="button yellow"
  id="rating_z_8243"
  >0</span><span 
  class="button green"
  id="rating_p_8243"
  >+</span></span></span>
  

<p>

  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8243/">
    1
    reply
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8243/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8244">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/">#8244</a>(<script language="JavaScript">print_time(new Date("2008/12/21 20:30 GMT"));</script><noscript>2008/12/21 20:30 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>パディング文字を定義しわすれました。
パディング文字を引数で渡すバージョンを書きましたので、こちらをどうぞ。</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td class="code"><div class="highlight"><pre><span class="nv">normLines0</span> <span class="o">::</span> <span class="n">Char</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="n">String</span>
<span class="nv">normLines0</span> <span class="nv">c</span> <span class="o">=</span> <span class="nv">unlines</span> <span class="o">.</span> <span class="nv">norm0</span> <span class="nv">c</span> <span class="o">.</span> <span class="nv">lines</span>

<span class="nv">norm0</span> <span class="o">::</span> <span class="n">Char</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span>
<span class="nv">norm0</span> <span class="nv">c</span> <span class="o">=</span> <span class="nv">map</span> <span class="o">.</span> <span class="nv">take</span> <span class="o">.</span> <span class="nv">maximum</span> <span class="o">.</span> <span class="nv">map</span> <span class="nv">length</span> <span class="o">&lt;*&gt;</span> <span class="nv">map</span> <span class="p">(</span><span class="o">++</span><span class="nv">repeat</span> <span class="nv">c</span><span class="p">)</span>

<span class="p">(</span><span class="o">&lt;*&gt;</span><span class="p">)</span> <span class="o">::</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span> <span class="o">-&gt;</span> <span class="nv">c</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">c</span><span class="p">)</span>
<span class="p">(</span><span class="nv">f</span> <span class="o">&lt;*&gt;</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">x</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">x</span> <span class="p">(</span><span class="nv">g</span> <span class="nv">x</span><span class="p">)</span>

<span class="kr">infixl</span> <span class="mi">4</span> <span class="o">&lt;*&gt;</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/addtag/" class="addtag" id="addtag_8244">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8244"
  >-</span><span
  class="button yellow"
  id="rating_z_8244"
  >0</span><span 
  class="button green"
  id="rating_p_8244"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8243/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  <a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/">
    2
    replies
  </a>

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8244/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8245">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8245/">#8245</a>(<script language="JavaScript">print_time(new Date("2008/12/21 20:39 GMT"));</script><noscript>2008/12/21 20:39 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>ナイーブ版の unlines と lines の間の部分を１トラバースでやる
(*+) は２つの文字列を連結するが同時に前の文字列の長さもカウントする

</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6
7
8
9</pre></td><td class="code"><div class="highlight"><pre><span class="nv">norm1</span> <span class="o">::</span> <span class="n">Char</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span>
<span class="nv">norm1</span> <span class="nv">c</span> <span class="nv">xs</span> <span class="o">=</span> <span class="nv">xs&#39;</span>
  <span class="kr">where</span> <span class="p">(</span><span class="nv">m</span><span class="p">,</span><span class="nv">xs&#39;</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">xs</span>
        <span class="nv">f</span> <span class="p">[]</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,[])</span>
        <span class="nv">f</span> <span class="p">(</span><span class="nv">y</span><span class="o">:</span><span class="nv">ys</span><span class="p">)</span> <span class="o">=</span> <span class="kr">let</span>
                     <span class="p">(</span><span class="nv">i</span><span class="p">,</span><span class="nv">y&#39;</span><span class="p">)</span>  <span class="o">=</span> <span class="nv">y</span> <span class="o">*+</span> <span class="nv">replicate</span> <span class="p">(</span><span class="nv">m</span><span class="o">-</span><span class="nv">i</span><span class="p">)</span> <span class="nv">c</span>
                     <span class="p">(</span><span class="nv">j</span><span class="p">,</span><span class="nv">ys&#39;</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">ys</span>
                   <span class="kr">in</span> <span class="p">(</span><span class="nv">max</span> <span class="nv">i</span> <span class="nv">j</span><span class="p">,</span> <span class="nv">y&#39;</span><span class="o">:</span><span class="nv">ys&#39;</span><span class="p">)</span>
        <span class="nv">xs</span> <span class="o">*+</span> <span class="nv">ys</span> <span class="o">=</span> <span class="nv">foldr</span> <span class="p">(</span><span class="o">\</span> <span class="nv">z</span> <span class="p">(</span><span class="nv">p</span><span class="p">,</span><span class="nv">zs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="nv">p</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nv">z</span><span class="o">:</span><span class="nv">zs</span><span class="p">))</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nv">ys</span><span class="p">)</span> <span class="nv">xs</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8245/addtag/" class="addtag" id="addtag_8245">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8245/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8245/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8245"
  >-</span><span
  class="button yellow"
  id="rating_z_8245"
  >0</span><span 
  class="button green"
  id="rating_p_8245"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8245/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8245/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8246">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/98/" target="_top">nobsun</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8246/">#8246</a>(<script language="JavaScript">print_time(new Date("2008/12/21 20:45 GMT"));</script><noscript>2008/12/21 20:45 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
	  Haskell
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #efffef;">1/1=1.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>unlines も lines もなしにして、全体を１トラバースでする方法
#8241 と(たぶん)同じ方法</p>

	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></td><td class="code"><div class="highlight"><pre><span class="nv">normLines</span> <span class="o">::</span> <span class="n">Char</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="o">-&gt;</span> <span class="n">String</span>
<span class="nv">normLines</span> <span class="nv">c</span> <span class="nv">xs</span> <span class="o">=</span> <span class="nv">xs&#39;</span>
  <span class="kr">where</span> <span class="p">(</span><span class="nv">m</span><span class="p">,</span><span class="nv">xs&#39;</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="mi">0</span> <span class="nv">xs</span>
        <span class="nv">f</span> <span class="kr">_</span> <span class="p">[]</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="nv">f</span> <span class="nv">i</span> <span class="p">(</span><span class="nv">x</span><span class="o">:</span><span class="nv">xs</span><span class="p">)</span> <span class="o">|</span> <span class="nv">x</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span> <span class="o">=</span> <span class="kr">let</span>
                                   <span class="p">(</span><span class="nv">j</span><span class="p">,</span><span class="nv">ys</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="mi">0</span> <span class="nv">xs</span>
                                 <span class="kr">in</span> <span class="p">(</span><span class="nv">max</span> <span class="nv">i</span> <span class="nv">j</span><span class="p">,</span> <span class="nv">g</span> <span class="p">(</span><span class="nv">m</span><span class="o">-</span><span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="o">:</span><span class="nv">ys</span><span class="p">))</span>
                   <span class="o">|</span> <span class="nv">otherwise</span> <span class="o">=</span> <span class="kr">let</span>
                                   <span class="p">(</span><span class="nv">j</span><span class="p">,</span><span class="nv">ys</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="nv">xs</span>
                                 <span class="kr">in</span> <span class="p">(</span><span class="nv">j</span><span class="p">,</span><span class="nv">x</span><span class="o">:</span><span class="nv">ys</span><span class="p">)</span>
        <span class="nv">g</span> <span class="mi">0</span> <span class="nv">xs</span> <span class="o">=</span> <span class="nv">xs</span>
        <span class="nv">g</span> <span class="nv">i</span> <span class="nv">xs</span> <span class="o">=</span> <span class="nv">c</span><span class="o">:</span><span class="nv">g</span> <span class="p">(</span><span class="nv">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="nv">xs</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8246/addtag/" class="addtag" id="addtag_8246">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/haskell/">
		Haskell
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8246/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8246/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #efffef;"
  >1/1=1.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8246"
  >-</span><span
  class="button yellow"
  id="rating_z_8246"
  >0</span><span 
  class="button green"
  id="rating_p_8246"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8244/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8246/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8246/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8247">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/560/" target="_top">ihag</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_gold.png" border=0/></a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8247/">#8247</a>(<script language="JavaScript">print_time(new Date("2008/12/22 08:39 GMT"));</script><noscript>2008/12/22 08:39 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
	  C
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <p>マルチバイト文字に対応しました．</p>
<p>Ambiguous widthな一部の記号('○'とか'☆')について，wcwidth(3)が1を返す問題に対処するため，Markus Kuhn氏が作成されたwcwidthの実装を利用しています．</p>

	</div>
	
	<p class="link">
	  参考: <a href="/web/20090103091741/http://www.cl.cam.ac.uk/~mgk25/ucs/wcwidth.c">wcwidth.c</a>
	</p>  
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168</pre></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#include &lt;unistd.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="cp">#include &lt;locale.h&gt;</span>

<span class="c">/* wcwidth.c functions */</span>
<span class="kt">int</span> <span class="n">mk_wcwidth_cjk</span><span class="p">(</span><span class="n">wchar_t</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mk_wcswidth_cjk</span><span class="p">(</span><span class="k">const</span> <span class="n">wchar_t</span> <span class="o">*</span><span class="p">,</span> <span class="n">size_t</span><span class="p">);</span>

<span class="cp">#define ARRAY_UNIT_SIZE (sizeof(wchar_t) * 16)</span>
<span class="cp">#define handle_error(str) do { \</span>
<span class="cp">    perror(str); exit(EXIT_FAILURE); } while (0)</span>

<span class="cp">#define DEF_ARRAY_NEW(prefix, type) \</span>
<span class="cp">    type * prefix ## _new(void) { \</span>
<span class="cp">        type *r; \</span>
<span class="cp">        if ((r = calloc(1, sizeof(*r))) == NULL) \</span>
<span class="cp">            handle_error(&quot;calloc&quot;); \</span>
<span class="cp">        return r; \</span>
<span class="cp">    }</span>
<span class="cp">#define DEF_ARRAY_FREE(prefix, type) \</span>
<span class="cp">    void _ ## prefix ## _free(type *p) { \</span>
<span class="cp">        free(p); \</span>
<span class="cp">    }</span>
<span class="cp">#define DEF_ARRAY_NPUSH(prefix, type) \</span>
<span class="cp">    int prefix ## _npush(type *p, u_char *value, size_t size) { \</span>
<span class="cp">        size_t c; \</span>
<span class="cp">        for (c = 0; c &lt; size; c++) { \</span>
<span class="cp">            if (p-&gt;size &gt;= p-&gt;size_max) { \</span>
<span class="cp">                p-&gt;size_max += ARRAY_UNIT_SIZE; \</span>
<span class="cp">                if ((p-&gt;value = realloc(p-&gt;value, p-&gt;size_max)) \</span>
<span class="cp">                    == NULL) \</span>
<span class="cp">                    handle_error(&quot;realloc&quot;); \</span>
<span class="cp">            } \</span>
<span class="cp">            ((u_char *)(p-&gt;value))[p-&gt;size++] = value[c]; \</span>
<span class="cp">        } \</span>
<span class="cp">        return 0; \</span>
<span class="cp">    }</span>
<span class="cp">#define DEF_ARRAY_FIT(prefix, type) \</span>
<span class="cp">    type * prefix ## _fit(type *p) { \</span>
<span class="cp">        if ((p-&gt;value = realloc(p-&gt;value, p-&gt;size)) == NULL) \</span>
<span class="cp">            handle_error(&quot;realloc&quot;); \</span>
<span class="cp">        return p; \</span>
<span class="cp">    }</span>
<span class="cp">#define DEF_ARRAY_COMMON(prefix, type) \</span>
<span class="cp">    DEF_ARRAY_NEW(prefix, type) \</span>
<span class="cp">    DEF_ARRAY_FREE(prefix, type) \</span>
<span class="cp">    DEF_ARRAY_NPUSH(prefix, type) \</span>
<span class="cp">    DEF_ARRAY_FIT(prefix, type)</span>

<span class="k">struct</span> <span class="n">wstr_t</span> <span class="p">{</span>
    <span class="n">wchar_t</span> <span class="o">*</span><span class="n">value</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">size</span><span class="p">;</span>     <span class="c">/* in bytes */</span>
    <span class="n">size_t</span> <span class="n">size_max</span><span class="p">;</span> <span class="c">/* in bytes */</span>
<span class="p">};</span>
<span class="n">DEF_ARRAY_COMMON</span><span class="p">(</span><span class="n">wstr</span><span class="p">,</span> <span class="k">struct</span> <span class="n">wstr_t</span><span class="p">);</span>

<span class="kt">int</span>
<span class="nf">wstr_push</span><span class="p">(</span><span class="k">struct</span> <span class="n">wstr_t</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">wchar_t</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span><span class="p">(</span><span class="n">wstr_npush</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="p">(</span><span class="n">u_char</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">value</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">value</span><span class="p">)));</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">wstr_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">wstr_t</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">free</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">);</span>
    <span class="n">_wstr_free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">wchar_t</span> <span class="o">*</span>
<span class="nf">wstrpad</span><span class="p">(</span><span class="n">wchar_t</span> <span class="o">*</span><span class="n">orig</span><span class="p">,</span> <span class="n">wchar_t</span> <span class="n">pad</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">wchar_t</span> <span class="o">*</span><span class="n">cur</span><span class="p">,</span> <span class="o">*</span><span class="n">ret</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">wlen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width_max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">wstr_t</span> <span class="o">*</span><span class="n">wstr</span> <span class="o">=</span> <span class="n">wstr_new</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">cur</span> <span class="o">=</span> <span class="n">orig</span><span class="p">;</span> <span class="o">*</span><span class="n">cur</span> <span class="o">!=</span> <span class="sc">L&#39;\0&#39;</span><span class="p">;</span> <span class="n">cur</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">cur</span> <span class="o">==</span> <span class="sc">L&#39;\n&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">width_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">width_max</span><span class="p">)</span> <span class="o">?</span> <span class="n">width</span> <span class="o">:</span> <span class="n">width_max</span><span class="p">;</span>
            <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">width</span> <span class="o">+=</span> <span class="n">mk_wcwidth_cjk</span><span class="p">(</span><span class="o">*</span><span class="n">cur</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">wlen</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">-</span> <span class="n">orig</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">wlen</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">cur</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">L&#39;\n&#39;</span><span class="p">))</span>
        <span class="n">width_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">width_max</span><span class="p">)</span> <span class="o">?</span> <span class="n">width</span> <span class="o">:</span> <span class="n">width_max</span><span class="p">;</span>

    <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">cur</span> <span class="o">=</span> <span class="n">orig</span><span class="p">;</span> <span class="n">cur</span> <span class="o">-</span> <span class="n">orig</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">wlen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="n">cur</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">cur</span> <span class="o">==</span> <span class="sc">L&#39;\n&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="o">*</span><span class="n">cur</span> <span class="o">==</span> <span class="sc">L&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">size_t</span> <span class="n">remain_width</span> <span class="o">=</span> <span class="n">width_max</span> <span class="o">-</span> <span class="n">width</span><span class="p">;</span>
            <span class="n">size_t</span> <span class="n">pad_width</span> <span class="o">=</span> <span class="n">mk_wcwidth_cjk</span><span class="p">(</span><span class="n">pad</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">remain_width</span> <span class="o">/</span> <span class="n">pad_width</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="n">wstr_push</span><span class="p">(</span><span class="n">wstr</span><span class="p">,</span> <span class="n">pad</span><span class="p">);</span>
            <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">w</span> <span class="o">=</span> <span class="n">mk_wcwidth_cjk</span><span class="p">(</span><span class="o">*</span><span class="n">cur</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">w</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">width</span> <span class="o">+=</span> <span class="n">w</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">wstr_push</span><span class="p">(</span><span class="n">wstr</span><span class="p">,</span> <span class="o">*</span><span class="n">cur</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">wstr_fit</span><span class="p">(</span><span class="n">wstr</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">((</span><span class="n">ret</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">wstr</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">))</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="s">&quot;calloc&quot;</span><span class="p">);</span>
    <span class="n">wmemcpy</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">wstr</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span> <span class="n">wstr</span><span class="o">-&gt;</span><span class="n">size</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">wchar_t</span><span class="p">));</span>
    <span class="n">wstr_free</span><span class="p">(</span><span class="n">wstr</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">test_wstrpad</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">test</span><span class="p">,</span> <span class="n">wchar_t</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="n">wchar_t</span> <span class="n">pad</span><span class="p">,</span> <span class="n">wchar_t</span> <span class="o">*</span><span class="n">compare</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">wchar_t</span> <span class="o">*</span><span class="n">padded</span> <span class="o">=</span> <span class="n">wstrpad</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">pad</span><span class="p">);</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">wcscmp</span><span class="p">(</span><span class="n">padded</span><span class="p">,</span> <span class="n">compare</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;Succeeded&quot;</span> <span class="o">:</span> <span class="s">&quot;Failed&quot;</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s =&gt; %s.</span><span class="se">\n</span><span class="s">[%ls]</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">padded</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">padded</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">setlocale</span><span class="p">(</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="s">&quot;setlocale&quot;</span><span class="p">);</span>

    <span class="n">test_wstrpad</span><span class="p">(</span><span class="s">&quot;Test case #1&quot;</span><span class="p">,</span>
                 <span class="s">L&quot;foo</span><span class="se">\n</span><span class="s">bar baz</span><span class="se">\n\n</span><span class="s">hoge</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="sc">L&#39;*&#39;</span><span class="p">,</span>
                 <span class="s">L&quot;foo****</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;bar baz</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;*******</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;hoge***</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

    <span class="n">test_wstrpad</span><span class="p">(</span><span class="s">&quot;Test case #2&quot;</span><span class="p">,</span>
                 <span class="s">L&quot;</span><span class="se">\n</span><span class="s">hoge</span><span class="se">\n</span><span class="s">foo bar baz&quot;</span><span class="p">,</span> <span class="sc">L&#39;^&#39;</span><span class="p">,</span>
                 <span class="s">L&quot;^^^^^^^^^^^</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;hoge^^^^^^^</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;foo bar baz&quot;</span><span class="p">);</span>

    <span class="n">test_wstrpad</span><span class="p">(</span><span class="s">&quot;Test case #3&quot;</span><span class="p">,</span>
                 <span class="s">L&quot;○○○○</span><span class="se">\n</span><span class="s">○○○○○○○</span><span class="se">\n\n</span><span class="s">○○○○○</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="sc">L&#39;☆&#39;</span><span class="p">,</span>
                 <span class="s">L&quot;○○○○☆☆☆</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;○○○○○○○</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;☆☆☆☆☆☆☆</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;○○○○○☆☆</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

    <span class="n">test_wstrpad</span><span class="p">(</span><span class="s">&quot;Test case #4&quot;</span><span class="p">,</span>
                 <span class="s">L&quot;○○○○</span><span class="se">\n</span><span class="s">○○○○○○○</span><span class="se">\n\n</span><span class="s">○○○○○</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="sc">L&#39;*&#39;</span><span class="p">,</span>
                 <span class="s">L&quot;○○○○******</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;○○○○○○○</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;**************</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;○○○○○****</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

    <span class="n">test_wstrpad</span><span class="p">(</span><span class="s">&quot;Test case #5&quot;</span><span class="p">,</span>
                 <span class="s">L&quot;foo</span><span class="se">\n</span><span class="s">bar baz</span><span class="se">\n\n</span><span class="s">hoge&quot;</span><span class="p">,</span> <span class="sc">L&#39;■&#39;</span><span class="p">,</span>
                 <span class="s">L&quot;foo■■</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;bar baz</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;■■■</span><span class="se">\n</span><span class="s">&quot;</span>
                 <span class="s">L&quot;hoge■&quot;</span><span class="p">);</span>

    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_SUCCESS</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8247/addtag/" class="addtag" id="addtag_8247">タグ</a>:
	
	タグなし
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/c/">
		C
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8247/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8247/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8247"
  >-</span><span
  class="button yellow"
  id="rating_z_8247"
  >0</span><span 
  class="button green"
  id="rating_p_8247"
  >+</span></span></span>
  

<p>

  
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8225/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoparent.png" alt="parent"></a>
    <a href="/web/20090103091741/http://ja.doukaku.org/comment/8247/root/"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/gotoroot.png" alt="thread root"></a>
  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8247/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8250">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/926/" target="_top">nobusuke_neko</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#anomark" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/anomark.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8250/">#8250</a>(<script language="JavaScript">print_time(new Date("2008/12/22 20:30 GMT"));</script><noscript>2008/12/22 20:30 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/javascript/">
	  JavaScript
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  C:\temp&gt;cscript&nbsp;/nologo&nbsp;textJustify.js<br/>○○○○☆☆☆<br/>○○○○○○○<br/>☆☆☆☆☆☆☆<br/>○○○○○☆☆
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></td><td class="code"><div class="highlight"><pre><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">each</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nx">iterator</span><span class="p">){</span>
  <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span> <span class="nx">length</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">iterator</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">,</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
<span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="k">function</span><span class="p">(){</span>
  <span class="k">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span>
  <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">128</span><span class="p">)</span> <span class="nx">result</span><span class="o">++;</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[｡-ﾟ]/</span><span class="p">))</span> <span class="nx">result</span><span class="o">--;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">result</span><span class="o">;</span>
<span class="p">}</span>
<span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">times</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nx">count</span><span class="p">){</span>
  <span class="k">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">;</span>
  <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">count</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">result</span> <span class="o">+=</span> <span class="k">this</span><span class="o">;</span>
  <span class="k">return</span> <span class="nx">result</span><span class="o">;</span>
<span class="p">}</span>
<span class="c">//----------------------------</span>
<span class="k">function</span> <span class="nx">textJustify</span><span class="p">(</span><span class="nx">text</span><span class="o">,</span><span class="nx">padding</span><span class="p">){</span>
  <span class="k">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
  <span class="k">var</span> <span class="nx">last</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
  <span class="k">var</span> <span class="nx">maxLength</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="nx">result</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
    <span class="nx">maxLength</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">width</span><span class="p">()</span><span class="o">&gt;</span><span class="nx">maxLength</span><span class="o">?</span> <span class="nx">v</span><span class="p">.</span><span class="nx">width</span><span class="p">()</span><span class="o">:</span> <span class="nx">maxLength</span><span class="o">;</span>
  <span class="p">});</span>
  <span class="nx">result</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nx">v</span><span class="o">,</span><span class="nx">i</span><span class="p">){</span>
    <span class="k">if</span><span class="p">((</span><span class="nx">i</span><span class="o">!=</span><span class="nx">last</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">v</span><span class="o">!=</span><span class="s2">&quot;&quot;</span><span class="p">)){</span>
      <span class="k">var</span> <span class="nx">restLength</span> <span class="o">=</span> <span class="p">(</span><span class="nx">maxLength</span> <span class="o">-</span> <span class="nx">v</span><span class="p">.</span><span class="nx">width</span><span class="p">())</span> <span class="o">/</span> <span class="nx">padding</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
      <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">+</span> <span class="nx">padding</span><span class="p">.</span><span class="nx">times</span><span class="p">(</span><span class="nx">restLength</span><span class="o">|</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="c">//----------------------------</span>
<span class="c">//test</span>
<span class="nx">WScript</span><span class="p">.</span><span class="nx">Echo</span><span class="p">(</span><span class="nx">textJustify</span><span class="p">(</span><span class="s2">&quot;○○○○\n○○○○○○○\n\n○○○○○\n&quot;</span><span class="o">,</span><span class="s2">&quot;☆&quot;</span><span class="p">));</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8250/addtag/" class="addtag" id="addtag_8250">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/WSH/">WSH</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/javascript/">
		JavaScript
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8250/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8250/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8250"
  >-</span><span
  class="button yellow"
  id="rating_z_8250"
  >0</span><span 
  class="button green"
  id="rating_p_8250"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8250/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8251">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/581/" target="_top">割と普通</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_bronze.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8251/">#8251</a>(<script language="JavaScript">print_time(new Date("2008/12/23 05:47 GMT"));</script><noscript>2008/12/23 05:47 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/csharp/">
	  C#
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  <pre class='compact'>LINQを使って処理を行いました。
変数の数を減らすことに留意しました。
これ以上変数を減らすとパフォーマンス落ちそうなので、この程度で。</pre>
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><div class="highlight"><pre>    <span class="k">class</span> <span class="nc">MyMain</span>
    <span class="k">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">TextRegex</span><span class="p">.</span><span class="n">action</span><span class="p">(</span><span class="s">&quot;○○○○\n○○○○○○○\n\n○○○○○\n&quot;</span><span class="p">,</span> <span class="sc">&#39;☆&#39;</span><span class="p">));</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>
        <span class="k">}</span>
    <span class="k">}</span>

    <span class="k">class</span> <span class="nc">TextRegex</span>
    <span class="k">{</span>
        <span class="k">static</span> <span class="k">public</span> <span class="kt">string</span> <span class="nf">action</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
        <span class="k">{</span>
            <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">lineList</span> <span class="p">=</span> <span class="n">str</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="k">{</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">,</span> <span class="s">&quot;\n&quot;</span> <span class="k">}</span><span class="p">,</span> <span class="n">StringSplitOptions</span><span class="p">.</span><span class="n">RemoveEmptyEntries</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
            <span class="kt">int</span> <span class="n">maxLen</span> <span class="p">=</span> <span class="n">lineList</span><span class="p">.</span><span class="n">Max</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
            <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span><span class="p">(</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">,</span>  <span class="n">lineList</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">PadRight</span><span class="p">(</span><span class="n">maxLen</span><span class="p">,</span> <span class="n">c</span><span class="p">)).</span><span class="n">ToArray</span><span class="p">()</span> <span class="p">);</span>
        <span class="k">}</span>
    <span class="k">}</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8251/addtag/" class="addtag" id="addtag_8251">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/LINQ/">LINQ</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/csharp/">
		C#
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8251/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8251/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8251"
  >-</span><span
  class="button yellow"
  id="rating_z_8251"
  >0</span><span 
  class="button green"
  id="rating_p_8251"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8251/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>

  
  




<div class="comment" id="comment8267">
  <p class="banner"><a href="/web/20090103091741/http://ja.doukaku.org/user/840/" target="_top">leque</a><a href="/web/20090103091741/http://ja.doukaku.org/qa/#medal" target="_top"><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/star_silver.png" border=0/></a>

	
	&nbsp;
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8267/">#8267</a>(<script language="JavaScript">print_time(new Date("2008/12/31 07:29 GMT"));</script><noscript>2008/12/31 07:29 GMT</noscript>)
	
	
	
	[<a href="/web/20090103091741/http://ja.doukaku.org/lang/scheme/">
	  Scheme
	</a>]
	
	
	
	&nbsp;

<span class="rating">評価<span style="background-color: #ffffff;">0/0=0.00</span></span>
  </p>
  <div class="comment_content">
	<div class="comment_body">
	  
	</div>
	
	
	
    <div class="compact">
      <table><tr><td class="linenos"><pre>1
2
3
4
5
6</pre></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="nf">use</span> <span class="nv">srfi-13</span><span class="p">)</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">padlines</span> <span class="nv">s</span> <span class="nv">ch</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">ss</span> <span class="p">(</span><span class="nf">string-split</span> <span class="nv">s</span> <span class="sc">#\newline</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">n</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">max</span> <span class="p">(</span><span class="nb">map </span><span class="nv">string-length</span> <span class="nv">ss</span><span class="p">))))</span>
    <span class="p">(</span><span class="nf">string-join</span> <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="nf">cut</span> <span class="nv">string-pad-right</span> <span class="nv">&lt;&gt;</span> <span class="nv">n</span> <span class="nv">ch</span><span class="p">)</span> <span class="nv">ss</span><span class="p">)</span> <span class="s">&quot;\n&quot;</span><span class="p">)))</span>
</pre></div>
</td></tr></table>
    </div>
	

  
  <div align = "right" class="banner">
	
	<a href="/web/20090103091741/http://ja.doukaku.org/comment/8267/addtag/" class="addtag" id="addtag_8267">タグ</a>:
	
    
    <a href="/web/20090103091741/http://ja.doukaku.org/tag/gauche/">gauche</a>
    
	&nbsp;

	
      [<a href="/web/20090103091741/http://ja.doukaku.org/lang/scheme/">
		Scheme
      </a>]
	  
      [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8267/download/">
		ダウンロード
      </a>]
	  [<a href="/web/20090103091741/http://ja.doukaku.org/comment/8267/download_html/">
		HTML
      </a>]<p>
	

  
  <span class="rating">
  評価<span style="background-color: #ffffff;"
  >0/0=0.00</span
  ><span class="buttons"><span 
  class="button red"
  id="rating_n_8267"
  >-</span><span
  class="button yellow"
  id="rating_z_8267"
  >0</span><span 
  class="button green"
  id="rating_p_8267"
  >+</span></span></span>
  

<p>

  

  

  [<a href="/web/20090103091741/http://ja.doukaku.org/222/reply_to/8267/">
  返信
  </a>]
  </div>
</div>
</div>

  
  <br/>







</div>

<div id="side_menu" class="compact">

<iframe src="/web/20090103091741if_/http://ja.doukaku.org/login_info/" frameborder=0 width=100% id="login_info">
iframe required
</iframe>

<h4 class="semi_compact">一覧</h4>

<ul>
<!--<li><a href="/web/20090103091741/http://ja.doukaku.org/user/">ユーザ</a>-->
<li><a href="/web/20090103091741/http://ja.doukaku.org/lang/">言語</a>
<li><a href="/web/20090103091741/http://ja.doukaku.org/challenge/">お題</a>
<li><a href="/web/20090103091741/http://ja.doukaku.org/topic/">トピック</a>
<li><a href="/web/20090103091741/http://ja.doukaku.org/comment/">投稿</a>
<li><a href="/web/20090103091741/http://ja.doukaku.org/good_comments/">評価の高い投稿</a>
<li><a href="/web/20090103091741/http://ja.doukaku.org/tag/">タグ</a>
</ul>

<h4 class="compact">フィード</h4>
<ul>
<li><a href="/web/20090103091741/http://ja.doukaku.org/feeds/challenges/">最新のお題</a><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20090103091741/http://ja.doukaku.org/feeds/topics/">最新のトピック</a><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/feed_icon.png">
<li><a href="/web/20090103091741/http://ja.doukaku.org/feeds/comments/">新着投稿</a><img src="/web/20090103091741im_/http://ja.doukaku.org/static/image/feed_icon.png">
</ul>







<h4 class="compact">その他</h4>
<ul>
<li><a href="/web/20090103091741/http://ja.doukaku.org/qa/">Q&A</a>
<li><a href="/web/20090103091741/http://ja.doukaku.org/feedback/">フィードバック</a>
<!--<li><a href="/web/20090103091741/http://ja.doukaku.org/terms">用語集</a>-->
</ul>


<h4 class="compact">リンク</h4>
<ul>
<li><a href="/web/20090103091741/http://www.lingr.com/room/doukaku_ja">チャットルーム(Lingr)</a>
<li><a href="/web/20090103091741/http://labs.cybozu.co.jp/">サイボウズ・ラボ</a>
<li><a href="/web/20090103091741/http://www.djangoproject.com/">Django</a>
</ul>

<h4 id="pathtraq" class="compact"><a href="/web/20090103091741/http://pathtraq.com/analytics?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&m=popular">Pathtraq</a></h4>
<div class="indent">
<span id="pathtraq_sentinel">loading...</span>
</div>


</div>
</div>


<div id="page_foot" class="bordered">

<a rel="license" href="/web/20090103091741/http://creativecommons.org/licenses/by/2.1/jp/">
<img alt="Creative Commons License" style="border-width:0" src="/web/20090103091741im_/http://i.creativecommons.org/l/by/2.1/jp/88x31.png" /></a>
このサイトの内容は、
<a rel="license" href="/web/20090103091741/http://creativecommons.org/licenses/by/2.1/jp/">クリエイティブ・コモンズ・ライセンス</a>の下でライセンスされています。
<a href="/web/20090103091741/http://ja.doukaku.org/qa/#licence">[詳細]</a>

</div>

</body>




<script type="text/javascript">
$(document).ready(function(){$("#doukaku_org").after("<script src='/web/20090103091741/http://api.pathtraq.com/pages?url=http%3A%2F%2Fja.doukaku.org%2Fcomment%2F*%2F%20desc%3A%E3%81%A9%E3%81%86%E6%9B%B8%E3%81%8Forg&api=json&callback=addPathtraq'><" + "/script>")});
</script>

<script src="/web/20090103091741js_/http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2136157-1";
urchinTracker();
</script>




</html>





<!--
     FILE ARCHIVED ON 9:17:41 Jan 3, 2009 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 12:51:53 Nov 16, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
